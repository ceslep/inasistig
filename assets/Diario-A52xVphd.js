import{p as Hr,a as yr,$ as at,o as kr,l as V,u as e,q as Ce,j as v,b as Tr,i as Er,d as K,e as y,g as Gr,n as _,m as o,c as ot,f as Rr,A as Q,F as oe,v as r,k as S,s as l,t as F,x as p,y as C,r as de,h as W,R as er,O as it,N as De,Q as Vr,B as lt,Z as st,M as ae,Y as nt,_ as dt,H as Be,P as Se,D as Wr,T as ct,C as vt,z as gt,U as pt}from"./svelte-CFZEjrxY.js";import{S as cr}from"./ui-CHfsb5jC.js";import{k as ut,L as qr,a as Jr,b as Ur,c as Yr,l as Kr,m as Ir,n as ft,o as zr,q as bt}from"./Loader-DZc-WlDL.js";import{t as Nr,e as ht}from"./index-V3ObqOX8.js";import{_ as Pr}from"./pdf-CBBHH09D.js";var mt=S('<div class="flex items-center justify-center py-12"><!></div>'),xt=Be('<svg class="w-3 h-3 text-white" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),_t=S('<div class="relative group flex flex-col p-0 rounded-2xl border transition-all duration-200 shadow-sm hover:shadow-md"><div class="flex flex-col p-4 gap-3"><div class="flex items-start justify-between gap-2"><div class="flex items-center gap-2"><label class="flex-shrink-0 cursor-pointer"><input type="checkbox" class="hidden"/> <div class="w-5 h-5 rounded border flex items-center justify-center transition-colors"><!></div></label> <span class="font-bold text-sm leading-tight"> </span></div> <div class="flex gap-1.5 flex-shrink-0"><span class="text-[10px] font-bold px-1.5 py-0.5 rounded bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 opacity-60"> </span> <span class="text-[10px] font-bold px-1.5 py-0.5 rounded bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 opacity-60"> </span></div></div> <textarea rows="4" class="w-full bg-transparent border-none focus:ring-0 text-sm font-medium leading-relaxed resize-none p-0 transition-colors opacity-80" placeholder="Escriba aquí..."></textarea></div></div>'),yt=S('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>'),kt=S('<div class="space-y-4"><button type="button" class="flex items-center gap-3 w-full text-left cursor-pointer group focus:outline-none"><h3 class="text-xs font-black uppercase tracking-widest px-3 py-1 rounded-full text-white flex-shrink-0 transition-all duration-300 group-hover:shadow-md"> </h3> <div class="h-px flex-1 transition-all duration-300 group-hover:opacity-50"></div> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>'),wt=S('<div class="space-y-8"><!></div>');function $t(rr,ce){Hr(ce,!1);const A=_();let Z=yr(ce,"selectedDiarioAnots",28,()=>[]),P=_({}),$=_({}),X=_(!1);const d=at(),m=w=>{if(e($)[w])ae($,e($)[w]=!1);else{for(const b in e($))ae($,e($)[b]=!1);ae($,e($)[w]=!0)}v($,e($))},J=w=>({Administrativo:"#6366f1",Emergencia:"#ef4444",Académico:"#f59e0b",Convivencia:"#22c55e",Infraestructura:"#0ea5e9",Salud:"#ec4899",Tecnológico:"#8b5cf6",Comunicación:"#3b82f6",Disciplinario:"#64748b",Normalidad:"#10b981"})[w]||"#6366f1",a=async()=>{v(X,!0);try{const b=(await ut()).situaciones||{},z={},q={};Object.entries(b).forEach(([L,s])=>{s.length>0&&(q[L]=!1,z[L]=s.map(u=>({id:u.id,text:u.descripcion,selected:!1,originalTitulo:u.titulo,categoria:u.categoria,impacto:u.impacto,tiempo_estimado:u.tiempo_estimado})))}),v(P,z),v($,q)}catch(w){console.error("Error cargando opciones de diario:",w)}finally{v(X,!1)}};kr(()=>{a()}),V(()=>(e(P),Ce(Z())),()=>{const w=Object.values(e(P)).flat().filter(b=>b.selected&&b.text.trim()!=="").map(b=>`[${b.categoria}] ${b.originalTitulo}: ${b.text}`);JSON.stringify(w)!==JSON.stringify(Z())&&(Z(w),d("change",Z()))}),V(()=>{},()=>{v(A,{text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",inputBg:"rgb(var(--bg-secondary))"})}),Tr(),Er();var Me=wt(),Ne=o(Me);{var U=w=>{var b=mt(),z=o(b);qr(z,{message:"Cargando opciones de diario..."}),y(w,b)},ee=w=>{var b=ot(),z=Rr(b);Q(z,1,()=>(e(P),r(()=>Object.entries(e(P)))),oe,(q,L)=>{var s=nt(()=>dt(e(L),2));let u=()=>e(s)[0],H=()=>e(s)[1];const R=er(()=>(u(),r(()=>J(u()))));var Pe=kt(),Ae=o(Pe),O=o(Ae),n=o(O),B=l(O,2),tr=l(B,2);let ie;var Re=l(Ae,2);{var je=Fe=>{var ze=yt();Q(ze,5,H,ve=>ve.id,(ve,M,Ve)=>{var le=_t(),ge=o(le),fe=o(ge),Ie=o(fe),be=o(Ie),he=o(be),me=l(he,2),pe=o(me);{var He=re=>{var qe=xt();y(re,qe)};K(pe,re=>{e(M),r(()=>e(M).selected)&&re(He)})}var xe=l(be,2),_e=o(xe),ye=l(Ie,2),ue=o(ye),ar=o(ue),We=l(ue,2),ke=o(We),Te=l(fe,2);F(()=>{p(le,`
                  background-color: ${e(M),Ce(e(R)),e(A),r(()=>e(M).selected?`${e(R)}10`:e(A).inputBg)??""};
                  border-color: ${e(M),Ce(e(R)),e(A),r(()=>e(M).selected?e(R):e(A).border)??""};
                `),p(me,`
                            border-color: ${e(M),Ce(e(R)),e(A),r(()=>e(M).selected?e(R):e(A).border)??""};
                            background-color: ${e(M),Ce(e(R)),r(()=>e(M).selected?e(R):"transparent")??""};
                          `),p(xe,`color: ${e(A),r(()=>e(A).text)??""};`),C(_e,(e(M),r(()=>e(M).originalTitulo))),p(ue,`color: ${e(A),r(()=>e(A).text)??""};`),C(ar,`IMP: ${e(M),r(()=>e(M).impacto)??""}`),p(We,`color: ${e(A),r(()=>e(A).text)??""};`),C(ke,`${e(M),r(()=>e(M).tiempo_estimado)??""} MIN`),p(Te,`color: ${e(A),r(()=>e(A).text)??""};`)}),it(he,()=>e(M).selected,re=>(e(M).selected=re,De(()=>(H(),e(P))))),W("change",he,()=>{v(P,e(P))}),Vr(Te,()=>e(M).text,re=>(e(M).text=re,De(()=>(H(),e(P))))),W("input",Te,()=>{v(P,e(P))}),y(ve,le)}),lt(3,ze,()=>st),y(Fe,ze)};K(Re,Fe=>{e($),u(),r(()=>e($)[u()])&&Fe(je)})}F(()=>{p(O,`background-color: ${e(R)??""};`),C(n,u()),p(B,`background-color: ${e(R)??""}; opacity: 0.2;`),ie=de(tr,0,"w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0",null,ie,{"rotate-180":e($)[u()]})}),W("click",Ae,()=>m(u())),y(q,Pe)}),y(w,b)};K(Ne,w=>{e(X)?w(U):w(ee,!1)})}y(rr,Me),Gr()}var Dt=S("<option> </option>"),Ct=S("<option> </option>"),St=S("<option> </option>"),Bt=Be('<svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Cargando...',1),Mt=Be('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> Aplicar Filtros',1),At=S('<div class="text-sm opacity-75"> </div>'),jt=S('<div class="flex items-center justify-center py-12"><!></div>'),Ft=S('<div class="text-center py-12"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-lg font-medium mb-2">No hay datos disponibles</p> <p class="text-sm"> </p></div>'),zt=S('<tr class="border-t transition-colors hover:bg-gray-50 dark:hover:bg-gray-800"><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"><div class="truncate"> </div></td></tr>'),It=S('<tr class="border-t-2 font-bold bg-gray-100 dark:bg-gray-800"><td class="px-4 py-3 text-sm font-bold">TOTAL</td><td class="px-4 py-3 text-sm font-bold text-center"> </td><td class="px-4 py-3 text-sm"></td><td class="px-4 py-3 text-sm"></td><td class="px-4 py-3 text-sm font-bold text-center"> </td></tr>'),Ht=S('<div class="overflow-x-auto rounded-lg border"><table class="w-full"><thead><tr><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Fecha</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Horas</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Asignatura</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Grado</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Diario de Campo</th></tr></thead><tbody><!><!></tbody></table></div>'),Tt=S('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-2xl" role="document"><div class="flex items-center justify-between p-6 border-b"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h2 id="modal-title" class="text-xl font-bold">Generador de Reportes PDF</h2> <p class="text-sm opacity-75">Filtre y genere reportes del Diario de Campo</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar ventana"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 140px);"><div class="mb-6 p-4 rounded-xl border"><h3 class="text-lg font-semibold mb-4">Filtros</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="space-y-2"><label for="docente-filter" class="block text-sm font-medium">Docente</label> <select id="docente-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los docentes</option><!></select></div> <div class="space-y-2"><label for="materia-filter" class="block text-sm font-medium">Asignatura</label> <select id="materia-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todas las asignaturas</option><!></select></div> <div class="space-y-2"><label for="grado-filter" class="block text-sm font-medium">Grado</label> <select id="grado-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los grados</option><!></select></div></div> <div class="flex gap-3 mt-4"><button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2"><!></button> <button class="px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> Limpiar</button> <button class="ml-auto px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Generar PDF</button></div></div> <div class="mb-4"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold"> </h3> <!></div></div> <!></div></div></div>');function Et(rr,ce){Hr(ce,!1);const A=_(),Z=_(),P=_(),$=_(),X=_(),d=_();let m=null,J=null,a=yr(ce,"onClose",8),Me=yr(ce,"initialDocente",8,""),Ne=_([]),U=_([]),ee=_([]),w=[],b=_([]),z=_(!1);const q=async()=>{if(!m||!J){const[t,c]=await Promise.all([Pr(()=>import("./pdf-CBBHH09D.js").then(f=>f.j),[]),Pr(()=>import("./pdf-CBBHH09D.js").then(f=>f.b),[])]);m=t.default,J=c.default}};let L=_(JSON.parse(localStorage.getItem("docenteMateriasDiario")||"{}")),s=_(""),u=_(""),H=_("");const R=t=>{const c=t.match(/-(\d+)$/);return c?c[1]:null};kr(()=>{Me()&&v(s,Me())}),kr(async()=>{await Pe()});const Pe=async()=>{try{const[t,c,f]=await Promise.all([Jr(),Ur(),Yr()]);v(Ne,t),v(U,c),v(ee,f),v(L,JSON.parse(localStorage.getItem("docenteMateriasDiario")||"{}"))}catch(t){console.error("Error cargando datos iniciales:",t)}},Ae=async()=>{v(z,!0);try{const t={spreadsheetId:Ir,worksheetTitle:Kr};e(s)&&(t.docente=e(s)),e(u)&&(t.materia=e(u)),e(H)&&(t.grado=e(H));const c=await ft(t);let f=c;if(c&&typeof c=="object"&&(c.data?f=c.data:c.records?f=c.records:Array.isArray(c)&&(f=c)),w=Array.isArray(f)?f:[],w.length>0&&w[0].values){const x=["Marca Temporal","Fecha","Horas","Docente","Asignatura","Grado","Diario de Campo"];w=w.map(N=>{const Y={"Marca Temporal":"",Fecha:"",Horas:"",Docente:"",Asignatura:"",Grado:"","Diario de Campo":""};return x.forEach((T,Ke)=>{Y[T]=N.values?.[Ke]||""}),Y})}O()}catch(t){console.error("Error cargando datos del diario:",t),w=[],v(b,[])}finally{v(z,!1)}},O=()=>{if(!Array.isArray(w)){v(b,[]);return}v(b,w.filter(t=>{if(!t||typeof t!="object")return!1;const c=!e(s)||t.Docente===e(s),f=!e(u)||t.Asignatura===e(u),x=!e(H)||t.Grado===e(H);return c&&f&&x}))},n=()=>{Ae()},B=()=>{v(s,""),v(u,""),v(H,""),w=[],v(b,[])},tr=async()=>{if(await q(),e(b).length===0){alert("No hay datos para generar el PDF");return}const t=new m({format:"letter"}),c="Diario de Campo",f=[];e(s)&&f.push(`Docente: ${e(s)}`),e(u)&&f.push(`Asignatura: ${e(u)}`),e(H)&&f.push(`Grado: ${e(H)}`);let x=20;t.setTextColor(99,102,241),t.setFontSize(28),t.setFont("helvetica","bold"),t.text("EIE",t.internal.pageSize.getWidth()/2,x,{align:"center"}),x+=15,t.setTextColor(0,0,0),t.setFontSize(18),t.setFont("helvetica","bold"),t.text(c,t.internal.pageSize.getWidth()/2,x,{align:"center"}),x+=12,t.setTextColor(0,0,0),t.setFontSize(12),t.setFont("helvetica","normal"),t.text("Institución Educativa Instituto Guática",t.internal.pageSize.getWidth()/2,x,{align:"center"}),x+=10,t.setTextColor(60,60,60),t.setFontSize(10),t.setFont("helvetica","normal"),t.text(`Fecha de generación: ${new Date().toLocaleDateString()}`,t.internal.pageSize.getWidth()/2,x,{align:"center"}),x+=15,t.setDrawColor(200,200,200),t.setLineWidth(1),t.line(20,x,t.internal.pageSize.getWidth()-20,x),x+=15,f.length>0&&(t.setTextColor(80,80,80),t.setFontSize(9),t.setFont("helvetica","normal"),f.forEach(T=>{t.text(T,20,x,{align:"left"}),x+=6}),x+=10);const N=e(b).map(T=>[T.Fecha||"",T.Horas||"",T.Asignatura||"",T.Grado||"",T["Diario de Campo"]||""]);N.push(["TOTAL",e($).toFixed(1),"","",`${e(b).length} registros`]),J(t,{head:[["Fecha","Horas","Asignatura","Grado","Diario de Campo"]],body:N,startY:x,styles:{fontSize:8,cellPadding:2,cellWidth:"wrap",valign:"top",overflow:"linebreak"},headStyles:{fillColor:[99,102,241],textColor:255,fontSize:9,fontStyle:"bold",halign:"center"},bodyStyles:{fillColor:[255,255,255],textColor:[0,0,0]},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:{0:{cellWidth:25,minCellHeight:8,halign:"center"},1:{cellWidth:15,minCellHeight:8,halign:"center"},2:{cellWidth:35,minCellHeight:8},3:{cellWidth:20,minCellHeight:8,halign:"center"},4:{cellWidth:"auto",minCellHeight:12}},margin:{top:15,right:15,bottom:15,left:15},tableWidth:"auto",didParseCell:T=>{T.row.index===N.length-1&&(T.cell.styles.fillColor=[240,240,240],T.cell.styles.fontStyle="bold",T.cell.styles.textColor=[0,0,0])}});const Y=`reporte_diario_${e(s)||"todos"}_${e(u)||"todas"}_${e(H)||"todos"}_${new Date().toISOString().split("T")[0]}.pdf`;t.save(Y)};V(()=>e(s),()=>{v(A,e(s).includes("-"))}),V(()=>e(s),()=>{v(Z,R(e(s)))}),V(()=>(e(Z),e(ee)),()=>{v(P,e(Z)?[...new Set(e(ee).map(t=>t.grado.toString()))].filter(t=>t.startsWith(`${e(Z)}-`)):[...new Set(e(ee).map(t=>t.grado.toString()))].filter(t=>!t.includes("-")))}),V(()=>e(b),()=>{v($,e(b).reduce((t,c)=>{const f=parseFloat(c.Horas||"0");return t+(isNaN(f)?0:f)},0))}),V(()=>(e(s),e(U),e(L)),()=>{v(X,e(s)?[...e(U)].sort((t,c)=>{const f=e(L)[e(s)]?.includes(t.materia),x=e(L)[e(s)]?.includes(c.materia);return f&&!x?-1:!f&&x?1:t.materia.localeCompare(c.materia)}):e(U))}),V(()=>{},()=>{v(d,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Tr(),Er();var ie=Tt(),Re=o(ie),je=o(Re),Fe=l(o(je),2),ze=l(je,2),ve=o(ze),M=l(o(ve),2),Ve=o(M),le=o(Ve),ge=l(le,2),fe=o(ge);fe.value=fe.__value="";var Ie=l(fe);Q(Ie,1,()=>e(Ne),oe,(t,c)=>{var f=Dt(),x=o(f),N={};F(()=>{C(x,e(c)),N!==(N=e(c))&&(f.value=(f.__value=e(c))??"")}),y(t,f)});var be=l(Ve,2),he=o(be),me=l(he,2),pe=o(me);pe.value=pe.__value="";var He=l(pe);Q(He,1,()=>e(X),oe,(t,c)=>{const f=er(()=>(e(s),e(L),e(c),r(()=>e(s)&&e(L)[e(s)]?.includes(e(c).materia))));var x=Ct(),N=o(x),Y={};F(()=>{p(x,e(f)?"color: #6366f1; font-weight: 600;":""),C(N,`${e(f)?"⭐ ":""}${e(c),r(()=>e(c).materia)??""}`),Y!==(Y=(e(c),r(()=>e(c).materia)))&&(x.value=(x.__value=(e(c),r(()=>e(c).materia)))??"")}),y(t,x)});var xe=l(be,2),_e=o(xe),ye=l(_e,2),ue=o(ye);ue.value=ue.__value="";var ar=l(ue);Q(ar,1,()=>e(P),oe,(t,c)=>{var f=St(),x=o(f),N={};F(Y=>{C(x,Y),N!==(N=e(c))&&(f.value=(f.__value=e(c))??"")},[()=>(e(c),r(()=>e(c).replace(/0(\d)$/,"°$1").replace(/(\d{1,2})0(\d)/,"$1°$2")))]),y(t,f)});var We=l(M,2),ke=o(We),Te=o(ke);{var re=t=>{var c=Bt();y(t,c)},qe=t=>{var c=Mt();y(t,c)};K(Te,t=>{e(z)?t(re):t(qe,!1)})}var Je=l(ke,2),vr=l(Je,2),or=l(ve,2),gr=o(or),ir=o(gr),pr=o(ir),lr=l(ir,2);{var wr=t=>{var c=At(),f=o(c);F(()=>C(f,`${(e(s)&&`Docente: ${e(s)}`)??""}
              ${(e(u)&&` | Asignatura: ${e(u)}`)??""}
              ${(e(H)&&` | Grado: ${e(H)}`)??""}`)),y(t,c)};K(lr,t=>{e(b),r(()=>e(b).length>0)&&t(wr)})}var ur=l(or,2);{var Ue=t=>{var c=jt(),f=o(c);qr(f,{message:"Cargando datos del diario..."}),y(t,c)},Ye=t=>{var c=Ft(),f=l(o(c),4),x=o(f);F(()=>{p(c,`color: ${e(d),r(()=>e(d).placeholder)??""};`),C(x,e(s)||e(u)||e(H)?"No se encontraron registros con los filtros seleccionados.":"Seleccione filtros y haga clic en 'Aplicar Filtros'.")}),y(t,c)},$r=t=>{var c=Ht(),f=o(c),x=o(f),N=o(x),Y=o(N),T=l(Y),Ke=l(T),fr=l(Ke),br=l(fr),Qe=l(x),Ee=o(Qe);Q(Ee,1,()=>e(b),oe,(we,E)=>{var te=zt(),$e=o(te),Ge=o($e),Ze=l($e),Xe=o(Ze),hr=l(Ze),Sr=o(hr),sr=l(hr),Br=o(sr),Mr=l(sr),mr=o(Mr),Ar=o(mr);F(()=>{p(te,`border-color: ${e(d),r(()=>e(d).border)??""};`),C(Ge,(e(E),r(()=>e(E).Fecha||"-"))),C(Xe,(e(E),r(()=>e(E).Horas||"-"))),C(Sr,(e(E),r(()=>e(E).Asignatura||"-"))),C(Br,(e(E),r(()=>e(E).Grado||"-"))),Wr(mr,"title",(e(E),r(()=>e(E)["Diario de Campo"]))),C(Ar,(e(E),r(()=>e(E)["Diario de Campo"]||"-")))}),y(we,te)});var Dr=l(Ee);{var Cr=we=>{var E=It(),te=l(o(E)),$e=o(te),Ge=l(te,3),Ze=o(Ge);F(Xe=>{p(E,`border-color: ${e(d),r(()=>e(d).border)??""}; border-top-width: 2px;`),C($e,Xe),C(Ze,`${e(b),r(()=>e(b).length)??""} registros`)},[()=>(e($),r(()=>e($).toFixed(1)))]),y(we,E)};K(Dr,we=>{e(b),r(()=>e(b).length>0)&&we(Cr)})}F(()=>{p(c,`border-color: ${e(d),r(()=>e(d).border)??""};`),p(x,`background-color: ${e(d),r(()=>e(d).inputBg)??""};`),p(Y,`color: ${e(d),r(()=>e(d).label)??""};`),p(T,`color: ${e(d),r(()=>e(d).label)??""};`),p(Ke,`color: ${e(d),r(()=>e(d).label)??""};`),p(fr,`color: ${e(d),r(()=>e(d).label)??""};`),p(br,`color: ${e(d),r(()=>e(d).label)??""};`)}),y(t,c)};K(ur,t=>{e(z)?t(Ue):(e(b),r(()=>e(b).length===0)?t(Ye,1):t($r,!1))})}F(()=>{p(Re,`background-color: ${e(d),r(()=>e(d).cardBg)??""}; color: ${e(d),r(()=>e(d).text)??""};`),p(je,`border-color: ${e(d),r(()=>e(d).cardBorder)??""};`),p(ve,`background-color: ${e(d),r(()=>e(d).inputBg)??""}; border-color: ${e(d),r(()=>e(d).border)??""};`),p(le,`color: ${e(d),r(()=>e(d).label)??""};`),p(ge,`background-color: ${e(d),r(()=>e(d).cardBg)??""}; border-color: ${e(d),r(()=>e(d).border)??""}; color: ${e(d),r(()=>e(d).text)??""};`),p(he,`color: ${e(d),r(()=>e(d).label)??""};`),p(me,`background-color: ${e(d),r(()=>e(d).cardBg)??""}; border-color: ${e(d),r(()=>e(d).border)??""}; color: ${e(d),r(()=>e(d).text)??""};`),p(_e,`color: ${e(d),r(()=>e(d).label)??""};`),p(ye,`background-color: ${e(d),r(()=>e(d).cardBg)??""}; border-color: ${e(d),r(()=>e(d).border)??""}; color: ${e(d),r(()=>e(d).text)??""};`),ke.disabled=e(z),p(Je,`color: ${e(d),r(()=>e(d).text)??""};`),vr.disabled=(e(b),r(()=>e(b).length===0)),C(pr,`Resultados (${e(b),r(()=>e(b).length)??""} registros)`)}),W("click",Fe,function(...t){a()?.apply(this,t)}),Se(ge,()=>e(s),t=>v(s,t)),Se(me,()=>e(u),t=>v(u,t)),Se(ye,()=>e(H),t=>v(H,t)),W("click",ke,n),W("click",Je,B),W("click",vr,tr),W("click",ie,ct(function(...t){a()?.apply(this,t)})),W("keydown",ie,t=>t.key==="Escape"&&a()()),y(rr,ie),Gr()}var Gt=Be('<svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>'),Lt=Be('<svg class="w-5 h-5 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>'),Ot=Be('<svg class="w-5 h-5 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>'),Nt=S('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-qemcko"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <div class="flex-1 pr-6 pt-0.5"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100">Información</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors" aria-label="Cerrar alerta"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),Pt=S("<option> </option>"),Rt=S("<option> </option>"),Vt=S("<select><option>Horas...</option><option>0</option><!></select>"),Wt=S('<div><div class="flex items-center gap-1.5"><input type="checkbox" class="w-4 h-4 lg:w-5 lg:h-5 rounded text-indigo-500 focus:ring-indigo-500" style="accent-color: #6366f1;"/> <span class="text-sm lg:text-sm flex-shrink-0"> </span></div> <!></div>'),qt=S("<div></div>"),Jt=S("<option> </option>"),Ut=S('<select id="materia" required=""><option> </option><!></select>'),Yt=S("<option> </option>"),Kt=S("<option> </option>"),Qt=Be('<svg class="animate-spin h-7 w-7 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Zt=Be('<svg class="w-8 h-8 transform rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>'),Xt=S('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8"><div class="flex items-center gap-4 lg:flex-col"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center">Diario de Campo</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Abrir hoja de cálculo"><svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Hoja de Cálculo</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Generar reportes PDF"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Reportes PDF</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Volver al Dashboard"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Dashboard</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize"> </span></button></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto pb-32"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border"><!> <form novalidate="" class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="space-y-2"><label for="fecha" class="block text-sm font-medium">Fecha</label> <input type="date" id="fecha" required=""/></div> <div class="space-y-2"><label for="docente" class="block text-sm font-medium">Docente</label> <select id="docente" required=""><option> </option><!></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center justify-between"><label for="materia" class="block text-sm font-medium">Materia</label></div> <!></div> <div class="space-y-2"><label for="grado" class="block text-sm font-medium">Grado</label> <select id="grado" required=""><option> </option><!></select></div></div> <div class="space-y-2"><label for="horas" class="block text-sm font-medium">Horas</label> <select id="horas" required=""><option>Seleccione horas</option><option>Sin hora específica</option><!></select></div> <div class="space-y-2"><!></div> <div class="fixed bottom-8 right-8 z-50"><button type="submit" class="w-16 h-16 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-400 dark:disabled:bg-slate-700 disabled:cursor-not-allowed disabled:scale-100 text-white rounded-full shadow-2xl transition-all duration-300 transform hover:scale-110 active:scale-95 backdrop-blur-sm bg-opacity-95 flex items-center justify-center overflow-hidden border border-white/20" aria-label="Guardar Diario de Campo"><!></button></div></form></div></main></div> <!>',1);function ia(rr,ce){Hr(ce,!1);const A=()=>vt(Nr,"$theme",Z),[Z,P]=gt(),$=_(),X=_(),d=_(),m=_(),J=_(),a=_(),Me=_();let Ne=yr(ce,"onBack",8),U=_([]),ee=_([]),w=_([]),b=_(!1),z=_(!1),q=_(!1),L=_(!1),s=_(!1),u=_([]);const H=i=>{const g=i.match(/-(\d+)$/);return g?g[1]:null};let R=_(!1);const Pe=()=>{v(R,!0)},Ae=()=>{v(R,!1)};let O=_([]),n=_({fecha:new Date().toLocaleDateString("en-CA"),docente:localStorage.getItem("lastDocenteDiario")||"",materia:"",grado:"",horas:""}),B=_(JSON.parse(localStorage.getItem("docenteMateriasDiario")||"{}"));const tr=(i,g)=>{!i||!g||(e(B)[i]||ae(B,e(B)[i]=[]),e(B)[i].includes(g)||(ae(B,e(B)[i]=[...e(B)[i],g]),localStorage.setItem("docenteMateriasDiario",JSON.stringify(e(B)))))};let ie=_(localStorage.getItem("dismissedInfoDiarioContent")!==zr);const Re=()=>{v(ie,!1),localStorage.setItem("dismissedInfoDiarioContent",zr)},je=()=>`https://docs.google.com/spreadsheets/d/${Ir}`,Fe=()=>{window.open(je(),"_blank")},ze=()=>{Nr.update(i=>i==="light"?"dim":i==="dim"?"dark":"light")},ve=async()=>{v(b,!0),v(z,!0),v(q,!0);try{const[i,g,h]=await Promise.all([Jr(),Ur(),Yr()]);v(U,i),v(ee,g),v(w,h)}catch(i){console.error("Error cargando datos iniciales:",i)}finally{v(b,!1),v(z,!1),v(q,!1)}},M=async i=>{if(i.preventDefault(),e(L))return;v(s,!0);const g=e(O).join(" | "),h=[];if(e(n).fecha||h.push({id:"fecha",label:"Fecha"}),e(n).docente||h.push({id:"docente",label:"Docente"}),e(n).grado||h.push({id:"grado",label:"Grado"}),e(n).horas||h.push({id:"horas",label:"Horas"}),e(O).length===0&&h.push({id:"diario",label:"Diario de Campo"}),e($))if(e(u).length===0)h.push({id:"materia",label:"Materia(s)"});else{const k=e(u).filter(I=>!I.horas);k.length>0&&h.push({id:"horas",label:`Horas para: ${k.map(I=>I.materia).join(", ")}`})}else e(n).materia||h.push({id:"materia",label:"Asignatura"});if(h.length>0){await cr.fire({icon:"warning",title:"Campos requeridos",html:`Complete los siguientes campos:<br/><br/><strong>${h.map(I=>I.label).join("<br/>")}</strong>`,confirmButtonColor:"#6366f1"});const k=document.getElementById(h[0].id);k&&(k.scrollIntoView({behavior:"smooth",block:"center"}),k.focus());return}if(e(O).length===0){await cr.fire({icon:"warning",title:"Sin diario de campo",text:"Debe seleccionar al menos una opción del diario de campo",confirmButtonColor:"#6366f1"});return}const D=e($)?e(u):[{materia:e(n).materia,horas:e(n).horas}],G=e($)?e(u).map(k=>`${k.materia} (${k.horas}h)`).join(", "):`${e(n).materia} (${e(n).horas}h)`;if((await cr.fire({title:"¿Confirmar Registro?",html:`
        <div class="text-left space-y-2 p-2 rounded-xl bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10" style="font-size: 0.9rem; line-height: 1.4;">
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Fecha:</strong> ${e(n).fecha}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Docente:</strong> ${e(n).docente}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Asignatura(s):</strong> ${G}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Grado:</strong> ${e(n).grado}</div>
          <div style="margin-top: 12px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 8px;">
            <strong style="color: #6366f1;">Diario de Campo:</strong>
            <ul style="list-style-type: disc; padding-left: 20px; margin-top: 4px; font-size: 0.8rem; opacity: 0.8;">
              ${e(O).map(k=>`<li>${k}</li>`).join("")}
            </ul>
          </div>
          ${e($)?`<div style="margin-top: 8px; font-size: 0.75rem; color: #ef4444;">Se creará un registro por cada materia seleccionada (${e(u).length} registros)</div>`:""}
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonText:"Si, de acuerdo",cancelButtonText:"No",confirmButtonColor:"#4f46e5",cancelButtonColor:"#64748b",reverseButtons:!0,background:A()==="light"?"#fff":"#1e293b",color:A()==="light"?"#1e293b":"#f1f5f9"})).isConfirmed){v(L,!0);try{const k=new Date().toLocaleString(),I=[];for(const ne of D)I.push([k,e(n).fecha,ne.horas,e(n).docente,ne.materia,e(n).grado,g]);await bt({spreadsheetId:Ir,worksheetTitle:Kr,datos:I});for(const ne of D)tr(e(n).docente,ne.materia);const se=I.length===1?"Diario de Campo registrado exitosamente":`${I.length} registros de Diario de Campo creados exitosamente`;await cr.fire({icon:"success",title:"¡Éxito!",text:se,timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),v(n,{fecha:new Date().toLocaleDateString("en-CA"),docente:e(n).docente,materia:"",grado:e(n).grado,horas:""}),v(O,[]),v(u,[]),v(s,!1)}catch(k){console.error("Error enviando:",k),await cr.fire({icon:"error",title:"Error",text:"Error al registrar el Diario de Campo",confirmButtonColor:"#ef4444"})}finally{v(L,!1)}}};kr(()=>{ve()}),V(()=>e(n),()=>{v($,e(n).docente.includes("-"))}),V(()=>e(n),()=>{v(X,H(e(n).docente))}),V(()=>(e(X),e(w)),()=>{v(d,e(X)?[...new Set(e(w).map(i=>i.grado.toString()))].filter(i=>i.startsWith(`${e(X)}-`)):[...new Set(e(w).map(i=>i.grado.toString()))].filter(i=>!i.includes("-")))}),V(()=>(e(n),e(O),e($),e(u)),()=>{v(m,(()=>{const i=[];return e(n).fecha||i.push("fecha"),e(n).docente||i.push("docente"),e(n).grado||i.push("grado"),e(n).horas||i.push("horas"),e(O).length===0&&i.push("diario"),e($)?e(u).length===0?i.push("materias"):e(u).filter(h=>!h.horas).length>0&&i.push("horas"):e(n).materia||i.push("materia"),i})())}),V(()=>e(n),()=>{e(n).docente&&localStorage.setItem("lastDocenteDiario",e(n).docente)}),V(()=>(e(n),e(ee),e(B)),()=>{v(J,e(n).docente?[...e(ee)].sort((i,g)=>{const h=e(B)[e(n).docente]?.includes(i.materia),D=e(B)[e(n).docente]?.includes(g.materia);return h&&!D?-1:!h&&D?1:i.materia.localeCompare(g.materia)}):e(ee))}),V(()=>{},()=>{v(a,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),V(()=>(e(n),e(O)),()=>{v(Me,e(n).fecha&&e(n).docente&&e(n).materia&&e(n).grado&&e(n).horas&&e(O).length>0)}),Tr(),Er();var Ve=Xt(),le=Rr(Ve),ge=o(le),fe=o(ge),Ie=o(fe),be=o(Ie),he=l(be,2),me=l(Ie,2),pe=o(me),He=l(pe,2),xe=l(He,2),_e=l(xe,2),ye=o(_e);{var ue=i=>{var g=Gt();y(i,g)},ar=i=>{var g=Lt();y(i,g)},We=i=>{var g=Ot();y(i,g)};K(ye,i=>{A()==="dark"?i(ue):A()==="light"?i(ar,1):i(We,!1)})}var ke=l(ye,2),Te=o(ke),re=l(ge,2),qe=o(re),Je=o(qe);{var vr=i=>{var g=Nt(),h=l(o(g),2),D=l(o(h),2),G=o(D),j=l(h,2);F(()=>C(G,zr)),W("click",j,Re),y(i,g)};K(Je,i=>{e(ie)&&i(vr)})}var or=l(Je,2),gr=o(or),ir=o(gr),pr=o(ir),lr=l(pr,2),wr=l(ir,2),ur=o(wr),Ue=l(ur,2),Ye=o(Ue),$r=o(Ye);Ye.value=Ye.__value="";var t=l(Ye);Q(t,1,()=>e(U),oe,(i,g)=>{var h=Pt(),D=o(h),G={};F(()=>{C(D,e(g)),G!==(G=e(g))&&(h.value=(h.__value=e(g))??"")}),y(i,h)});var c=l(gr,2),f=o(c),x=o(f),N=o(x),Y=l(x,2);{var T=i=>{var g=qt();Q(g,5,()=>e(J),oe,(h,D)=>{const G=er(()=>(e(B),e(n),e(D),r(()=>e(B)[e(n).docente]?.includes(e(D).materia)))),j=er(()=>(e(u),e(D),r(()=>e(u).findIndex(Le=>Le.materia===e(D).materia)))),k=er(()=>e(j)>=0);var I=Wt(),se=o(I),ne=o(se),nr=l(ne,2),Zr=o(nr),Xr=l(se,2);{var et=Le=>{var Oe=Vt(),jr=o(Oe);jr.value=jr.__value="";var Fr=l(jr);Fr.value=Fr.__value="0";var rt=l(Fr);Q(rt,0,()=>[1,2,3,4],oe,(dr,xr)=>{var _r=Rt(),tt=o(_r),Lr={};F(Or=>{C(tt,`${xr??""}h`),Lr!==(Lr=Or)&&(_r.value=(_r.__value=Or)??"")},[()=>r(()=>xr.toString())]),y(dr,_r)}),F((dr,xr)=>{de(Oe,1,`w-full lg:w-16 px-2 py-1.5 lg:py-1 text-sm rounded border appearance-none cursor-pointer ${dr??""}`),p(Oe,`background-color: ${e(a),r(()=>e(a).inputBg)??""}; border-color: ${xr??""}; color: ${e(a),r(()=>e(a).text)??""};`)},[()=>(e(s),e(m),e(u),Ce(e(j)),r(()=>e(s)&&e(m).includes("horas")&&!e(u)[e(j)].horas?"ring-2 ring-red-500 border-red-500":"")),()=>(e(s),e(m),e(u),Ce(e(j)),e(a),r(()=>e(s)&&e(m).includes("horas")&&!e(u)[e(j)].horas?"#ef4444":e(a).border))]),Se(Oe,()=>e(u)[e(j)].horas,dr=>(ae(u,e(u)[e(j)].horas=dr),De(()=>{e(j),e(s),e(m),e(a)}))),y(Le,Oe)};K(Xr,Le=>{e(k)&&Le(et)})}F(()=>{de(I,1,`flex flex-col lg:flex-row lg:items-center gap-1 lg:gap-2 px-2 py-2 lg:py-1.5 rounded-lg border transition-all ${e(k)?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 dark:border-indigo-500":"border-transparent"}`),p(I,`border-color: ${Ce(e(k)),e(a),r(()=>e(k)?"#6366f1":e(a).border)??""};`),pt(ne,e(k)),p(nr,`color: ${e(a),r(()=>e(a).text)??""};`),C(Zr,`${e(G)?"⭐ ":""}${e(D),r(()=>e(D).materia)??""}`)}),W("change",ne,Le=>{Le.currentTarget.checked?v(u,[...e(u),{materia:e(D).materia,horas:e(n).horas}]):v(u,e(u).filter(Oe=>Oe.materia!==e(D).materia))}),y(h,I)}),F((h,D)=>{de(g,1,`border rounded-xl p-2 lg:p-3 flex flex-col lg:flex-row lg:flex-wrap gap-2 lg:gap-2 ${h??""}`),p(g,`border-color: ${D??""}; background-color: ${e(a),r(()=>e(a).inputBg)??""};`)},[()=>(e(s),e(m),r(()=>e(s)&&e(m).includes("materias")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(s),e(m),e(a),r(()=>e(s)&&e(m).includes("materias")?"#ef4444":e(a).border))]),y(i,g)},Ke=i=>{var g=Ut(),h=o(g),D=o(h);h.value=h.__value="";var G=l(h);Q(G,1,()=>e(J),oe,(j,k)=>{const I=er(()=>(e(B),e(n),e(k),r(()=>e(B)[e(n).docente]?.includes(e(k).materia))));var se=Jt(),ne=o(se),nr={};F(()=>{p(se,e(I)?"color: #6366f1; font-weight: 600;":""),C(ne,`${e(I)?"⭐ ":""}${e(k),r(()=>e(k).materia)??""}`),nr!==(nr=(e(k),r(()=>e(k).materia)))&&(se.value=(se.__value=(e(k),r(()=>e(k).materia)))??"")}),y(j,se)}),F((j,k)=>{de(g,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${j??""}`),p(g,`background-color: ${e(a),r(()=>e(a).inputBg)??""}; border-color: ${k??""}; color: ${e(a),r(()=>e(a).text)??""};`),C(D,e(z)?"Cargando...":"Seleccione asignatura")},[()=>(e(s),e(m),r(()=>e(s)&&e(m).includes("materia")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(s),e(m),e(a),r(()=>e(s)&&e(m).includes("materia")?"#ef4444":e(a).border))]),Se(g,()=>e(n).materia,j=>(ae(n,e(n).materia=j),De(()=>{e(s),e(m),e(a),e(b),e(U),e(z),e(J),e(B),e(q),e(d)}))),y(i,g)};K(Y,i=>{e($)?i(T):i(Ke,!1)})}var fr=l(f,2),br=o(fr),Qe=l(br,2),Ee=o(Qe),Dr=o(Ee);Ee.value=Ee.__value="";var Cr=l(Ee);Q(Cr,1,()=>e(d),oe,(i,g)=>{var h=Yt(),D=o(h),G={};F(j=>{C(D,j),G!==(G=e(g))&&(h.value=(h.__value=e(g))??"")},[()=>(e(g),r(()=>e(g).replace(/0(\d)$/,"°$1").replace(/(\d{1,2})0(\d)/,"$1°$2")))]),y(i,h)});var we=l(c,2),E=o(we),te=l(E,2),$e=o(te);$e.value=$e.__value="";var Ge=l($e);Ge.value=Ge.__value="0";var Ze=l(Ge);Q(Ze,0,()=>[1,2,3,4],oe,(i,g)=>{var h=Kt(),D=o(h),G={};F(j=>{C(D,`${g??""} ${g===1?"Hora":"Horas"}`),G!==(G=j)&&(h.value=(h.__value=j)??"")},[()=>r(()=>g.toString())]),y(i,h)});var Xe=l(we,2),hr=o(Xe);$t(hr,{get selectedDiarioAnots(){return e(O)},set selectedDiarioAnots(i){v(O,i)},$$legacy:!0});var Sr=l(Xe,2),sr=o(Sr),Br=o(sr);{var Mr=i=>{var g=Qt();y(i,g)},mr=i=>{var g=Zt();y(i,g)};K(Br,i=>{e(L)?i(Mr):i(mr,!1)})}var Ar=l(le,2);{var Qr=i=>{Et(i,{onClose:Ae,get initialDocente(){return e(n),r(()=>e(n).docente)}})};K(Ar,i=>{e(R)&&i(Qr)})}F((i,g,h,D,G,j,k,I)=>{p(le,`background-color: ${e(a),r(()=>e(a).bg)??""};`),p(ge,`background-color: ${e(a),r(()=>e(a).cardBg)??""}; border-color: ${e(a),r(()=>e(a).cardBorder)??""};`),Wr(be,"src",ht),p(he,`color: ${e(a),r(()=>e(a).text)??""};`),p(pe,`background-color: ${e(a),r(()=>e(a).inputBg)??""}; border-color: ${e(a),r(()=>e(a).border)??""}; color: ${e(a),r(()=>e(a).text)??""};`),p(He,`background-color: ${e(a),r(()=>e(a).inputBg)??""}; border-color: ${e(a),r(()=>e(a).border)??""}; color: ${e(a),r(()=>e(a).text)??""};`),p(xe,`background-color: ${e(a),r(()=>e(a).inputBg)??""}; border-color: ${e(a),r(()=>e(a).border)??""}; color: ${e(a),r(()=>e(a).text)??""};`),p(_e,`background-color: ${e(a),r(()=>e(a).inputBg)??""}; border-color: ${e(a),r(()=>e(a).border)??""}; color: ${e(a),r(()=>e(a).text)??""};`),C(Te,A()),p(qe,`background-color: ${e(a),r(()=>e(a).cardBg)??""}; border-color: ${e(a),r(()=>e(a).cardBorder)??""};`),p(pr,`color: ${e(a),r(()=>e(a).label)??""};`),de(lr,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none ${i??""}`),p(lr,`background-color: ${e(a),r(()=>e(a).inputBg)??""}; border-color: ${g??""}; color: ${e(a),r(()=>e(a).text)??""}; color-scheme: ${A()==="light"?"light":"dark"};`),p(ur,`color: ${e(a),r(()=>e(a).label)??""};`),de(Ue,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${h??""}`),p(Ue,`background-color: ${e(a),r(()=>e(a).inputBg)??""}; border-color: ${D??""}; color: ${e(a),r(()=>e(a).text)??""};`),C($r,e(b)?"Cargando...":"Seleccione docente"),de(f,1,`space-y-2 ${e($)?"lg:col-span-2":""}`),p(N,`color: ${e(a),r(()=>e(a).label)??""};`),p(br,`color: ${e(a),r(()=>e(a).label)??""};`),de(Qe,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${G??""}`),p(Qe,`background-color: ${e(a),r(()=>e(a).inputBg)??""}; border-color: ${j??""}; color: ${e(a),r(()=>e(a).text)??""};`),C(Dr,e(q)?"Cargando...":"Seleccione grado"),p(E,`color: ${e(a),r(()=>e(a).label)??""};`),de(te,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer ${k??""}`),p(te,`background-color: ${e(a),r(()=>e(a).inputBg)??""}; border-color: ${I??""}; color: ${e(a),r(()=>e(a).text)??""};`),sr.disabled=e(L)},[()=>(e(s),e(m),r(()=>e(s)&&e(m).includes("fecha")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(s),e(m),e(a),r(()=>e(s)&&e(m).includes("fecha")?"#ef4444":e(a).border)),()=>(e(s),e(m),r(()=>e(s)&&e(m).includes("docente")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(s),e(m),e(a),r(()=>e(s)&&e(m).includes("docente")?"#ef4444":e(a).border)),()=>(e(s),e(m),r(()=>e(s)&&e(m).includes("grado")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(s),e(m),e(a),r(()=>e(s)&&e(m).includes("grado")?"#ef4444":e(a).border)),()=>(e(s),e(m),r(()=>e(s)&&e(m).includes("horas")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(s),e(m),e(a),r(()=>e(s)&&e(m).includes("horas")?"#ef4444":e(a).border))]),W("click",pe,Fe),W("click",He,Pe),W("click",xe,function(...i){Ne()?.apply(this,i)}),W("click",_e,ze),Vr(lr,()=>e(n).fecha,i=>(ae(n,e(n).fecha=i),De(()=>{e(s),e(m),e(a),e(b),e(U),e(z),e(J),e(B),e(q),e(d)}))),Se(Ue,()=>e(n).docente,i=>(ae(n,e(n).docente=i),De(()=>{e(s),e(m),e(a),e(b),e(U),e(z),e(J),e(B),e(q),e(d)}))),Se(Qe,()=>e(n).grado,i=>(ae(n,e(n).grado=i),De(()=>{e(s),e(m),e(a),e(b),e(U),e(z),e(J),e(B),e(q),e(d)}))),Se(te,()=>e(n).horas,i=>(ae(n,e(n).horas=i),De(()=>{e(s),e(m),e(a),e(b),e(U),e(z),e(J),e(B),e(q),e(d)}))),W("submit",or,M),y(rr,Ve),Gr(),P()}export{ia as default};
