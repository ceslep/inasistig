const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/utils-Dc41pFlL.js","assets/excel-G1qE2FwJ.js"])))=>i.map(i=>d[i]);
import{w as Wo,p as yr,a as Dt,o as br,l as Be,b as Sr,i as Ar,c as po,f as Zt,d as X,e as g,g as kr,s as a,t as D,h as P,j as i,k as y,m as o,n as f,q as Re,r as Yt,u as e,v as t,x as s,y as b,z as xo,A as he,B as vo,C as ho,D as Ct,E as Fo,F as ke,G as qo,H as wt,I as we,J as Ve,K as Ao,L as ct,M as _r,N as Mt,O as zo,P as lo,Q as Mo,R as Jo,S as Ko,T as Zo,U as Co,V as To,W as Oo,X as Qo,Y as Xo}from"./svelte-Cjm1MGoY.js";import{S as Tt}from"./ui-CHfsb5jC.js";import{_ as so}from"./pdf-CBBHH09D.js";(function(){const $=document.createElement("link").relList;if($&&$.supports&&$.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))Se(v);new MutationObserver(v=>{for(const M of v)if(M.type==="childList")for(const r of M.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&Se(r)}).observe(document,{childList:!0,subtree:!0});function c(v){const M={};return v.integrity&&(M.integrity=v.integrity),v.referrerPolicy&&(M.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?M.credentials="include":v.crossOrigin==="anonymous"?M.credentials="omit":M.credentials="same-origin",M}function Se(v){if(v.ep)return;v.ep=!0;const M=c(v);fetch(v.href,M)}})();const ea="/inasistig/assets/asistencia_hero-DmIvUlDZ.png",ta="/inasistig/assets/anotador_hero-DBB4ReZf.png",ra="/inasistig/assets/diario_hero-B7a5kf5J.png",ro="/inasistig/assets/eie-DMab_WyA.png",oa=()=>{if(typeof window<"u"){const Y=localStorage.getItem("theme");if(Y&&["light","dim","dark"].includes(Y))return Y}return"dark"},Kr=Wo(oa());typeof window<"u"&&Kr.subscribe(Y=>{localStorage.setItem("theme",Y);const $=document.documentElement;$.classList.remove("light","dim","dark"),$.classList.add(Y)});var aa=y('<div class="relative svelte-dtuciw"><div style="top: -8px; left: 50%; transform: translateX(-50%);"></div></div>'),sa=y('<div class="fixed inset-0 bg-black/30 z-40 svelte-dtuciw" style="pointer-events: none;"></div> <div class="fixed z-50 animate-bounce-in svelte-dtuciw"><!> <div><div class="flex items-center gap-2 mb-3 svelte-dtuciw"><div class="p-1.5 bg-white/20 rounded-lg svelte-dtuciw"><svg class="w-5 h-5 svelte-dtuciw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="svelte-dtuciw"></path></svg></div> <span class="inline-block px-2 py-0.5 text-xs font-bold rounded-full bg-white/25 animate-pulse svelte-dtuciw">¬°NUEVO!</span></div> <h3 class="font-bold text-base mb-2 svelte-dtuciw"> </h3> <p> </p> <div class="flex gap-2 svelte-dtuciw"><button>Probar ahora</button> <button class="px-3 py-2 rounded-lg text-sm hover:bg-white/20 transition-colors svelte-dtuciw" aria-label="Cerrar popup">M√°s tarde</button></div> <button class="absolute top-2 right-2 p-1 rounded-lg hover:bg-white/20 transition-colors svelte-dtuciw" aria-label="Cerrar notificaci√≥n"><svg class="w-4 h-4 svelte-dtuciw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-dtuciw"></path></svg></button></div></div>',1);function bo(Y,$){yr($,!1);const c=f();let Se=Dt($,"featureMessage",8),v=Dt($,"description",8),M=Dt($,"onTryNow",8),r=Dt($,"onDismiss",8),d=Dt($,"targetSelector",8,void 0),Fe=Dt($,"showPopup",8),B=Dt($,"colorTheme",8,"blue"),te=f({top:0,left:0});function ee(){if(typeof window<"u"&&d()){const O=document.querySelector(d());if(O){const l=O.getBoundingClientRect();i(te,{top:l.bottom+10,left:l.left+l.width/2})}}else i(te,{top:window.innerHeight/2-100,left:window.innerWidth/2})}br(()=>(ee(),window.addEventListener("resize",ee),()=>{window.removeEventListener("resize",ee)})),Be(()=>{},()=>{i(c,{arrowBorder:{blue:"border-t-blue-600 dark:border-t-blue-400",green:"border-t-green-600 dark:border-t-green-400",purple:"border-t-purple-600 dark:border-t-purple-400",emerald:"border-t-emerald-600 dark:border-t-emerald-400"},bgGradientFrom:{blue:"from-blue-600 dark:from-blue-700",green:"from-green-600 dark:from-green-700",purple:"from-purple-600 dark:from-purple-700",emerald:"from-emerald-600 dark:from-emerald-700"},bgGradientTo:{blue:"to-indigo-600 dark:to-indigo-700",green:"to-emerald-600 dark:to-emerald-700",purple:"to-fuchsia-600 dark:to-fuchsia-700",emerald:"to-teal-600 dark:to-teal-700"},borderColor:{blue:"border-blue-400 dark:border-blue-500",green:"border-green-400 dark:border-green-500",purple:"border-purple-400 dark:border-purple-500",emerald:"border-emerald-400 dark:border-emerald-500"},buttonTextColor:{blue:"text-blue-600",green:"text-green-600",purple:"text-purple-600",emerald:"text-emerald-600"},buttonHoverBg:{blue:"hover:bg-blue-50",green:"hover:bg-green-50",purple:"hover:bg-purple-50",emerald:"hover:bg-emerald-50"},descriptionColor:{blue:"text-blue-100",green:"text-green-100",purple:"text-purple-100",emerald:"text-emerald-100"}})}),Be(()=>Re(Fe()),()=>{Fe()&&ee()}),Sr(),Ar();var J=po(),N=Zt(J);{var F=O=>{var l=sa(),E=a(Zt(l),2),G=o(E);{var j=h=>{var le=aa(),He=o(le);D(()=>Yt(He,1,`absolute w-0 h-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent ${e(c),Re(B()),t(()=>e(c).arrowBorder[B()])??""}`,"svelte-dtuciw")),g(h,le)};X(G,h=>{d()&&h(j)})}var u=a(G,2),w=a(o(u),2),Oe=o(w),$e=a(w,2),Ye=o($e),Le=a($e,2),Xe=o(Le),pt=a(Xe,2),ae=a(Le,2);D(()=>{s(E,`top: ${e(te),t(()=>e(te).top)??""}px; left: ${e(te),t(()=>e(te).left)??""}px; transform: translateX(-50%);`),Yt(u,1,`bg-gradient-to-r ${e(c),Re(B()),t(()=>e(c).bgGradientFrom[B()])??""} ${e(c),Re(B()),t(()=>e(c).bgGradientTo[B()])??""} text-white p-4 rounded-xl shadow-2xl border ${e(c),Re(B()),t(()=>e(c).borderColor[B()])??""} min-w-[280px] max-w-[calc(100vw-20px)] md:max-w-[320px]`,"svelte-dtuciw"),b(Oe,Se()),Yt($e,1,`text-sm ${e(c),Re(B()),t(()=>e(c).descriptionColor[B()])??""} mb-3`,"svelte-dtuciw"),b(Ye,v()),Yt(Xe,1,`px-3 py-2 rounded-lg text-sm bg-white ${e(c),Re(B()),t(()=>e(c).buttonTextColor[B()])??""} font-semibold ${e(c),Re(B()),t(()=>e(c).buttonHoverBg[B()])??""} transition-colors`,"svelte-dtuciw")}),P("click",Xe,function(...h){M()?.apply(this,h)}),P("click",pt,function(...h){r()?.apply(this,h)}),P("click",ae,function(...h){r()?.apply(this,h)}),g(O,l)};X(N,O=>{Fe()&&O(F)})}g(Y,J),kr()}var la=wt('<svg class="w-6 h-6 text-amber-500 svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707M16.95 16.95l.707.707M7.636 7.636l.707.707M12 8a4 4 0 100 8 4 4 0 000-8z" class="svelte-1y1a8hs"></path></svg>'),na=wt('<svg class="w-6 h-6 text-indigo-400 svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1y1a8hs"></path></svg>'),ia=wt('<svg class="w-6 h-6 text-indigo-500 svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707M16.95 16.95l.707.707M7.636 7.636l.707.707M12 8a4 4 0 100 8 4 4 0 000-8z" class="svelte-1y1a8hs"></path></svg>'),da=y('<button class="group relative flex flex-col justify-between overflow-hidden rounded-[2.5rem] border border-[rgb(var(--card-border))] bg-[rgb(var(--card-bg))] backdrop-blur-xl transition-all duration-500 hover:border-[rgb(var(--accent-primary))]/30 hover:bg-[rgb(var(--bg-secondary))] p-1 svelte-1y1a8hs"><div class="absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent svelte-1y1a8hs"></div> <div class="relative p-8 flex flex-col h-full svelte-1y1a8hs"><div class="flex justify-between items-start mb-12 svelte-1y1a8hs"><div class="flex flex-col gap-1 svelte-1y1a8hs"><span class="text-[10px] font-bold uppercase tracking-[0.2em] text-[rgb(var(--accent-primary))] svelte-1y1a8hs"> </span> <h2 class="text-2xl font-bold tracking-tight text-[rgb(var(--text-primary))] group-hover:text-[rgb(var(--accent-primary))] transition-colors duration-300 svelte-1y1a8hs"> </h2></div> <span class="px-3 py-1 rounded-full text-[10px] font-bold bg-[rgb(var(--bg-tertiary))] border border-[rgb(var(--border-primary))] text-[rgb(var(--text-muted))] uppercase tracking-wider svelte-1y1a8hs"> </span></div> <div class="flex flex-col gap-6 mt-auto svelte-1y1a8hs"><div class="relative w-full aspect-video rounded-3xl overflow-hidden bg-black/20 border border-white/5 svelte-1y1a8hs"><div></div> <img class="w-3/4 h-3/4 mx-auto object-cover grayscale-[0.5] group-hover:grayscale-0 group-hover:scale-110 transition-all duration-700 ease-in-out opacity-60 group-hover:opacity-100 svelte-1y1a8hs"/> <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-500 z-20 svelte-1y1a8hs"><div class="p-3 rounded-full bg-white/10 backdrop-blur-md border border-white/20 svelte-1y1a8hs"><svg class="w-6 h-6 text-white svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" class="svelte-1y1a8hs"></path></svg></div></div></div> <p class="text-sm font-medium leading-relaxed text-[rgb(var(--text-muted))] line-clamp-2 svelte-1y1a8hs"> </p></div> <div class="mt-8 flex items-center justify-between svelte-1y1a8hs"><div class="flex -space-x-2 svelte-1y1a8hs"><div class="w-6 h-6 rounded-full border border-black bg-indigo-500/20 svelte-1y1a8hs"></div> <div class="w-6 h-6 rounded-full border border-black bg-purple-500/20 svelte-1y1a8hs"></div></div> <div class="text-[10px] font-bold text-[rgb(var(--text-muted))] tracking-[0.1em] group-hover:text-[rgb(var(--accent-primary))] transition-colors uppercase svelte-1y1a8hs">Explorar &rarr;</div></div></div> <div></div></button>'),ca=y(`<header class="max-w-7xl w-full mb-6 lg:mb-8 text-center relative svelte-1y1a8hs"><div class="absolute right-0 top-0 svelte-1y1a8hs"><button class="p-3 rounded-2xl bg-[rgb(var(--bg-secondary))] border border-[rgb(var(--border-primary))] hover:border-[rgb(var(--accent-primary))] transition-all duration-300 group svelte-1y1a8hs" aria-label="Toggle Theme"><!></button></div> <div class="inline-block mb-4 relative svelte-1y1a8hs"><div class="absolute inset-0 bg-indigo-500/20 blur-2xl rounded-full svelte-1y1a8hs"></div> <img alt="EIE Logo" class="relative h-12 md:h-16 object-contain hover:scale-110 transition-transform duration-700 ease-out cursor-none svelte-1y1a8hs"/></div> <div class="space-y-1 svelte-1y1a8hs"><h1 class="text-3xl md:text-5xl font-black tracking-tight svelte-1y1a8hs"><span class="bg-gradient-to-b from-[rgb(var(--text-primary))] to-[rgb(var(--text-secondary))] bg-clip-text text-transparent svelte-1y1a8hs">Ecosistema Digital</span> <span class="text-[rgb(var(--accent-primary))] svelte-1y1a8hs">Instituto Gu√°tica</span></h1> <p class="text-base md:text-lg text-[rgb(var(--text-muted))] max-w-xl mx-auto font-medium svelte-1y1a8hs">Potenciando la excelencia pedag√≥gica a trav√©s de herramientas
          inteligentes y dise√±o centrado en el docente.</p></div></header> <div class="max-w-7xl w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8 svelte-1y1a8hs"></div> <footer class="mt-20 flex flex-col md:flex-row items-center gap-8 text-[rgb(var(--text-muted))] text-xs font-bold tracking-widest uppercase svelte-1y1a8hs"><div class="flex items-center gap-4 px-6 py-3 rounded-full bg-[rgb(var(--bg-secondary))] border border-[rgb(var(--border-primary))] backdrop-blur-sm svelte-1y1a8hs"><span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse svelte-1y1a8hs"></span> SISTEMA OPERATIVO</div> <div class="hidden md:block w-px h-4 bg-[rgb(var(--border-primary))] svelte-1y1a8hs"></div> <div class="svelte-1y1a8hs">v2.0.4 PLATINUM</div> <div class="hidden md:block w-px h-4 bg-[rgb(var(--border-primary))] svelte-1y1a8hs"></div> <div class="svelte-1y1a8hs">2026 EIE DIGITAL</div></footer>`,1),va=y(`<div class="min-h-screen w-full flex flex-col items-center p-6 lg:p-12 transition-colors duration-700 bg-[rgb(var(--bg-primary))] text-[rgb(var(--text-primary))] svelte-1y1a8hs"><div class="fixed inset-0 overflow-hidden pointer-events-none -z-10 svelte-1y1a8hs"><div class="absolute -top-[20%] -left-[10%] w-[60%] h-[60%] bg-indigo-500/5 blur-[120px] rounded-full animate-pulse svelte-1y1a8hs"></div> <div class="absolute -bottom-[20%] -right-[10%] w-[60%] h-[60%] bg-purple-500/5 blur-[120px] rounded-full animate-pulse svelte-1y1a8hs" style="animation-delay: 2s"></div> <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-[0.02] mix-blend-overlay svelte-1y1a8hs"></div></div> <!></div> <!>`,1);function ga(Y,$){yr($,!1);const c=()=>ho(Kr,"$theme",Se),[Se,v]=xo();let M=Dt($,"onSelect",8),r=f(!1);const d="¬°Nueva forma de anotar el Diario de Campo!",Fe="Ahora el Diario de Campo permite seleccionar y personalizar anotaciones predefinidas. ¬°Expl√≥ralo!";function B(){const j=localStorage.getItem("dismissedFeatureAlertDashboardDiario");if(!j)return!0;const u=new Date(j);return(new Date().getTime()-u.getTime())/(1e3*60*60*24)>5}const te=()=>{localStorage.setItem("dismissedFeatureAlertDashboardDiario",new Date().toISOString())},ee=()=>{localStorage.setItem("dismissedFeatureAlertDashboardDiario",new Date().toISOString()),M()("diario")};br(()=>{i(r,!0),B()});const J=()=>{Kr.update(j=>j==="light"?"dim":j==="dim"?"dark":"light")},N=[{id:"inasistencia",title:"Registro Diario",subtitle:"Gesti√≥n de Asistencia",description:"Control preciso de inasistencias y novedades diarias del aula.",image:ea,color:"from-blue-600/20 to-indigo-600/20",accent:"blue",tag:"Operativo"},{id:"anotador",title:"Anotador de Clase",subtitle:"Seguimiento √Ågil",description:"Registro din√°mico de incidencias y avances pedag√≥gicos por sesi√≥n.",image:ta,color:"from-purple-600/20 to-pink-600/20",accent:"purple",tag:"Acad√©mico"},{id:"diario",title:"Diario de Campo",subtitle:"Reflexi√≥n Docente",description:"Espacio para la reflexi√≥n profunda y documentaci√≥n pedag√≥gica.",image:ra,color:"from-emerald-600/20 to-teal-600/20",accent:"emerald",tag:"Estrat√©gico"},{id:"horas_laborables",title:"Horas Laborables",subtitle:"Gesti√≥n de Tiempo",description:"Calculadora especializada para el seguimiento de jornadas y horas docentes.",image:ro,color:"from-orange-600/20 to-amber-600/20",accent:"orange",tag:"Herramienta",url:"https://ceslep.github.io/horas_laborables"}];Ar();var F=va(),O=Zt(F),l=a(o(O),2);{var E=j=>{var u=ca(),w=Zt(u),Oe=o(w),$e=o(Oe),Ye=o($e);{var Le=ze=>{var de=la();g(ze,de)},Xe=ze=>{var de=na();g(ze,de)},pt=ze=>{var de=ia();g(ze,de)};X(Ye,ze=>{c()==="light"?ze(Le):c()==="dim"?ze(Xe,1):ze(pt,!1)})}var ae=a(Oe,2),h=a(o(ae),2),le=a(w,2);he(le,5,()=>N,ke,(ze,de,W)=>{var re=da(),Q=a(o(re),2),Ge=o(Q),Ne=o(Ge),fe=o(Ne),ue=o(fe),Ee=a(fe,2),st=o(Ee),We=a(Ne,2),ge=o(We),C=a(Ge,2),p=o(C),S=o(p),I=a(S,2),H=a(p,2),U=o(H),ne=a(Q,2);D(()=>{Ct(re,"id",(e(de),t(()=>e(de).id==="diario"?"diario-module-target":""))),b(ue,(e(de),t(()=>e(de).subtitle))),b(st,(e(de),t(()=>e(de).title))),b(ge,(e(de),t(()=>e(de).tag))),Yt(S,1,`absolute inset-0 bg-gradient-to-br ${e(de),t(()=>e(de).color)??""} mix-blend-overlay z-10`,"svelte-1y1a8hs"),Ct(I,"src",(e(de),t(()=>e(de).image))),Ct(I,"alt",(e(de),t(()=>e(de).title))),b(U,(e(de),t(()=>e(de).description))),Yt(ne,1,`absolute inset-0 bg-gradient-to-br ${e(de),t(()=>e(de).color)??""} opacity-0 group-hover:opacity-[0.03] transition-opacity duration-500 pointer-events-none`,"svelte-1y1a8hs")}),P("click",re,()=>M()(e(de).id)),vo(1,re,()=>Fo,()=>({y:40,duration:800,delay:200+W*150})),g(ze,re)});var He=a(le,2);D(()=>Ct(h,"src",ro)),P("click",$e,J),vo(1,w,()=>Fo,()=>({y:-20,duration:800,delay:100})),vo(1,He,()=>qo,()=>({duration:1e3,delay:800})),g(j,u)};X(l,j=>{e(r)&&j(E)})}var G=a(O,2);bo(G,{featureMessage:d,description:Fe,onTryNow:ee,onDismiss:te,targetSelector:"#diario-module-target",showPopup:!1,colorTheme:"emerald"}),g(Y,F),kr(),v()}const go="1wN7lp7lOGyxKYIUJ9TU89N9knnJjX2Z_TfsOUg48QpQ",no="https://app.iedeoccidente.com/gs",uo="https://app.iedeoccidente.com/ig",pa=`${uo}/getprofes.php`,ua=`${uo}/getMaterias.php`,ba=`${uo}/getEstudiantes.php`,fa=`${no}/save_inasistencias.php`,xa=`${no}/save_anotador.php`,ha=`${uo}/getOpcionesAnotador3.php`,ma=`${uo}/adiario.php`,_a=`${no}/save_diario.php`,mo="Inasistencias",Do="Datos",fo="1Q6EcSvccB7BoJiw9PD2s5J4PB8AJmr-6v-yKhiE4E8k",So="10pBVNYnS-ctmBYP9Y8KL3h32GZKsyi0bwoyil-kEGaE",No="diario",ko="Selecciona un grado y una asignatura para comenzar a registrar inasistencias. Ahora puedes marcar motivos individuales y observaciones espec√≠ficas por estudiante.Tambien pueden ver el filtro de datos en Locker Studio",wo="Completa los datos de la clase y selecciona las observaciones que correspondan. Puedes editar el texto de cada observaci√≥n si es necesario.Recuerda hacer check en el cuadro de selecci√≥n para guardar esa anotaci√≥n.",$o="Completa los datos de la clase y selecciona las observaciones que correspondan. Puedes editar el texto de cada observaci√≥n si es necesario.Recuerda hacer check en el cuadro de selecci√≥n para guardar esa anotaci√≥n.",ya="https://lookerstudio.google.com/reporting/be2efb22-dc5f-4f21-9dfc-0253e763e19f",ao=[{nombre:"UNO",fecha_inicio:new Date("2026-01-26"),fecha_fin:new Date("2026-03-27")},{nombre:"DOS",fecha_inicio:new Date("2026-03-30"),fecha_fin:new Date("2026-06-12")},{nombre:"TRES",fecha_inicio:new Date("2026-07-07"),fecha_fin:new Date("2026-09-11")},{nombre:"CUATRO",fecha_inicio:new Date("2026-09-14"),fecha_fin:new Date("2026-11-20")}],ka=async()=>{try{const Y=await fetch(`${ma}`);if(!Y.ok)throw new Error(`Error: ${Y.status}`);return await Y.json()}catch(Y){throw console.error("Error fetching diario options:",Y),Y}},Eo=async(Y={})=>{try{const $=await fetch(`${no}/get_inasistencias.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Y)});if(!$.ok)throw new Error(`Error: ${$.status}`);return await $.json()}catch($){throw console.error("Error fetching inasistencias:",$),$}},jo=async(Y={})=>{try{const $=await fetch(`${no}/get_anotador.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Y)});if(!$.ok)throw new Error(`Error: ${$.status}`);return await $.json()}catch($){throw console.error("Error fetching inasistencias:",$),$}},wa=async(Y={})=>{try{const $=await fetch(`${no}/get_diario.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Y)});if(!$.ok)throw new Error(`Error: ${$.status}`);return await $.json()}catch($){throw console.error("Error fetching diario:",$),$}},$a=async Y=>{try{const $=await fetch(`${fa}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Y)});if(!$.ok)throw new Error(`Error: ${$.status}`);return await $.json()}catch($){throw console.error("Error saving inasistencias:",$),$}},Zr=async()=>{try{const Y=await fetch(`${pa}`);if(!Y.ok)throw new Error(`Error: ${Y.status}`);return await Y.json()}catch(Y){throw console.error("Error fetching docentes:",Y),Y}},Qr=async()=>{try{const Y=await fetch(`${ua}`);if(!Y.ok)throw new Error(`Error: ${Y.status}`);return await Y.json()}catch(Y){throw console.error("Error fetching materias:",Y),Y}},Xr=async()=>{try{const Y=await fetch(`${ba}`);if(!Y.ok)throw new Error(`Error: ${Y.status}`);return await Y.json()}catch(Y){throw console.error("Error fetching estudiantes:",Y),Y}},Ca=async()=>{try{const Y=await fetch(`${ha}`);if(!Y.ok)throw new Error(`Error: ${Y.status}`);return await Y.json()}catch(Y){throw console.error("Error fetching opciones anotador3:",Y),Y}},Sa=async Y=>{try{const $=await fetch(`${xa}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Y)});if(!$.ok)throw new Error(`Error: ${$.status}`);return await $.json()}catch($){throw console.error("Error saving inasistencias:",$),$}},Aa=async Y=>{try{const $=await fetch(`${_a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Y)});if(!$.ok)throw new Error(`Error: ${$.status}`);return await $.json()}catch($){throw console.error("Error saving inasistencias:",$),$}};var Da=y('<div class="flex-1 flex items-center justify-center"><div class="text-center"><div class="animate-spin w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full mx-auto mb-4"></div> <p>Cargando datos...</p></div></div>'),Ea=y('<span class="ml-2 px-2 py-1 text-xs bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full">Activos</span>'),Ia=y("<option> </option>"),Ba=y("<option> </option>"),Fa=y('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">Este docente no tiene registros de materias</p>'),za=y("<option> </option>"),Ma=y('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">No hay grados para los filtros seleccionados</p>'),Ta=y("<option> </option>"),Oa=y('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">No hay motivos para los filtros seleccionados</p>'),Na=y('<div class="flex-1 flex items-center justify-center"><div class="text-center py-12 px-4"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm sm:text-base">No se encontraron registros con los filtros seleccionados</p></div></div>'),ja=y('<button class="text-indigo-600 dark:text-indigo-400 hover:underline font-medium text-left truncate w-full"> </button>'),Ra=y('<tr class="border-b transition-colors hover:bg-black/5 dark:hover:bg-white/5 text-xs"><td class="p-2"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 text-center"> </td><td class="p-2 truncate max-w-[150px]"><!></td><td class="p-2 text-center"><span><span> </span> </span></td><td class="p-2 text-center"> </td><td class="p-2"><span class="truncate block max-w-xs text-xs"> </span></td></tr>'),La=y('<button class="text-indigo-600 dark:text-indigo-400 hover:underline font-medium text-left truncate w-full"> </button>'),Pa=y('<tr class="border-b transition-colors hover:bg-black/5 dark:hover:bg-white/5 text-xs"><td class="p-2 whitespace-nowrap"> </td><td class="p-2"><span class="truncate block max-w-[120px]"> </span></td><td class="p-2 truncate max-w-[120px]"> </td><td class="p-2"><span class="truncate block max-w-[100px]"><!></span></td><td class="p-2 text-center"><span><span> </span> </span></td><td class="p-2 whitespace-nowrap text-center"> </td><td class="p-2 whitespace-nowrap text-center"> </td></tr>'),Ha=y('<button class="font-semibold text-xs text-indigo-600 dark:text-indigo-400 truncate hover:underline text-left w-full"> </button>'),Ga=y('<p class="font-semibold text-xs text-indigo-600 dark:text-indigo-400 truncate"> </p>'),Ua=y('<div class="text-[10px] p-1.5 rounded"><div class="flex items-start"><svg class="w-3 h-3 mr-1 mt-0.5 flex-shrink-0 opacity-60" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="line-clamp-1"> </span></div></div>'),Va=y('<div class="border rounded-lg p-2 transition-colors hover:bg-black/5 dark:hover:bg-white/5"><div class="flex justify-between items-center mb-1.5"><div class="flex-1 min-w-0"><!> <p class="text-[10px] opacity-75"> </p></div> <div class="flex flex-col items-end ml-2 flex-shrink-0"><span><span> </span> </span> <span class="text-[10px] font-semibold"> </span></div></div> <div class="flex gap-3 text-[10px] mb-1.5"><div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="truncate"> </span></div> <div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <span class="truncate"> </span></div></div> <!></div>'),Ya=y('<div class="hidden lg:flex flex-1 flex-col overflow-hidden min-h-0"><div class="flex-1 overflow-auto min-w-full border rounded-lg"><table class="w-full border-collapse text-sm min-w-[800px]"><thead class="sticky top-0 z-10 border-b"><tr><th class="text-left p-2 font-semibold whitespace-nowrap">Fecha</th><th class="text-left p-2 font-semibold whitespace-nowrap">Docente</th><th class="text-left p-2 font-semibold whitespace-nowrap">Materia</th><th class="text-center p-2 font-semibold whitespace-nowrap">Grado</th><th class="text-left p-2 font-semibold whitespace-nowrap">Estudiante</th><th class="text-center p-2 font-semibold whitespace-nowrap">Motivo</th><th class="text-center p-2 font-semibold whitespace-nowrap">Horas</th><th class="text-left p-2 font-semibold whitespace-nowrap">Observaciones</th></tr></thead><tbody></tbody></table></div></div> <div class="hidden md:flex lg:hidden flex-1 overflow-auto"><div class="min-w-full border rounded-lg"><table class="w-full border-collapse text-xs"><thead class="sticky top-0 z-10 border-b"><tr><th class="text-left p-2 font-semibold whitespace-nowrap">Fecha</th><th class="text-left p-2 font-semibold whitespace-nowrap">Docente</th><th class="text-left p-2 font-semibold whitespace-nowrap">Materia</th><th class="text-left p-2 font-semibold whitespace-nowrap">Estudiante</th><th class="text-center p-2 font-semibold whitespace-nowrap">Motivo</th><th class="text-center p-2 font-semibold whitespace-nowrap">Horas</th><th class="text-center p-2 font-semibold whitespace-nowrap">Grado</th></tr></thead><tbody></tbody></table></div></div> <div class="flex-1 overflow-y-auto md:hidden px-1"><div class="space-y-2"></div></div>',1),Wa=y('<div class="p-3 sm:p-4 border-b"><div class="flex items-center justify-between mb-2 sm:mb-3"><h3 class="text-lg font-semibold">Filtros <!></h3> <button class="text-sm px-3 py-1 rounded-lg border transition-colors hover:bg-black/5 dark:hover:bg-white/5">Limpiar filtros</button></div> <div class="mb-3 p-1.5 sm:p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg"><p class="text-[10px] sm:text-xs font-medium mb-1.5">R√°pido: Fechas</p> <div class="flex items-center mb-2"><input id="checkFiltrarFecha" type="checkbox" class="w-4 h-4 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 dark:bg-zinc-700"/> <label for="checkFiltrarFecha" class="ml-2 text-xs font-medium">Activar filtro por fechas</label></div> <div class="flex flex-wrap gap-1 sm:gap-2"><button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Hoy</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 7 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 30 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Mes actual</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimo trimestre</button></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"><div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroDocente" class="block text-xs sm:text-sm font-medium">Docente</label> <select id="filtroDocente" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option>Todos los docentes</option><!></select></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroMateria" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroMateria" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroGrado" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroGrado" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroMotivo" class="block text-xs sm:text-sm font-medium">Motivo</label> <select id="filtroMotivo" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaInicio" class="block text-xs sm:text-sm font-medium">Fecha desde</label> <input id="filtroFechaInicio" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaFin" class="block text-xs sm:text-sm font-medium">Fecha hasta</label> <input id="filtroFechaFin" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div></div></div></div> <div class="flex-1 flex flex-col p-2 sm:p-4 min-h-0"><div class="mb-4 px-0 sm:px-3"><p class="text-sm">Se encontraron <span class="font-bold text-indigo-500"> </span> registros</p></div> <!></div>',1),qa=y('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4" role="button" tabindex="0" aria-label="Cerrar ventana"><div class="w-full max-w-7xl max-h-[95vh] bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl overflow-hidden flex flex-col"><div class="flex items-center justify-between p-3 sm:p-4 border-b"><div class="flex items-center gap-3"><img alt="EIE Logo" class="h-8 w-auto hidden sm:block"/> <div><h2 class="text-lg sm:text-xl font-bold">Inasistencias</h2> <p class="text-xs hidden sm:block">Filtra y consulta los registros</p></div></div> <div class="flex items-center gap-3"><button class="inline-flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Exportar CSV</button> <button class="p-2 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5" aria-label="Cerrar"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div> <div class="flex-1 overflow-hidden flex flex-col min-h-0"><!></div></div></div>');function Ja(Y,$){yr($,!1);const c=f(),Se=f(),v=f(),M=f(),r=f();let d=Dt($,"onClose",8),Fe=Dt($,"selectedDocente",8,""),B=f([]),te=[],ee=[],J=[],N=f(!1),F=f(!1),O=f([]),l=f({docente:Fe()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",motivo:""});const E=()=>{const p=new Date,S=new Date(p.getFullYear(),p.getMonth()-1,p.getDate()),I=H=>{const U=H.getFullYear(),ne=String(H.getMonth()+1).padStart(2,"0"),Te=String(H.getDate()).padStart(2,"0");return`${U}-${ne}-${Te}`};we(l,e(l).fechaInicio=I(S)),Ve(()=>{e(r),e(w),e(c),e(v),e(M)}),we(l,e(l).fechaFin=I(p)),Ve(()=>{e(r),e(w),e(c),e(v),e(M)})},G=p=>{const S=new Date;let I;switch(p){case"hoy":I=new Date(S);break;case"semana":I=new Date(S),I.setDate(S.getDate()-7);break;case"mes":I=new Date(S),I.setDate(S.getDate()-30);break;case"mes_actual":I=new Date(S.getFullYear(),S.getMonth(),1);break;case"trimestre":I=new Date(S),I.setDate(S.getDate()-90);break;default:E();return}const H=U=>{const ne=U.getFullYear(),Te=String(U.getMonth()+1).padStart(2,"0"),Z=String(U.getDate()).padStart(2,"0");return`${ne}-${Te}-${Z}`};we(l,e(l).fechaInicio=H(I)),Ve(()=>{e(r),e(w),e(c),e(v),e(M)}),we(l,e(l).fechaFin=H(S)),Ve(()=>{e(r),e(w),e(c),e(v),e(M)}),i(F,!0),console.log("‚úÖ setFechaPreset ejecutado:",{preset:p,fechaInicio:e(l).fechaInicio,fechaFin:e(l).fechaFin,filtrarPorFecha:e(F)})},j=[{value:"Sin excusa",icon:"üö´",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},{value:"Excusa",icon:"üìÑ",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},{value:"LLegada Tarde",icon:"‚è∞",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},{value:"Transporte Escolar",icon:"üöå",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},{value:"Permiso",icon:"‚úÖ",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},{value:"No portar/sin uniforme",icon:"üëö",color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"},{value:"Pacto de Aula",icon:"ü§ù",color:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"},{value:"Uso del celular",icon:"üì±",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},{value:"Desorden en Clase",icon:"üîä",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"},{value:"Fuga",icon:"üèÉ‚Äç‚ôÇÔ∏è",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},{value:"No realizaci√≥n de Aseo",icon:"üßπ",color:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200"},{value:"Licencia por salud",icon:"üè•",color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"},{value:"Incapacidad",icon:"ü©∫",color:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200"},{value:"Reuni√≥n interna",icon:"üë•",color:"bg-zinc-100 text-zinc-800 dark:bg-zinc-900 dark:text-zinc-200"},{value:"Psicoorientaci√≥n",icon:"üß†",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}],u=p=>j.find(S=>S.value===p)||{icon:"‚ùì",color:"bg-gray-100 text-gray-800"};let w=f([]),Oe=f([]),$e=f([]),Ye=f([]);const Le=p=>{if(!p)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(p))return p;const S=p.split("/");if(S.length===3){const H=S[0].padStart(2,"0"),U=S[1].padStart(2,"0");return`${S[2].length===2?`20${S[2]}`:S[2]}-${U}-${H}`}const I=new Date(p);if(!isNaN(I.getTime())){const H=I.getFullYear(),U=String(I.getMonth()+1).padStart(2,"0"),ne=String(I.getDate()).padStart(2,"0");return`${H}-${U}-${ne}`}return p},Xe=async()=>{i(N,!0);try{const[p,S,I,H]=await Promise.all([Eo({spreadsheetId:go,worksheetTitle:mo}),Zr(),Qr(),Xr()]);console.log("Respuesta cruda de inasistencias:",p),console.log("Tipo de dato:",typeof p),console.log("Es array:",Array.isArray(p)),p&&typeof p=="object"&&console.log("Keys:",Object.keys(p));const U=R=>{if(!R?.records||!Array.isArray(R.records))return[];const oe=R.records[0]?.values||[];return R.records.slice(1).map(me=>{const et=me.values||[];return{timestamp:et[0]||"",docente:et[1]||"",fecha:et[2]||"",horas:et[3]||"",materia:et[4]||"",motivo:et[5]||"",grado:et[6]||"",nombre:et[7]||"",observaciones:et[8]||""}}).filter(me=>me.docente&&me.fecha)},ne=R=>Array.isArray(R)?R:R?.data&&Array.isArray(R.data)?R.data:R?.rows&&Array.isArray(R.rows)?R.rows:R?.values&&Array.isArray(R.values)?R.values:R?.inasistencias&&Array.isArray(R.inasistencias)?R.inasistencias:[];i(B,U(p)),te=ne(S),ee=ne(I),J=ne(H),i(w,e(B).length>0?[...new Set(e(B).map(R=>R.docente).filter(Boolean))].sort():[]),i(Oe,e(B).length>0?[...new Set(e(B).map(R=>R.materia).filter(Boolean))].sort():[]);const Te=[...new Set(J.map(R=>(typeof R=="string"?R:R.grado||"").toString()).filter(Boolean))],Z=e(B).length>0?e(B).map(R=>R.grado).filter(Boolean):[];i($e,[...new Set([...Te,...Z])].sort((R,oe)=>{const ye=parseInt(R),me=parseInt(oe);return!isNaN(ye)&&!isNaN(me)?ye-me:R.localeCompare(oe)})),i(Ye,e(B).length>0?[...new Set(e(B).map(R=>R.motivo).filter(Boolean))].sort():[]),E(),console.log("Datos cargados:",{inasistencias:e(B).length,docentes:te.length,docentesUnicos:e(w).length,materiasUnicas:e(Oe).length,gradosUnicos:e($e).length,motivosUnicos:e(Ye).length})}catch(p){console.error("Error cargando datos:",p),await Tt.fire({icon:"error",title:"Error",text:"No se pudieron cargar los datos de inasistencias",confirmButtonColor:"#ef4444"})}finally{i(N,!1)}},pt=()=>{i(l,{docente:Fe()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",motivo:""}),E(),i(F,!1)},ae=()=>{if(e(O).length===0){Tt.fire({icon:"warning",title:"Sin datos",text:"No hay datos para exportar",confirmButtonColor:"#f59e0b"});return}const S=[["Fecha","Docente","Materia","Grado","Estudiante","Motivo","Horas","Observaciones"].join(","),...e(O).map(ne=>[ne.fecha,`"${ne.docente}"`,`"${ne.materia}"`,ne.grado,`"${ne.nombre}"`,`"${ne.motivo}"`,ne.horas,`"${ne.observaciones}"`].join(","))].join(`
`),I=new Blob([S],{type:"text/csv;charset=utf-8;"}),H=document.createElement("a"),U=URL.createObjectURL(I);H.setAttribute("href",U),H.setAttribute("download",`inasistencias_${new Date().toISOString().split("T")[0]}.csv`),H.style.visibility="hidden",document.body.appendChild(H),H.click(),document.body.removeChild(H)},h=p=>{try{const[S,I,H]=p.split("-");return S&&I&&H?`${H}/${I}/${S}`:p}catch{return p}},le=p=>{if(!e(l).docente||!e(l).materia||!e(l).grado)return;const I=e(B).filter(U=>{if(U.nombre!==p||U.docente!==e(l).docente||U.materia!==e(l).materia||U.grado!==e(l).grado)return!1;if(e(F)){const ne=Le(U.fecha);if(e(l).fechaInicio&&ne<e(l).fechaInicio||e(l).fechaFin&&ne>e(l).fechaFin)return!1}return!0}).reduce((U,ne)=>{const Te=parseInt(ne.horas)||0;return U+Te},0);let H="";e(F)&&e(l).fechaInicio&&e(l).fechaFin?H=`entre ${h(e(l).fechaInicio)} y ${h(e(l).fechaFin)}`:H="en total (hist√≥rico)",Tt.fire({icon:"info",title:p,html:`
        <div class="text-left space-y-2">
          <p><strong>Materia:</strong> ${e(l).materia}</p>
          <p><strong>Total inasistencias:</strong> ${I} horas</p>
          <p class="text-sm text-gray-500 text-center mt-4">(${H})</p>
        </div>
      `,confirmButtonColor:"#4f46e5"})};br(()=>{Xe()}),Be(()=>(e(l),e(B),e(Oe)),()=>{i(c,e(l).docente?[...new Set(e(B).filter(p=>p.docente===e(l).docente).map(p=>p.materia).filter(Boolean))].sort():e(Oe))}),Be(()=>(e(l),e(B),e($e)),()=>{i(Se,e(l).docente?[...new Set(e(B).filter(p=>p.docente===e(l).docente).map(p=>p.grado).filter(Boolean))].sort((p,S)=>{const I=parseInt(p),H=parseInt(S);return!isNaN(I)&&!isNaN(H)?I-H:p.localeCompare(S)}):e($e))}),Be(()=>(e(l),e(B),e(Se)),()=>{i(v,e(l).materia?[...new Set(e(B).filter(p=>p.materia===e(l).materia).map(p=>p.grado).filter(Boolean))].sort((p,S)=>{const I=parseInt(p),H=parseInt(S);return!isNaN(I)&&!isNaN(H)?I-H:p.localeCompare(S)}):e(Se))}),Be(()=>(e(l),e(B),e(Ye)),()=>{i(M,e(l).docente||e(l).materia||e(l).grado?[...new Set(e(B).filter(p=>!(e(l).docente&&p.docente!==e(l).docente||e(l).materia&&p.materia!==e(l).materia||e(l).grado&&p.grado!==e(l).grado)).map(p=>p.motivo).filter(Boolean))].sort():e(Ye))}),Be(()=>{},()=>{i(r,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Be(()=>(e(B),e(F),e(l),e(O)),()=>{console.log("üîÑ Filtro reactivo ejecut√°ndose:",{totalInasistencias:e(B).length,filtrarPorFecha:e(F),fechaInicio:e(l).fechaInicio,fechaFin:e(l).fechaFin}),i(O,e(B).filter(p=>{if(e(l).docente&&p.docente!==e(l).docente||e(l).materia&&p.materia!==e(l).materia||e(l).grado&&p.grado!==e(l).grado||e(l).motivo&&p.motivo!==e(l).motivo)return!1;if(e(F)){const S=Le(p.fecha);if(e(l).fechaInicio&&S<e(l).fechaInicio||e(l).fechaFin&&S>e(l).fechaFin)return!1}return!0})),console.log(`üìä Resultados filtrados: ${e(O).length} de ${e(B).length}`)}),Be(()=>(e(F),e(l)),()=>{e(F)&&(!e(l).fechaInicio||!e(l).fechaFin)&&E()}),Sr(),Ar();var He=qa(),ze=o(He),de=o(ze),W=o(de),re=o(W),Q=a(re,2),Ge=o(Q),Ne=a(Ge,2),fe=a(W,2),ue=o(fe),Ee=a(ue,2),st=a(de,2),We=o(st);{var ge=p=>{var S=Da(),I=o(S),H=a(o(I),2);D(()=>s(H,`color: ${e(r),t(()=>e(r).text)??""};`)),g(p,S)},C=p=>{var S=Wa(),I=Zt(S),H=o(I),U=o(H),ne=a(o(U));{var Te=_e=>{var Ue=Ea();g(_e,Ue)};X(ne,_e=>{e(l),t(()=>e(l).docente||e(l).materia||e(l).grado||e(l).motivo||e(l).fechaInicio||e(l).fechaFin)&&_e(Te)})}var Z=a(U,2),R=a(H,2),oe=o(R),ye=a(oe,2),me=o(ye),et=a(me,2),rt=a(ye,2),ie=o(rt),L=a(ie,2),K=a(L,2),pe=a(K,2),je=a(pe,2),n=a(R,2),x=o(n),A=o(x),z=o(A),Me=a(z,2),tt=o(Me);tt.value=tt.__value="";var Je=a(tt);he(Je,1,()=>e(w),ke,(_e,Ue)=>{var ft=Ia(),Ot=o(ft),Pt={};D(()=>{b(Ot,e(Ue)),Pt!==(Pt=e(Ue))&&(ft.value=(ft.__value=e(Ue))??"")}),g(_e,ft)});var Ae=a(A,2),Ut=o(Ae),Wt=o(Ut),Nt=a(Ut,2),Ht=o(Nt),nr=o(Ht);Ht.value=Ht.__value="";var jt=a(Ht);he(jt,1,()=>e(c),ke,(_e,Ue)=>{var ft=Ba(),Ot=o(ft),Pt={};D(()=>{b(Ot,e(Ue)),Pt!==(Pt=e(Ue))&&(ft.value=(ft.__value=e(Ue))??"")}),g(_e,ft)});var ot=a(Nt,2);{var lt=_e=>{var Ue=Fa();g(_e,Ue)};X(ot,_e=>{e(l),e(c),t(()=>e(l).docente&&e(c).length===0)&&_e(lt)})}var Et=a(x,2),Rt=o(Et),Gt=o(Rt),It=o(Gt),St=a(Gt,2),qt=o(St),vr=o(qt);qt.value=qt.__value="";var gr=a(qt);he(gr,1,()=>e(v),ke,(_e,Ue)=>{var ft=za(),Ot=o(ft),Pt={};D(()=>{b(Ot,e(Ue)),Pt!==(Pt=e(Ue))&&(ft.value=(ft.__value=e(Ue))??"")}),g(_e,ft)});var ar=a(St,2);{var q=_e=>{var Ue=Ma();g(_e,Ue)};X(ar,_e=>{e(l),e(v),t(()=>(e(l).docente||e(l).materia)&&e(v).length===0)&&_e(q)})}var ce=a(Rt,2),Ke=o(ce),vt=a(Ke,2),mt=o(vt),Lt=o(mt);mt.value=mt.__value="";var fr=a(mt);he(fr,1,()=>e(M),ke,(_e,Ue)=>{const ft=Mt(()=>(e(Ue),t(()=>u(e(Ue)))));var Ot=Ta(),Pt=o(Ot),xr={};D(()=>{b(Pt,`${Re(e(ft)),t(()=>e(ft).icon)??""}
                      ${e(Ue)??""}`),xr!==(xr=e(Ue))&&(Ot.value=(Ot.__value=e(Ue))??"")}),g(_e,Ot)});var Hr=a(vt,2);{var Dr=_e=>{var Ue=Oa();g(_e,Ue)};X(Hr,_e=>{e(l),e(M),t(()=>(e(l).docente||e(l).materia||e(l).grado)&&e(M).length===0)&&_e(Dr)})}var Fr=a(Et,2),Gr=o(Fr),Ur=o(Gr),Er=a(Ur,2),Vr=a(Gr,2),zr=o(Vr),Mr=a(zr,2),Yr=a(I,2),Tr=o(Yr),De=o(Tr),gt=a(o(De)),_t=o(gt),tr=a(Tr,2);{var Qt=_e=>{var Ue=Na(),ft=o(Ue),Ot=o(ft),Pt=a(Ot,2);D(()=>{s(Ot,`color: ${e(r),t(()=>e(r).icon)??""};`),s(Pt,`color: ${e(r),t(()=>e(r).text)??""};`)}),g(_e,Ue)},Or=_e=>{var Ue=Ya(),ft=Zt(Ue),Ot=o(ft),Pt=o(Ot),xr=o(Pt),Nr=o(xr),jr=o(Nr),Rr=a(jr),Wr=a(Rr),Lr=a(Wr),Ir=a(Lr),xe=a(Ir),rr=a(xe),ir=a(rr),wr=a(xr);he(wr,5,()=>e(O),ke,(se,k)=>{const Ie=Mt(()=>(e(k),t(()=>u(e(k).motivo))));var Ze=Ra(),be=o(Ze),it=o(be),Qe=a(be),dt=o(Qe),at=a(Qe),zt=o(at),sr=a(at),pr=o(sr),qe=a(sr),xt=o(qe);{var lr=Bt=>{var Ft=ja(),Kt=o(Ft);D(()=>b(Kt,(e(k),t(()=>e(k).nombre)))),P("click",Ft,()=>le(e(k).nombre)),g(Bt,Ft)},ut=Bt=>{var Ft=zo();D(()=>b(Ft,(e(k),t(()=>e(k).nombre)))),g(Bt,Ft)};X(xt,Bt=>{e(l),t(()=>e(l).docente&&e(l).materia&&e(l).grado)?Bt(lr):Bt(ut,!1)})}var hr=a(qe),Xt=o(hr),Jt=o(Xt),or=o(Jt),mr=a(Jt),At=a(hr),cr=o(At),ur=a(At),qr=o(ur),er=o(qr);D(Bt=>{s(Ze,`border-color: ${e(r),t(()=>e(r).border)??""};`),s(be,`color: ${e(r),t(()=>e(r).text)??""};`),b(it,Bt),s(Qe,`color: ${e(r),t(()=>e(r).text)??""};`),Ct(Qe,"title",(e(k),t(()=>e(k).docente))),b(dt,(e(k),t(()=>e(k).docente))),s(at,`color: ${e(r),t(()=>e(r).text)??""};`),Ct(at,"title",(e(k),t(()=>e(k).materia))),b(zt,(e(k),t(()=>e(k).materia))),s(sr,`color: ${e(r),t(()=>e(r).text)??""};`),b(pr,(e(k),t(()=>e(k).grado))),s(qe,`color: ${e(r),t(()=>e(r).text)??""};`),Ct(qe,"title",(e(k),t(()=>e(k).nombre))),Yt(Xt,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Re(e(Ie)),t(()=>e(Ie).color)??""}`),b(or,(Re(e(Ie)),t(()=>e(Ie).icon))),b(mr,` ${e(k),t(()=>e(k).motivo)??""}`),s(At,`color: ${e(r),t(()=>e(r).text)??""};`),b(cr,(e(k),t(()=>e(k).horas))),s(ur,`color: ${e(r),t(()=>e(r).text)??""};`),b(er,(e(k),t(()=>e(k).observaciones||"-")))},[()=>(e(k),t(()=>h(e(k).fecha)))]),g(se,Ze)});var Pr=a(ft,2),dr=o(Pr),m=o(dr),T=o(m),ve=o(T),Ce=o(ve),Pe=a(Ce),nt=a(Pe),$t=a(nt),Vt=a($t),yt=a(Vt),$r=a(yt),Br=a(T);he(Br,5,()=>e(O),ke,(se,k)=>{const Ie=Mt(()=>(e(k),t(()=>u(e(k).motivo))));var Ze=Pa(),be=o(Ze),it=o(be),Qe=a(be),dt=o(Qe),at=o(dt),zt=a(Qe),sr=o(zt),pr=a(zt),qe=o(pr),xt=o(qe);{var lr=er=>{var Bt=La(),Ft=o(Bt);D(()=>b(Ft,(e(k),t(()=>e(k).nombre)))),P("click",Bt,()=>le(e(k).nombre)),g(er,Bt)},ut=er=>{var Bt=zo();D(()=>b(Bt,(e(k),t(()=>e(k).nombre)))),g(er,Bt)};X(xt,er=>{e(l),t(()=>e(l).docente&&e(l).materia&&e(l).grado)?er(lr):er(ut,!1)})}var hr=a(pr),Xt=o(hr),Jt=o(Xt),or=o(Jt),mr=a(Jt),At=a(hr),cr=o(At),ur=a(At),qr=o(ur);D(er=>{s(Ze,`border-color: ${e(r),t(()=>e(r).border)??""};`),s(be,`color: ${e(r),t(()=>e(r).text)??""};`),b(it,er),s(Qe,`color: ${e(r),t(()=>e(r).text)??""};`),Ct(dt,"title",(e(k),t(()=>e(k).docente))),b(at,(e(k),t(()=>e(k).docente))),s(zt,`color: ${e(r),t(()=>e(r).text)??""};`),Ct(zt,"title",(e(k),t(()=>e(k).materia))),b(sr,(e(k),t(()=>e(k).materia))),s(pr,`color: ${e(r),t(()=>e(r).text)??""};`),Ct(qe,"title",(e(k),t(()=>e(k).nombre))),Yt(Xt,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Re(e(Ie)),t(()=>e(Ie).color)??""}`),b(or,(Re(e(Ie)),t(()=>e(Ie).icon))),b(mr,` ${e(k),t(()=>e(k).motivo)??""}`),s(At,`color: ${e(r),t(()=>e(r).text)??""};`),b(cr,(e(k),t(()=>e(k).horas))),s(ur,`color: ${e(r),t(()=>e(r).text)??""};`),b(qr,(e(k),t(()=>e(k).grado)))},[()=>(e(k),t(()=>h(e(k).fecha)))]),g(se,Ze)});var _=a(Pr,2),V=o(_);he(V,5,()=>e(O),ke,(se,k)=>{const Ie=Mt(()=>(e(k),t(()=>u(e(k).motivo))));var Ze=Va(),be=o(Ze),it=o(be),Qe=o(it);{var dt=Ft=>{var Kt=Ha(),Jr=o(Kt);D(()=>b(Jr,(e(k),t(()=>e(k).nombre)))),P("click",Kt,()=>le(e(k).nombre)),g(Ft,Kt)},at=Ft=>{var Kt=Ga(),Jr=o(Kt);D(()=>b(Jr,(e(k),t(()=>e(k).nombre)))),g(Ft,Kt)};X(Qe,Ft=>{e(l),t(()=>e(l).docente&&e(l).materia&&e(l).grado)?Ft(dt):Ft(at,!1)})}var zt=a(Qe,2),sr=o(zt),pr=a(it,2),qe=o(pr),xt=o(qe),lr=o(xt),ut=a(xt),hr=a(qe,2),Xt=o(hr),Jt=a(be,2),or=o(Jt),mr=a(o(or),2),At=o(mr),cr=a(or,2),ur=a(o(cr),2),qr=o(ur),er=a(Jt,2);{var Bt=Ft=>{var Kt=Ua(),Jr=o(Kt),co=a(o(Jr),2),_o=o(co);D(()=>{s(Kt,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; color: ${e(r),t(()=>e(r).label)??""};`),b(_o,(e(k),t(()=>e(k).observaciones)))}),g(Ft,Kt)};X(er,Ft=>{e(k),t(()=>e(k).observaciones)&&Ft(Bt)})}D(Ft=>{s(Ze,`border-color: ${e(r),t(()=>e(r).cardBorder)??""}; background-color: ${e(r),t(()=>e(r).cardBg)??""};`),s(zt,`color: ${e(r),t(()=>e(r).label)??""};`),b(sr,`${e(k),t(()=>e(k).grado)??""} ‚Ä¢ ${Ft??""}`),Yt(qe,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium ${Re(e(Ie)),t(()=>e(Ie).color)??""} mb-0.5`),b(lr,(Re(e(Ie)),t(()=>e(Ie).icon))),b(ut,` ${e(k),t(()=>e(k).motivo)??""}`),s(hr,`color: ${e(r),t(()=>e(r).text)??""};`),b(Xt,`${e(k),t(()=>e(k).horas)??""}h`),s(Jt,`color: ${e(r),t(()=>e(r).text)??""};`),b(At,(e(k),t(()=>e(k).docente))),Ct(ur,"title",(e(k),t(()=>e(k).materia))),b(qr,(e(k),t(()=>e(k).materia)))},[()=>(e(k),t(()=>h(e(k).fecha)))]),g(se,Ze)}),D(()=>{s(Ot,`border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),s(xr,`background-color: ${e(r),t(()=>e(r).cardBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""};`),s(jr,`color: ${e(r),t(()=>e(r).text)??""};`),s(Rr,`color: ${e(r),t(()=>e(r).text)??""};`),s(Wr,`color: ${e(r),t(()=>e(r).text)??""};`),s(Lr,`color: ${e(r),t(()=>e(r).text)??""};`),s(Ir,`color: ${e(r),t(()=>e(r).text)??""};`),s(xe,`color: ${e(r),t(()=>e(r).text)??""};`),s(rr,`color: ${e(r),t(()=>e(r).text)??""};`),s(ir,`color: ${e(r),t(()=>e(r).text)??""};`),s(dr,`border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),s(T,`background-color: ${e(r),t(()=>e(r).cardBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""};`),s(Ce,`color: ${e(r),t(()=>e(r).text)??""};`),s(Pe,`color: ${e(r),t(()=>e(r).text)??""};`),s(nt,`color: ${e(r),t(()=>e(r).text)??""};`),s($t,`color: ${e(r),t(()=>e(r).text)??""};`),s(Vt,`color: ${e(r),t(()=>e(r).text)??""};`),s(yt,`color: ${e(r),t(()=>e(r).text)??""};`),s($r,`color: ${e(r),t(()=>e(r).text)??""};`)}),g(_e,Ue)};X(tr,_e=>{e(O),t(()=>e(O).length===0)?_e(Qt):_e(Or,!1)})}D(()=>{s(I,`border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),s(U,`color: ${e(r),t(()=>e(r).text)??""};`),s(Z,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(oe,`color: ${e(r),t(()=>e(r).text)??""};`),s(et,`color: ${e(r),t(()=>e(r).text)??""};`),s(ie,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(L,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(K,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(pe,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(je,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(z,`color: ${e(r),t(()=>e(r).label)??""};`),s(Me,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(Ut,`color: ${e(r),t(()=>e(r).label)??""};`),b(Wt,`Materia ${e(l),t(()=>e(l).docente?"(del docente)":"")??""}`),s(Nt,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),b(nr,(e(l),t(()=>e(l).docente?"Todas las materias del docente":"Todas las materias"))),s(Gt,`color: ${e(r),t(()=>e(r).label)??""};`),b(It,`Grado ${e(l),t(()=>e(l).docente||e(l).materia?"(filtrado)":"")??""}`),s(St,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),b(vr,(e(l),t(()=>e(l).docente||e(l).materia?"Todos los grados filtrados":"Todos los grados"))),s(Ke,`color: ${e(r),t(()=>e(r).label)??""};`),s(vt,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),b(Lt,(e(l),t(()=>e(l).docente||e(l).materia||e(l).grado?"Todos los motivos filtrados":"Todos los motivos"))),s(Ur,`color: ${e(r),t(()=>e(r).label)??""};`),Er.disabled=!e(F),s(Er,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(zr,`color: ${e(r),t(()=>e(r).label)??""};`),Mr.disabled=!e(F),s(Mr,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(De,`color: ${e(r),t(()=>e(r).label)??""};`),b(_t,(e(O),t(()=>e(O).length)))}),P("click",Z,pt),Ao(me,()=>e(F),_e=>i(F,_e)),P("click",ie,()=>G("hoy")),P("click",L,()=>G("semana")),P("click",K,()=>G("mes")),P("click",pe,()=>G("mes_actual")),P("click",je,()=>G("trimestre")),ct(Me,()=>e(l).docente,_e=>(we(l,e(l).docente=_e),Ve(()=>{e(r),e(w),e(c),e(v),e(M)}))),ct(Nt,()=>e(l).materia,_e=>(we(l,e(l).materia=_e),Ve(()=>{e(r),e(w),e(c),e(v),e(M)}))),ct(St,()=>e(l).grado,_e=>(we(l,e(l).grado=_e),Ve(()=>{e(r),e(w),e(c),e(v),e(M)}))),ct(vt,()=>e(l).motivo,_e=>(we(l,e(l).motivo=_e),Ve(()=>{e(r),e(w),e(c),e(v),e(M)}))),_r(Er,()=>e(l).fechaInicio,_e=>(we(l,e(l).fechaInicio=_e),Ve(()=>{e(r),e(w),e(c),e(v),e(M)}))),_r(Mr,()=>e(l).fechaFin,_e=>(we(l,e(l).fechaFin=_e),Ve(()=>{e(r),e(w),e(c),e(v),e(M)}))),g(p,S)};X(We,p=>{e(N)?p(ge):p(C,!1)})}D(()=>{s(ze,`background-color: ${e(r),t(()=>e(r).cardBg)??""};`),s(de,`border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),Ct(re,"src",ro),s(Ge,`color: ${e(r),t(()=>e(r).text)??""};`),s(Ne,`color: ${e(r),t(()=>e(r).label)??""};`),ue.disabled=(e(O),t(()=>e(O).length===0)),s(Ee,`color: ${e(r),t(()=>e(r).text)??""};`)}),P("click",ue,ae),P("click",Ee,function(...p){d()?.apply(this,p)}),P("click",He,lo(function(...p){d()?.apply(this,p)})),P("keydown",He,p=>{(p.key==="Enter"||p.key===" ")&&d()()}),g(Y,He),kr()}var Ka=y('<p class="text-sm font-medium tracking-wide animate-pulse" style="color: rgb(var(--text-secondary));"> </p>'),Za=y('<div class="flex flex-col items-center justify-center gap-4 p-8 animate-in fade-in duration-500"><div><div class="absolute inset-0 bg-indigo-500/20 blur-xl rounded-full animate-pulse"></div> <div class="absolute inset-0 rounded-full border-2 border-indigo-500/20 border-t-indigo-500 animate-spin"></div> <div class="absolute inset-2 rounded-full border-2 border-violet-500/20 border-b-violet-500 animate-[spin_1.5s_linear_infinite_reverse]"></div> <div class="absolute inset-[35%] bg-gradient-to-tr from-indigo-600 to-violet-600 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)] animate-pulse"></div></div> <!></div>');function io(Y,$){yr($,!1);const c=f();let Se=Dt($,"size",8,"medium"),v=Dt($,"message",8,"");const M={small:"w-8 h-8",medium:"w-16 h-16",large:"w-24 h-24"};Be(()=>Re(Se()),()=>{i(c,M[Se()]||M.medium)}),Sr();var r=Za(),d=o(r),Fe=a(d,2);{var B=te=>{var ee=Ka(),J=o(ee);D(()=>b(J,v())),g(te,ee)};X(Fe,te=>{v()&&te(B)})}D(()=>Yt(d,1,`relative ${e(c)??""}`)),g(Y,r),kr()}var Qa=y('<div class="flex justify-center py-12"><!></div>'),Xa=y("<option> </option>"),es=y("<option> </option>"),ts=y("<option> </option>"),rs=y("<option> </option>"),os=wt('<svg class="animate-spin h-5 w-5" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Generando...',1),as=wt('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg> Ver Reporte',1),ss=y('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="space-y-2"><label for="view-docente" class="block text-sm font-medium">Docente</label> <select id="view-docente" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione docente</option><!></select></div> <div class="space-y-2"><label for="view-materia" class="block text-sm font-medium">Materia</label> <select id="view-materia" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione materia</option><!></select></div> <div class="space-y-2"><label for="view-grado" class="block text-sm font-medium">Grado</label> <select id="view-grado" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione grado</option><!></select></div> <div class="space-y-2"><label for="view-periodo" class="block text-sm font-medium">Periodo</label> <select id="view-periodo" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"></select></div></div> <div class="pt-4 flex gap-3"><button class="flex-1 px-6 py-3 border rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors font-medium">Cancelar</button> <button class="flex-[2] px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"><!></button></div>',1),ls=y('<th class="p-2 border text-white font-bold text-center sticky top-0 z-20" style="background-color: #4472C4; min-width: 60px;"> </th>'),ns=y('<td class="p-2 border text-center font-medium bg-white cell-hover svelte-14neep5"> </td>'),is=y('<tr class="hover-row svelte-14neep5"><td class="p-2 border font-medium sticky left-0 z-10 bg-[#F2F2F2] svelte-14neep5" style="background-color: #F2F2F2;"> </td><!><td class="p-2 border text-center font-bold bg-white cell-hover svelte-14neep5"> </td></tr>'),ds=y('<div class="space-y-4 min-w-0"><div class="text-center p-4 rounded-lg flex-shrink-0" style="background-color: #2E75B6; color: white;"><h3 class="text-lg font-bold whitespace-nowrap"> </h3></div> <div class="p-3 rounded-lg text-sm flex-shrink-0" style="background-color: #5B9BD5; color: white;"><p class="font-medium whitespace-nowrap"> </p></div> <div class="overflow-auto border rounded-lg flex-1 min-h-[200px] max-h-[50vh]"><table class="w-full border-collapse text-xs md:text-sm"><thead class="sticky top-0 z-30 shadow-sm"><tr><th class="p-2 border text-white font-bold sticky left-0 z-40" style="background-color: #4472C4; width: 200px;">Estudiantes</th><!><th class="p-2 border text-white font-bold text-center sticky top-0 z-20" style="background-color: #FF6B6B; width: 80px;">Total Horas</th></tr></thead><tbody class="bg-white"></tbody></table></div> <div class="pt-4 flex gap-3 flex-shrink-0"><button class="flex-1 px-6 py-3 border rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors font-medium">Nueva Consulta</button> <button class="flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-xl transition-colors font-medium">Cerrar</button></div></div>'),cs=y('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-2 md:p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-[95vw] max-h-[90vh] overflow-hidden shadow-2xl border flex flex-col"><div class="flex items-center justify-between p-4 md:p-6 border-b flex-shrink-0"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h2 id="modal-title" class="text-lg md:text-xl font-bold">Vista de Reporte</h2> <p class="text-sm opacity-75">Inasistencias por materia y grado</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-4 md:p-6 space-y-4 overflow-y-auto flex-1"><!></div></div></div>');function Ro(Y,$){yr($,!1);const c=f();let Se=Dt($,"onClose",8),v=Dt($,"initialDocente",8,""),M=f([]),r=f([]),d=f([]),Fe=f(v()||""),B=f(""),te=f(""),ee=f(ao[0].nombre),J=f(!1),N=f(!1),F=f(null);const O=ae=>ae?ae.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g," ").trim().toLowerCase():"",l=ae=>{if(!ae)return"";const h=ae.split("/");if(h.length===3){const le=h[0].padStart(2,"0"),He=h[1].padStart(2,"0");return`${h[2]}-${He}-${le}`}return ae},E=ae=>{const h=[],le=new Date(ae.fecha_inicio),He=new Date(ae.fecha_fin);for(;le<=He;){const ze=le.getUTCDay();ze>=1&&ze<=6&&h.push(new Date(le)),le.setUTCDate(le.getUTCDate()+1)}return h},G=ae=>{const h=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return`${ae.getUTCDate()}/${h[ae.getUTCMonth()]}/${ae.getUTCFullYear().toString().substr(2)}`};br(async()=>{i(J,!0);try{const[ae,h,le]=await Promise.all([Zr(),Qr(),Xr()]);i(M,ae),i(r,h),i(d,le)}catch(ae){console.error("Error cargando datos iniciales:",ae)}finally{i(J,!1)}});const j=async()=>{if(!e(Fe)||!e(B)||!e(te)){Tt.fire({icon:"warning",title:"Campos incompletos",text:"Por favor seleccione Docente, Materia y Grado."});return}const ae=ao.find(h=>h.nombre===e(ee));if(!ae){Tt.fire({icon:"error",title:"Error",text:"Periodo no encontrado"});return}i(N,!0);try{const h=await Eo({spreadsheetId:go,worksheetTitle:mo});if(!h?.records||!Array.isArray(h.records))throw new Error("No se pudieron obtener los registros de inasistencias");const le=h.records.slice(1),He=O(e(Fe)),ze=O(e(B)),de=e(te).toString().trim(),W=le.map(fe=>{const ue=fe.values||[];return{fecha:ue[2]||"",docente:ue[1]||"",materia:ue[4]||"",grado:(ue[6]||"").toString().trim(),nombre:ue[7]||"",motivo:ue[5]||"",horas:ue[3]||"0"}}).filter(fe=>{const ue=O(fe.docente),Ee=O(fe.materia),st=fe.grado,We=ue.includes(He)||He.includes(ue),ge=Ee.includes(ze)||ze.includes(Ee),C=st===de||st.startsWith(de)||de.startsWith(st),p=l(fe.fecha),S=new Date(p),I=new Date(ae.fecha_inicio),H=new Date(ae.fecha_fin);I.setHours(0,0,0,0),H.setHours(23,59,59,999);const U=S>=I&&S<=H;return We&&ge&&C&&U}),re=e(d).filter(fe=>fe.grado.toString()===e(te)).map(fe=>fe.nombre).sort();if(re.length===0)throw new Error("No hay estudiantes registrados para el grado seleccionado");const Ge=E(ae).filter(fe=>{const ue=fe.toISOString().split("T")[0];return W.some(Ee=>l(Ee.fecha)===ue)});if(Ge.length===0){Tt.fire({icon:"info",title:"Sin datos",text:"No se encontraron inasistencias para los filtros seleccionados en este periodo."});return}const Ne=re.map(fe=>{const ue=[];let Ee=0;return Ge.forEach(st=>{const We=st.toISOString().split("T")[0],ge=W.filter(C=>O(C.nombre)===O(fe)&&l(C.fecha)===We);if(ge.length>0){const C=ge[0],p=parseFloat(C.horas)||0,S=C.motivo||"";p>0?(ue.push({valor:p.toString(),horas:p}),Ee+=p):S?ue.push({valor:S,horas:0}):ue.push({valor:"X",horas:0})}else ue.push({valor:"‚úì",horas:0})}),{nombre:fe,registros:ue,totalHoras:Ee}});i(F,{docente:e(Fe),materia:e(B),grado:e(te),periodo:ae.nombre,fechaInicio:G(ae.fecha_inicio),fechaFin:G(ae.fecha_fin),fechas:Ge.map(fe=>G(fe)),estudiantes:Ne})}catch(h){console.error("Error generando reporte:",h);const le=h instanceof Error?h.message:"Error desconocido";Tt.fire({icon:"error",title:"Error",text:le})}finally{i(N,!1)}};Be(()=>{},()=>{i(c,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Sr(),Ar();var u=cs(),w=o(u),Oe=o(w),$e=a(o(Oe),2),Ye=a(Oe,2),Le=o(Ye);{var Xe=ae=>{var h=Qa(),le=o(h);io(le,{message:"Cargando datos..."}),g(ae,h)},pt=ae=>{var h=po(),le=Zt(h);{var He=de=>{var W=ss(),re=Zt(W),Q=o(re),Ge=o(Q),Ne=a(Ge,2),fe=o(Ne);fe.value=fe.__value="";var ue=a(fe);he(ue,1,()=>e(M),ke,(ie,L)=>{var K=Xa(),pe=o(K),je={};D(()=>{b(pe,e(L)),je!==(je=e(L))&&(K.value=(K.__value=e(L))??"")}),g(ie,K)});var Ee=a(Q,2),st=o(Ee),We=a(st,2),ge=o(We);ge.value=ge.__value="";var C=a(ge);he(C,1,()=>e(r),ke,(ie,L)=>{var K=es(),pe=o(K),je={};D(()=>{b(pe,(e(L),t(()=>e(L).materia))),je!==(je=(e(L),t(()=>e(L).materia)))&&(K.value=(K.__value=(e(L),t(()=>e(L).materia)))??"")}),g(ie,K)});var p=a(Ee,2),S=o(p),I=a(S,2),H=o(I);H.value=H.__value="";var U=a(H);he(U,1,()=>(e(d),t(()=>[...new Set(e(d).map(ie=>ie.grado.toString()))])),ke,(ie,L)=>{var K=ts(),pe=o(K),je={};D(n=>{b(pe,n),je!==(je=e(L))&&(K.value=(K.__value=e(L))??"")},[()=>(e(L),t(()=>e(L).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),g(ie,K)});var ne=a(p,2),Te=o(ne),Z=a(Te,2);he(Z,5,()=>ao,ke,(ie,L)=>{var K=rs(),pe=o(K),je={};D(()=>{b(pe,`Periodo ${e(L),t(()=>e(L).nombre)??""}`),je!==(je=(e(L),t(()=>e(L).nombre)))&&(K.value=(K.__value=(e(L),t(()=>e(L).nombre)))??"")}),g(ie,K)});var R=a(re,2),oe=o(R),ye=a(oe,2),me=o(ye);{var et=ie=>{var L=os();g(ie,L)},rt=ie=>{var L=as();g(ie,L)};X(me,ie=>{e(N)?ie(et):ie(rt,!1)})}D(()=>{s(Ge,`color: ${e(c),t(()=>e(c).label)??""};`),s(Ne,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(st,`color: ${e(c),t(()=>e(c).label)??""};`),s(We,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(S,`color: ${e(c),t(()=>e(c).label)??""};`),s(I,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(Te,`color: ${e(c),t(()=>e(c).label)??""};`),s(Z,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(oe,`border-color: ${e(c),t(()=>e(c).border)??""};`),ye.disabled=e(N)||!e(Fe)||!e(B)||!e(te)}),ct(Ne,()=>e(Fe),ie=>i(Fe,ie)),ct(We,()=>e(B),ie=>i(B,ie)),ct(I,()=>e(te),ie=>i(te,ie)),ct(Z,()=>e(ee),ie=>i(ee,ie)),P("click",oe,function(...ie){Se()?.apply(this,ie)}),P("click",ye,j),g(de,W)},ze=de=>{var W=ds(),re=o(W),Q=o(re),Ge=o(Q),Ne=a(re,2),fe=o(Ne),ue=o(fe),Ee=a(Ne,2),st=o(Ee),We=o(st),ge=o(We),C=a(o(ge));he(C,1,()=>(e(F),t(()=>e(F).fechas)),ke,(U,ne)=>{var Te=ls(),Z=o(Te);D(()=>b(Z,e(ne))),g(U,Te)});var p=a(We);he(p,5,()=>(e(F),t(()=>e(F).estudiantes)),ke,(U,ne)=>{var Te=is(),Z=o(Te),R=o(Z),oe=a(Z);he(oe,1,()=>(e(ne),t(()=>e(ne).registros)),ke,(et,rt)=>{const ie=Mt(()=>(e(rt),t(()=>e(rt).valor==="‚úì")));var L=ns(),K=o(L);D(()=>{s(L,e(ie)?"color: #00AA00;":"color: #FF0000; background-color: #FFE6E6;"),b(K,(e(rt),t(()=>e(rt).valor)))}),g(et,L)});var ye=a(oe),me=o(ye);D(()=>{b(R,(e(ne),t(()=>e(ne).nombre))),s(ye,(e(ne),t(()=>e(ne).totalHoras>0?"color: #FF0000; background-color: #FFE6E6;":"color: #00AA00; background-color: #E6FFE6;"))),b(me,(e(ne),t(()=>e(ne).totalHoras)))}),g(U,Te)});var S=a(Ee,2),I=o(S),H=a(I,2);D(()=>{b(Ge,`REPORTE DE INASISTENCIAS - ${e(F),t(()=>e(F).materia)??""} - GRADO ${e(F),t(()=>e(F).grado)??""}`),b(ue,`Docente: ${e(F),t(()=>e(F).docente)??""} | Periodo: ${e(F),t(()=>e(F).periodo)??""} (${e(F),t(()=>e(F).fechaInicio)??""} - ${e(F),t(()=>e(F).fechaFin)??""})`),s(I,`border-color: ${e(c),t(()=>e(c).border)??""};`)}),P("click",I,()=>i(F,null)),P("click",H,function(...U){Se()?.apply(this,U)}),g(de,W)};X(le,de=>{e(F)?de(ze,!1):de(He)})}g(ae,h)};X(Le,ae=>{e(J)?ae(Xe):ae(pt,!1)})}D(()=>{s(w,`background-color: ${e(c),t(()=>e(c).cardBg)??""}; border-color: ${e(c),t(()=>e(c).cardBorder)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(Oe,`border-color: ${e(c),t(()=>e(c).cardBorder)??""};`)}),P("click",$e,function(...ae){Se()?.apply(this,ae)}),P("click",u,lo(function(...ae){Se()?.apply(this,ae)})),P("keydown",u,ae=>ae.key==="Escape"&&Se()()),g(Y,u),kr()}var vs=y('<div class="flex justify-center py-12"><!></div>'),gs=y("<option> </option>"),ps=y("<option> </option>"),us=y("<option> </option>"),bs=y("<option> </option>"),fs=wt('<svg class="animate-spin h-5 w-5 text-white" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Generando...',1),xs=wt('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg> Descargar Excel',1),hs=y('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="space-y-2"><label for="rep-docente" class="block text-sm font-medium">Docente</label> <select id="rep-docente" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione docente</option><!></select></div> <div class="space-y-2"><label for="rep-materia" class="block text-sm font-medium">Materia</label> <select id="rep-materia" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione materia</option><!></select></div> <div class="space-y-2"><label for="rep-grado" class="block text-sm font-medium">Grado</label> <select id="rep-grado" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione grado</option><!></select></div> <div class="space-y-2"><label for="rep-periodo" class="block text-sm font-medium">Periodo</label> <select id="rep-periodo" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"></select></div></div> <div class="pt-4 flex gap-3"><button class="flex-1 px-6 py-3 border rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors font-medium">Cancelar</button> <button class="flex-1 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg hover:shadow-green-500/20"><!></button></div>',1),ms=y('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-2xl overflow-hidden shadow-2xl border"><div class="flex items-center justify-between p-6 border-b"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h2 id="modal-title" class="text-xl font-bold">Generador de Reporte Excel</h2> <p class="text-sm opacity-75">Inasistencias por materia y grado</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar modal"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 space-y-6"><!></div></div></div> <!>',1);function _s(Y,$){yr($,!1);const c=f();let Se=null,v=null,M=Dt($,"onClose",8),r=Dt($,"initialDocente",8,""),d=f([]),Fe=f([]),B=f([]),te=f(r()||""),ee=f(""),J=f(""),N=f(ao[0].nombre),F=f(!1),O=f(!1),l=f(!1);const E=async()=>{if(!Se||!v){const[W,re]=await Promise.all([so(()=>import("./excel-G1qE2FwJ.js").then(Q=>Q.e),[]),so(()=>import("./utils-Dc41pFlL.js").then(Q=>Q.F),__vite__mapDeps([0,1]))]);Se=W.default,v=re.default}},G=W=>W?W.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g," ").trim().toLowerCase():"",j=W=>{if(!W)return"";const re=W.split("/");if(re.length===3){const Q=re[0].padStart(2,"0"),Ge=re[1].padStart(2,"0");return`${re[2]}-${Ge}-${Q}`}return W},u=W=>{const re=[],Q=new Date(W.fecha_inicio),Ge=new Date(W.fecha_fin);for(;Q<=Ge;){const Ne=Q.getUTCDay();Ne>=1&&Ne<=6&&re.push(new Date(Q)),Q.setUTCDate(Q.getUTCDate()+1)}return re},w=W=>{const re=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return`${W.getUTCDate()}/${re[W.getUTCMonth()]}/${W.getUTCFullYear().toString().substr(2)}`};br(async()=>{i(F,!0);try{const[W,re,Q]=await Promise.all([Zr(),Qr(),Xr()]);i(d,W),i(Fe,re),i(B,Q)}catch(W){console.error("Error cargando datos iniciales:",W)}finally{i(F,!1)}});const Oe=async()=>{if(await E(),!e(te)||!e(ee)||!e(J)){Tt.fire({icon:"warning",title:"Campos incompletos",text:"Por favor seleccione Docente, Materia y Grado."});return}const W=ao.find(re=>re.nombre===e(N));if(!W){Tt.fire({icon:"error",title:"Error",text:"Periodo no encontrado"});return}i(O,!0);try{const re=await Eo({spreadsheetId:go,worksheetTitle:mo});if(!re?.records||!Array.isArray(re.records))throw new Error("No se pudieron obtener los registros de inasistencias");const Q=re.records.slice(1),Ge=G(e(te)),Ne=G(e(ee)),fe=e(J).toString().trim(),ue=Q.map(R=>{const oe=R.values||[];return{fecha:oe[2]||"",docente:oe[1]||"",materia:oe[4]||"",grado:(oe[6]||"").toString().trim(),nombre:oe[7]||"",motivo:oe[5]||"",horas:oe[3]||"0"}}).filter(R=>{const oe=G(R.docente),ye=G(R.materia),me=R.grado,et=oe.includes(Ge)||Ge.includes(oe),rt=ye.includes(Ne)||Ne.includes(ye),ie=me===fe||me.startsWith(fe)||fe.startsWith(me),L=j(R.fecha),K=new Date(L),pe=new Date(W.fecha_inicio),je=new Date(W.fecha_fin);pe.setHours(0,0,0,0),je.setHours(23,59,59,999);const n=K>=pe&&K<=je;return et&&rt&&ie&&n}),Ee=e(B).filter(R=>R.grado.toString()===e(J)).map(R=>R.nombre).sort();if(Ee.length===0)throw new Error("No hay estudiantes registrados para el grado seleccionado");const We=u(W).filter(R=>{const oe=R.toISOString().split("T")[0];return ue.some(ye=>j(ye.fecha)===oe)});if(We.length===0){Tt.fire({icon:"info",title:"Sin datos",text:"No se encontraron inasistencias para los filtros seleccionados en este periodo."}),i(O,!1);return}const ge=new Se.Workbook,C=ge.addWorksheet("Reporte de Inasistencias"),p=We.length+2,S=C.addRow([`REPORTE DE INASISTENCIAS - ${e(ee)} - GRADO ${e(J)}`]);S.height=30,S.font={bold:!0,size:16,color:{argb:"FFFFFF"}},S.fill={type:"pattern",pattern:"solid",fgColor:{argb:"2E75B6"}},S.alignment={vertical:"middle",horizontal:"center"},C.mergeCells(1,1,1,p);const I=C.addRow([`Docente: ${e(te)} | Periodo: ${W.nombre} (${w(W.fecha_inicio)} - ${w(W.fecha_fin)})`]);I.height=20,I.font={bold:!0,size:10,color:{argb:"FFFFFF"}},I.fill={type:"pattern",pattern:"solid",fgColor:{argb:"5B9BD5"}},I.alignment={vertical:"middle",horizontal:"left"},C.mergeCells(2,1,2,p);const H=["Estudiantes",...We.map(R=>w(R)),"Total Horas"],U=C.addRow(H);U.height=25,U.font={bold:!0,size:11,color:{argb:"FFFFFF"}},U.alignment={vertical:"middle",horizontal:"center"},C.getColumn(1).width=35,We.forEach((R,oe)=>{C.getColumn(oe+2).width=22}),C.getColumn(p).width=15,U.eachCell((R,oe)=>{R.fill={type:"pattern",pattern:"solid",fgColor:{argb:oe===p?"FF6B6B":"4472C4"}},R.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}),Ee.forEach(R=>{const oe=[R];let ye=0;We.forEach(rt=>{const ie=rt.toISOString().split("T")[0],L=ue.filter(K=>G(K.nombre)===G(R)&&j(K.fecha)===ie);if(L.length>0){const K=L[0],pe=parseFloat(K.horas)||0,je=K.motivo||"";pe>0?(oe.push(pe.toString()),ye+=pe):je?oe.push(je):oe.push("X")}else oe.push("‚úì")}),oe.push(ye.toString());const me=C.addRow(oe);me.height=30,me.getCell(1).font={bold:!0},me.getCell(1).fill={type:"pattern",pattern:"solid",fgColor:{argb:"F2F2F2"}},We.forEach((rt,ie)=>{const L=me.getCell(ie+2);L.alignment={horizontal:"center",vertical:"middle",wrapText:!0};const K=L.value?.toString()||"",pe=parseFloat(K)||0;K==="‚úì"?L.font={color:{argb:"00AA00"}}:pe>0||isNaN(pe)?(L.font={color:{argb:"FF0000"},bold:!0},L.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE6E6"}}):(L.font={color:{argb:"FF0000"},bold:!0},L.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE6E6"}})});const et=me.getCell(p);et.font={bold:!0,color:{argb:ye>0?"FF0000":"00AA00"}},et.alignment={horizontal:"center"},et.fill={type:"pattern",pattern:"solid",fgColor:{argb:ye>0?"FFE6E6":"E6FFE6"}},me.eachCell(rt=>{rt.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})});const ne=await ge.xlsx.writeBuffer(),Te=new Blob([ne],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Z=`Reporte_Inasistencias_${e(J)}_${e(ee).replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.xlsx`;v(Te,Z),Tt.fire({icon:"success",title:"Reporte generado",text:`Se ha generado el reporte con ${Ee.length} estudiantes.`,timer:2e3,showConfirmButton:!1})}catch(re){console.error("Error generando Excel:",re);const Q=re instanceof Error?re.message:"Error desconocido";Tt.fire({icon:"error",title:"Error",text:Q})}finally{i(O,!1)}};Be(()=>{},()=>{i(c,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Sr(),Ar();var $e=ms(),Ye=Zt($e),Le=o(Ye),Xe=o(Le),pt=a(o(Xe),2),ae=a(Xe,2),h=o(ae);{var le=W=>{var re=vs(),Q=o(re);io(Q,{message:"Cargando datos..."}),g(W,re)},He=W=>{var re=hs(),Q=Zt(re),Ge=o(Q),Ne=o(Ge),fe=a(Ne,2),ue=o(fe);ue.value=ue.__value="";var Ee=a(ue);he(Ee,1,()=>e(d),ke,(L,K)=>{var pe=gs(),je=o(pe),n={};D(()=>{b(je,e(K)),n!==(n=e(K))&&(pe.value=(pe.__value=e(K))??"")}),g(L,pe)});var st=a(Ge,2),We=o(st),ge=a(We,2),C=o(ge);C.value=C.__value="";var p=a(C);he(p,1,()=>e(Fe),ke,(L,K)=>{var pe=ps(),je=o(pe),n={};D(()=>{b(je,(e(K),t(()=>e(K).materia))),n!==(n=(e(K),t(()=>e(K).materia)))&&(pe.value=(pe.__value=(e(K),t(()=>e(K).materia)))??"")}),g(L,pe)});var S=a(st,2),I=o(S),H=a(I,2),U=o(H);U.value=U.__value="";var ne=a(U);he(ne,1,()=>(e(B),t(()=>[...new Set(e(B).map(L=>L.grado.toString()))])),ke,(L,K)=>{var pe=us(),je=o(pe),n={};D(x=>{b(je,x),n!==(n=e(K))&&(pe.value=(pe.__value=e(K))??"")},[()=>(e(K),t(()=>e(K).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),g(L,pe)});var Te=a(S,2),Z=o(Te),R=a(Z,2);he(R,5,()=>ao,ke,(L,K)=>{var pe=bs(),je=o(pe),n={};D(()=>{b(je,`Periodo ${e(K),t(()=>e(K).nombre)??""}`),n!==(n=(e(K),t(()=>e(K).nombre)))&&(pe.value=(pe.__value=(e(K),t(()=>e(K).nombre)))??"")}),g(L,pe)});var oe=a(Q,2),ye=o(oe),me=a(ye,2),et=o(me);{var rt=L=>{var K=fs();g(L,K)},ie=L=>{var K=xs();g(L,K)};X(et,L=>{e(O)?L(rt):L(ie,!1)})}D(()=>{s(Ne,`color: ${e(c),t(()=>e(c).label)??""};`),s(fe,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(We,`color: ${e(c),t(()=>e(c).label)??""};`),s(ge,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(I,`color: ${e(c),t(()=>e(c).label)??""};`),s(H,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(Z,`color: ${e(c),t(()=>e(c).label)??""};`),s(R,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(ye,`border-color: ${e(c),t(()=>e(c).border)??""};`),me.disabled=e(O)||!e(te)||!e(ee)||!e(J)}),ct(fe,()=>e(te),L=>i(te,L)),ct(ge,()=>e(ee),L=>i(ee,L)),ct(H,()=>e(J),L=>i(J,L)),ct(R,()=>e(N),L=>i(N,L)),P("click",ye,function(...L){M()?.apply(this,L)}),P("click",me,Oe),g(W,re)};X(h,W=>{e(F)?W(le):W(He,!1)})}var ze=a(Ye,2);{var de=W=>{Ro(W,{onClose:()=>i(l,!1),get initialDocente(){return e(te)}})};X(ze,W=>{e(l)&&W(de)})}D(()=>{s(Le,`background-color: ${e(c),t(()=>e(c).cardBg)??""}; border-color: ${e(c),t(()=>e(c).cardBorder)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(Xe,`border-color: ${e(c),t(()=>e(c).cardBorder)??""};`)}),P("click",pt,function(...W){M()?.apply(this,W)}),P("click",Ye,lo(function(...W){M()?.apply(this,W)})),P("keydown",Ye,W=>W.key==="Escape"&&M()()),g(Y,$e),kr()}var ys=y('<div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping svelte-gsxx31"></div> <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full svelte-gsxx31"></div>',1),ks=y('<div class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-ping svelte-gsxx31"></div> <div class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full svelte-gsxx31"></div>',1),ws=wt('<svg class="w-5 h-5 text-indigo-500 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-gsxx31"></path></svg>'),$s=wt('<svg class="w-5 h-5 text-amber-500 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="svelte-gsxx31"></path></svg>'),Cs=wt('<svg class="w-5 h-5 text-indigo-400 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-gsxx31"></path></svg>'),Ss=y('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-gsxx31"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0 svelte-gsxx31"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-gsxx31"></path></svg></div> <div class="flex-1 pr-6 pt-0.5 svelte-gsxx31"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100 svelte-gsxx31">Informaci√≥n</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200 svelte-gsxx31"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors svelte-gsxx31" aria-label="Cerrar alerta"><svg class="w-4 h-4 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-gsxx31"></path></svg></button></div>'),As=y('<option class="svelte-gsxx31"> </option>'),Ds=y('<option class="svelte-gsxx31"> </option>'),Es=y('<select class="w-full lg:w-16 px-2 py-1.5 lg:py-1 text-sm rounded border appearance-none cursor-pointer svelte-gsxx31"><option class="svelte-gsxx31">Horas...</option><option class="svelte-gsxx31">0</option><!></select>'),Is=y('<div><div class="flex items-center gap-1.5 svelte-gsxx31"><input type="checkbox" class="w-4 h-4 lg:w-5 lg:h-5 rounded text-indigo-500 focus:ring-indigo-500 svelte-gsxx31" style="accent-color: #6366f1;"/> <span class="text-sm lg:text-sm flex-shrink-0 svelte-gsxx31"> </span></div> <!></div>'),Bs=y('<div class="border rounded-xl p-2 lg:p-3 flex flex-col lg:flex-row lg:flex-wrap gap-2 lg:gap-2 svelte-gsxx31"></div>'),Fs=y('<option class="svelte-gsxx31"> </option>'),zs=y('<select id="materia" name="materia" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-gsxx31"><option class="svelte-gsxx31"> </option><!></select>'),Ms=y('<option class="svelte-gsxx31"> </option>'),Ts=y('<option class="svelte-gsxx31"> </option>'),Os=y('<span><span class="mr-1.5 svelte-gsxx31"> </span> <button type="button" class="ml-1.5 hover:opacity-70 transition-opacity svelte-gsxx31" aria-label="Eliminar motivo"><svg class="w-3 h-3 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12" class="svelte-gsxx31"></path></svg></button></span>'),Ns=y('<option class="svelte-gsxx31"> </option>'),js=y('<option class="svelte-gsxx31"> </option>'),Rs=y('<div class="flex items-center gap-2 svelte-gsxx31"><button type="button" class="p-2 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Agregar observaci√≥n"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" class="svelte-gsxx31"></path></svg></button></div>'),Ls=y('<div class="px-4 pb-4 animate-fade-in svelte-gsxx31"><textarea placeholder="Escribe una observaci√≥n espec√≠fica para este estudiante..." rows="2" class="w-full px-4 py-2 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none resize-none text-sm svelte-gsxx31"></textarea></div>'),Ps=y('<div><div class="flex-1 min-w-0 svelte-gsxx31"><span class="text-base font-medium block svelte-gsxx31"> </span> <div class="flex flex-wrap gap-2 mt-2 svelte-gsxx31"></div></div> <div class="flex flex-col sm:flex-row items-center gap-2 w-full sm:w-auto svelte-gsxx31"><div><select class="w-full appearance-none border rounded-lg px-4 py-2 pr-10 text-sm focus:ring-2 focus:ring-indigo-500 cursor-pointer transition-all outline-none svelte-gsxx31"><option class="svelte-gsxx31">Hora...</option><option class="svelte-gsxx31">0 (Sin hora)</option><!></select> <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 svelte-gsxx31"><svg class="w-4 h-4 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-gsxx31"></path></svg></div></div> <div class="relative w-full sm:w-56 svelte-gsxx31"><select class="w-full appearance-none border rounded-lg px-4 py-2 pr-10 text-sm focus:ring-2 focus:ring-indigo-500 cursor-pointer transition-all outline-none svelte-gsxx31"><option class="svelte-gsxx31">A√±adir motivo...</option><option class="svelte-gsxx31">üö´ Limpiar todo</option><!></select> <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 svelte-gsxx31"><svg class="w-4 h-4 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" class="svelte-gsxx31"></path></svg></div></div></div> <!></div> <!>',1),Hs=y('<div class="text-center py-12 opacity-60 svelte-gsxx31">No hay estudiantes en este grado.</div>'),Gs=y('<div class="space-y-3 animate-fade-in svelte-gsxx31"><label class="block text-sm font-semibold uppercase tracking-wider svelte-gsxx31"> </label> <div class="space-y-2 max-h-[700px] overflow-y-auto border rounded-2xl p-4 bg-zinc-50/50 dark:bg-zinc-900/50 backdrop-blur-sm scrollbar-thin scrollbar-thumb-zinc-300 dark:scrollbar-thumb-zinc-600 svelte-gsxx31"><!> <!></div></div>'),Us=wt('<svg class="animate-spin h-6 w-6 lg:h-7 lg:w-7 svelte-gsxx31" fill="none" viewBox="0 0 24 24"><circle class="opacity-25 svelte-gsxx31" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75 svelte-gsxx31" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Vs=wt('<svg class="h-6 w-6 lg:h-7 lg:w-7 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" class="svelte-gsxx31"></path></svg>'),Ys=y('<span class="absolute -top-1 -right-1 lg:-top-2 lg:-right-2 bg-red-500 text-white text-[10px] lg:text-xs font-bold rounded-full h-5 w-5 lg:h-6 lg:w-6 flex items-center justify-center ring-2 ring-white dark:ring-zinc-950 animate-bounce svelte-gsxx31"> </span>'),Ws=y('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200 svelte-gsxx31"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40 svelte-gsxx31"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8 svelte-gsxx31"><div class="flex items-center gap-4 lg:flex-col svelte-gsxx31"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto svelte-gsxx31"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center svelte-gsxx31">Registrar Inasistencias</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full svelte-gsxx31"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Abrir hoja de c√°lculo"><svg class="w-5 h-5 svelte-gsxx31" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Hoja de C√°lculo</span></button> <button id="filter-button-target" class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 relative svelte-gsxx31" title="Abrir Looker Studio"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Filtros</span> <!></button> <button id="report-button-target" class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 relative svelte-gsxx31" title="Generar reportes Excel"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Reporte Excel</span> <!></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Ver reporte online"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" class="svelte-gsxx31"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Ver Online</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Abrir Looker Studio"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Looker Studio</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Volver al Dashboard"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Dashboard</span></button> <div class="relative svelte-gsxx31"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full svelte-gsxx31" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize svelte-gsxx31"> </span></button></div></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto svelte-gsxx31"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border svelte-gsxx31"><!> <!> <!> <form class="space-y-6 svelte-gsxx31"><div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-gsxx31"><div class="space-y-2 svelte-gsxx31"><label for="docente" class="block text-sm font-medium svelte-gsxx31">Docente</label> <select id="docente" name="docente" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-gsxx31"><option class="svelte-gsxx31"> </option><!></select></div> <div><div class="flex items-center justify-between svelte-gsxx31"><label for="materia" class="block text-sm font-medium svelte-gsxx31">Materia</label></div> <!></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-gsxx31"><div class="space-y-2 svelte-gsxx31"><label for="horas" class="block text-sm font-medium svelte-gsxx31">Cantidad de Horas</label> <select id="horas" name="horas" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer svelte-gsxx31"><option class="svelte-gsxx31">Seleccione horas</option><option class="svelte-gsxx31">Sin hora espec√≠fica</option><!></select></div> <div class="space-y-2 svelte-gsxx31"><label for="grado" class="block text-sm font-medium svelte-gsxx31">Grado</label> <select id="grado" name="grado" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-gsxx31"><option class="svelte-gsxx31"> </option><!></select></div></div> <!> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-gsxx31"><div class="space-y-2 svelte-gsxx31"><label for="fecha" class="block text-sm font-medium svelte-gsxx31">Fecha</label> <input type="date" id="fecha" name="fecha" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none svelte-gsxx31"/></div> <div class="space-y-2 svelte-gsxx31"><label for="observaciones" class="block text-sm font-medium svelte-gsxx31">Observaciones</label> <textarea id="observaciones" name="observaciones" rows="3" placeholder="Opcional..." class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none resize-none svelte-gsxx31"></textarea></div></div> <div class="flex items-center justify-between pt-6 border-t svelte-gsxx31"><div class="text-sm font-medium svelte-gsxx31">Inasistencias marcadas: <span class="text-indigo-500 font-bold ml-1 svelte-gsxx31"> </span></div></div></form></div></main> <button class="fixed bottom-6 right-6 lg:bottom-10 lg:right-10 bg-green-600 hover:bg-green-700 text-white p-4 lg:p-5 rounded-full shadow-2xl hover:shadow-green-500/20 transform transition-all duration-300 hover:scale-110 active:scale-95 disabled:opacity-50 disabled:grayscale disabled:cursor-not-allowed z-50 group svelte-gsxx31" title="Guardar inasistencias"><!> <!></button></div> <!> <!> <!>',1);function qs(Y,$){yr($,!1);const c=()=>ho(Kr,"$theme",Se),[Se,v]=xo(),M=f(),r=f(),d=f(),Fe=f(),B=f(),te=f(),ee="¬°Nueva funci√≥n de filtrado avanzado disponible!",J="¬°Nueva funci√≥n de reporte en Excel disponible!";let N=Dt($,"onBack",8),F=f([]),O=f([]),l=f([]),E=f(!1),G=f(!1),j=f(!1),u=f({docente:localStorage.getItem("lastDocente")||"",materia:"",horas:"",grado:"",fecha:new Date().toISOString().split("T")[0],observaciones:""}),w=f([]),Oe=f({}),$e=f({}),Ye=f(!1),Le=f([]),Xe=f(!1),pt=f(!1),ae=f(!1);const h=()=>{i(Xe,!0)},le=()=>{i(Xe,!1)},He=()=>{i(pt,!0)},ze=()=>{i(pt,!1)},de=()=>{i(ae,!0)},W=()=>{i(ae,!1)};let re=f(localStorage.getItem("dismissedInfoInasistenciaContent")!==ko),Q=f(!0),Ge=f(!0);function Ne(_){return!0}const fe=()=>{localStorage.setItem("dismissedInfoInasistenciaContent",ko),i(re,!1)},ue=()=>{localStorage.setItem("dismissedFeatureAlertFilters",new Date().toISOString()),i(Q,!1)},Ee=()=>{localStorage.setItem("dismissedFeatureAlertFilters",new Date().toISOString()),h()},st=()=>{localStorage.setItem("dismissedFeatureAlertReport",new Date().toISOString()),i(Ge,!1)},We=()=>{localStorage.setItem("dismissedFeatureAlertReport",new Date().toISOString()),He(),i(Ge,!1)};let ge=f(JSON.parse(localStorage.getItem("docenteMaterias")||"{}"));const C=(_,V)=>{!_||!V||(e(ge)[_]||we(ge,e(ge)[_]=[]),e(ge)[_].includes(V)||(we(ge,e(ge)[_]=[...e(ge)[_],V]),localStorage.setItem("docenteMaterias",JSON.stringify(e(ge)))))},p=()=>`https://docs.google.com/spreadsheets/d/${go}`,S=()=>{window.open(p(),"_blank")},I=()=>{window.open(ya,"_blank")},H=_=>{const V=_.match(/-(\d+)$/);return V?V[1]:null},U=[{value:"Sin excusa",label:"Sin excusa",icon:"üö´",bgColor:"bg-red-50",borderColor:"border-red-300",textColor:"text-red-700",darkBgColor:"dark:bg-red-950",darkBorderColor:"dark:border-red-800",darkTextColor:"dark:text-red-300",obligaHoras:!0},{value:"Excusa",label:"Excusa",icon:"üìÑ",bgColor:"bg-blue-50",borderColor:"border-blue-300",textColor:"text-blue-700",darkBgColor:"dark:bg-blue-950",darkBorderColor:"dark:border-blue-800",darkTextColor:"dark:text-blue-300",obligaHoras:!0},{value:"LLegada Tarde",label:"Llegada Tarde",icon:"‚è∞",bgColor:"bg-indigo-50",borderColor:"border-indigo-300",textColor:"text-indigo-700",darkBgColor:"dark:bg-indigo-950",darkBorderColor:"dark:border-indigo-800",darkTextColor:"dark:text-indigo-300",obligaHoras:!1},{value:"Transporte Escolar",label:"Transporte Escolar",icon:"üöå",bgColor:"bg-red-50",borderColor:"border-red-300",textColor:"text-red-700",darkBgColor:"dark:bg-red-950",darkBorderColor:"dark:border-red-800",darkTextColor:"dark:text-red-300",obligaHoras:!0},{value:"Permiso",label:"Permiso",icon:"‚úÖ",bgColor:"bg-green-50",borderColor:"border-green-300",textColor:"text-green-700",darkBgColor:"dark:bg-green-950",darkBorderColor:"dark:border-green-800",darkTextColor:"dark:text-green-300",obligaHoras:!0},{value:"No portar/sin uniforme",label:"No portar/sin uniforme",icon:"üëö",bgColor:"bg-cyan-50",borderColor:"border-cyan-300",textColor:"text-cyan-700",darkBgColor:"dark:bg-cyan-950",darkBorderColor:"dark:border-cyan-800",darkTextColor:"dark:text-cyan-300",obligaHoras:!1},{value:"Pacto de Aula",label:"Pacto de Aula",icon:"ü§ù",bgColor:"bg-purple-50",borderColor:"border-purple-300",textColor:"text-purple-700",darkBgColor:"dark:bg-purple-950",darkBorderColor:"dark:border-purple-800",darkTextColor:"dark:text-purple-300",obligaHoras:!1},{value:"Uso del celular",label:"Uso del celular",icon:"üì±",bgColor:"bg-orange-50",borderColor:"border-orange-300",textColor:"text-orange-700",darkBgColor:"dark:bg-orange-950",darkBorderColor:"dark:border-orange-800",darkTextColor:"dark:text-orange-300",obligaHoras:!1},{value:"Desorden en Clase",label:"Desorden en Clase",icon:"üîä",bgColor:"bg-yellow-50",borderColor:"border-yellow-300",textColor:"text-yellow-700",darkBgColor:"dark:bg-yellow-950",darkBorderColor:"dark:border-yellow-800",darkTextColor:"dark:text-yellow-300",obligaHoras:!1},{value:"Fuga",label:"Fuga",icon:"üèÉ‚Äç‚ôÇÔ∏è",bgColor:"bg-red-100",borderColor:"border-red-400",textColor:"text-red-800",darkBgColor:"dark:bg-red-950",darkBorderColor:"dark:border-red-800",darkTextColor:"dark:text-red-300",obligaHoras:!0},{value:"No realizaci√≥n de Aseo",label:"No realizaci√≥n de Aseo",icon:"üßπ",bgColor:"bg-teal-50",borderColor:"border-teal-300",textColor:"text-teal-700",darkBgColor:"dark:bg-teal-950",darkBorderColor:"dark:border-teal-800",darkTextColor:"dark:text-teal-300",obligaHoras:!1},{value:"Licencia por salud",label:"Licencia por salud",icon:"üè•",bgColor:"bg-cyan-50",borderColor:"border-cyan-300",textColor:"text-cyan-700",darkBgColor:"dark:bg-cyan-950",darkBorderColor:"dark:border-cyan-800",darkTextColor:"dark:text-cyan-300",obligaHoras:!0},{value:"Incapacidad",label:"Incapacidad",icon:"ü©∫",bgColor:"bg-pink-50",borderColor:"border-pink-300",textColor:"text-pink-700",darkBgColor:"dark:bg-pink-950",darkBorderColor:"dark:border-pink-800",darkTextColor:"dark:text-pink-300",obligaHoras:!0},{value:"Reuni√≥n interna",label:"Reuni√≥n interna",icon:"üë•",bgColor:"bg-zinc-50",borderColor:"border-zinc-300",textColor:"text-zinc-700",darkBgColor:"dark:bg-zinc-950",darkBorderColor:"dark:border-zinc-800",darkTextColor:"dark:text-zinc-300",obligaHoras:!1},{value:"Ignorar",label:"Ignorar",icon:"üö´",bgColor:"bg-zinc-50",borderColor:"border-zinc-300",textColor:"text-zinc-700",darkBgColor:"dark:bg-zinc-950",darkBorderColor:"dark:border-zinc-800",darkTextColor:"dark:text-zinc-300",obligaHoras:!1},{value:"Psicoorientaci√≥n",label:"Psicoorientaci√≥n",icon:"üß†",bgColor:"bg-green-50",borderColor:"border-green-300",textColor:"text-green-700",darkBgColor:"dark:bg-green-950",darkBorderColor:"dark:border-green-800",darkTextColor:"dark:text-green-300",obligaHoras:!1},{value:"Retirado por el acudiente",label:"Retirado por el acudiente",icon:"üë®",bgColor:"bg-green-50",borderColor:"border-green-300",textColor:"text-green-700",darkBgColor:"dark:bg-green-950",darkBorderColor:"dark:border-green-800",darkTextColor:"dark:text-green-300",obligaHoras:!1}],ne=()=>{Kr.update(_=>_==="light"?"dim":_==="dim"?"dark":"light")},Te=async()=>{i(E,!0),i(G,!0),i(j,!0);try{const[_,V,se]=await Promise.all([Zr(),Qr(),Xr()]);i(F,_),i(O,V),i(l,se)}catch(_){console.error("Error cargando datos iniciales:",_)}finally{i(E,!1),i(G,!1),i(j,!1)}},Z=(_,V)=>{i(w,e(w).filter(se=>!(se.nombre===_&&se.motivo===V)))},R=(_,V,se)=>{if(V===""||V==="Ignorar"){i(w,e(w).filter(be=>be.nombre!==_));return}const k=U.find(be=>be.value===V);if(!k)return;let Ie=e(Oe)[_]||e(u).horas;if(k.obligaHoras||(Ie="0"),k.obligaHoras&&i(w,e(w).filter(be=>{if(be.nombre!==_)return!0;const it=U.find(Qe=>Qe.value===be.motivo);return it&&!it.obligaHoras})),!e(w).some(be=>be.nombre===_&&be.motivo===V)){const be=e(w).find(it=>it.nombre===_)?.observaciones||"";i(w,[...e(w),{nombre:_,motivo:V,horas:Ie,observaciones:be}])}},oe=(_,V)=>{i(w,e(w).map(se=>se.nombre===_?{...se,observaciones:V}:se))},ye=_=>{we($e,e($e)[_]=!e($e)[_])},me=(_,V)=>{we(Oe,e(Oe)[_]=V),i(w,e(w).map(se=>{if(se.nombre===_){const k=U.find(Ie=>Ie.value===se.motivo);if(k&&k.obligaHoras)return{...se,horas:V}}return se}))},et=async _=>{if(_.preventDefault(),!(e(Ye)||e(w).length===0)){i(Ye,!0);try{const V=new Date().toISOString(),se=e(M)?e(Le):[{materia:e(u).materia,horas:e(u).horas}];if(e(M)&&e(Le).length===0){await Tt.fire({icon:"warning",title:"Atenci√≥n",text:"Seleccione al menos una materia",confirmButtonColor:"#6366f1"});return}const k=se.filter(be=>!be.horas);if(k.length>0){await Tt.fire({icon:"warning",title:"Atenci√≥n",text:`Seleccione horas para: ${k.map(be=>be.materia).join(", ")}`,confirmButtonColor:"#6366f1"});return}const Ie=[],Ze=e(w).filter(be=>be.motivo&&be.motivo!=="Ignorar");for(const be of se)for(const it of Ze)Ie.push([V,e(u).docente,e(u).fecha,be.horas,be.materia,it.motivo,e(u).grado,it.nombre,it.observaciones||e(u).observaciones]);await $a({spreadsheetId:go,worksheetTitle:mo,inasistencias:Ie});for(const be of se)C(e(u).docente,be.materia);await Tt.fire({icon:"success",title:"¬°√âxito!",text:`${Ie.length} inasistencia(s) registrada(s) exitosamente`,timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),i(u,{...e(u),grado:"",fecha:new Date().toISOString().split("T")[0],observaciones:"",horas:""}),i(w,[]),i(Oe,{}),i($e,{}),i(Le,[])}catch(V){console.error("Error enviando:",V),await Tt.fire({icon:"error",title:"Error",text:"Error al registrar la inasistencia",confirmButtonColor:"#ef4444"})}finally{i(Ye,!1)}}};br(()=>{Te(),i(Q,Ne()),i(Ge,Ne())}),Be(()=>e(u),()=>{i(M,e(u).docente.includes("-"))}),Be(()=>e(u),()=>{e(u).docente&&localStorage.setItem("lastDocente",e(u).docente)}),Be(()=>(e(u),e(O),e(ge)),()=>{i(r,e(u).docente?[...e(O)].sort((_,V)=>{const se=e(ge)[e(u).docente]?.includes(_.materia),k=e(ge)[e(u).docente]?.includes(V.materia);return se&&!k?-1:!se&&k?1:_.materia.localeCompare(V.materia)}):e(O))}),Be(()=>{},()=>{i(d,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Be(()=>(e(u),e(l)),()=>{i(Fe,e(u).grado?e(l).filter(_=>_.grado.toString()===e(u).grado):[])}),Be(()=>e(u),()=>{i(B,H(e(u).docente))}),Be(()=>(e(B),e(l)),()=>{i(te,e(B)?[...new Set(e(l).map(_=>_.grado.toString()))].filter(_=>_.startsWith(`${e(B)}-`)):[...new Set(e(l).map(_=>_.grado.toString()))])}),Sr(),Ar();var rt=Ws(),ie=Zt(rt),L=o(ie),K=o(L),pe=o(K),je=o(pe),n=a(je,2),x=a(pe,2),A=o(x),z=a(A,2),Me=a(o(z),4);{var tt=_=>{var V=ys();g(_,V)};X(Me,_=>{e(Q)&&_(tt)})}var Je=a(z,2),Ae=a(o(Je),4);{var Ut=_=>{var V=ks();g(_,V)};X(Ae,_=>{e(Ge)&&_(Ut)})}var Wt=a(Je,2),Nt=a(Wt,2),Ht=a(Nt,2),nr=a(Ht,2),jt=o(nr),ot=o(jt);{var lt=_=>{var V=ws();g(_,V)},Et=_=>{var V=$s();g(_,V)},Rt=_=>{var V=Cs();g(_,V)};X(ot,_=>{c()==="dark"?_(lt):c()==="light"?_(Et,1):_(Rt,!1)})}var Gt=a(ot,2),It=o(Gt),St=a(L,2),qt=o(St),vr=o(qt);{var gr=_=>{var V=Ss(),se=a(o(V),2),k=a(o(se),2),Ie=o(k),Ze=a(se,2);D(()=>b(Ie,ko)),P("click",Ze,fe),g(_,V)};X(vr,_=>{e(re)&&_(gr)})}var ar=a(vr,2);bo(ar,{featureMessage:ee,description:"Ahora puedes filtrar tus datos de forma avanzada. ¬°Pru√©balo!",onTryNow:Ee,onDismiss:ue,targetSelector:"#filter-button-target",showPopup:!1,colorTheme:"blue"});var q=a(ar,2);bo(q,{featureMessage:J,description:"Ahora puedes generar reportes de inasistencias en formato Excel. ¬°Descarga y analiza tus datos!",onTryNow:We,onDismiss:st,targetSelector:"#report-button-target",showPopup:!1,colorTheme:"green"});var ce=a(q,2),Ke=o(ce),vt=o(Ke),mt=o(vt),Lt=a(mt,2),fr=o(Lt),Hr=o(fr);fr.value=fr.__value="";var Dr=a(fr);he(Dr,1,()=>e(F),ke,(_,V)=>{var se=As(),k=o(se),Ie={};D(()=>{b(k,e(V)),Ie!==(Ie=e(V))&&(se.value=(se.__value=e(V))??"")}),g(_,se)});var Fr=a(vt,2),Gr=o(Fr),Ur=o(Gr),Er=a(Gr,2);{var Vr=_=>{var V=Bs();he(V,5,()=>e(r),ke,(se,k)=>{const Ie=Mt(()=>(e(ge),e(u),e(k),t(()=>e(ge)[e(u).docente]?.includes(e(k).materia)))),Ze=Mt(()=>(e(Le),e(k),t(()=>e(Le).findIndex(qe=>qe.materia===e(k).materia)))),be=Mt(()=>e(Ze)>=0);var it=Is(),Qe=o(it),dt=o(Qe),at=a(dt,2),zt=o(at),sr=a(Qe,2);{var pr=qe=>{var xt=Es(),lr=o(xt);lr.value=lr.__value="";var ut=a(lr);ut.value=ut.__value="0";var hr=a(ut);he(hr,0,()=>[1,2,3,4],ke,(Xt,Jt)=>{var or=Ds(),mr=o(or),At={};D(cr=>{b(mr,`${Jt??""}h`),At!==(At=cr)&&(or.value=(or.__value=cr)??"")},[()=>t(()=>Jt.toString())]),g(Xt,or)}),D(()=>s(xt,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`)),ct(xt,()=>e(Le)[e(Ze)].horas,Xt=>(we(Le,e(Le)[e(Ze)].horas=Xt),Ve(()=>{e(Ze),e(d)}))),g(qe,xt)};X(sr,qe=>{e(be)&&qe(pr)})}D(()=>{Yt(it,1,`flex flex-col lg:flex-row lg:items-center gap-1 lg:gap-2 px-2 py-2 lg:py-1.5 rounded-lg border transition-all ${e(be)?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 dark:border-indigo-500":"border-transparent"}`,"svelte-gsxx31"),s(it,`border-color: ${Re(e(be)),e(d),t(()=>e(be)?"#6366f1":e(d).border)??""};`),Mo(dt,e(be)),s(at,`color: ${e(d),t(()=>e(d).text)??""};`),b(zt,`${e(Ie)?"‚≠ê ":""}${e(k),t(()=>e(k).materia)??""}`)}),P("change",dt,qe=>{qe.currentTarget.checked?i(Le,[...e(Le),{materia:e(k).materia,horas:""}]):i(Le,e(Le).filter(xt=>xt.materia!==e(k).materia))}),g(se,it)}),D(()=>s(V,`border-color: ${e(d),t(()=>e(d).border)??""}; background-color: ${e(d),t(()=>e(d).inputBg)??""};`)),g(_,V)},zr=_=>{var V=zs(),se=o(V),k=o(se);se.value=se.__value="";var Ie=a(se);he(Ie,1,()=>e(r),ke,(Ze,be)=>{const it=Mt(()=>(e(ge),e(u),e(be),t(()=>e(ge)[e(u).docente]?.includes(e(be).materia))));var Qe=Fs(),dt=o(Qe),at={};D(()=>{s(Qe,e(it)?"color: #6366f1; font-weight: 600;":""),b(dt,`${e(it)?"‚≠ê ":""}${e(be),t(()=>e(be).materia)??""}`),at!==(at=(e(be),t(()=>e(be).materia)))&&(Qe.value=(Qe.__value=(e(be),t(()=>e(be).materia)))??"")}),g(Ze,Qe)}),D(()=>{V.disabled=e(G),s(V,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),b(k,e(G)?"Cargando...":"Seleccione materia")}),ct(V,()=>e(u).materia,Ze=>(we(u,e(u).materia=Ze),Ve(()=>{e(E),e(d),e(F),e(G),e(r),e(ge),e(j),e(te)}))),g(_,V)};X(Er,_=>{e(M)?_(Vr):_(zr,!1)})}var Mr=a(Ke,2),Yr=o(Mr),Tr=o(Yr),De=a(Tr,2),gt=o(De);gt.value=gt.__value="";var _t=a(gt);_t.value=_t.__value="0";var tr=a(_t);he(tr,0,()=>[1,2,3,4],ke,(_,V)=>{var se=Ms(),k=o(se),Ie={};D(Ze=>{b(k,`${V??""} ${V===1?"Hora":"Horas"}`),Ie!==(Ie=Ze)&&(se.value=(se.__value=Ze)??"")},[()=>t(()=>V.toString())]),g(_,se)});var Qt=a(Yr,2),Or=o(Qt),_e=a(Or,2),Ue=o(_e),ft=o(Ue);Ue.value=Ue.__value="";var Ot=a(Ue);he(Ot,1,()=>e(te),ke,(_,V)=>{var se=Ts(),k=o(se),Ie={};D(Ze=>{b(k,Ze),Ie!==(Ie=e(V))&&(se.value=(se.__value=e(V))??"")},[()=>(e(V),t(()=>e(V).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),g(_,se)});var Pt=a(Mr,2);{var xr=_=>{var V=Gs(),se=o(V),k=o(se),Ie=a(se,2),Ze=o(Ie);he(Ze,1,()=>e(Fe),Qe=>Qe.nombre,(Qe,dt)=>{const at=Mt(()=>(e(w),e(dt),t(()=>e(w).filter(kt=>kt.nombre===e(dt).nombre)))),zt=Mt(()=>(Re(e(at)),t(()=>e(at).length>0))),sr=Mt(()=>(Re(e(at)),t(()=>e(at).some(kt=>{const ht=U.find(bt=>bt.value===kt.motivo);return ht&&ht.obligaHoras}))));var pr=Ps(),qe=Zt(pr);let xt;var lr=o(qe),ut=o(lr),hr=o(ut),Xt=a(ut,2);he(Xt,5,()=>e(at),ke,(kt,ht)=>{const bt=Mt(()=>(e(ht),t(()=>U.find(to=>to.value===e(ht).motivo))));var Cr=po(),oo=Zt(Cr);{var eo=to=>{var yo=Os(),Io=o(yo),Vo=o(Io),Bo=a(Io),Yo=a(Bo);D(()=>{Yt(yo,1,(Re(e(bt)),t(()=>`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold border ${e(bt).bgColor} ${e(bt).textColor} ${e(bt).borderColor} ${e(bt).darkBgColor} ${e(bt).darkTextColor} ${e(bt).darkBorderColor}`)),"svelte-gsxx31"),b(Vo,(Re(e(bt)),t(()=>e(bt).icon))),b(Bo,` ${Re(e(bt)),t(()=>e(bt).label)??""} `)}),P("click",Yo,()=>Z(e(dt).nombre,e(ht).motivo)),g(to,yo)};X(oo,to=>{e(bt)&&to(eo)})}g(kt,Cr)});var Jt=a(lr,2),or=o(Jt);let mr;var At=o(or),cr=o(At);cr.value=cr.__value="";var ur=a(cr);ur.value=ur.__value="0";var qr=a(ur);he(qr,0,()=>[1,2,3,4],ke,(kt,ht)=>{var bt=Ns(),Cr=o(bt),oo={};D(eo=>{b(Cr,ht),oo!==(oo=eo)&&(bt.value=(bt.__value=eo)??"")},[()=>t(()=>ht.toString())]),g(kt,bt)});var er;Jo(At);var Bt=a(At,2),Ft=a(or,2),Kt=o(Ft),Jr=o(Kt);Jr.value=Jr.__value="";var co=a(Jr);co.value=co.__value="Ignorar";var _o=a(co);he(_o,1,()=>U,ke,(kt,ht)=>{const bt=Mt(()=>(Re(e(at)),e(ht),t(()=>e(at).some(to=>to.motivo===e(ht).value))));var Cr=js(),oo=o(Cr),eo={};D(()=>{Cr.disabled=e(bt),b(oo,`${e(ht),t(()=>e(ht).icon)??""} ${e(ht),t(()=>e(ht).label)??""} ${e(bt)?"‚úì":""}`),eo!==(eo=(e(ht),t(()=>e(ht).value)))&&(Cr.value=(Cr.__value=(e(ht),t(()=>e(ht).value)))??"")}),g(kt,Cr)}),Kt.value=Kt.__value="";var Lo=a(Kt,2),Po=a(Jt,2);{var Ho=kt=>{var ht=Rs(),bt=o(ht);D(()=>s(bt,`color: ${Re(e(at)),e(d),t(()=>e(at)[0]?.observaciones?"rgb(var(--text-primary))":e(d).icon)??""};`)),P("click",bt,()=>ye(e(dt).nombre)),g(kt,ht)};X(Po,kt=>{e(zt)&&kt(Ho)})}var Go=a(qe,2);{var Uo=kt=>{var ht=Ls(),bt=o(ht);D(()=>{Zo(bt,(Re(e(at)),t(()=>e(at)[0]?.observaciones||""))),s(bt,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`)}),P("input",bt,Cr=>oe(e(dt).nombre,Cr.currentTarget.value)),g(kt,ht)};X(Go,kt=>{Re(e(zt)),e($e),e(dt),Re(e(at)),t(()=>e(zt)&&(e($e)[e(dt).nombre]||e(at)[0]?.observaciones))&&kt(Uo)})}D(kt=>{xt=Yt(qe,1,"flex flex-col sm:flex-row sm:items-center justify-between p-4 border rounded-xl transition-all duration-200 gap-4 svelte-gsxx31",null,xt,{"ring-2":e(zt),"ring-indigo-500":e(zt)}),s(qe,`background-color: ${e(d),t(()=>e(d).bg)??""}; border-color: ${Re(e(zt)),e(d),t(()=>e(zt)?"transparent":e(d).border)??""};`),s(ut,`color: ${e(d),t(()=>e(d).text)??""};`),b(hr,(e(dt),t(()=>e(dt).nombre))),mr=Yt(or,1,"relative w-full sm:w-32 transition-opacity duration-200 svelte-gsxx31",null,mr,{"opacity-40":!e(sr)}),At.disabled=!e(sr),s(At,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),er!==(er=kt)&&(At.value=(At.__value=kt)??"",Ko(At,kt)),s(Bt,`color: ${e(d),t(()=>e(d).icon)??""};`),s(Kt,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),s(Lo,`color: ${e(d),t(()=>e(d).icon)??""};`)},[()=>(Re(e(at)),e(Oe),e(dt),e(u),t(()=>e(at).find(kt=>{const ht=U.find(bt=>bt.value===kt.motivo);return ht&&ht.obligaHoras})?.horas||e(Oe)[e(dt).nombre]||e(u).horas))]),P("change",At,kt=>me(e(dt).nombre,kt.currentTarget.value)),P("change",Kt,kt=>{R(e(dt).nombre,kt.currentTarget.value),kt.currentTarget.value=""}),g(Qe,pr)});var be=a(Ze,2);{var it=Qe=>{var dt=Hs();D(()=>s(dt,`color: ${e(d),t(()=>e(d).text)??""};`)),g(Qe,dt)};X(be,Qe=>{e(Fe),t(()=>e(Fe).length===0)&&Qe(it)})}D(()=>{s(se,`color: ${e(d),t(()=>e(d).label)??""};`),b(k,`Estudiantes del Grado ${e(u),t(()=>e(u).grado)??""}`),s(Ie,`border-color: ${e(d),t(()=>e(d).border)??""};`)}),g(_,V)};X(Pt,_=>{e(u),t(()=>e(u).grado&&e(u).horas!=="")&&_(xr)})}var Nr=a(Pt,2),jr=o(Nr),Rr=o(jr),Wr=a(Rr,2),Lr=a(jr,2),Ir=o(Lr),xe=a(Ir,2),rr=a(Nr,2),ir=o(rr),wr=a(o(ir)),Pr=o(wr),dr=a(St,2),m=o(dr);{var T=_=>{var V=Us();g(_,V)},ve=_=>{var V=Vs();g(_,V)};X(m,_=>{e(Ye)?_(T):_(ve,!1)})}var Ce=a(m,2);{var Pe=_=>{var V=Ys(),se=o(V);D(()=>b(se,(e(w),t(()=>e(w).length)))),g(_,V)};X(Ce,_=>{e(Ye),e(w),t(()=>!e(Ye)&&e(w).length>0)&&_(Pe)})}var nt=a(ie,2);{var $t=_=>{Ja(_,{onClose:le,get selectedDocente(){return e(u),t(()=>e(u).docente)}})};X(nt,_=>{e(Xe)&&_($t)})}var Vt=a(nt,2);{var yt=_=>{_s(_,{onClose:ze,get initialDocente(){return e(u),t(()=>e(u).docente)}})};X(Vt,_=>{e(pt)&&_(yt)})}var $r=a(Vt,2);{var Br=_=>{Ro(_,{onClose:W,get initialDocente(){return e(u),t(()=>e(u).docente)}})};X($r,_=>{e(ae)&&_(Br)})}D(_=>{s(ie,`background-color: ${e(d),t(()=>e(d).bg)??""};`),s(L,`background-color: ${e(d),t(()=>e(d).cardBg)??""}; border-color: ${e(d),t(()=>e(d).cardBorder)??""};`),Ct(je,"src",ro),s(n,`color: ${e(d),t(()=>e(d).text)??""};`),s(A,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),s(z,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),s(Je,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),s(Wt,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),s(Nt,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),s(Ht,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),s(jt,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),b(It,c()),s(qt,`background-color: ${e(d),t(()=>e(d).cardBg)??""}; border-color: ${e(d),t(()=>e(d).cardBorder)??""};`),s(mt,`color: ${e(d),t(()=>e(d).label)??""};`),Lt.disabled=e(E),s(Lt,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),b(Hr,e(E)?"Cargando...":"Seleccione docente"),Yt(Fr,1,`space-y-2 ${e(M)?"lg:col-span-2":""}`,"svelte-gsxx31"),s(Ur,`color: ${e(d),t(()=>e(d).label)??""};`),s(Tr,`color: ${e(d),t(()=>e(d).label)??""};`),s(De,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),s(Or,`color: ${e(d),t(()=>e(d).label)??""};`),_e.disabled=e(j),s(_e,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),b(ft,e(j)?"Cargando...":"Seleccione grado"),s(Rr,`color: ${e(d),t(()=>e(d).label)??""};`),s(Wr,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),s(Ir,`color: ${e(d),t(()=>e(d).label)??""};`),s(xe,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),s(rr,`border-color: ${e(d),t(()=>e(d).border)??""};`),s(ir,`color: ${e(d),t(()=>e(d).label)??""};`),b(Pr,(e(w),t(()=>e(w).length))),dr.disabled=_},[()=>(e(Ye),e(w),e(u),e(M),e(Le),t(()=>e(Ye)||e(w).length===0||!e(u).docente||(e(M)?e(Le).length===0||e(Le).some(_=>!_.horas):!e(u).materia||!e(u).horas)))]),P("click",A,S),P("click",z,h),P("click",Je,He),P("click",Wt,de),P("click",Nt,I),P("click",Ht,function(..._){N()?.apply(this,_)}),P("click",jt,ne),ct(Lt,()=>e(u).docente,_=>(we(u,e(u).docente=_),Ve(()=>{e(E),e(d),e(F),e(G),e(r),e(ge),e(j),e(te)}))),ct(De,()=>e(u).horas,_=>(we(u,e(u).horas=_),Ve(()=>{e(E),e(d),e(F),e(G),e(r),e(ge),e(j),e(te)}))),ct(_e,()=>e(u).grado,_=>(we(u,e(u).grado=_),Ve(()=>{e(E),e(d),e(F),e(G),e(r),e(ge),e(j),e(te)}))),_r(Wr,()=>e(u).fecha,_=>(we(u,e(u).fecha=_),Ve(()=>{e(E),e(d),e(F),e(G),e(r),e(ge),e(j),e(te)}))),_r(xe,()=>e(u).observaciones,_=>(we(u,e(u).observaciones=_),Ve(()=>{e(E),e(d),e(F),e(G),e(r),e(ge),e(j),e(te)}))),P("submit",ce,et),P("click",dr,et),g(Y,rt),kr(),v()}var Js=y('<div class="flex-1 flex items-center justify-center"><div class="text-center"><div class="animate-spin w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full mx-auto mb-4"></div> <p>Cargando datos...</p></div></div>'),Ks=y('<span class="ml-2 px-2 py-1 text-xs bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full">Activos</span>'),Zs=y("<option> </option>"),Qs=y("<option> </option>"),Xs=y('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">Este docente no tiene registros de materias</p>'),el=y("<option> </option>"),tl=y('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">No hay grados para los filtros seleccionados</p>'),rl=y('<div class="flex-1 flex items-center justify-center"><div class="text-center py-12 px-4"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm sm:text-base">No se encontraron registros con los filtros seleccionados</p></div></div>'),ol=y('<tr class="border-b transition-colors hover:bg-black/5 dark:hover:bg-white/5 text-xs"><td class="p-2"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 text-center"> </td><td class="p-2 text-center"> </td><td class="p-2"><div class="flex items-center gap-2 max-w-[300px]"><span><span> </span></span> <span class="truncate"> </span></div></td><td class="p-2"><span class="truncate block max-w-xs text-xs"> </span></td></tr>'),al=y('<div><p class="text-xs font-medium mb-1">Observaci√≥n:</p> <p class="text-xs"> </p></div>'),sl=y('<div class="border rounded-lg p-3 transition-colors hover:bg-black/5 dark:hover:bg-white/5"><div class="flex justify-between items-center mb-2"><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><span><span> </span></span> <p class="text-xs opacity-75"> </p></div></div></div> <div class="flex gap-2 text-[10px] mb-2"><div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="truncate"> </span></div> <div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <span class="truncate"> </span></div></div> <div class="mb-2"><p class="text-xs font-medium mb-1">Anotaci√≥n:</p> <p class="text-xs"> </p></div> <!></div>'),ll=y('<div class="hidden lg:flex flex-1 flex-col overflow-hidden min-h-0"><div class="flex-1 overflow-auto min-w-full border rounded-lg"><table class="w-full border-collapse text-sm min-w-[900px]"><thead class="sticky top-0 z-10 border-b"><tr><th class="text-left p-2 font-semibold whitespace-nowrap">Fecha</th><th class="text-left p-2 font-semibold whitespace-nowrap">Docente</th><th class="text-left p-2 font-semibold whitespace-nowrap">Materia</th><th class="text-center p-2 font-semibold whitespace-nowrap">Grado</th><th class="text-center p-2 font-semibold whitespace-nowrap">Horas</th><th class="text-left p-2 font-semibold whitespace-nowrap">Anotaci√≥n</th><th class="text-left p-2 font-semibold whitespace-nowrap">Observaci√≥n</th></tr></thead><tbody></tbody></table></div></div> <div class="flex-1 overflow-y-auto lg:hidden px-1"><div class="space-y-2"></div></div>',1),nl=y('<div class="p-3 sm:p-4 border-b"><div class="flex items-center justify-between mb-2 sm:mb-3"><h3 class="text-lg font-semibold">Filtros <!></h3> <button class="text-sm px-3 py-1 rounded-lg border transition-colors hover:bg-black/5 dark:hover:bg-white/5">Limpiar filtros</button></div> <div class="mb-3 p-1.5 sm:p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg"><p class="text-[10px] sm:text-xs font-medium mb-1.5">R√°pido: Fechas</p> <div class="flex items-center mb-2"><input id="checkFiltrarFecha" type="checkbox" class="w-4 h-4 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 dark:bg-zinc-700"/> <label for="checkFiltrarFecha" class="ml-2 text-xs font-medium">Activar filtro por fechas</label></div> <div class="flex flex-wrap gap-1 sm:gap-2"><button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Hoy</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 7 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 30 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Mes actual</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimo trimestre</button></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"><div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroDocente" class="block text-xs sm:text-sm font-medium">Docente</label> <select id="filtroDocente" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option>Todos los docentes</option><!></select></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroMateria" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroMateria" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroGrado" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroGrado" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroAnotacion" class="block text-xs sm:text-sm font-medium">B√∫squeda en anotaci√≥n</label> <input id="filtroAnotacion" type="text" placeholder="Buscar en anotaciones..." class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"/></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaInicio" class="block text-xs sm:text-sm font-medium">Fecha desde</label> <input id="filtroFechaInicio" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaFin" class="block text-xs sm:text-sm font-medium">Fecha hasta</label> <input id="filtroFechaFin" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div></div></div></div> <div class="flex-1 flex flex-col p-2 sm:p-4 min-h-0"><div class="mb-4 px-0 sm:px-3"><p class="text-sm">Se encontraron <span class="font-bold text-indigo-500"> </span> registros</p></div> <!></div>',1),il=y('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4" role="button" tabindex="0" aria-label="Cerrar ventana"><div class="w-full max-w-7xl max-h-[95vh] bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl overflow-hidden flex flex-col"><div class="flex items-center justify-between p-3 sm:p-4 border-b"><div class="flex items-center gap-3"><img alt="EIE Logo" class="h-8 w-auto hidden sm:block"/> <div><h2 class="text-lg sm:text-xl font-bold">Anotaciones de Clase</h2> <p class="text-xs hidden sm:block">Filtra y consulta los registros</p></div></div> <div class="flex items-center gap-3"><button class="inline-flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Exportar CSV</button> <button class="p-2 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5" aria-label="Cerrar"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div> <div class="flex-1 overflow-hidden flex flex-col min-h-0"><!></div></div></div>');function dl(Y,$){yr($,!1);const c=f(),Se=f(),v=f(),M=f(),r=f();let d=Dt($,"onClose",8),Fe=Dt($,"selectedDocente",8,""),B=f([]),te=[],ee=[],J=[],N=f(!1),F=f(!1),O=f([]),l=f({docente:Fe()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",anotacion:""});const E=()=>{const C=new Date,p=new Date(C.getFullYear(),C.getMonth()-1,C.getDate()),S=I=>{const H=I.getFullYear(),U=String(I.getMonth()+1).padStart(2,"0"),ne=String(I.getDate()).padStart(2,"0");return`${H}-${U}-${ne}`};we(l,e(l).fechaInicio=S(p)),Ve(()=>{e(r),e(w),e(c),e(v)}),we(l,e(l).fechaFin=S(C)),Ve(()=>{e(r),e(w),e(c),e(v)})},G=C=>{const p=new Date;let S;switch(C){case"hoy":S=new Date(p);break;case"semana":S=new Date(p),S.setDate(p.getDate()-7);break;case"mes":S=new Date(p),S.setDate(p.getDate()-30);break;case"mes_actual":S=new Date(p.getFullYear(),p.getMonth(),1);break;case"trimestre":S=new Date(p),S.setDate(p.getDate()-90);break;default:E();return}const I=H=>{const U=H.getFullYear(),ne=String(H.getMonth()+1).padStart(2,"0"),Te=String(H.getDate()).padStart(2,"0");return`${U}-${ne}-${Te}`};we(l,e(l).fechaInicio=I(S)),Ve(()=>{e(r),e(w),e(c),e(v)}),we(l,e(l).fechaFin=I(p)),Ve(()=>{e(r),e(w),e(c),e(v)}),i(F,!0)},j=[{value:"Estrategias de Ense√±anza-Aprendizaje",icon:"üìö",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},{value:"Evaluaci√≥n y Verificaci√≥n de Saberes",icon:"üìù",color:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200"},{value:"Enfoque STEM+ y Contexto Rural",icon:"üî¨",color:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200"},{value:"Pr√°cticas de Laboratorio y Mantenimiento",icon:"üîß",color:"bg-rose-100 text-rose-800 dark:bg-rose-900 dark:text-rose-200"},{value:"Ciudadan√≠a Digital y √âtica",icon:"üíª",color:"bg-violet-100 text-violet-800 dark:bg-violet-900 dark:text-violet-200"},{value:"Pensamiento Computacional y Programaci√≥n",icon:"üíª",color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"},{value:"Recursos Anal√≥gicos y Contingencias",icon:"üìã",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},{value:"Ofim√°tica y Competencias Productivas",icon:"üñ•Ô∏è",color:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200"},{value:"Gesti√≥n Administrativa y Proyectos Transversales",icon:"üìä",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}],u=C=>{for(const p of j)if(C.includes(p.value))return p;return{icon:"üìù",color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};let w=f([]),Oe=f([]),$e=f([]),Ye=f([]);const Le=async()=>{i(N,!0);try{const[C,p,S,I]=await Promise.all([jo({spreadsheetId:fo,worksheetTitle:Do}),Zr(),Qr(),Xr()]),H=Z=>{if(!Z?.records||!Array.isArray(Z.records))return[];const R=Z.records[0]?.values||[];return Z.records.slice(1).map(ye=>{const me=ye.values||[];return{timestamp:me[0]||"",fecha:me[1]||"",docente:me[2]||"",materia:me[3]||"",grado:me[4]||"",horas:me[5]||"",anotacion:me[6]||"",observacion:me[7]||""}}).filter(ye=>ye.docente&&ye.fecha)},U=Z=>Array.isArray(Z)?Z:Z?.data&&Array.isArray(Z.data)?Z.data:Z?.rows&&Array.isArray(Z.rows)?Z.rows:Z?.values&&Array.isArray(Z.values)?Z.values:Z?.anotaciones&&Array.isArray(Z.anotaciones)?Z.anotaciones:[];i(B,H(C)),te=U(p),ee=U(S),J=U(I),i(w,e(B).length>0?[...new Set(e(B).map(Z=>Z.docente).filter(Boolean))].sort():[]),i(Oe,e(B).length>0?[...new Set(e(B).map(Z=>Z.materia).filter(Boolean))].sort():[]);const ne=[...new Set(J.map(Z=>(typeof Z=="string"?Z:Z.grado||"").toString()).filter(Boolean))],Te=e(B).length>0?e(B).map(Z=>Z.grado).filter(Boolean):[];i($e,[...new Set([...ne,...Te])].sort((Z,R)=>{const oe=parseInt(Z),ye=parseInt(R);return!isNaN(oe)&&!isNaN(ye)?oe-ye:Z.localeCompare(R)})),i(Ye,e(B).length>0?[...new Set(e(B).map(Z=>Z.anotacion).filter(Boolean))].sort():[]),E(),console.log("Datos cargados:",{anotaciones:e(B).length,docentes:te.length,docentesUnicos:e(w).length,materiasUnicas:e(Oe).length,gradosUnicos:e($e).length,anotacionesUnicas:e(Ye).length})}catch(C){console.error("Error cargando datos:",C),await Tt.fire({icon:"error",title:"Error",text:"No se pudieron cargar los datos de anotaciones",confirmButtonColor:"#ef4444"})}finally{i(N,!1)}},Xe=()=>{i(l,{docente:Fe()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",anotacion:""}),E(),i(F,!1)},pt=()=>{if(e(O).length===0){Tt.fire({icon:"warning",title:"Sin datos",text:"No hay datos para exportar",confirmButtonColor:"#f59e0b"});return}const p=[["Fecha","Docente","Materia","Grado","Horas","Anotaci√≥n","Observaci√≥n"].join(","),...e(O).map(U=>[U.fecha,`"${U.docente}"`,`"${U.materia}"`,U.grado,U.horas,`"${U.anotacion}"`,`"${U.observacion}"`].join(","))].join(`
`),S=new Blob([p],{type:"text/csv;charset=utf-8;"}),I=document.createElement("a"),H=URL.createObjectURL(S);I.setAttribute("href",H),I.setAttribute("download",`anotaciones_${new Date().toISOString().split("T")[0]}.csv`),I.style.visibility="hidden",document.body.appendChild(I),I.click(),document.body.removeChild(I)},ae=C=>{try{const[p,S,I]=C.split("-");return p&&S&&I?`${I}/${S}/${p}`:C}catch{return C}},h=(C,p=50)=>C.length<=p?C:C.substring(0,p)+"...";br(()=>{Le()}),Be(()=>(e(l),e(B),e(Oe)),()=>{i(c,e(l).docente?[...new Set(e(B).filter(C=>C.docente===e(l).docente).map(C=>C.materia).filter(Boolean))].sort():e(Oe))}),Be(()=>(e(l),e(B),e($e)),()=>{i(Se,e(l).docente?[...new Set(e(B).filter(C=>C.docente===e(l).docente).map(C=>C.grado).filter(Boolean))].sort((C,p)=>{const S=parseInt(C),I=parseInt(p);return!isNaN(S)&&!isNaN(I)?S-I:C.localeCompare(p)}):e($e))}),Be(()=>(e(l),e(B),e(Se)),()=>{i(v,e(l).materia?[...new Set(e(B).filter(C=>C.materia===e(l).materia).map(C=>C.grado).filter(Boolean))].sort((C,p)=>{const S=parseInt(C),I=parseInt(p);return!isNaN(S)&&!isNaN(I)?S-I:C.localeCompare(p)}):e(Se))}),Be(()=>(e(l),e(B),e(Ye)),()=>{i(M,e(l).docente||e(l).materia||e(l).grado?[...new Set(e(B).filter(C=>!(e(l).docente&&C.docente!==e(l).docente||e(l).materia&&C.materia!==e(l).materia||e(l).grado&&C.grado!==e(l).grado)).map(C=>C.anotacion).filter(Boolean))].sort():e(Ye))}),Be(()=>{},()=>{i(r,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Be(()=>(e(B),e(l),e(F)),()=>{i(O,e(B).filter(C=>{if(e(l).docente&&C.docente!==e(l).docente||e(l).materia&&C.materia!==e(l).materia||e(l).grado&&C.grado!==e(l).grado||e(l).anotacion&&!C.anotacion.toLowerCase().includes(e(l).anotacion.toLowerCase()))return!1;if(e(F)){const p=C.fecha;if(e(l).fechaInicio&&p<e(l).fechaInicio||e(l).fechaFin&&p>e(l).fechaFin)return!1}return!0}))}),Be(()=>(e(F),e(l)),()=>{e(F)&&(!e(l).fechaInicio||!e(l).fechaFin)&&E()}),Sr(),Ar();var le=il(),He=o(le),ze=o(He),de=o(ze),W=o(de),re=a(W,2),Q=o(re),Ge=a(Q,2),Ne=a(de,2),fe=o(Ne),ue=a(fe,2),Ee=a(ze,2),st=o(Ee);{var We=C=>{var p=Js(),S=o(p),I=a(o(S),2);D(()=>s(I,`color: ${e(r),t(()=>e(r).text)??""};`)),g(C,p)},ge=C=>{var p=nl(),S=Zt(p),I=o(S),H=o(I),U=a(o(H));{var ne=De=>{var gt=Ks();g(De,gt)};X(U,De=>{e(l),t(()=>e(l).docente||e(l).materia||e(l).grado||e(l).anotacion||e(l).fechaInicio||e(l).fechaFin)&&De(ne)})}var Te=a(H,2),Z=a(I,2),R=o(Z),oe=a(R,2),ye=o(oe),me=a(ye,2),et=a(oe,2),rt=o(et),ie=a(rt,2),L=a(ie,2),K=a(L,2),pe=a(K,2),je=a(Z,2),n=o(je),x=o(n),A=o(x),z=a(A,2),Me=o(z);Me.value=Me.__value="";var tt=a(Me);he(tt,1,()=>e(w),ke,(De,gt)=>{var _t=Zs(),tr=o(_t),Qt={};D(()=>{b(tr,e(gt)),Qt!==(Qt=e(gt))&&(_t.value=(_t.__value=e(gt))??"")}),g(De,_t)});var Je=a(x,2),Ae=o(Je),Ut=o(Ae),Wt=a(Ae,2),Nt=o(Wt),Ht=o(Nt);Nt.value=Nt.__value="";var nr=a(Nt);he(nr,1,()=>e(c),ke,(De,gt)=>{var _t=Qs(),tr=o(_t),Qt={};D(()=>{b(tr,e(gt)),Qt!==(Qt=e(gt))&&(_t.value=(_t.__value=e(gt))??"")}),g(De,_t)});var jt=a(Wt,2);{var ot=De=>{var gt=Xs();g(De,gt)};X(jt,De=>{e(l),e(c),t(()=>e(l).docente&&e(c).length===0)&&De(ot)})}var lt=a(n,2),Et=o(lt),Rt=o(Et),Gt=o(Rt),It=a(Rt,2),St=o(It),qt=o(St);St.value=St.__value="";var vr=a(St);he(vr,1,()=>e(v),ke,(De,gt)=>{var _t=el(),tr=o(_t),Qt={};D(()=>{b(tr,e(gt)),Qt!==(Qt=e(gt))&&(_t.value=(_t.__value=e(gt))??"")}),g(De,_t)});var gr=a(It,2);{var ar=De=>{var gt=tl();g(De,gt)};X(gr,De=>{e(l),e(v),t(()=>(e(l).docente||e(l).materia)&&e(v).length===0)&&De(ar)})}var q=a(Et,2),ce=o(q),Ke=a(ce,2),vt=a(lt,2),mt=o(vt),Lt=o(mt),fr=a(Lt,2),Hr=a(mt,2),Dr=o(Hr),Fr=a(Dr,2),Gr=a(S,2),Ur=o(Gr),Er=o(Ur),Vr=a(o(Er)),zr=o(Vr),Mr=a(Ur,2);{var Yr=De=>{var gt=rl(),_t=o(gt),tr=o(_t),Qt=a(tr,2);D(()=>{s(tr,`color: ${e(r),t(()=>e(r).icon)??""};`),s(Qt,`color: ${e(r),t(()=>e(r).text)??""};`)}),g(De,gt)},Tr=De=>{var gt=ll(),_t=Zt(gt),tr=o(_t),Qt=o(tr),Or=o(Qt),_e=o(Or),Ue=o(_e),ft=a(Ue),Ot=a(ft),Pt=a(Ot),xr=a(Pt),Nr=a(xr),jr=a(Nr),Rr=a(Or);he(Rr,5,()=>e(O),ke,(Ir,xe)=>{const rr=Mt(()=>(e(xe),t(()=>u(e(xe).anotacion))));var ir=ol(),wr=o(ir),Pr=o(wr),dr=a(wr),m=o(dr),T=a(dr),ve=o(T),Ce=a(T),Pe=o(Ce),nt=a(Ce),$t=o(nt),Vt=a(nt),yt=o(Vt),$r=o(yt),Br=o($r),_=o(Br),V=a($r,2),se=o(V),k=a(Vt),Ie=o(k),Ze=o(Ie);D((be,it)=>{s(ir,`border-color: ${e(r),t(()=>e(r).border)??""};`),s(wr,`color: ${e(r),t(()=>e(r).text)??""};`),b(Pr,be),s(dr,`color: ${e(r),t(()=>e(r).text)??""};`),Ct(dr,"title",(e(xe),t(()=>e(xe).docente))),b(m,(e(xe),t(()=>e(xe).docente))),s(T,`color: ${e(r),t(()=>e(r).text)??""};`),Ct(T,"title",(e(xe),t(()=>e(xe).materia))),b(ve,(e(xe),t(()=>e(xe).materia))),s(Ce,`color: ${e(r),t(()=>e(r).text)??""};`),b(Pe,(e(xe),t(()=>e(xe).grado))),s(nt,`color: ${e(r),t(()=>e(r).text)??""};`),b($t,(e(xe),t(()=>e(xe).horas))),s(Vt,`color: ${e(r),t(()=>e(r).text)??""};`),Yt($r,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Re(e(rr)),t(()=>e(rr).color)??""} flex-shrink-0`),b(_,(Re(e(rr)),t(()=>e(rr).icon))),Ct(V,"title",(e(xe),t(()=>e(xe).anotacion))),b(se,it),s(k,`color: ${e(r),t(()=>e(r).text)??""};`),b(Ze,(e(xe),t(()=>e(xe).observacion||"-")))},[()=>(e(xe),t(()=>ae(e(xe).fecha))),()=>(e(xe),t(()=>h(e(xe).anotacion,100)))]),g(Ir,ir)});var Wr=a(_t,2),Lr=o(Wr);he(Lr,5,()=>e(O),ke,(Ir,xe)=>{const rr=Mt(()=>(e(xe),t(()=>u(e(xe).anotacion))));var ir=sl(),wr=o(ir),Pr=o(wr),dr=o(Pr),m=o(dr),T=o(m),ve=o(T),Ce=a(m,2),Pe=o(Ce),nt=a(wr,2),$t=o(nt),Vt=a(o($t),2),yt=o(Vt),$r=a($t,2),Br=a(o($r),2),_=o(Br),V=a(nt,2),se=o(V),k=a(se,2),Ie=o(k),Ze=a(V,2);{var be=it=>{var Qe=al(),dt=o(Qe),at=a(dt,2),zt=o(at);D(sr=>{s(dt,`color: ${e(r),t(()=>e(r).label)??""};`),s(at,`color: ${e(r),t(()=>e(r).text)??""};`),Ct(at,"title",(e(xe),t(()=>e(xe).observacion))),b(zt,sr)},[()=>(e(xe),t(()=>h(e(xe).observacion,150)))]),g(it,Qe)};X(Ze,it=>{e(xe),t(()=>e(xe).observacion)&&it(be)})}D((it,Qe)=>{s(ir,`border-color: ${e(r),t(()=>e(r).cardBorder)??""}; background-color: ${e(r),t(()=>e(r).cardBg)??""};`),Yt(m,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium ${Re(e(rr)),t(()=>e(rr).color)??""} flex-shrink-0`),b(ve,(Re(e(rr)),t(()=>e(rr).icon))),s(Ce,`color: ${e(r),t(()=>e(r).label)??""};`),b(Pe,`${e(xe),t(()=>e(xe).grado)??""} ‚Ä¢ ${it??""} ‚Ä¢ ${e(xe),t(()=>e(xe).horas)??""}h`),s(nt,`color: ${e(r),t(()=>e(r).text)??""};`),b(yt,(e(xe),t(()=>e(xe).docente))),Ct(Br,"title",(e(xe),t(()=>e(xe).materia))),b(_,(e(xe),t(()=>e(xe).materia))),s(se,`color: ${e(r),t(()=>e(r).label)??""};`),s(k,`color: ${e(r),t(()=>e(r).text)??""};`),Ct(k,"title",(e(xe),t(()=>e(xe).anotacion))),b(Ie,Qe)},[()=>(e(xe),t(()=>ae(e(xe).fecha))),()=>(e(xe),t(()=>h(e(xe).anotacion,150)))]),g(Ir,ir)}),D(()=>{s(tr,`border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),s(Or,`background-color: ${e(r),t(()=>e(r).cardBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""};`),s(Ue,`color: ${e(r),t(()=>e(r).text)??""};`),s(ft,`color: ${e(r),t(()=>e(r).text)??""};`),s(Ot,`color: ${e(r),t(()=>e(r).text)??""};`),s(Pt,`color: ${e(r),t(()=>e(r).text)??""};`),s(xr,`color: ${e(r),t(()=>e(r).text)??""};`),s(Nr,`color: ${e(r),t(()=>e(r).text)??""};`),s(jr,`color: ${e(r),t(()=>e(r).text)??""};`)}),g(De,gt)};X(Mr,De=>{e(O),t(()=>e(O).length===0)?De(Yr):De(Tr,!1)})}D(()=>{s(S,`border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),s(H,`color: ${e(r),t(()=>e(r).text)??""};`),s(Te,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(R,`color: ${e(r),t(()=>e(r).text)??""};`),s(me,`color: ${e(r),t(()=>e(r).text)??""};`),s(rt,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(ie,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(L,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(K,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(pe,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(A,`color: ${e(r),t(()=>e(r).label)??""};`),s(z,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(Ae,`color: ${e(r),t(()=>e(r).label)??""};`),b(Ut,`Materia ${e(l),t(()=>e(l).docente?"(del docente)":"")??""}`),s(Wt,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),b(Ht,(e(l),t(()=>e(l).docente?"Todas las materias del docente":"Todas las materias"))),s(Rt,`color: ${e(r),t(()=>e(r).label)??""};`),b(Gt,`Grado ${e(l),t(()=>e(l).docente||e(l).materia?"(filtrado)":"")??""}`),s(It,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),b(qt,(e(l),t(()=>e(l).docente||e(l).materia?"Todos los grados filtrados":"Todos los grados"))),s(ce,`color: ${e(r),t(()=>e(r).label)??""};`),s(Ke,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(Lt,`color: ${e(r),t(()=>e(r).label)??""};`),fr.disabled=!e(F),s(fr,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(Dr,`color: ${e(r),t(()=>e(r).label)??""};`),Fr.disabled=!e(F),s(Fr,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(Er,`color: ${e(r),t(()=>e(r).label)??""};`),b(zr,(e(O),t(()=>e(O).length)))}),P("click",Te,Xe),Ao(ye,()=>e(F),De=>i(F,De)),P("click",rt,()=>G("hoy")),P("click",ie,()=>G("semana")),P("click",L,()=>G("mes")),P("click",K,()=>G("mes_actual")),P("click",pe,()=>G("trimestre")),ct(z,()=>e(l).docente,De=>(we(l,e(l).docente=De),Ve(()=>{e(r),e(w),e(c),e(v)}))),ct(Wt,()=>e(l).materia,De=>(we(l,e(l).materia=De),Ve(()=>{e(r),e(w),e(c),e(v)}))),ct(It,()=>e(l).grado,De=>(we(l,e(l).grado=De),Ve(()=>{e(r),e(w),e(c),e(v)}))),_r(Ke,()=>e(l).anotacion,De=>(we(l,e(l).anotacion=De),Ve(()=>{e(r),e(w),e(c),e(v)}))),_r(fr,()=>e(l).fechaInicio,De=>(we(l,e(l).fechaInicio=De),Ve(()=>{e(r),e(w),e(c),e(v)}))),_r(Fr,()=>e(l).fechaFin,De=>(we(l,e(l).fechaFin=De),Ve(()=>{e(r),e(w),e(c),e(v)}))),g(C,p)};X(st,C=>{e(N)?C(We):C(ge,!1)})}D(()=>{s(He,`background-color: ${e(r),t(()=>e(r).cardBg)??""};`),s(ze,`border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),Ct(W,"src",ro),s(Q,`color: ${e(r),t(()=>e(r).text)??""};`),s(Ge,`color: ${e(r),t(()=>e(r).label)??""};`),fe.disabled=(e(O),t(()=>e(O).length===0)),s(ue,`color: ${e(r),t(()=>e(r).text)??""};`)}),P("click",fe,pt),P("click",ue,function(...C){d()?.apply(this,C)}),P("click",le,lo(function(...C){d()?.apply(this,C)})),P("keydown",le,C=>{(C.key==="Enter"||C.key===" ")&&d()()}),g(Y,le),kr()}var cl=y("<option> </option>"),vl=y("<option> </option>"),gl=y("<option> </option>"),pl=wt('<svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Cargando...',1),ul=wt('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> Aplicar Filtros',1),bl=y('<div class="text-sm opacity-75"> </div>'),fl=y('<div class="flex items-center justify-center py-12"><!></div>'),xl=y('<div class="text-center py-12"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v2a2 2 0 002 2h6a2 2 0 002-2v-2M9 17H5a2 2 0 01-2-2v-6a2 2 0 012-2h4M9 7V5a2 2 0 012-2h6a2 2 0 012 2v2M9 7h10a2 2 0 012 2v6a2 2 0 01-2 2H9M9 7V17m0 0h10"></path></svg> <p class="text-lg font-medium mb-2">No hay datos disponibles</p> <p class="text-sm"> </p></div>'),hl=y('<tr class="border-t transition-colors hover:bg-gray-50 dark:hover:bg-gray-800"><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"><div class="truncate"> </div></td><td class="px-4 py-3 text-sm"><div class="truncate"> </div></td></tr>'),ml=y('<tr class="border-t-2 font-bold bg-gray-100 dark:bg-gray-800"><td class="px-4 py-3 text-sm font-bold">TOTAL</td><td class="px-4 py-3 text-sm font-bold text-center"> </td><td class="px-4 py-3 text-sm font-bold text-center"></td><td class="px-4 py-3 text-sm font-bold text-center"> </td></tr>'),_l=y('<div class="overflow-x-auto rounded-lg border"><table class="w-full"><thead><tr><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Fecha</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Horas</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Asignatura</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Anotaci√≥n</th></tr></thead><tbody><!><!></tbody></table></div>'),yl=y('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-2xl" role="document"><div class="flex items-center justify-between p-6 border-b"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v2a2 2 0 002 2h6a2 2 0 002-2v-2M9 17H5a2 2 0 01-2-2v-6a2 2 0 012-2h4M9 7V5a2 2 0 012-2h6a2 2 0 012 2v2M9 7h10a2 2 0 012 2v6a2 2 0 01-2 2H9M9 7V17m0 0h10"></path></svg></div> <div><h2 id="modal-title" class="text-xl font-bold">Generador de Reportes PDF</h2> <p class="text-sm opacity-75">Filtre y genere reportes de anotaciones</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar ventana de reportes" title="Cerrar"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 140px);"><div class="mb-6 p-4 rounded-xl border"><h3 class="text-lg font-semibold mb-4">Filtros</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="space-y-2"><label for="docente-filter" class="block text-sm font-medium">Docente</label> <select id="docente-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los docentes</option><!></select></div> <div class="space-y-2"><label for="materia-filter" class="block text-sm font-medium">Asignatura</label> <select id="materia-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todas las asignaturas</option><!></select></div> <div class="space-y-2"><label for="grado-filter" class="block text-sm font-medium">Grado</label> <select id="grado-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los grados</option><!></select></div></div> <div class="flex gap-3 mt-4"><button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2"><!></button> <button class="px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> Limpiar</button> <button class="ml-auto px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Generar PDF</button></div></div> <div class="mb-4"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold"> </h3> <!></div></div> <!></div></div></div>');function kl(Y,$){yr($,!1);const c=f(),Se=f(),v=f();let M=null,r=null,d=Dt($,"onClose",8),Fe=Dt($,"initialDocente",8,""),B=f([]),te=f([]),ee=f([]),J=[],N=f([]),F=f(!1);const O=async()=>{if(!M||!r){const[n,x]=await Promise.all([so(()=>import("./pdf-CBBHH09D.js").then(A=>A.j),[]),so(()=>import("./pdf-CBBHH09D.js").then(A=>A.b),[])]);M=n.default,r=x.default}};let l=f(JSON.parse(localStorage.getItem("docenteMaterias")||"{}")),E=f(""),G=f(""),j=f("");br(()=>{Fe()&&i(E,Fe())}),br(async()=>{console.log("üöÄ ReportGenerator montado"),await u()});const u=async()=>{try{const[n,x,A]=await Promise.all([Zr(),Qr(),Xr()]);i(B,n),i(te,x),i(ee,A),i(l,JSON.parse(localStorage.getItem("docenteMaterias")||"{}"))}catch(n){console.error("Error cargando datos iniciales:",n)}},w=async()=>{i(F,!0);try{const n={spreadsheetId:fo,worksheetTitle:Do};e(E)&&(n.docente=e(E)),e(G)&&(n.materia=e(G)),e(j)&&(n.grado=e(j)),console.log("üîç Enviando payload a getAnotador:",n);const x=await jo(n);console.log("üìä Respuesta de getAnotador:",x);let A=x;if(x&&typeof x=="object"&&(x.data?A=x.data:x.records?A=x.records:Array.isArray(x)&&(A=x)),J=Array.isArray(A)?A:[],console.log("‚úÖ Datos procesados:",J.length,"registros"),console.log("üîç Keys del primer registro:",J[0]?Object.keys(J[0]):"No hay registros"),J.length>0&&J[0].values){console.log("üîÑ Transformando datos desde formato .values");const z=["Marca Temporal","Fecha","Docente","Asignatura","Grado","Horas","Anotaci√≥n"];J=J.map(Me=>{const tt={"Marca Temporal":"",Fecha:"",Docente:"",Asignatura:"",Grado:"",Horas:"",Anotaci√≥n:""};return z.forEach((Je,Ae)=>{tt[Je]=Me.values?.[Ae]||""}),tt}),console.log("üìä Datos transformados:",J.length,"registros")}Oe()}catch(n){if(console.error("‚ùå Error cargando datos del anotador:",n),n instanceof Error&&console.error("üìã Error details:",n.message),n&&typeof n=="object"&&"response"in n){const x=n.response;x&&(console.error("üåê Response status:",x.status),console.error("üåê Response data:",x.data))}J=[],i(N,[])}finally{i(F,!1)}},Oe=()=>{if(console.log("üîç Aplicando filtros locales:",{totalRegistros:J.length,isArray:Array.isArray(J),docente:e(E),materia:e(G),grado:e(j)}),!Array.isArray(J)){console.error("‚ùå anotadorData no es un array:",typeof J,J),i(N,[]);return}i(N,J.filter(n=>{if(!n||typeof n!="object")return console.log("‚ö†Ô∏è Registro inv√°lido:",n),!1;const x=!e(E)||n.Docente===e(E),A=!e(G)||n.Asignatura===e(G),z=!e(j)||n.Grado===e(j);return!x&&e(E)&&console.log("‚ùå No coincide docente:",{expected:e(E),actual:n.Docente}),!A&&e(G)&&console.log("‚ùå No coincide materia:",{expected:e(G),actual:n.Asignatura}),!z&&e(j)&&console.log("‚ùå No coincide grado:",{expected:e(j),actual:n.Grado}),x&&A&&z})),console.log("‚úÖ Registros filtrados:",e(N).length)},$e=()=>{w()},Ye=()=>{i(E,""),i(G,""),i(j,""),J=[],i(N,[])},Le=async()=>{if(await O(),e(N).length===0){alert("No hay datos para generar el PDF");return}const n=new M({format:"letter"}),x="Anotador de Clases",A=[];e(E)&&A.push(`Docente: ${e(E)}`),e(G)&&A.push(`Asignatura: ${e(G)}`),e(j)&&A.push(`Grado: ${e(j)}`);let z=20;try{console.log("üñºÔ∏è Intentando agregar logo EIE al PDF..."),n.setTextColor(99,102,241),n.setFontSize(28),n.setFont("helvetica","bold"),n.text("EIE",n.internal.pageSize.getWidth()/2,z,{align:"center"}),z+=15,console.log("‚úÖ Logo EIE (texto) agregado correctamente")}catch(Ae){console.log("‚ùå Error con logo EIE, usando fallback:",Ae),n.setTextColor(99,102,241),n.setFontSize(24),n.text("EIE",n.internal.pageSize.getWidth()/2,z,{align:"center"}),z+=15}n.setTextColor(0,0,0),n.setFontSize(18),n.setFont("helvetica","bold"),n.text(x,n.internal.pageSize.getWidth()/2,z,{align:"center"}),z+=12,n.setTextColor(0,0,0),n.setFontSize(12),n.setFont("helvetica","normal"),n.text("Instituci√≥n Educativa Instituto Gu√°tica",n.internal.pageSize.getWidth()/2,z,{align:"center"}),z+=10,n.setTextColor(60,60,60),n.setFontSize(10),n.setFont("helvetica","normal"),n.text(`Fecha de generaci√≥n: ${new Date().toLocaleDateString()}`,n.internal.pageSize.getWidth()/2,z,{align:"center"}),z+=15,n.setDrawColor(200,200,200),n.setLineWidth(1),n.line(20,z,n.internal.pageSize.getWidth()-20,z),z+=15,A.length>0&&(n.setTextColor(80,80,80),n.setFontSize(9),n.setFont("helvetica","normal"),A.forEach(Ae=>{n.text(Ae,20,z,{align:"left"}),z+=6}),z+=10);const Me=e(N).map(Ae=>[Ae.Fecha||"",Ae.Horas||"",Ae.Asignatura||"",Ae.Anotaci√≥n||""]),tt=["TOTAL",e(c).toFixed(1),"",""];Me.push(tt),console.log("üìä Generando PDF con:",{totalHoras:e(c),registros:e(N).length,filasTabla:Me.length}),r(n,{head:[["Fecha","Horas","Asignatura","Anotaci√≥n"]],body:Me,startY:z,styles:{fontSize:8,cellPadding:2,cellWidth:"wrap",valign:"top",overflow:"linebreak"},headStyles:{fillColor:[99,102,241],textColor:255,fontSize:9,fontStyle:"bold",halign:"center"},bodyStyles:{fillColor:[255,255,255],textColor:[0,0,0]},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:{0:{cellWidth:30,minCellHeight:8,halign:"center"},1:{cellWidth:20,minCellHeight:8,halign:"center"},2:{cellWidth:45,minCellHeight:8},3:{cellWidth:"auto",minCellHeight:12}},margin:{top:15,right:15,bottom:15,left:15},tableWidth:"auto",didParseCell:Ae=>{Ae.row.index===Me.length-1&&(Ae.cell.styles.fillColor=[240,240,240],Ae.cell.styles.fontStyle="bold",Ae.cell.styles.textColor=[0,0,0],Ae.column.index===0&&(Ae.cell.styles.halign="center",Ae.cell.styles.fillColor=[230,230,230]),Ae.column.index===1&&(Ae.cell.styles.halign="center",Ae.cell.styles.fillColor=[220,220,220]),Ae.column.index===2&&(Ae.cell.styles.halign="center",Ae.cell.styles.fillColor=[220,220,220]),Ae.column.index===3&&(Ae.cell.styles.halign="center",Ae.cell.styles.fillColor=[220,220,220]))}});const Je=`reporte_anotaciones_${e(E)||"todos"}_${e(G)||"todas"}_${e(j)||"todos"}_${new Date().toISOString().split("T")[0]}.pdf`;n.save(Je),console.log("üíæ PDF guardado exitosamente:",Je)};Be(()=>e(N),()=>{i(c,e(N).reduce((n,x)=>{const A=parseFloat(x.Horas||"0");return n+(isNaN(A)?0:A)},0))}),Be(()=>(e(E),e(te),e(l)),()=>{i(Se,e(E)?[...e(te)].sort((n,x)=>{const A=e(l)[e(E)]?.includes(n.materia),z=e(l)[e(E)]?.includes(x.materia);return A&&!z?-1:!A&&z?1:n.materia.localeCompare(x.materia)}):e(te))}),Be(()=>{},()=>{i(v,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Sr(),Ar();var Xe=yl(),pt=o(Xe),ae=o(pt),h=a(o(ae),2),le=a(ae,2),He=o(le),ze=a(o(He),2),de=o(ze),W=o(de),re=a(W,2),Q=o(re);Q.value=Q.__value="";var Ge=a(Q);he(Ge,1,()=>e(B),ke,(n,x)=>{var A=cl(),z=o(A),Me={};D(()=>{b(z,e(x)),Me!==(Me=e(x))&&(A.value=(A.__value=e(x))??"")}),g(n,A)});var Ne=a(de,2),fe=o(Ne),ue=a(fe,2),Ee=o(ue);Ee.value=Ee.__value="";var st=a(Ee);he(st,1,()=>e(Se),ke,(n,x)=>{const A=Mt(()=>(e(E),e(l),e(x),t(()=>e(E)&&e(l)[e(E)]?.includes(e(x).materia))));var z=vl(),Me=o(z),tt={};D(()=>{s(z,e(A)?"color: #6366f1; font-weight: 600;":""),b(Me,`${e(A)?"‚≠ê ":""}${e(x),t(()=>e(x).materia)??""}`),tt!==(tt=(e(x),t(()=>e(x).materia)))&&(z.value=(z.__value=(e(x),t(()=>e(x).materia)))??"")}),g(n,z)});var We=a(Ne,2),ge=o(We),C=a(ge,2),p=o(C);p.value=p.__value="";var S=a(p);he(S,1,()=>(e(ee),t(()=>[...new Set(e(ee).map(n=>n.grado.toString()))])),ke,(n,x)=>{var A=gl(),z=o(A),Me={};D(tt=>{b(z,tt),Me!==(Me=e(x))&&(A.value=(A.__value=e(x))??"")},[()=>(e(x),t(()=>e(x).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),g(n,A)});var I=a(ze,2),H=o(I),U=o(H);{var ne=n=>{var x=pl();g(n,x)},Te=n=>{var x=ul();g(n,x)};X(U,n=>{e(F)?n(ne):n(Te,!1)})}var Z=a(H,2),R=a(Z,2),oe=a(He,2),ye=o(oe),me=o(ye),et=o(me),rt=a(me,2);{var ie=n=>{var x=bl(),A=o(x);D(()=>b(A,`${(e(E)&&`Docente: ${e(E)}`)??""}
              ${(e(G)&&` | Asignatura: ${e(G)}`)??""}
              ${(e(j)&&` | Grado: ${e(j)}`)??""}`)),g(n,x)};X(rt,n=>{e(N),t(()=>e(N).length>0)&&n(ie)})}var L=a(oe,2);{var K=n=>{var x=fl(),A=o(x);io(A,{message:"Cargando datos del anotador..."}),g(n,x)},pe=n=>{var x=xl(),A=a(o(x),4),z=o(A);D(()=>{s(x,`color: ${e(v),t(()=>e(v).placeholder)??""};`),b(z,e(E)||e(G)||e(j)?"No se encontraron registros con los filtros seleccionados. Intente con otros criterios.":"Seleccione filtros y haga clic en 'Aplicar Filtros' para cargar los datos.")}),g(n,x)},je=n=>{var x=_l(),A=o(x),z=o(A),Me=o(z),tt=o(Me),Je=a(tt),Ae=a(Je),Ut=a(Ae),Wt=a(z),Nt=o(Wt);he(Nt,1,()=>e(N),ke,(jt,ot)=>{var lt=hl(),Et=o(lt),Rt=o(Et),Gt=a(Et),It=o(Gt),St=a(Gt),qt=o(St),vr=o(qt),gr=a(St),ar=o(gr),q=o(ar);D(()=>{s(lt,`border-color: ${e(v),t(()=>e(v).border)??""};`),b(Rt,(e(ot),t(()=>e(ot).Fecha||"-"))),b(It,(e(ot),t(()=>e(ot).Horas||"-"))),Ct(qt,"title",(e(ot),t(()=>e(ot).Asignatura))),b(vr,(e(ot),t(()=>e(ot).Asignatura||"-"))),Ct(ar,"title",(e(ot),t(()=>e(ot).Anotaci√≥n))),b(q,(e(ot),t(()=>e(ot).Anotaci√≥n||"-")))}),g(jt,lt)});var Ht=a(Nt);{var nr=jt=>{var ot=ml(),lt=a(o(ot)),Et=o(lt),Rt=a(lt,2),Gt=o(Rt);D(It=>{s(ot,`border-color: ${e(v),t(()=>e(v).border)??""}; border-top-width: 2px;`),b(Et,It),b(Gt,`${e(N),t(()=>e(N).length)??""} registros`)},[()=>(e(c),t(()=>e(c).toFixed(1)))]),g(jt,ot)};X(Ht,jt=>{e(N),t(()=>e(N).length>0)&&jt(nr)})}D(()=>{s(x,`border-color: ${e(v),t(()=>e(v).border)??""};`),s(z,`background-color: ${e(v),t(()=>e(v).inputBg)??""};`),s(tt,`color: ${e(v),t(()=>e(v).label)??""};`),s(Je,`color: ${e(v),t(()=>e(v).label)??""};`),s(Ae,`color: ${e(v),t(()=>e(v).label)??""};`),s(Ut,`color: ${e(v),t(()=>e(v).label)??""};`)}),g(n,x)};X(L,n=>{e(F)?n(K):(e(N),t(()=>e(N).length===0)?n(pe,1):n(je,!1))})}D(()=>{s(pt,`background-color: ${e(v),t(()=>e(v).cardBg)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(ae,`border-color: ${e(v),t(()=>e(v).cardBorder)??""};`),s(He,`background-color: ${e(v),t(()=>e(v).inputBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""};`),s(W,`color: ${e(v),t(()=>e(v).label)??""};`),s(re,`background-color: ${e(v),t(()=>e(v).cardBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(fe,`color: ${e(v),t(()=>e(v).label)??""};`),s(ue,`background-color: ${e(v),t(()=>e(v).cardBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(ge,`color: ${e(v),t(()=>e(v).label)??""};`),s(C,`background-color: ${e(v),t(()=>e(v).cardBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""}; color: ${e(v),t(()=>e(v).text)??""};`),H.disabled=e(F),s(Z,`color: ${e(v),t(()=>e(v).text)??""};`),R.disabled=(e(N),t(()=>e(N).length===0)),b(et,`Resultados (${e(N),t(()=>e(N).length)??""} registros)`)}),P("click",h,function(...n){d()?.apply(this,n)}),ct(re,()=>e(E),n=>i(E,n)),ct(ue,()=>e(G),n=>i(G,n)),ct(C,()=>e(j),n=>i(j,n)),P("click",H,$e),P("click",Z,Ye),P("click",R,Le),P("click",Xe,lo(function(...n){d()?.apply(this,n)})),P("keydown",Xe,n=>n.key==="Escape"&&d()()),g(Y,Xe),kr()}var wl=y('<div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping svelte-1p7gzb0"></div> <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full svelte-1p7gzb0"></div>',1),$l=wt('<svg class="w-5 h-5 text-indigo-500 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1p7gzb0"></path></svg>'),Cl=wt('<svg class="w-5 h-5 text-amber-500 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="svelte-1p7gzb0"></path></svg>'),Sl=wt('<svg class="w-5 h-5 text-indigo-400 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1p7gzb0"></path></svg>'),Al=y('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-1p7gzb0"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0 svelte-1p7gzb0"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-1p7gzb0"></path></svg></div> <div class="flex-1 pr-6 pt-0.5 svelte-1p7gzb0"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100 svelte-1p7gzb0">Informaci√≥n</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200 svelte-1p7gzb0"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors svelte-1p7gzb0" aria-label="Cerrar alerta"><svg class="w-4 h-4 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-1p7gzb0"></path></svg></button></div>'),Dl=y('<option class="svelte-1p7gzb0"> </option>'),El=y('<option class="svelte-1p7gzb0"> </option>'),Il=y('<option class="svelte-1p7gzb0"> </option>'),Bl=y('<option class="svelte-1p7gzb0"> </option>'),Fl=y('<button class="absolute right-4 top-1/2 transform -translate-y-1/2 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors svelte-1p7gzb0" title="Limpiar b√∫squeda"><svg class="w-4 h-4 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-1p7gzb0"></path></svg></button>'),zl=y('<div class="text-center py-8 svelte-1p7gzb0"><svg class="w-12 h-12 mx-auto mb-4 opacity-50 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" class="svelte-1p7gzb0"></path></svg> <p class="text-sm svelte-1p7gzb0"> </p></div>'),Ml=y('<div class="flex items-center justify-center py-12 svelte-1p7gzb0"><!></div>'),Tl=y('<span class="ml-2 inline-block animate-bounce svelte-1p7gzb0">‚ú®</span>'),Ol=y('<span class="text-xs font-medium svelte-1p7gzb0"> </span>'),Nl=y('<div class="h-px flex-1 transition-all duration-300 group-hover:opacity-50 svelte-1p7gzb0"></div>'),jl=wt('<svg class="w-3 h-3 text-white svelte-1p7gzb0" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" class="svelte-1p7gzb0"></path></svg>'),Rl=y('<div class="relative group flex flex-col p-0 rounded-2xl border transition-all duration-200 shadow-sm hover:shadow-md svelte-1p7gzb0"><div class="flex items-start gap-1 p-4 svelte-1p7gzb0"><label class="flex-shrink-0 cursor-pointer p-1 mt-1 svelte-1p7gzb0"><input type="checkbox" class="hidden svelte-1p7gzb0"/> <div class="w-5 h-5 rounded border flex items-center justify-center transition-colors cursor-pointer svelte-1p7gzb0"><!></div></label> <textarea rows="8" class="w-full bg-transparent border-none focus:ring-0 text-base font-medium leading-relaxed resize-none p-1 transition-colors min-h-[180px] pb-6 svelte-1p7gzb0" placeholder="Escriba aqu√≠..."></textarea></div></div>'),Ll=y('<div class="grid grid-cols-1 md:grid-cols-2 gap-4 svelte-1p7gzb0"></div>'),Pl=y('<div class="space-y-4 svelte-1p7gzb0"><button type="button" class="flex items-center gap-3 w-full text-left cursor-pointer group focus:outline-none svelte-1p7gzb0"><div class="flex items-center gap-3 flex-1 svelte-1p7gzb0"><h3> <!></h3> <!></div> <!> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" class="svelte-1p7gzb0"></path></svg></button> <!></div>'),Hl=wt('<svg class="animate-spin h-7 w-7 text-white svelte-1p7gzb0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25 svelte-1p7gzb0" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75 svelte-1p7gzb0" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Gl=wt('<svg class="w-8 h-8 transform rotate-90 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" class="svelte-1p7gzb0"></path></svg>'),Ul=y('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200 svelte-1p7gzb0"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40 svelte-1p7gzb0"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8 svelte-1p7gzb0"><div class="flex items-center gap-4 lg:flex-col svelte-1p7gzb0"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto svelte-1p7gzb0"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center svelte-1p7gzb0">Anotador de Clase</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full svelte-1p7gzb0"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Abrir hoja de c√°lculo"><svg class="w-5 h-5 svelte-1p7gzb0" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Hoja de C√°lculo</span></button> <button id="filter-button-target" class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Abrir filtros de anotaciones"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Filtros</span> <!></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Generar reportes PDF"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Reportes PDF</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Volver al Dashboard"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Dashboard</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full svelte-1p7gzb0" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize svelte-1p7gzb0"> </span></button></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto pb-32 svelte-1p7gzb0"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border svelte-1p7gzb0"><!> <!> <form class="space-y-6 svelte-1p7gzb0"><div class="grid grid-cols-1 md:grid-cols-3 gap-6 svelte-1p7gzb0"><div class="space-y-2 svelte-1p7gzb0"><label for="fecha" class="block text-sm font-medium svelte-1p7gzb0">Fecha</label> <input type="date" id="fecha" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none svelte-1p7gzb0"/></div> <div class="space-y-2 svelte-1p7gzb0"><label for="docente" class="block text-sm font-medium svelte-1p7gzb0">Docente</label> <select id="docente" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-1p7gzb0"><option class="svelte-1p7gzb0"> </option><!></select></div> <div class="space-y-2 svelte-1p7gzb0"><label for="materia" class="block text-sm font-medium svelte-1p7gzb0">Asignatura</label> <select id="materia" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-1p7gzb0"><option class="svelte-1p7gzb0"> </option><!></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-1p7gzb0"><div class="space-y-2 svelte-1p7gzb0"><label for="grado" class="block text-sm font-medium svelte-1p7gzb0">Grado</label> <select id="grado" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-1p7gzb0"><option class="svelte-1p7gzb0"> </option><!></select></div> <div class="space-y-2 svelte-1p7gzb0"><label for="horas" class="block text-sm font-medium svelte-1p7gzb0">Horas</label> <select id="horas" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer svelte-1p7gzb0"><option class="svelte-1p7gzb0">Seleccione horas</option><!></select></div></div> <div class="space-y-2 svelte-1p7gzb0"><label for="search" class="block text-sm font-medium svelte-1p7gzb0">Buscar anotaciones</label> <div class="relative svelte-1p7gzb0"><input type="text" id="search" placeholder="Buscar por palabra clave o categor√≠a..." class="w-full px-4 py-3 pl-12 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none svelte-1p7gzb0"/> <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" class="svelte-1p7gzb0"></path></svg> <!></div> <!></div> <div class="space-y-8 svelte-1p7gzb0"><!></div> <div class="space-y-2 svelte-1p7gzb0"><label for="observacion" class="block text-sm font-medium svelte-1p7gzb0">Observaci√≥n</label> <textarea id="observacion" rows="3" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none resize-none svelte-1p7gzb0" placeholder="Observaciones adicionales (opcional)..."></textarea></div> <div class="fixed bottom-8 right-8 z-50 svelte-1p7gzb0"><button type="submit" class="w-16 h-16 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-400 dark:disabled:bg-slate-700 disabled:cursor-not-allowed disabled:scale-100 text-white rounded-full shadow-2xl transition-all duration-300 transform hover:scale-110 active:scale-95 backdrop-blur-sm bg-opacity-95 flex items-center justify-center overflow-hidden border border-white/20 svelte-1p7gzb0" aria-label="Guardar Anotaci√≥n"><!></button></div></form></div></main></div> <!> <!>',1);function Vl(Y,$){yr($,!1);const c=()=>ho(Kr,"$theme",Se),[Se,v]=xo(),M=f(),r=f(),d=f(),Fe=f();let B=Dt($,"onBack",8),te=f([]),ee=f([]),J=f([]),N=f(!1),F=f(!1),O=f(!1),l=f(!1),E=f({}),G=f({}),j=f(""),u=f({}),w=f([]),Oe=f(""),$e=f("");const Ye=m=>{we(G,e(G)[m]=!e(G)[m]),i(G,e(G))},Le=(m,T)=>{const ve=e(E)[m].indexOf(T);if(ve!==-1){const Ce={...T,selected:!T.selected},Pe=[...e(E)[m].slice(0,ve),Ce,...e(E)[m].slice(ve+1)];i(E,{...e(E),[m]:Pe}),console.log("üîÑ Anotaci√≥n toggle:",{categoria:m,index:ve,texto:Ce.text,nuevoEstado:Ce.selected,totalSeleccionadas:Object.values(e(E)).flat().filter(nt=>nt.selected).length})}},Xe=m=>({"C√ÅTEDRA DE LA PAZ":"#8b5cf6","CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL":"#10b981","CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y":"#f59e0b","DIRECCI√ìN DE GRUPO":"#3b82f6","EDUCACI√ìN ART√çSTICA":"#f43f5e","EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES":"#ef4444","EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS":"#8b5cf6",EMPRENDIMIENTO:"#f97316",ESTAD√çSTICA:"#06b6d4","FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS":"#6366f1",F√çSICA:"#3b82f6",INGL√âS:"#14b8a6","LENGUA CASTELLANA":"#10b981",MATEM√ÅTICAS:"#3b82f6","PROYECTO Y EMPRENDIMIENTO":"#f97316",QU√çMICA:"#06b6d4","TECNOLOG√çA E INFORM√ÅTICA":"#6366f1","√âTICA PROFESIONAL":"#8b5cf6","Estrategias de Ense√±anza-Aprendizaje":"#6366f1","Evaluaci√≥n y Verificaci√≥n de Saberes":"#10b981","Enfoque STEM+ y Contexto Rural":"#f59e0b","Pr√°cticas de Laboratorio y Mantenimiento":"#f43f5e","Ciudadan√≠a Digital y √âtica":"#8b5cf6","Pensamiento Computacional y Programaci√≥n":"#06b6d4","Recursos Anal√≥gicos y Contingencias":"#f97316","Ofim√°tica y Competencias Productivas":"#14b8a6","Gesti√≥n Administrativa y Proyectos Transversales":"#3b82f6"})[m]||"#6366f1",pt={MATEM√ÅTICAS:"MATEM√ÅTICAS","LENGUA CASTELLANA":"LENGUA CASTELLANA",INGL√âS:"INGL√âS","CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL":"CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL","CIENCIAS NATURALES":"CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL","CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y":"CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y","CIENCIAS SOCIALES":"CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y",F√çSICA:"F√çSICA",QU√çMICA:"QU√çMICA","EDUCACI√ìN ART√çSTICA":"EDUCACI√ìN ART√çSTICA","EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES":"EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES","EDUCACI√ìN F√çSICA":"EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES","TECNOLOG√çA E INFORM√ÅTICA":"TECNOLOG√çA E INFORM√ÅTICA",TECNOLOG√çA:"TECNOLOG√çA E INFORM√ÅTICA",INFORM√ÅTICA:"TECNOLOG√çA E INFORM√ÅTICA",EMPRENDIMIENTO:"EMPRENDIMIENTO","FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS":"FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS",FILOSOF√çA:"FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS",ESTAD√çSTICA:"ESTAD√çSTICA","EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS":"EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS",√âTICA:"EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS","DIRECCI√ìN DE GRUPO":"DIRECCI√ìN DE GRUPO","PROYECTO Y EMPRENDIMIENTO":"PROYECTO Y EMPRENDIMIENTO",PROYECTO:"PROYECTO Y EMPRENDIMIENTO","C√ÅTEDRA DE LA PAZ":"C√ÅTEDRA DE LA PAZ","√âTICA PROFESIONAL":"√âTICA PROFESIONAL"},ae=m=>{if(!e(h).materia)return m;let T=pt[e(h).materia.toUpperCase()]||pt[e(h).materia]||"";if(!T){const ve=e(h).materia.toUpperCase();for(const[Ce,Pe]of Object.entries(pt))if(Ce.includes(ve)||ve.includes(Ce)){T=Pe;break}}return console.log("Materia seleccionada:",e(h).materia,"‚Üí Categor√≠a:",T),m.sort(([ve],[Ce])=>ve===T&&Ce!==T?-1:Ce===T&&ve!==T?1:ve.localeCompare(Ce))};let h=f({fecha:new Date().toISOString().split("T")[0],docente:localStorage.getItem("lastDocente")||"",materia:"",horas:"",grado:"",anotacion:"",observacion:""}),le=f(JSON.parse(localStorage.getItem("docenteMaterias")||"{}"));const He=(m,T)=>{!m||!T||(e(le)[m]||we(le,e(le)[m]=[]),e(le)[m].includes(T)||(we(le,e(le)[m]=[...e(le)[m],T]),localStorage.setItem("docenteMaterias",JSON.stringify(e(le)))))};let ze=f(localStorage.getItem("dismissedInfoAnotadorContent")!==wo);const de=()=>{i(ze,!1),localStorage.setItem("dismissedInfoAnotadorContent",wo)};let W=f(!1),re=f(!1),Q=f(!1);const Ge=()=>{i(re,!0)},Ne=()=>{i(re,!1)},fe=()=>{i(Q,!0)},ue=()=>{i(Q,!1)};let Ee=f(!0);const st="¬°Nueva funci√≥n de filtrado avanzado disponible!";function We(){return!0}const ge=()=>{localStorage.setItem("dismissedFeatureAlertAnotador",new Date().toISOString()),i(Ee,!1)},C=()=>{localStorage.setItem("dismissedFeatureAlertAnotador",new Date().toISOString()),Ge()},p=()=>`https://docs.google.com/spreadsheets/d/${fo}`,S=()=>{window.open(p(),"_blank")},I=()=>{Kr.update(m=>m==="light"?"dim":m==="dim"?"dark":"light")},H=async()=>{i(N,!0),i(F,!0),i(O,!0),i(l,!0);try{const[m,T,ve,Ce]=await Promise.all([Zr(),Qr(),Xr(),Ca()]);i(te,m),i(ee,T),i(J,ve);const Pe={},nt={};for(const[$t,Vt]of Object.entries(Ce))Pe[$t]=Vt.map(yt=>({text:yt,selected:!1})),nt[$t]=!1;i(E,Pe),i(G,nt)}catch(m){console.error("Error cargando datos iniciales:",m)}finally{i(N,!1),i(F,!1),i(O,!1),i(l,!1)}},U=async m=>{if(m.preventDefault(),e(W))return;const T=Object.values(e(E)).flat().filter(Pe=>Pe.selected).map(Pe=>Pe.text),ve=T.join(" | ");if((await Tt.fire({title:"¬øConfirmar Registro?",html:`
        <div class="text-left space-y-2 p-2 rounded-xl bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10" style="font-size: 0.9rem; line-height: 1.4;">
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Fecha:</strong> ${e(h).fecha}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Docente:</strong> ${e(h).docente}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Asignatura:</strong> ${e(h).materia}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Grado:</strong> ${e(h).grado}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Horas:</strong> ${e(h).horas}</div>
          <div style="margin-top: 12px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 8px;">
            <strong style="color: #6366f1;">Anotaciones:</strong>
            <ul style="list-style-type: disc; padding-left: 20px; margin-top: 4px; font-size: 0.8rem; opacity: 0.8;">
              ${T.map(Pe=>`<li>${Pe}</li>`).join("")}
            </ul>
          </div>
          ${e(h).observacion?`<div style="margin-top: 12px;"><strong style="color: #6366f1;">Observaci√≥n:</strong> <span style="font-size: 0.8rem;">${e(h).observacion}</span></div>`:""}
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonText:"Si, de acuerdo",cancelButtonText:"No",confirmButtonColor:"#4f46e5",cancelButtonColor:"#64748b",reverseButtons:!0,background:c()==="light"?"#fff":"#1e293b",color:c()==="light"?"#1e293b":"#f1f5f9"})).isConfirmed){i(W,!0);try{const nt=[[new Date().toLocaleString(),e(h).fecha,e(h).docente,e(h).materia,e(h).grado,e(h).horas,ve,e(h).observacion]];await Sa({spreadsheetId:fo,worksheetTitle:Do,datos:nt}),He(e(h).docente,e(h).materia),await Tt.fire({icon:"success",title:"¬°√âxito!",text:"Anotaci√≥n registrada exitosamente",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),i(h,{fecha:new Date().toISOString().split("T")[0],docente:e(h).docente,materia:e(h).materia,grado:e(h).grado,horas:"",anotacion:"",observacion:""});for(const $t in e(E))we(E,e(E)[$t]=e(E)[$t].map(Vt=>({...Vt,selected:!1})));i(E,{...e(E)})}catch(Pe){console.error("Error enviando:",Pe),await Tt.fire({icon:"error",title:"Error",text:"Error al registrar la anotaci√≥n",confirmButtonColor:"#ef4444"})}finally{i(W,!1)}}};br(()=>{H(),i(Ee,We())}),Be(()=>(e(h),e($e)),()=>{if(e(h).materia&&e(h).materia!==e($e)){i($e,e(h).materia);let m=pt[e(h).materia.toUpperCase()]||pt[e(h).materia]||"";if(!m){const T=e(h).materia.toUpperCase();for(const[ve,Ce]of Object.entries(pt))if(ve.includes(T)||T.includes(ve)){m=Ce;break}}m&&(i(Oe,m),console.log("‚ú® Categoria destacada:",m),setTimeout(()=>{i(Oe,"")},3e3))}}),Be(()=>(e(E),e(j)),()=>{i(u,Object.entries(e(E)).reduce((m,[T,ve])=>{if(!e(j).trim())return m[T]=ve,m;const Ce=e(j).toLowerCase().trim(),Pe=ve.filter(nt=>nt.text.toLowerCase().includes(Ce));return Pe.length>0&&(m[T]=Pe),m},{}))}),Be(()=>(e(ee),e(h),e(E),e(u),e(w)),()=>{console.log("üîÑ Reactividad actualizada"),console.log("üìö Materias disponibles:",e(ee).map(m=>m.materia)),console.log("‚úçÔ∏è Materia seleccionada:",e(h).materia),console.log("üìä Categor√≠as disponibles:",Object.keys(e(E))),console.log("üîç Categor√≠as filtradas:",Object.keys(e(u))),i(w,ae(Object.entries(e(u)))),console.log("üìã Entradas ordenadas:",e(w).map(([m])=>m))}),Be(()=>e(h),()=>{e(h).docente&&localStorage.setItem("lastDocente",e(h).docente)}),Be(()=>(e(h),e(ee),e(le)),()=>{i(M,e(h).docente?[...e(ee)].sort((m,T)=>{const ve=e(le)[e(h).docente]?.includes(m.materia),Ce=e(le)[e(h).docente]?.includes(T.materia);return ve&&!Ce?-1:!ve&&Ce?1:m.materia.localeCompare(T.materia)}):e(ee))}),Be(()=>{},()=>{i(r,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Be(()=>e(E),()=>{i(d,Object.values(e(E)).flat().some(m=>m.selected))}),Be(()=>(e(h),e(d)),()=>{i(Fe,e(h).fecha&&e(h).docente&&e(h).materia&&e(h).grado&&e(h).horas&&e(d))}),Be(()=>(e(h),e(d),e(Fe),e(E)),()=>{console.log("üîç Validaci√≥n formulario:",{fecha:e(h).fecha,docente:e(h).docente,materia:e(h).materia,grado:e(h).grado,horas:e(h).horas,hasSelectedAnotacion:e(d),isFormValid:e(Fe),totalAnotaciones:Object.values(e(E)).flat().length,selectedCount:Object.values(e(E)).flat().filter(m=>m.selected).length})}),Sr(),Ar();var ne=Ul(),Te=Zt(ne),Z=o(Te),R=o(Z),oe=o(R),ye=o(oe),me=a(ye,2),et=a(oe,2),rt=o(et),ie=a(rt,2),L=a(o(ie),4);{var K=m=>{var T=wl();g(m,T)};X(L,m=>{e(Ee)&&m(K)})}var pe=a(ie,2),je=a(pe,2),n=a(je,2),x=o(n);{var A=m=>{var T=$l();g(m,T)},z=m=>{var T=Cl();g(m,T)},Me=m=>{var T=Sl();g(m,T)};X(x,m=>{c()==="dark"?m(A):c()==="light"?m(z,1):m(Me,!1)})}var tt=a(x,2),Je=o(tt),Ae=a(Z,2),Ut=o(Ae),Wt=o(Ut);{var Nt=m=>{var T=Al(),ve=a(o(T),2),Ce=a(o(ve),2),Pe=o(Ce),nt=a(ve,2);D(()=>b(Pe,wo)),P("click",nt,de),g(m,T)};X(Wt,m=>{e(ze)&&m(Nt)})}var Ht=a(Wt,2);bo(Ht,{featureMessage:st,description:"Ahora puedes filtrar tus anotaciones de forma avanzada. ¬°Pru√©balo!",onTryNow:C,onDismiss:ge,targetSelector:"#filter-button-target",showPopup:!1,colorTheme:"purple"});var nr=a(Ht,2),jt=o(nr),ot=o(jt),lt=o(ot),Et=a(lt,2),Rt=a(ot,2),Gt=o(Rt),It=a(Gt,2),St=o(It),qt=o(St);St.value=St.__value="";var vr=a(St);he(vr,1,()=>e(te),ke,(m,T)=>{var ve=Dl(),Ce=o(ve),Pe={};D(()=>{b(Ce,e(T)),Pe!==(Pe=e(T))&&(ve.value=(ve.__value=e(T))??"")}),g(m,ve)});var gr=a(Rt,2),ar=o(gr),q=a(ar,2),ce=o(q),Ke=o(ce);ce.value=ce.__value="";var vt=a(ce);he(vt,1,()=>e(M),ke,(m,T)=>{const ve=Mt(()=>(e(le),e(h),e(T),t(()=>e(le)[e(h).docente]?.includes(e(T).materia))));var Ce=El(),Pe=o(Ce),nt={};D(()=>{s(Ce,e(ve)?"color: #6366f1; font-weight: 600;":""),b(Pe,`${e(ve)?"‚≠ê ":""}${e(T),t(()=>e(T).materia)??""}`),nt!==(nt=(e(T),t(()=>e(T).materia)))&&(Ce.value=(Ce.__value=(e(T),t(()=>e(T).materia)))??"")}),g(m,Ce)});var mt=a(jt,2),Lt=o(mt),fr=o(Lt),Hr=a(fr,2),Dr=o(Hr),Fr=o(Dr);Dr.value=Dr.__value="";var Gr=a(Dr);he(Gr,1,()=>(e(J),t(()=>[...new Set(e(J).map(m=>m.grado.toString()))])),ke,(m,T)=>{var ve=Il(),Ce=o(ve),Pe={};D(nt=>{b(Ce,nt),Pe!==(Pe=e(T))&&(ve.value=(ve.__value=e(T))??"")},[()=>(e(T),t(()=>e(T).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),g(m,ve)});var Ur=a(Lt,2),Er=o(Ur),Vr=a(Er,2),zr=o(Vr);zr.value=zr.__value="";var Mr=a(zr);he(Mr,0,()=>[1,2,3,4],ke,(m,T)=>{var ve=Bl(),Ce=o(ve),Pe={};D(nt=>{b(Ce,`${T??""} ${T===1?"Hora":"Horas"}`),Pe!==(Pe=nt)&&(ve.value=(ve.__value=nt)??"")},[()=>t(()=>T.toString())]),g(m,ve)});var Yr=a(mt,2),Tr=o(Yr),De=a(Tr,2),gt=o(De),_t=a(gt,2),tr=a(_t,2);{var Qt=m=>{var T=Fl();D(()=>s(T,`color: ${e(r),t(()=>e(r).placeholder)??""};`)),P("click",T,()=>i(j,"")),g(m,T)};X(tr,m=>{e(j)&&m(Qt)})}var Or=a(De,2);{var _e=m=>{var T=zl(),ve=a(o(T),2),Ce=o(ve);D(()=>{s(T,`color: ${e(r),t(()=>e(r).placeholder)??""};`),b(Ce,`No se encontraron anotaciones para "${e(j)??""}"`)}),g(m,T)},Ue=Co(()=>(e(j),e(u),t(()=>e(j)&&Object.keys(e(u)).length===0)));X(Or,m=>{e(Ue)&&m(_e)})}var ft=a(Yr,2),Ot=o(ft);{var Pt=m=>{var T=Ml(),ve=o(T);io(ve,{message:"Cargando opciones de anotaci√≥n..."}),g(m,T)},xr=m=>{var T=po(),ve=Zt(T);he(ve,1,()=>e(w),ke,(Ce,Pe)=>{var nt=Co(()=>Oo(e(Pe),2));let $t=()=>e(nt)[0],Vt=()=>e(nt)[1];const yt=Mt(()=>($t(),t(()=>Xe($t())))),$r=Mt(()=>(Vt(),t(()=>Vt().length)));var Br=Pl(),_=o(Br),V=o(_),se=o(V),k=o(se),Ie=a(k);{var Ze=qe=>{var xt=Tl();g(qe,xt)};X(Ie,qe=>{$t()===e(Oe)&&qe(Ze)})}var be=a(se,2);{var it=qe=>{var xt=Ol(),lr=o(xt);D(()=>{s(xt,`color: ${e(yt)??""};`),b(lr,`(${e($r)??""} resultado${e($r)!==1?"s":""})`)}),g(qe,xt)};X(be,qe=>{e(j)&&qe(it)})}var Qe=a(V,2);{var dt=qe=>{var xt=Nl();D(()=>s(xt,`background-color: ${e(yt)??""}; opacity: 0.2;`)),g(qe,xt)};X(Qe,qe=>{e(j)||qe(dt)})}var at=a(Qe,2);let zt;var sr=a(_,2);{var pr=qe=>{var xt=Ll();he(xt,5,Vt,ke,(lr,ut,hr)=>{const Xt=Mt(()=>(e(j),e(ut),t(()=>e(j)&&e(ut).text.toLowerCase().includes(e(j).toLowerCase()))));var Jt=Rl(),or=o(Jt),mr=o(or),At=o(mr),cr=a(At,2),ur=o(cr);{var qr=Bt=>{var Ft=jl();g(Bt,Ft)};X(ur,Bt=>{e(ut),t(()=>e(ut).selected)&&Bt(qr)})}var er=a(mr,2);D(()=>{s(Jt,`
                          background-color: ${e(ut),Re(e(yt)),Re(e(Xt)),e(r),t(()=>e(ut).selected?`${e(yt)}10`:e(Xt)?`${e(yt)}05`:e(r).inputBg)??""};
                          border-color: ${e(ut),Re(e(yt)),Re(e(Xt)),e(r),t(()=>e(ut).selected?e(yt):e(Xt)?e(yt):e(r).border)??""};
                        `),Mo(At,(e(ut),t(()=>e(ut).selected))),s(cr,`
                              border-color: ${e(ut),Re(e(yt)),e(r),t(()=>e(ut).selected?e(yt):e(r).border)??""};
                              background-color: ${e(ut),Re(e(yt)),t(()=>e(ut).selected?e(yt):"transparent")??""};
                            `),s(er,`color: ${e(r),t(()=>e(r).text)??""};`)}),P("change",At,()=>Le($t(),e(ut))),_r(er,()=>e(ut).text,Bt=>(e(ut).text=Bt,Ve(()=>(Vt(),e(w))))),g(lr,Jt)}),vo(3,xt,()=>To),g(qe,xt)};X(sr,qe=>{e(G),$t(),t(()=>e(G)[$t()])&&qe(pr)})}D(()=>{Yt(se,1,`text-xs font-black uppercase tracking-widest px-3 py-1 rounded-full text-white flex-shrink-0 transition-all duration-300 group-hover:shadow-md ${$t()===e(Oe)?"animate-glow ring-4 ring-opacity-50":""}`,"svelte-1p7gzb0"),s(se,`background-color: ${e(yt)??""}; ${$t()===e(Oe)?`box-shadow: 0 0 25px ${e(yt)}60, 0 0 50px ${e(yt)}30; ring-color: ${e(yt)}; border: 2px solid ${e(yt)};`:""}`),b(k,`${$t()??""} `),zt=Yt(at,0,"w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0 svelte-1p7gzb0",null,zt,{"rotate-180":e(G)[$t()]})}),P("click",_,()=>Ye($t())),g(Ce,Br)}),g(m,T)};X(Ot,m=>{e(l)?m(Pt):m(xr,!1)})}var Nr=a(ft,2),jr=o(Nr),Rr=a(jr,2),Wr=a(Nr,2),Lr=o(Wr),Ir=o(Lr);{var xe=m=>{var T=Hl();g(m,T)},rr=m=>{var T=Gl();g(m,T)};X(Ir,m=>{e(W)?m(xe):m(rr,!1)})}var ir=a(Te,2);{var wr=m=>{dl(m,{onClose:Ne,get selectedDocente(){return e(h),t(()=>e(h).docente)}})};X(ir,m=>{e(re)&&m(wr)})}var Pr=a(ir,2);{var dr=m=>{kl(m,{onClose:ue,get initialDocente(){return e(h),t(()=>e(h).docente)}})};X(Pr,m=>{e(Q)&&m(dr)})}D(()=>{s(Te,`background-color: ${e(r),t(()=>e(r).bg)??""};`),s(Z,`background-color: ${e(r),t(()=>e(r).cardBg)??""}; border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),Ct(ye,"src",ro),s(me,`color: ${e(r),t(()=>e(r).text)??""};`),s(rt,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(ie,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(pe,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(je,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(n,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),b(Je,c()),s(Ut,`background-color: ${e(r),t(()=>e(r).cardBg)??""}; border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),s(lt,`color: ${e(r),t(()=>e(r).label)??""};`),s(Et,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""}; color-scheme: ${c()==="light"?"light":"dark"};`),s(Gt,`color: ${e(r),t(()=>e(r).label)??""};`),s(It,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),b(qt,e(N)?"Cargando...":"Seleccione docente"),s(ar,`color: ${e(r),t(()=>e(r).label)??""};`),s(q,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),b(Ke,e(F)?"Cargando...":"Seleccione asignatura"),s(fr,`color: ${e(r),t(()=>e(r).label)??""};`),s(Hr,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),b(Fr,e(O)?"Cargando...":"Seleccione grado"),s(Er,`color: ${e(r),t(()=>e(r).label)??""};`),s(Vr,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(Tr,`color: ${e(r),t(()=>e(r).label)??""};`),s(gt,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(_t,`color: ${e(r),t(()=>e(r).placeholder)??""};`),s(jr,`color: ${e(r),t(()=>e(r).label)??""};`),s(Rr,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),Lr.disabled=e(W)||!e(Fe),Ct(Lr,"title",e(Fe)?"Guardar Anotaci√≥n":"Complete todos los campos requeridos y al menos una anotaci√≥n")}),P("click",rt,S),P("click",ie,Ge),P("click",pe,fe),P("click",je,function(...m){B()?.apply(this,m)}),P("click",n,I),_r(Et,()=>e(h).fecha,m=>(we(h,e(h).fecha=m),Ve(()=>{e(r),e(N),e(te),e(F),e(M),e(le),e(O),e(J)}))),ct(It,()=>e(h).docente,m=>(we(h,e(h).docente=m),Ve(()=>{e(r),e(N),e(te),e(F),e(M),e(le),e(O),e(J)}))),ct(q,()=>e(h).materia,m=>(we(h,e(h).materia=m),Ve(()=>{e(r),e(N),e(te),e(F),e(M),e(le),e(O),e(J)}))),ct(Hr,()=>e(h).grado,m=>(we(h,e(h).grado=m),Ve(()=>{e(r),e(N),e(te),e(F),e(M),e(le),e(O),e(J)}))),ct(Vr,()=>e(h).horas,m=>(we(h,e(h).horas=m),Ve(()=>{e(r),e(N),e(te),e(F),e(M),e(le),e(O),e(J)}))),_r(gt,()=>e(j),m=>i(j,m)),_r(Rr,()=>e(h).observacion,m=>(we(h,e(h).observacion=m),Ve(()=>{e(r),e(N),e(te),e(F),e(M),e(le),e(O),e(J)}))),P("submit",nr,U),g(Y,ne),kr(),v()}var Yl=y('<div class="flex items-center justify-center py-12"><!></div>'),Wl=wt('<svg class="w-3 h-3 text-white" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),ql=y('<div class="relative group flex flex-col p-0 rounded-2xl border transition-all duration-200 shadow-sm hover:shadow-md"><div class="flex flex-col p-4 gap-3"><div class="flex items-start justify-between gap-2"><div class="flex items-center gap-2"><label class="flex-shrink-0 cursor-pointer"><input type="checkbox" class="hidden"/> <div class="w-5 h-5 rounded border flex items-center justify-center transition-colors"><!></div></label> <span class="font-bold text-sm leading-tight"> </span></div> <div class="flex gap-1.5 flex-shrink-0"><span class="text-[10px] font-bold px-1.5 py-0.5 rounded bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 opacity-60"> </span> <span class="text-[10px] font-bold px-1.5 py-0.5 rounded bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 opacity-60"> </span></div></div> <textarea rows="4" class="w-full bg-transparent border-none focus:ring-0 text-sm font-medium leading-relaxed resize-none p-0 transition-colors opacity-80" placeholder="Escriba aqu√≠..."></textarea></div></div>'),Jl=y('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>'),Kl=y('<div class="space-y-4"><button type="button" class="flex items-center gap-3 w-full text-left cursor-pointer group focus:outline-none"><h3 class="text-xs font-black uppercase tracking-widest px-3 py-1 rounded-full text-white flex-shrink-0 transition-all duration-300 group-hover:shadow-md"> </h3> <div class="h-px flex-1 transition-all duration-300 group-hover:opacity-50"></div> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>'),Zl=y('<div class="space-y-8"><!></div>');function Ql(Y,$){yr($,!1);const c=f();let Se=Dt($,"selectedDiarioAnots",28,()=>[]),v=f({}),M=f({}),r=f(!1);const d=Qo(),Fe=O=>{if(e(M)[O])we(M,e(M)[O]=!1);else{for(const l in e(M))we(M,e(M)[l]=!1);we(M,e(M)[O]=!0)}i(M,e(M))},B=O=>({Administrativo:"#6366f1",Emergencia:"#ef4444",Acad√©mico:"#f59e0b",Convivencia:"#22c55e",Infraestructura:"#0ea5e9",Salud:"#ec4899",Tecnol√≥gico:"#8b5cf6",Comunicaci√≥n:"#3b82f6",Disciplinario:"#64748b",Normalidad:"#10b981"})[O]||"#6366f1",te=async()=>{i(r,!0);try{const l=(await ka()).situaciones||{},E={},G={};Object.entries(l).forEach(([j,u])=>{u.length>0&&(G[j]=!1,E[j]=u.map(w=>({id:w.id,text:w.descripcion,selected:!1,originalTitulo:w.titulo,categoria:w.categoria,impacto:w.impacto,tiempo_estimado:w.tiempo_estimado})))}),i(v,E),i(M,G)}catch(O){console.error("Error cargando opciones de diario:",O)}finally{i(r,!1)}};br(()=>{te()}),Be(()=>(e(v),Re(Se())),()=>{const O=Object.values(e(v)).flat().filter(l=>l.selected&&l.text.trim()!=="").map(l=>`[${l.categoria}] ${l.originalTitulo}: ${l.text}`);JSON.stringify(O)!==JSON.stringify(Se())&&(Se(O),d("change",Se()))}),Be(()=>{},()=>{i(c,{text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",inputBg:"rgb(var(--bg-secondary))"})}),Sr(),Ar();var ee=Zl(),J=o(ee);{var N=O=>{var l=Yl(),E=o(l);io(E,{message:"Cargando opciones de diario..."}),g(O,l)},F=O=>{var l=po(),E=Zt(l);he(E,1,()=>(e(v),t(()=>Object.entries(e(v)))),ke,(G,j)=>{var u=Co(()=>Oo(e(j),2));let w=()=>e(u)[0],Oe=()=>e(u)[1];const $e=Mt(()=>(w(),t(()=>B(w()))));var Ye=Kl(),Le=o(Ye),Xe=o(Le),pt=o(Xe),ae=a(Xe,2),h=a(ae,2);let le;var He=a(Le,2);{var ze=de=>{var W=Jl();he(W,5,Oe,re=>re.id,(re,Q,Ge)=>{var Ne=ql(),fe=o(Ne),ue=o(fe),Ee=o(ue),st=o(Ee),We=o(st),ge=a(We,2),C=o(ge);{var p=oe=>{var ye=Wl();g(oe,ye)};X(C,oe=>{e(Q),t(()=>e(Q).selected)&&oe(p)})}var S=a(st,2),I=o(S),H=a(Ee,2),U=o(H),ne=o(U),Te=a(U,2),Z=o(Te),R=a(ue,2);D(()=>{s(Ne,`
                  background-color: ${e(Q),Re(e($e)),e(c),t(()=>e(Q).selected?`${e($e)}10`:e(c).inputBg)??""};
                  border-color: ${e(Q),Re(e($e)),e(c),t(()=>e(Q).selected?e($e):e(c).border)??""};
                `),s(ge,`
                            border-color: ${e(Q),Re(e($e)),e(c),t(()=>e(Q).selected?e($e):e(c).border)??""};
                            background-color: ${e(Q),Re(e($e)),t(()=>e(Q).selected?e($e):"transparent")??""};
                          `),s(S,`color: ${e(c),t(()=>e(c).text)??""};`),b(I,(e(Q),t(()=>e(Q).originalTitulo))),s(U,`color: ${e(c),t(()=>e(c).text)??""};`),b(ne,`IMP: ${e(Q),t(()=>e(Q).impacto)??""}`),s(Te,`color: ${e(c),t(()=>e(c).text)??""};`),b(Z,`${e(Q),t(()=>e(Q).tiempo_estimado)??""} MIN`),s(R,`color: ${e(c),t(()=>e(c).text)??""};`)}),Ao(We,()=>e(Q).selected,oe=>(e(Q).selected=oe,Ve(()=>(Oe(),e(v))))),P("change",We,()=>{i(v,e(v))}),_r(R,()=>e(Q).text,oe=>(e(Q).text=oe,Ve(()=>(Oe(),e(v))))),P("input",R,()=>{i(v,e(v))}),g(re,Ne)}),vo(3,W,()=>To),g(de,W)};X(He,de=>{e(M),w(),t(()=>e(M)[w()])&&de(ze)})}D(()=>{s(Xe,`background-color: ${e($e)??""};`),b(pt,w()),s(ae,`background-color: ${e($e)??""}; opacity: 0.2;`),le=Yt(h,0,"w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0",null,le,{"rotate-180":e(M)[w()]})}),P("click",Le,()=>Fe(w())),g(G,Ye)}),g(O,l)};X(J,O=>{e(r)?O(N):O(F,!1)})}g(Y,ee),kr()}var Xl=y("<option> </option>"),en=y("<option> </option>"),tn=y("<option> </option>"),rn=wt('<svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Cargando...',1),on=wt('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> Aplicar Filtros',1),an=y('<div class="text-sm opacity-75"> </div>'),sn=y('<div class="flex items-center justify-center py-12"><!></div>'),ln=y('<div class="text-center py-12"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-lg font-medium mb-2">No hay datos disponibles</p> <p class="text-sm"> </p></div>'),nn=y('<tr class="border-t transition-colors hover:bg-gray-50 dark:hover:bg-gray-800"><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"><div class="truncate"> </div></td></tr>'),dn=y('<tr class="border-t-2 font-bold bg-gray-100 dark:bg-gray-800"><td class="px-4 py-3 text-sm font-bold">TOTAL</td><td class="px-4 py-3 text-sm font-bold text-center"> </td><td class="px-4 py-3 text-sm"></td><td class="px-4 py-3 text-sm"></td><td class="px-4 py-3 text-sm font-bold text-center"> </td></tr>'),cn=y('<div class="overflow-x-auto rounded-lg border"><table class="w-full"><thead><tr><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Fecha</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Horas</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Asignatura</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Grado</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Diario de Campo</th></tr></thead><tbody><!><!></tbody></table></div>'),vn=y('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-2xl" role="document"><div class="flex items-center justify-between p-6 border-b"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h2 id="modal-title" class="text-xl font-bold">Generador de Reportes PDF</h2> <p class="text-sm opacity-75">Filtre y genere reportes del Diario de Campo</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar ventana"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 140px);"><div class="mb-6 p-4 rounded-xl border"><h3 class="text-lg font-semibold mb-4">Filtros</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="space-y-2"><label for="docente-filter" class="block text-sm font-medium">Docente</label> <select id="docente-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los docentes</option><!></select></div> <div class="space-y-2"><label for="materia-filter" class="block text-sm font-medium">Asignatura</label> <select id="materia-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todas las asignaturas</option><!></select></div> <div class="space-y-2"><label for="grado-filter" class="block text-sm font-medium">Grado</label> <select id="grado-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los grados</option><!></select></div></div> <div class="flex gap-3 mt-4"><button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2"><!></button> <button class="px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> Limpiar</button> <button class="ml-auto px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Generar PDF</button></div></div> <div class="mb-4"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold"> </h3> <!></div></div> <!></div></div></div>');function gn(Y,$){yr($,!1);const c=f(),Se=f(),v=f();let M=null,r=null,d=Dt($,"onClose",8),Fe=Dt($,"initialDocente",8,""),B=f([]),te=f([]),ee=f([]),J=[],N=f([]),F=f(!1);const O=async()=>{if(!M||!r){const[n,x]=await Promise.all([so(()=>import("./pdf-CBBHH09D.js").then(A=>A.j),[]),so(()=>import("./pdf-CBBHH09D.js").then(A=>A.b),[])]);M=n.default,r=x.default}};let l=f(JSON.parse(localStorage.getItem("docenteMateriasDiario")||"{}")),E=f(""),G=f(""),j=f("");br(()=>{Fe()&&i(E,Fe())}),br(async()=>{await u()});const u=async()=>{try{const[n,x,A]=await Promise.all([Zr(),Qr(),Xr()]);i(B,n),i(te,x),i(ee,A),i(l,JSON.parse(localStorage.getItem("docenteMateriasDiario")||"{}"))}catch(n){console.error("Error cargando datos iniciales:",n)}},w=async()=>{i(F,!0);try{const n={spreadsheetId:So,worksheetTitle:No};e(E)&&(n.docente=e(E)),e(G)&&(n.materia=e(G)),e(j)&&(n.grado=e(j));const x=await wa(n);let A=x;if(x&&typeof x=="object"&&(x.data?A=x.data:x.records?A=x.records:Array.isArray(x)&&(A=x)),J=Array.isArray(A)?A:[],J.length>0&&J[0].values){const z=["Marca Temporal","Fecha","Horas","Docente","Asignatura","Grado","Diario de Campo"];J=J.map(Me=>{const tt={"Marca Temporal":"",Fecha:"",Horas:"",Docente:"",Asignatura:"",Grado:"","Diario de Campo":""};return z.forEach((Je,Ae)=>{tt[Je]=Me.values?.[Ae]||""}),tt})}Oe()}catch(n){console.error("Error cargando datos del diario:",n),J=[],i(N,[])}finally{i(F,!1)}},Oe=()=>{if(!Array.isArray(J)){i(N,[]);return}i(N,J.filter(n=>{if(!n||typeof n!="object")return!1;const x=!e(E)||n.Docente===e(E),A=!e(G)||n.Asignatura===e(G),z=!e(j)||n.Grado===e(j);return x&&A&&z}))},$e=()=>{w()},Ye=()=>{i(E,""),i(G,""),i(j,""),J=[],i(N,[])},Le=async()=>{if(await O(),e(N).length===0){alert("No hay datos para generar el PDF");return}const n=new M({format:"letter"}),x="Diario de Campo",A=[];e(E)&&A.push(`Docente: ${e(E)}`),e(G)&&A.push(`Asignatura: ${e(G)}`),e(j)&&A.push(`Grado: ${e(j)}`);let z=20;n.setTextColor(99,102,241),n.setFontSize(28),n.setFont("helvetica","bold"),n.text("EIE",n.internal.pageSize.getWidth()/2,z,{align:"center"}),z+=15,n.setTextColor(0,0,0),n.setFontSize(18),n.setFont("helvetica","bold"),n.text(x,n.internal.pageSize.getWidth()/2,z,{align:"center"}),z+=12,n.setTextColor(0,0,0),n.setFontSize(12),n.setFont("helvetica","normal"),n.text("Instituci√≥n Educativa Instituto Gu√°tica",n.internal.pageSize.getWidth()/2,z,{align:"center"}),z+=10,n.setTextColor(60,60,60),n.setFontSize(10),n.setFont("helvetica","normal"),n.text(`Fecha de generaci√≥n: ${new Date().toLocaleDateString()}`,n.internal.pageSize.getWidth()/2,z,{align:"center"}),z+=15,n.setDrawColor(200,200,200),n.setLineWidth(1),n.line(20,z,n.internal.pageSize.getWidth()-20,z),z+=15,A.length>0&&(n.setTextColor(80,80,80),n.setFontSize(9),n.setFont("helvetica","normal"),A.forEach(Je=>{n.text(Je,20,z,{align:"left"}),z+=6}),z+=10);const Me=e(N).map(Je=>[Je.Fecha||"",Je.Horas||"",Je.Asignatura||"",Je.Grado||"",Je["Diario de Campo"]||""]);Me.push(["TOTAL",e(c).toFixed(1),"","",`${e(N).length} registros`]),r(n,{head:[["Fecha","Horas","Asignatura","Grado","Diario de Campo"]],body:Me,startY:z,styles:{fontSize:8,cellPadding:2,cellWidth:"wrap",valign:"top",overflow:"linebreak"},headStyles:{fillColor:[99,102,241],textColor:255,fontSize:9,fontStyle:"bold",halign:"center"},bodyStyles:{fillColor:[255,255,255],textColor:[0,0,0]},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:{0:{cellWidth:25,minCellHeight:8,halign:"center"},1:{cellWidth:15,minCellHeight:8,halign:"center"},2:{cellWidth:35,minCellHeight:8},3:{cellWidth:20,minCellHeight:8,halign:"center"},4:{cellWidth:"auto",minCellHeight:12}},margin:{top:15,right:15,bottom:15,left:15},tableWidth:"auto",didParseCell:Je=>{Je.row.index===Me.length-1&&(Je.cell.styles.fillColor=[240,240,240],Je.cell.styles.fontStyle="bold",Je.cell.styles.textColor=[0,0,0])}});const tt=`reporte_diario_${e(E)||"todos"}_${e(G)||"todas"}_${e(j)||"todos"}_${new Date().toISOString().split("T")[0]}.pdf`;n.save(tt)};Be(()=>e(N),()=>{i(c,e(N).reduce((n,x)=>{const A=parseFloat(x.Horas||"0");return n+(isNaN(A)?0:A)},0))}),Be(()=>(e(E),e(te),e(l)),()=>{i(Se,e(E)?[...e(te)].sort((n,x)=>{const A=e(l)[e(E)]?.includes(n.materia),z=e(l)[e(E)]?.includes(x.materia);return A&&!z?-1:!A&&z?1:n.materia.localeCompare(x.materia)}):e(te))}),Be(()=>{},()=>{i(v,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Sr(),Ar();var Xe=vn(),pt=o(Xe),ae=o(pt),h=a(o(ae),2),le=a(ae,2),He=o(le),ze=a(o(He),2),de=o(ze),W=o(de),re=a(W,2),Q=o(re);Q.value=Q.__value="";var Ge=a(Q);he(Ge,1,()=>e(B),ke,(n,x)=>{var A=Xl(),z=o(A),Me={};D(()=>{b(z,e(x)),Me!==(Me=e(x))&&(A.value=(A.__value=e(x))??"")}),g(n,A)});var Ne=a(de,2),fe=o(Ne),ue=a(fe,2),Ee=o(ue);Ee.value=Ee.__value="";var st=a(Ee);he(st,1,()=>e(Se),ke,(n,x)=>{const A=Mt(()=>(e(E),e(l),e(x),t(()=>e(E)&&e(l)[e(E)]?.includes(e(x).materia))));var z=en(),Me=o(z),tt={};D(()=>{s(z,e(A)?"color: #6366f1; font-weight: 600;":""),b(Me,`${e(A)?"‚≠ê ":""}${e(x),t(()=>e(x).materia)??""}`),tt!==(tt=(e(x),t(()=>e(x).materia)))&&(z.value=(z.__value=(e(x),t(()=>e(x).materia)))??"")}),g(n,z)});var We=a(Ne,2),ge=o(We),C=a(ge,2),p=o(C);p.value=p.__value="";var S=a(p);he(S,1,()=>(e(ee),t(()=>[...new Set(e(ee).map(n=>n.grado.toString()))])),ke,(n,x)=>{var A=tn(),z=o(A),Me={};D(tt=>{b(z,tt),Me!==(Me=e(x))&&(A.value=(A.__value=e(x))??"")},[()=>(e(x),t(()=>e(x).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),g(n,A)});var I=a(ze,2),H=o(I),U=o(H);{var ne=n=>{var x=rn();g(n,x)},Te=n=>{var x=on();g(n,x)};X(U,n=>{e(F)?n(ne):n(Te,!1)})}var Z=a(H,2),R=a(Z,2),oe=a(He,2),ye=o(oe),me=o(ye),et=o(me),rt=a(me,2);{var ie=n=>{var x=an(),A=o(x);D(()=>b(A,`${(e(E)&&`Docente: ${e(E)}`)??""}
              ${(e(G)&&` | Asignatura: ${e(G)}`)??""}
              ${(e(j)&&` | Grado: ${e(j)}`)??""}`)),g(n,x)};X(rt,n=>{e(N),t(()=>e(N).length>0)&&n(ie)})}var L=a(oe,2);{var K=n=>{var x=sn(),A=o(x);io(A,{message:"Cargando datos del diario..."}),g(n,x)},pe=n=>{var x=ln(),A=a(o(x),4),z=o(A);D(()=>{s(x,`color: ${e(v),t(()=>e(v).placeholder)??""};`),b(z,e(E)||e(G)||e(j)?"No se encontraron registros con los filtros seleccionados.":"Seleccione filtros y haga clic en 'Aplicar Filtros'.")}),g(n,x)},je=n=>{var x=cn(),A=o(x),z=o(A),Me=o(z),tt=o(Me),Je=a(tt),Ae=a(Je),Ut=a(Ae),Wt=a(Ut),Nt=a(z),Ht=o(Nt);he(Ht,1,()=>e(N),ke,(ot,lt)=>{var Et=nn(),Rt=o(Et),Gt=o(Rt),It=a(Rt),St=o(It),qt=a(It),vr=o(qt),gr=a(qt),ar=o(gr),q=a(gr),ce=o(q),Ke=o(ce);D(()=>{s(Et,`border-color: ${e(v),t(()=>e(v).border)??""};`),b(Gt,(e(lt),t(()=>e(lt).Fecha||"-"))),b(St,(e(lt),t(()=>e(lt).Horas||"-"))),b(vr,(e(lt),t(()=>e(lt).Asignatura||"-"))),b(ar,(e(lt),t(()=>e(lt).Grado||"-"))),Ct(ce,"title",(e(lt),t(()=>e(lt)["Diario de Campo"]))),b(Ke,(e(lt),t(()=>e(lt)["Diario de Campo"]||"-")))}),g(ot,Et)});var nr=a(Ht);{var jt=ot=>{var lt=dn(),Et=a(o(lt)),Rt=o(Et),Gt=a(Et,3),It=o(Gt);D(St=>{s(lt,`border-color: ${e(v),t(()=>e(v).border)??""}; border-top-width: 2px;`),b(Rt,St),b(It,`${e(N),t(()=>e(N).length)??""} registros`)},[()=>(e(c),t(()=>e(c).toFixed(1)))]),g(ot,lt)};X(nr,ot=>{e(N),t(()=>e(N).length>0)&&ot(jt)})}D(()=>{s(x,`border-color: ${e(v),t(()=>e(v).border)??""};`),s(z,`background-color: ${e(v),t(()=>e(v).inputBg)??""};`),s(tt,`color: ${e(v),t(()=>e(v).label)??""};`),s(Je,`color: ${e(v),t(()=>e(v).label)??""};`),s(Ae,`color: ${e(v),t(()=>e(v).label)??""};`),s(Ut,`color: ${e(v),t(()=>e(v).label)??""};`),s(Wt,`color: ${e(v),t(()=>e(v).label)??""};`)}),g(n,x)};X(L,n=>{e(F)?n(K):(e(N),t(()=>e(N).length===0)?n(pe,1):n(je,!1))})}D(()=>{s(pt,`background-color: ${e(v),t(()=>e(v).cardBg)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(ae,`border-color: ${e(v),t(()=>e(v).cardBorder)??""};`),s(He,`background-color: ${e(v),t(()=>e(v).inputBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""};`),s(W,`color: ${e(v),t(()=>e(v).label)??""};`),s(re,`background-color: ${e(v),t(()=>e(v).cardBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(fe,`color: ${e(v),t(()=>e(v).label)??""};`),s(ue,`background-color: ${e(v),t(()=>e(v).cardBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(ge,`color: ${e(v),t(()=>e(v).label)??""};`),s(C,`background-color: ${e(v),t(()=>e(v).cardBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""}; color: ${e(v),t(()=>e(v).text)??""};`),H.disabled=e(F),s(Z,`color: ${e(v),t(()=>e(v).text)??""};`),R.disabled=(e(N),t(()=>e(N).length===0)),b(et,`Resultados (${e(N),t(()=>e(N).length)??""} registros)`)}),P("click",h,function(...n){d()?.apply(this,n)}),ct(re,()=>e(E),n=>i(E,n)),ct(ue,()=>e(G),n=>i(G,n)),ct(C,()=>e(j),n=>i(j,n)),P("click",H,$e),P("click",Z,Ye),P("click",R,Le),P("click",Xe,lo(function(...n){d()?.apply(this,n)})),P("keydown",Xe,n=>n.key==="Escape"&&d()()),g(Y,Xe),kr()}var pn=wt('<svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>'),un=wt('<svg class="w-5 h-5 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>'),bn=wt('<svg class="w-5 h-5 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>'),fn=y('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-qemcko"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <div class="flex-1 pr-6 pt-0.5"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100">Informaci√≥n</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors" aria-label="Cerrar alerta"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),xn=y("<option> </option>"),hn=y("<option> </option>"),mn=y("<option> </option>"),_n=y("<option> </option>"),yn=wt('<svg class="animate-spin h-7 w-7 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),kn=wt('<svg class="w-8 h-8 transform rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>'),wn=y('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8"><div class="flex items-center gap-4 lg:flex-col"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center">Diario de Campo</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Abrir hoja de c√°lculo"><svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Hoja de C√°lculo</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Generar reportes PDF"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Reportes PDF</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Volver al Dashboard"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Dashboard</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize"> </span></button></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto pb-32"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border"><!> <form class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="space-y-2"><label for="fecha" class="block text-sm font-medium">Fecha</label> <input type="date" id="fecha" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"/></div> <div class="space-y-2"><label for="docente" class="block text-sm font-medium">Docente</label> <select id="docente" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50"><option> </option><!></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="space-y-2"><label for="materia" class="block text-sm font-medium">Asignatura</label> <select id="materia" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50"><option> </option><!></select></div> <div class="space-y-2"><label for="grado" class="block text-sm font-medium">Grado</label> <select id="grado" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50"><option> </option><!></select></div></div> <div class="space-y-2"><label for="horas" class="block text-sm font-medium">Horas</label> <select id="horas" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer"><option>Seleccione horas</option><!></select></div> <div class="space-y-2"><!></div> <div class="fixed bottom-8 right-8 z-50"><button type="submit" class="w-16 h-16 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-400 dark:disabled:bg-slate-700 disabled:cursor-not-allowed disabled:scale-100 text-white rounded-full shadow-2xl transition-all duration-300 transform hover:scale-110 active:scale-95 backdrop-blur-sm bg-opacity-95 flex items-center justify-center overflow-hidden border border-white/20" aria-label="Guardar Diario de Campo"><!></button></div></form></div></main></div> <!>',1);function $n(Y,$){yr($,!1);const c=()=>ho(Kr,"$theme",Se),[Se,v]=xo(),M=f(),r=f(),d=f();let Fe=Dt($,"onBack",8),B=f([]),te=f([]),ee=f([]),J=f(!1),N=f(!1),F=f(!1),O=f(!1),l=f(!1);const E=()=>{i(l,!0)},G=()=>{i(l,!1)};let j=f([]),u=f({fecha:new Date().toISOString().split("T")[0],docente:localStorage.getItem("lastDocenteDiario")||"",materia:"",grado:"",horas:""}),w=f(JSON.parse(localStorage.getItem("docenteMateriasDiario")||"{}"));const Oe=(q,ce)=>{!q||!ce||(e(w)[q]||we(w,e(w)[q]=[]),e(w)[q].includes(ce)||(we(w,e(w)[q]=[...e(w)[q],ce]),localStorage.setItem("docenteMateriasDiario",JSON.stringify(e(w)))))};let $e=f(localStorage.getItem("dismissedInfoDiarioContent")!==$o);const Ye=()=>{i($e,!1),localStorage.setItem("dismissedInfoDiarioContent",$o)},Le=()=>`https://docs.google.com/spreadsheets/d/${So}`,Xe=()=>{window.open(Le(),"_blank")},pt=()=>{Kr.update(q=>q==="light"?"dim":q==="dim"?"dark":"light")},ae=async()=>{i(J,!0),i(N,!0),i(F,!0);try{const[q,ce,Ke]=await Promise.all([Zr(),Qr(),Xr()]);i(B,q),i(te,ce),i(ee,Ke)}catch(q){console.error("Error cargando datos iniciales:",q)}finally{i(J,!1),i(N,!1),i(F,!1)}},h=async q=>{if(q.preventDefault(),e(O))return;const ce=e(j).join(" | ");if((await Tt.fire({title:"¬øConfirmar Registro?",html:`
        <div class="text-left space-y-2 p-2 rounded-xl bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10" style="font-size: 0.9rem; line-height: 1.4;">
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Fecha:</strong> ${e(u).fecha}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Docente:</strong> ${e(u).docente}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Asignatura:</strong> ${e(u).materia}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Grado:</strong> ${e(u).grado}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Horas:</strong> ${e(u).horas}</div>
          <div style="margin-top: 12px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 8px;">
            <strong style="color: #6366f1;">Diario de Campo:</strong>
            <ul style="list-style-type: disc; padding-left: 20px; margin-top: 4px; font-size: 0.8rem; opacity: 0.8;">
              ${e(j).map(vt=>`<li>${vt}</li>`).join("")}
            </ul>
          </div>
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonText:"Si, de acuerdo",cancelButtonText:"No",confirmButtonColor:"#4f46e5",cancelButtonColor:"#64748b",reverseButtons:!0,background:c()==="light"?"#fff":"#1e293b",color:c()==="light"?"#1e293b":"#f1f5f9"})).isConfirmed){i(O,!0);try{const mt=[[new Date().toLocaleString(),e(u).fecha,e(u).horas,e(u).docente,e(u).materia,e(u).grado,ce]];await Aa({spreadsheetId:So,worksheetTitle:No,datos:mt}),Oe(e(u).docente,e(u).materia),await Tt.fire({icon:"success",title:"¬°√âxito!",text:"Diario de Campo registrado exitosamente",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),i(u,{fecha:new Date().toISOString().split("T")[0],docente:e(u).docente,materia:e(u).materia,grado:e(u).grado,horas:""}),i(j,[])}catch(vt){console.error("Error enviando:",vt),await Tt.fire({icon:"error",title:"Error",text:"Error al registrar el Diario de Campo",confirmButtonColor:"#ef4444"})}finally{i(O,!1)}}};br(()=>{ae()}),Be(()=>e(u),()=>{e(u).docente&&localStorage.setItem("lastDocenteDiario",e(u).docente)}),Be(()=>(e(u),e(te),e(w)),()=>{i(M,e(u).docente?[...e(te)].sort((q,ce)=>{const Ke=e(w)[e(u).docente]?.includes(q.materia),vt=e(w)[e(u).docente]?.includes(ce.materia);return Ke&&!vt?-1:!Ke&&vt?1:q.materia.localeCompare(ce.materia)}):e(te))}),Be(()=>{},()=>{i(r,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Be(()=>(e(u),e(j)),()=>{i(d,e(u).fecha&&e(u).docente&&e(u).materia&&e(u).grado&&e(u).horas&&e(j).length>0)}),Sr(),Ar();var le=wn(),He=Zt(le),ze=o(He),de=o(ze),W=o(de),re=o(W),Q=a(re,2),Ge=a(W,2),Ne=o(Ge),fe=a(Ne,2),ue=a(fe,2),Ee=a(ue,2),st=o(Ee);{var We=q=>{var ce=pn();g(q,ce)},ge=q=>{var ce=un();g(q,ce)},C=q=>{var ce=bn();g(q,ce)};X(st,q=>{c()==="dark"?q(We):c()==="light"?q(ge,1):q(C,!1)})}var p=a(st,2),S=o(p),I=a(ze,2),H=o(I),U=o(H);{var ne=q=>{var ce=fn(),Ke=a(o(ce),2),vt=a(o(Ke),2),mt=o(vt),Lt=a(Ke,2);D(()=>b(mt,$o)),P("click",Lt,Ye),g(q,ce)};X(U,q=>{e($e)&&q(ne)})}var Te=a(U,2),Z=o(Te),R=o(Z),oe=o(R),ye=a(oe,2),me=a(R,2),et=o(me),rt=a(et,2),ie=o(rt),L=o(ie);ie.value=ie.__value="";var K=a(ie);he(K,1,()=>e(B),ke,(q,ce)=>{var Ke=xn(),vt=o(Ke),mt={};D(()=>{b(vt,e(ce)),mt!==(mt=e(ce))&&(Ke.value=(Ke.__value=e(ce))??"")}),g(q,Ke)});var pe=a(Z,2),je=o(pe),n=o(je),x=a(n,2),A=o(x),z=o(A);A.value=A.__value="";var Me=a(A);he(Me,1,()=>e(M),ke,(q,ce)=>{const Ke=Mt(()=>(e(w),e(u),e(ce),t(()=>e(w)[e(u).docente]?.includes(e(ce).materia))));var vt=hn(),mt=o(vt),Lt={};D(()=>{s(vt,e(Ke)?"color: #6366f1; font-weight: 600;":""),b(mt,`${e(Ke)?"‚≠ê ":""}${e(ce),t(()=>e(ce).materia)??""}`),Lt!==(Lt=(e(ce),t(()=>e(ce).materia)))&&(vt.value=(vt.__value=(e(ce),t(()=>e(ce).materia)))??"")}),g(q,vt)});var tt=a(je,2),Je=o(tt),Ae=a(Je,2),Ut=o(Ae),Wt=o(Ut);Ut.value=Ut.__value="";var Nt=a(Ut);he(Nt,1,()=>(e(ee),t(()=>[...new Set(e(ee).map(q=>q.grado.toString()))])),ke,(q,ce)=>{var Ke=mn(),vt=o(Ke),mt={};D(Lt=>{b(vt,Lt),mt!==(mt=e(ce))&&(Ke.value=(Ke.__value=e(ce))??"")},[()=>(e(ce),t(()=>e(ce).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),g(q,Ke)});var Ht=a(pe,2),nr=o(Ht),jt=a(nr,2),ot=o(jt);ot.value=ot.__value="";var lt=a(ot);he(lt,0,()=>[1,2,3,4],ke,(q,ce)=>{var Ke=_n(),vt=o(Ke),mt={};D(Lt=>{b(vt,`${ce??""} ${ce===1?"Hora":"Horas"}`),mt!==(mt=Lt)&&(Ke.value=(Ke.__value=Lt)??"")},[()=>t(()=>ce.toString())]),g(q,Ke)});var Et=a(Ht,2),Rt=o(Et);Ql(Rt,{get selectedDiarioAnots(){return e(j)},set selectedDiarioAnots(q){i(j,q)},$$legacy:!0});var Gt=a(Et,2),It=o(Gt),St=o(It);{var qt=q=>{var ce=yn();g(q,ce)},vr=q=>{var ce=kn();g(q,ce)};X(St,q=>{e(O)?q(qt):q(vr,!1)})}var gr=a(He,2);{var ar=q=>{gn(q,{onClose:G,get initialDocente(){return e(u),t(()=>e(u).docente)}})};X(gr,q=>{e(l)&&q(ar)})}D(()=>{s(He,`background-color: ${e(r),t(()=>e(r).bg)??""};`),s(ze,`background-color: ${e(r),t(()=>e(r).cardBg)??""}; border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),Ct(re,"src",ro),s(Q,`color: ${e(r),t(()=>e(r).text)??""};`),s(Ne,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(fe,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(ue,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(Ee,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),b(S,c()),s(H,`background-color: ${e(r),t(()=>e(r).cardBg)??""}; border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),s(oe,`color: ${e(r),t(()=>e(r).label)??""};`),s(ye,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""}; color-scheme: ${c()==="light"?"light":"dark"};`),s(et,`color: ${e(r),t(()=>e(r).label)??""};`),s(rt,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),b(L,e(J)?"Cargando...":"Seleccione docente"),s(n,`color: ${e(r),t(()=>e(r).label)??""};`),s(x,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),b(z,e(N)?"Cargando...":"Seleccione asignatura"),s(Je,`color: ${e(r),t(()=>e(r).label)??""};`),s(Ae,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),b(Wt,e(F)?"Cargando...":"Seleccione grado"),s(nr,`color: ${e(r),t(()=>e(r).label)??""};`),s(jt,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),It.disabled=e(O)||!e(d),Ct(It,"title",e(d)?"Guardar Diario de Campo":"Complete todos los campos requeridos")}),P("click",Ne,Xe),P("click",fe,E),P("click",ue,function(...q){Fe()?.apply(this,q)}),P("click",Ee,pt),_r(ye,()=>e(u).fecha,q=>(we(u,e(u).fecha=q),Ve(()=>{e(r),e(J),e(B),e(N),e(M),e(w),e(F),e(ee)}))),ct(rt,()=>e(u).docente,q=>(we(u,e(u).docente=q),Ve(()=>{e(r),e(J),e(B),e(N),e(M),e(w),e(F),e(ee)}))),ct(x,()=>e(u).materia,q=>(we(u,e(u).materia=q),Ve(()=>{e(r),e(J),e(B),e(N),e(M),e(w),e(F),e(ee)}))),ct(Ae,()=>e(u).grado,q=>(we(u,e(u).grado=q),Ve(()=>{e(r),e(J),e(B),e(N),e(M),e(w),e(F),e(ee)}))),ct(jt,()=>e(u).horas,q=>(we(u,e(u).horas=q),Ve(()=>{e(r),e(J),e(B),e(N),e(M),e(w),e(F),e(ee)}))),P("submit",Te,h),g(Y,le),kr(),v()}var Cn=y('<div class="w-full h-screen flex flex-col bg-[rgb(var(--bg-primary))]"><div class="h-16 flex items-center justify-between px-6 border-b transition-colors duration-200" style="background-color: rgb(var(--card-bg)); border-color: rgb(var(--card-border));"><button class="flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 font-medium" style="color: rgb(var(--text-primary));"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> Volver al Dashboard</button> <h2 class="text-lg font-bold" style="color: rgb(var(--text-primary));">Horas Laborables</h2> <div class="w-10"></div></div> <iframe src="https://ceslep.github.io/horas_laborables" title="Horas Laborables" class="flex-1 w-full border-none"></iframe></div>'),Sn=y('<main class="w-full min-h-screen"><!></main>');function An(Y){let $=f("dashboard");const c=ee=>{i($,ee)},Se=()=>{i($,"dashboard")};var v=Sn(),M=o(v);{var r=ee=>{ga(ee,{onSelect:c})},d=ee=>{qs(ee,{onBack:Se})},Fe=ee=>{Vl(ee,{onBack:Se})},B=ee=>{$n(ee,{onBack:Se})},te=ee=>{var J=Cn(),N=o(J),F=o(N);P("click",F,Se),g(ee,J)};X(M,ee=>{e($)==="dashboard"?ee(r):e($)==="inasistencia"?ee(d,1):e($)==="anotador"?ee(Fe,2):e($)==="diario"?ee(B,3):e($)==="horas_laborables"&&ee(te,4)})}g(Y,v)}Xo(An,{target:document.getElementById("app")});
