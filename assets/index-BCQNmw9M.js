const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/utils-Dc41pFlL.js","assets/excel-G1qE2FwJ.js"])))=>i.map(i=>d[i]);
import{w as Ho,p as xr,a as Ct,o as vr,l as Be,b as Er,i as Ir,c as go,f as Kt,d as te,e as v,g as hr,s as a,t as C,h as G,j as i,k as _,m as o,n as b,q as Oe,r as er,u as e,v as r,x as s,y as u,z as fo,A as xe,B as co,C as xo,D as $t,E as Fo,F as ke,G as Go,H as xt,I as ye,J as Pe,K as Ao,L as rt,M as fr,N as Lt,O as zo,P as lo,Q as Uo,R as Vo,S as Yo,T as Co,U as Wo,V as Mo,W as To,X as qo,Y as Jo}from"./svelte-Cuf3vpgr.js";import{S as jt}from"./ui-CHfsb5jC.js";import{_ as so}from"./pdf-CBBHH09D.js";(function(){const k=document.createElement("link").relList;if(k&&k.supports&&k.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))we(c);new MutationObserver(c=>{for(const M of c)if(M.type==="childList")for(const t of M.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&we(t)}).observe(document,{childList:!0,subtree:!0});function d(c){const M={};return c.integrity&&(M.integrity=c.integrity),c.referrerPolicy&&(M.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?M.credentials="include":c.crossOrigin==="anonymous"?M.credentials="omit":M.credentials="same-origin",M}function we(c){if(c.ep)return;c.ep=!0;const M=d(c);fetch(c.href,M)}})();const Ko="/inasistig/assets/asistencia_hero-DmIvUlDZ.png",Zo="/inasistig/assets/anotador_hero-DBB4ReZf.png",Qo="/inasistig/assets/diario_hero-B7a5kf5J.png",ro="/inasistig/assets/eie-DMab_WyA.png",Xo=()=>{if(typeof window<"u"){const V=localStorage.getItem("theme");if(V&&["light","dim","dark"].includes(V))return V}return"dark"},qr=Ho(Xo());typeof window<"u"&&qr.subscribe(V=>{localStorage.setItem("theme",V);const k=document.documentElement;k.classList.remove("light","dim","dark"),k.classList.add(V)});var ea=_('<div class="relative svelte-dtuciw"><div style="top: -8px; left: 50%; transform: translateX(-50%);"></div></div>'),ta=_('<div class="fixed inset-0 bg-black/30 z-40 svelte-dtuciw" style="pointer-events: none;"></div> <div class="fixed z-50 animate-bounce-in svelte-dtuciw"><!> <div><div class="flex items-center gap-2 mb-3 svelte-dtuciw"><div class="p-1.5 bg-white/20 rounded-lg svelte-dtuciw"><svg class="w-5 h-5 svelte-dtuciw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="svelte-dtuciw"></path></svg></div> <span class="inline-block px-2 py-0.5 text-xs font-bold rounded-full bg-white/25 animate-pulse svelte-dtuciw">¬°NUEVO!</span></div> <h3 class="font-bold text-base mb-2 svelte-dtuciw"> </h3> <p> </p> <div class="flex gap-2 svelte-dtuciw"><button>Probar ahora</button> <button class="px-3 py-2 rounded-lg text-sm hover:bg-white/20 transition-colors svelte-dtuciw" aria-label="Cerrar popup">M√°s tarde</button></div> <button class="absolute top-2 right-2 p-1 rounded-lg hover:bg-white/20 transition-colors svelte-dtuciw" aria-label="Cerrar notificaci√≥n"><svg class="w-4 h-4 svelte-dtuciw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-dtuciw"></path></svg></button></div></div>',1);function uo(V,k){xr(k,!1);const d=b();let we=Ct(k,"featureMessage",8),c=Ct(k,"description",8),M=Ct(k,"onTryNow",8),t=Ct(k,"onDismiss",8),he=Ct(k,"targetSelector",8,void 0),Fe=Ct(k,"showPopup",8),B=Ct(k,"colorTheme",8,"blue"),le=b({top:0,left:0});function J(){if(typeof window<"u"&&he()){const I=document.querySelector(he());if(I){const l=I.getBoundingClientRect();i(le,{top:l.bottom+10,left:l.left+l.width/2})}}else i(le,{top:window.innerHeight/2-100,left:window.innerWidth/2})}vr(()=>(J(),window.addEventListener("resize",J),()=>{window.removeEventListener("resize",J)})),Be(()=>{},()=>{i(d,{arrowBorder:{blue:"border-t-blue-600 dark:border-t-blue-400",green:"border-t-green-600 dark:border-t-green-400",purple:"border-t-purple-600 dark:border-t-purple-400",emerald:"border-t-emerald-600 dark:border-t-emerald-400"},bgGradientFrom:{blue:"from-blue-600 dark:from-blue-700",green:"from-green-600 dark:from-green-700",purple:"from-purple-600 dark:from-purple-700",emerald:"from-emerald-600 dark:from-emerald-700"},bgGradientTo:{blue:"to-indigo-600 dark:to-indigo-700",green:"to-emerald-600 dark:to-emerald-700",purple:"to-fuchsia-600 dark:to-fuchsia-700",emerald:"to-teal-600 dark:to-teal-700"},borderColor:{blue:"border-blue-400 dark:border-blue-500",green:"border-green-400 dark:border-green-500",purple:"border-purple-400 dark:border-purple-500",emerald:"border-emerald-400 dark:border-emerald-500"},buttonTextColor:{blue:"text-blue-600",green:"text-green-600",purple:"text-purple-600",emerald:"text-emerald-600"},buttonHoverBg:{blue:"hover:bg-blue-50",green:"hover:bg-green-50",purple:"hover:bg-purple-50",emerald:"hover:bg-emerald-50"},descriptionColor:{blue:"text-blue-100",green:"text-green-100",purple:"text-purple-100",emerald:"text-emerald-100"}})}),Be(()=>Oe(Fe()),()=>{Fe()&&J()}),Er(),Ir();var Y=go(),A=Kt(Y);{var E=I=>{var l=ta(),p=a(Kt(l),2),S=o(p);{var L=x=>{var ae=ea(),Re=o(ae);C(()=>er(Re,1,`absolute w-0 h-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent ${e(d),Oe(B()),r(()=>e(d).arrowBorder[B()])??""}`,"svelte-dtuciw")),v(x,ae)};te(S,x=>{he()&&x(L)})}var T=a(S,2),O=a(o(T),2),je=o(O),Se=a(O,2),Ke=o(Se),vt=a(Se,2),Ze=o(vt),lt=a(Ze,2),oe=a(vt,2);C(()=>{s(p,`top: ${e(le),r(()=>e(le).top)??""}px; left: ${e(le),r(()=>e(le).left)??""}px; transform: translateX(-50%);`),er(T,1,`bg-gradient-to-r ${e(d),Oe(B()),r(()=>e(d).bgGradientFrom[B()])??""} ${e(d),Oe(B()),r(()=>e(d).bgGradientTo[B()])??""} text-white p-4 rounded-xl shadow-2xl border ${e(d),Oe(B()),r(()=>e(d).borderColor[B()])??""} min-w-[280px] max-w-[calc(100vw-20px)] md:max-w-[320px]`,"svelte-dtuciw"),u(je,we()),er(Se,1,`text-sm ${e(d),Oe(B()),r(()=>e(d).descriptionColor[B()])??""} mb-3`,"svelte-dtuciw"),u(Ke,c()),er(Ze,1,`px-3 py-2 rounded-lg text-sm bg-white ${e(d),Oe(B()),r(()=>e(d).buttonTextColor[B()])??""} font-semibold ${e(d),Oe(B()),r(()=>e(d).buttonHoverBg[B()])??""} transition-colors`,"svelte-dtuciw")}),G("click",Ze,function(...x){M()?.apply(this,x)}),G("click",lt,function(...x){t()?.apply(this,x)}),G("click",oe,function(...x){t()?.apply(this,x)}),v(I,l)};te(A,I=>{Fe()&&I(E)})}v(V,Y),hr()}var ra=xt('<svg class="w-6 h-6 text-amber-500 svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707M16.95 16.95l.707.707M7.636 7.636l.707.707M12 8a4 4 0 100 8 4 4 0 000-8z" class="svelte-1y1a8hs"></path></svg>'),oa=xt('<svg class="w-6 h-6 text-indigo-400 svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1y1a8hs"></path></svg>'),aa=xt('<svg class="w-6 h-6 text-indigo-500 svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707M16.95 16.95l.707.707M7.636 7.636l.707.707M12 8a4 4 0 100 8 4 4 0 000-8z" class="svelte-1y1a8hs"></path></svg>'),sa=_('<button class="group relative flex flex-col justify-between overflow-hidden rounded-[2.5rem] border border-[rgb(var(--card-border))] bg-[rgb(var(--card-bg))] backdrop-blur-xl transition-all duration-500 hover:border-[rgb(var(--accent-primary))]/30 hover:bg-[rgb(var(--bg-secondary))] p-1 svelte-1y1a8hs"><div class="absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent svelte-1y1a8hs"></div> <div class="relative p-8 flex flex-col h-full svelte-1y1a8hs"><div class="flex justify-between items-start mb-12 svelte-1y1a8hs"><div class="flex flex-col gap-1 svelte-1y1a8hs"><span class="text-[10px] font-bold uppercase tracking-[0.2em] text-[rgb(var(--accent-primary))] svelte-1y1a8hs"> </span> <h2 class="text-2xl font-bold tracking-tight text-[rgb(var(--text-primary))] group-hover:text-[rgb(var(--accent-primary))] transition-colors duration-300 svelte-1y1a8hs"> </h2></div> <span class="px-3 py-1 rounded-full text-[10px] font-bold bg-[rgb(var(--bg-tertiary))] border border-[rgb(var(--border-primary))] text-[rgb(var(--text-muted))] uppercase tracking-wider svelte-1y1a8hs"> </span></div> <div class="flex flex-col gap-6 mt-auto svelte-1y1a8hs"><div class="relative w-full aspect-video rounded-3xl overflow-hidden bg-black/20 border border-white/5 svelte-1y1a8hs"><div></div> <img class="w-3/4 h-3/4 mx-auto object-cover grayscale-[0.5] group-hover:grayscale-0 group-hover:scale-110 transition-all duration-700 ease-in-out opacity-60 group-hover:opacity-100 svelte-1y1a8hs"/> <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-500 z-20 svelte-1y1a8hs"><div class="p-3 rounded-full bg-white/10 backdrop-blur-md border border-white/20 svelte-1y1a8hs"><svg class="w-6 h-6 text-white svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" class="svelte-1y1a8hs"></path></svg></div></div></div> <p class="text-sm font-medium leading-relaxed text-[rgb(var(--text-muted))] line-clamp-2 svelte-1y1a8hs"> </p></div> <div class="mt-8 flex items-center justify-between svelte-1y1a8hs"><div class="flex -space-x-2 svelte-1y1a8hs"><div class="w-6 h-6 rounded-full border border-black bg-indigo-500/20 svelte-1y1a8hs"></div> <div class="w-6 h-6 rounded-full border border-black bg-purple-500/20 svelte-1y1a8hs"></div></div> <div class="text-[10px] font-bold text-[rgb(var(--text-muted))] tracking-[0.1em] group-hover:text-[rgb(var(--accent-primary))] transition-colors uppercase svelte-1y1a8hs">Explorar &rarr;</div></div></div> <div></div></button>'),la=_(`<header class="max-w-7xl w-full mb-6 lg:mb-8 text-center relative svelte-1y1a8hs"><div class="absolute right-0 top-0 svelte-1y1a8hs"><button class="p-3 rounded-2xl bg-[rgb(var(--bg-secondary))] border border-[rgb(var(--border-primary))] hover:border-[rgb(var(--accent-primary))] transition-all duration-300 group svelte-1y1a8hs" aria-label="Toggle Theme"><!></button></div> <div class="inline-block mb-4 relative svelte-1y1a8hs"><div class="absolute inset-0 bg-indigo-500/20 blur-2xl rounded-full svelte-1y1a8hs"></div> <img alt="EIE Logo" class="relative h-12 md:h-16 object-contain hover:scale-110 transition-transform duration-700 ease-out cursor-none svelte-1y1a8hs"/></div> <div class="space-y-1 svelte-1y1a8hs"><h1 class="text-3xl md:text-5xl font-black tracking-tight svelte-1y1a8hs"><span class="bg-gradient-to-b from-[rgb(var(--text-primary))] to-[rgb(var(--text-secondary))] bg-clip-text text-transparent svelte-1y1a8hs">Ecosistema Digital</span> <span class="text-[rgb(var(--accent-primary))] svelte-1y1a8hs">Instituto Gu√°tica</span></h1> <p class="text-base md:text-lg text-[rgb(var(--text-muted))] max-w-xl mx-auto font-medium svelte-1y1a8hs">Potenciando la excelencia pedag√≥gica a trav√©s de herramientas
          inteligentes y dise√±o centrado en el docente.</p></div></header> <div class="max-w-7xl w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8 svelte-1y1a8hs"></div> <footer class="mt-20 flex flex-col md:flex-row items-center gap-8 text-[rgb(var(--text-muted))] text-xs font-bold tracking-widest uppercase svelte-1y1a8hs"><div class="flex items-center gap-4 px-6 py-3 rounded-full bg-[rgb(var(--bg-secondary))] border border-[rgb(var(--border-primary))] backdrop-blur-sm svelte-1y1a8hs"><span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse svelte-1y1a8hs"></span> SISTEMA OPERATIVO</div> <div class="hidden md:block w-px h-4 bg-[rgb(var(--border-primary))] svelte-1y1a8hs"></div> <div class="svelte-1y1a8hs">v2.0.4 PLATINUM</div> <div class="hidden md:block w-px h-4 bg-[rgb(var(--border-primary))] svelte-1y1a8hs"></div> <div class="svelte-1y1a8hs">2026 EIE DIGITAL</div></footer>`,1),na=_(`<div class="min-h-screen w-full flex flex-col items-center p-6 lg:p-12 transition-colors duration-700 bg-[rgb(var(--bg-primary))] text-[rgb(var(--text-primary))] svelte-1y1a8hs"><div class="fixed inset-0 overflow-hidden pointer-events-none -z-10 svelte-1y1a8hs"><div class="absolute -top-[20%] -left-[10%] w-[60%] h-[60%] bg-indigo-500/5 blur-[120px] rounded-full animate-pulse svelte-1y1a8hs"></div> <div class="absolute -bottom-[20%] -right-[10%] w-[60%] h-[60%] bg-purple-500/5 blur-[120px] rounded-full animate-pulse svelte-1y1a8hs" style="animation-delay: 2s"></div> <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-[0.02] mix-blend-overlay svelte-1y1a8hs"></div></div> <!></div> <!>`,1);function ia(V,k){xr(k,!1);const d=()=>xo(qr,"$theme",we),[we,c]=fo();let M=Ct(k,"onSelect",8),t=b(!1);const he="¬°Nueva forma de anotar el Diario de Campo!",Fe="Ahora el Diario de Campo permite seleccionar y personalizar anotaciones predefinidas. ¬°Expl√≥ralo!";function B(){const L=localStorage.getItem("dismissedFeatureAlertDashboardDiario");if(!L)return!0;const T=new Date(L);return(new Date().getTime()-T.getTime())/(1e3*60*60*24)>5}const le=()=>{localStorage.setItem("dismissedFeatureAlertDashboardDiario",new Date().toISOString())},J=()=>{localStorage.setItem("dismissedFeatureAlertDashboardDiario",new Date().toISOString()),M()("diario")};vr(()=>{i(t,!0),B()});const Y=()=>{qr.update(L=>L==="light"?"dim":L==="dim"?"dark":"light")},A=[{id:"inasistencia",title:"Registro Diario",subtitle:"Gesti√≥n de Asistencia",description:"Control preciso de inasistencias y novedades diarias del aula.",image:Ko,color:"from-blue-600/20 to-indigo-600/20",accent:"blue",tag:"Operativo"},{id:"anotador",title:"Anotador de Clase",subtitle:"Seguimiento √Ågil",description:"Registro din√°mico de incidencias y avances pedag√≥gicos por sesi√≥n.",image:Zo,color:"from-purple-600/20 to-pink-600/20",accent:"purple",tag:"Acad√©mico"},{id:"diario",title:"Diario de Campo",subtitle:"Reflexi√≥n Docente",description:"Espacio para la reflexi√≥n profunda y documentaci√≥n pedag√≥gica.",image:Qo,color:"from-emerald-600/20 to-teal-600/20",accent:"emerald",tag:"Estrat√©gico"},{id:"horas_laborables",title:"Horas Laborables",subtitle:"Gesti√≥n de Tiempo",description:"Calculadora especializada para el seguimiento de jornadas y horas docentes.",image:ro,color:"from-orange-600/20 to-amber-600/20",accent:"orange",tag:"Herramienta",url:"https://ceslep.github.io/horas_laborables"}];Ir();var E=na(),I=Kt(E),l=a(o(I),2);{var p=L=>{var T=la(),O=Kt(T),je=o(O),Se=o(je),Ke=o(Se);{var vt=$e=>{var ne=ra();v($e,ne)},Ze=$e=>{var ne=oa();v($e,ne)},lt=$e=>{var ne=aa();v($e,ne)};te(Ke,$e=>{d()==="light"?$e(vt):d()==="dim"?$e(Ze,1):$e(lt,!1)})}var oe=a(je,2),x=a(o(oe),2),ae=a(O,2);xe(ae,5,()=>A,ke,($e,ne,U)=>{var re=sa(),X=a(o(re),2),Ge=o(X),ze=o(Ge),pe=o(ze),Q=o(pe),Ae=a(pe,2),Qe=o(Ae),Le=a(ze,2),Ue=o(Le),y=a(Ge,2),g=o(y),w=o(g),D=a(w,2),H=a(g,2),K=o(H),se=a(X,2);C(()=>{$t(re,"id",(e(ne),r(()=>e(ne).id==="diario"?"diario-module-target":""))),u(Q,(e(ne),r(()=>e(ne).subtitle))),u(Qe,(e(ne),r(()=>e(ne).title))),u(Ue,(e(ne),r(()=>e(ne).tag))),er(w,1,`absolute inset-0 bg-gradient-to-br ${e(ne),r(()=>e(ne).color)??""} mix-blend-overlay z-10`,"svelte-1y1a8hs"),$t(D,"src",(e(ne),r(()=>e(ne).image))),$t(D,"alt",(e(ne),r(()=>e(ne).title))),u(K,(e(ne),r(()=>e(ne).description))),er(se,1,`absolute inset-0 bg-gradient-to-br ${e(ne),r(()=>e(ne).color)??""} opacity-0 group-hover:opacity-[0.03] transition-opacity duration-500 pointer-events-none`,"svelte-1y1a8hs")}),G("click",re,()=>M()(e(ne).id)),co(1,re,()=>Fo,()=>({y:40,duration:800,delay:200+U*150})),v($e,re)});var Re=a(ae,2);C(()=>$t(x,"src",ro)),G("click",Se,Y),co(1,O,()=>Fo,()=>({y:-20,duration:800,delay:100})),co(1,Re,()=>Go,()=>({duration:1e3,delay:800})),v(L,T)};te(l,L=>{e(t)&&L(p)})}var S=a(I,2);uo(S,{featureMessage:he,description:Fe,onTryNow:J,onDismiss:le,targetSelector:"#diario-module-target",showPopup:!1,colorTheme:"emerald"}),v(V,E),hr(),c()}const vo="1wN7lp7lOGyxKYIUJ9TU89N9knnJjX2Z_TfsOUg48QpQ",no="https://app.iedeoccidente.com/gs",po="https://app.iedeoccidente.com/ig",da=`${po}/getprofes.php`,ca=`${po}/getMaterias.php`,va=`${po}/getEstudiantes.php`,ga=`${no}/save_inasistencias.php`,pa=`${no}/save_anotador.php`,ua=`${po}/getOpcionesAnotador3.php`,ba=`${po}/adiario.php`,fa=`${no}/save_diario.php`,ho="Inasistencias",Do="Datos",bo="1Q6EcSvccB7BoJiw9PD2s5J4PB8AJmr-6v-yKhiE4E8k",So="10pBVNYnS-ctmBYP9Y8KL3h32GZKsyi0bwoyil-kEGaE",Oo="diario",ko="Selecciona un grado y una asignatura para comenzar a registrar inasistencias. Ahora puedes marcar motivos individuales y observaciones espec√≠ficas por estudiante.Tambien pueden ver el filtro de datos en Locker Studio",wo="Completa los datos de la clase y selecciona las observaciones que correspondan. Puedes editar el texto de cada observaci√≥n si es necesario.Recuerda hacer check en el cuadro de selecci√≥n para guardar esa anotaci√≥n.",$o="Completa los datos de la clase y selecciona las observaciones que correspondan. Puedes editar el texto de cada observaci√≥n si es necesario.Recuerda hacer check en el cuadro de selecci√≥n para guardar esa anotaci√≥n.",xa="https://lookerstudio.google.com/reporting/be2efb22-dc5f-4f21-9dfc-0253e763e19f",ao=[{nombre:"UNO",fecha_inicio:new Date("2026-01-26"),fecha_fin:new Date("2026-03-27")},{nombre:"DOS",fecha_inicio:new Date("2026-03-30"),fecha_fin:new Date("2026-06-12")},{nombre:"TRES",fecha_inicio:new Date("2026-07-07"),fecha_fin:new Date("2026-09-11")},{nombre:"CUATRO",fecha_inicio:new Date("2026-09-14"),fecha_fin:new Date("2026-11-20")}],ha=async()=>{try{const V=await fetch(`${ba}`);if(!V.ok)throw new Error(`Error: ${V.status}`);return await V.json()}catch(V){throw console.error("Error fetching diario options:",V),V}},Eo=async(V={})=>{try{const k=await fetch(`${no}/get_inasistencias.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!k.ok)throw new Error(`Error: ${k.status}`);return await k.json()}catch(k){throw console.error("Error fetching inasistencias:",k),k}},No=async(V={})=>{try{const k=await fetch(`${no}/get_anotador.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!k.ok)throw new Error(`Error: ${k.status}`);return await k.json()}catch(k){throw console.error("Error fetching inasistencias:",k),k}},ma=async(V={})=>{try{const k=await fetch(`${no}/get_diario.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!k.ok)throw new Error(`Error: ${k.status}`);return await k.json()}catch(k){throw console.error("Error fetching diario:",k),k}},_a=async V=>{try{const k=await fetch(`${ga}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!k.ok)throw new Error(`Error: ${k.status}`);return await k.json()}catch(k){throw console.error("Error saving inasistencias:",k),k}},Jr=async()=>{try{const V=await fetch(`${da}`);if(!V.ok)throw new Error(`Error: ${V.status}`);return await V.json()}catch(V){throw console.error("Error fetching docentes:",V),V}},Kr=async()=>{try{const V=await fetch(`${ca}`);if(!V.ok)throw new Error(`Error: ${V.status}`);return await V.json()}catch(V){throw console.error("Error fetching materias:",V),V}},Zr=async()=>{try{const V=await fetch(`${va}`);if(!V.ok)throw new Error(`Error: ${V.status}`);return await V.json()}catch(V){throw console.error("Error fetching estudiantes:",V),V}},ya=async()=>{try{const V=await fetch(`${ua}`);if(!V.ok)throw new Error(`Error: ${V.status}`);return await V.json()}catch(V){throw console.error("Error fetching opciones anotador3:",V),V}},ka=async V=>{try{const k=await fetch(`${pa}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!k.ok)throw new Error(`Error: ${k.status}`);return await k.json()}catch(k){throw console.error("Error saving inasistencias:",k),k}},wa=async V=>{try{const k=await fetch(`${fa}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!k.ok)throw new Error(`Error: ${k.status}`);return await k.json()}catch(k){throw console.error("Error saving inasistencias:",k),k}};var $a=_('<div class="flex-1 flex items-center justify-center"><div class="text-center"><div class="animate-spin w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full mx-auto mb-4"></div> <p>Cargando datos...</p></div></div>'),Ca=_('<span class="ml-2 px-2 py-1 text-xs bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full">Activos</span>'),Sa=_("<option> </option>"),Aa=_("<option> </option>"),Da=_('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">Este docente no tiene registros de materias</p>'),Ea=_("<option> </option>"),Ia=_('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">No hay grados para los filtros seleccionados</p>'),Ba=_("<option> </option>"),Fa=_('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">No hay motivos para los filtros seleccionados</p>'),za=_('<div class="flex-1 flex items-center justify-center"><div class="text-center py-12 px-4"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm sm:text-base">No se encontraron registros con los filtros seleccionados</p></div></div>'),Ma=_('<button class="text-indigo-600 dark:text-indigo-400 hover:underline font-medium text-left truncate w-full"> </button>'),Ta=_('<tr class="border-b transition-colors hover:bg-black/5 dark:hover:bg-white/5 text-xs"><td class="p-2"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 text-center"> </td><td class="p-2 truncate max-w-[150px]"><!></td><td class="p-2 text-center"><span><span> </span> </span></td><td class="p-2 text-center"> </td><td class="p-2"><span class="truncate block max-w-xs text-xs"> </span></td></tr>'),Oa=_('<button class="text-indigo-600 dark:text-indigo-400 hover:underline font-medium text-left truncate w-full"> </button>'),Na=_('<tr class="border-b transition-colors hover:bg-black/5 dark:hover:bg-white/5 text-xs"><td class="p-2 whitespace-nowrap"> </td><td class="p-2"><span class="truncate block max-w-[120px]"> </span></td><td class="p-2 truncate max-w-[120px]"> </td><td class="p-2"><span class="truncate block max-w-[100px]"><!></span></td><td class="p-2 text-center"><span><span> </span> </span></td><td class="p-2 whitespace-nowrap text-center"> </td><td class="p-2 whitespace-nowrap text-center"> </td></tr>'),ja=_('<button class="font-semibold text-xs text-indigo-600 dark:text-indigo-400 truncate hover:underline text-left w-full"> </button>'),Ra=_('<p class="font-semibold text-xs text-indigo-600 dark:text-indigo-400 truncate"> </p>'),La=_('<div class="text-[10px] p-1.5 rounded"><div class="flex items-start"><svg class="w-3 h-3 mr-1 mt-0.5 flex-shrink-0 opacity-60" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="line-clamp-1"> </span></div></div>'),Pa=_('<div class="border rounded-lg p-2 transition-colors hover:bg-black/5 dark:hover:bg-white/5"><div class="flex justify-between items-center mb-1.5"><div class="flex-1 min-w-0"><!> <p class="text-[10px] opacity-75"> </p></div> <div class="flex flex-col items-end ml-2 flex-shrink-0"><span><span> </span> </span> <span class="text-[10px] font-semibold"> </span></div></div> <div class="flex gap-3 text-[10px] mb-1.5"><div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="truncate"> </span></div> <div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <span class="truncate"> </span></div></div> <!></div>'),Ha=_('<div class="hidden lg:flex flex-1 flex-col overflow-hidden min-h-0"><div class="flex-1 overflow-auto min-w-full border rounded-lg"><table class="w-full border-collapse text-sm min-w-[800px]"><thead class="sticky top-0 z-10 border-b"><tr><th class="text-left p-2 font-semibold whitespace-nowrap">Fecha</th><th class="text-left p-2 font-semibold whitespace-nowrap">Docente</th><th class="text-left p-2 font-semibold whitespace-nowrap">Materia</th><th class="text-center p-2 font-semibold whitespace-nowrap">Grado</th><th class="text-left p-2 font-semibold whitespace-nowrap">Estudiante</th><th class="text-center p-2 font-semibold whitespace-nowrap">Motivo</th><th class="text-center p-2 font-semibold whitespace-nowrap">Horas</th><th class="text-left p-2 font-semibold whitespace-nowrap">Observaciones</th></tr></thead><tbody></tbody></table></div></div> <div class="hidden md:flex lg:hidden flex-1 overflow-auto"><div class="min-w-full border rounded-lg"><table class="w-full border-collapse text-xs"><thead class="sticky top-0 z-10 border-b"><tr><th class="text-left p-2 font-semibold whitespace-nowrap">Fecha</th><th class="text-left p-2 font-semibold whitespace-nowrap">Docente</th><th class="text-left p-2 font-semibold whitespace-nowrap">Materia</th><th class="text-left p-2 font-semibold whitespace-nowrap">Estudiante</th><th class="text-center p-2 font-semibold whitespace-nowrap">Motivo</th><th class="text-center p-2 font-semibold whitespace-nowrap">Horas</th><th class="text-center p-2 font-semibold whitespace-nowrap">Grado</th></tr></thead><tbody></tbody></table></div></div> <div class="flex-1 overflow-y-auto md:hidden px-1"><div class="space-y-2"></div></div>',1),Ga=_('<div class="p-3 sm:p-4 border-b"><div class="flex items-center justify-between mb-2 sm:mb-3"><h3 class="text-lg font-semibold">Filtros <!></h3> <button class="text-sm px-3 py-1 rounded-lg border transition-colors hover:bg-black/5 dark:hover:bg-white/5">Limpiar filtros</button></div> <div class="mb-3 p-1.5 sm:p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg"><p class="text-[10px] sm:text-xs font-medium mb-1.5">R√°pido: Fechas</p> <div class="flex items-center mb-2"><input id="checkFiltrarFecha" type="checkbox" class="w-4 h-4 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 dark:bg-zinc-700"/> <label for="checkFiltrarFecha" class="ml-2 text-xs font-medium">Activar filtro por fechas</label></div> <div class="flex flex-wrap gap-1 sm:gap-2"><button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Hoy</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 7 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 30 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Mes actual</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimo trimestre</button></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"><div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroDocente" class="block text-xs sm:text-sm font-medium">Docente</label> <select id="filtroDocente" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option>Todos los docentes</option><!></select></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroMateria" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroMateria" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroGrado" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroGrado" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroMotivo" class="block text-xs sm:text-sm font-medium">Motivo</label> <select id="filtroMotivo" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaInicio" class="block text-xs sm:text-sm font-medium">Fecha desde</label> <input id="filtroFechaInicio" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaFin" class="block text-xs sm:text-sm font-medium">Fecha hasta</label> <input id="filtroFechaFin" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div></div></div></div> <div class="flex-1 flex flex-col p-2 sm:p-4 min-h-0"><div class="mb-4 px-0 sm:px-3"><p class="text-sm">Se encontraron <span class="font-bold text-indigo-500"> </span> registros</p></div> <!></div>',1),Ua=_('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4" role="button" tabindex="0" aria-label="Cerrar ventana"><div class="w-full max-w-7xl max-h-[95vh] bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl overflow-hidden flex flex-col"><div class="flex items-center justify-between p-3 sm:p-4 border-b"><div class="flex items-center gap-3"><img alt="EIE Logo" class="h-8 w-auto hidden sm:block"/> <div><h2 class="text-lg sm:text-xl font-bold">Inasistencias</h2> <p class="text-xs hidden sm:block">Filtra y consulta los registros</p></div></div> <div class="flex items-center gap-3"><button class="inline-flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Exportar CSV</button> <button class="p-2 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5" aria-label="Cerrar"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div> <div class="flex-1 overflow-hidden flex flex-col min-h-0"><!></div></div></div>');function Va(V,k){xr(k,!1);const d=b(),we=b(),c=b(),M=b(),t=b();let he=Ct(k,"onClose",8),Fe=Ct(k,"selectedDocente",8,""),B=b([]),le=[],J=[],Y=[],A=b(!1),E=b(!1),I=b([]),l=b({docente:Fe()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",motivo:""});const p=()=>{const g=new Date,w=new Date(g.getFullYear(),g.getMonth()-1,g.getDate()),D=H=>{const K=H.getFullYear(),se=String(H.getMonth()+1).padStart(2,"0"),Ee=String(H.getDate()).padStart(2,"0");return`${K}-${se}-${Ee}`};ye(l,e(l).fechaInicio=D(w)),Pe(()=>{e(t),e(O),e(d),e(c),e(M)}),ye(l,e(l).fechaFin=D(g)),Pe(()=>{e(t),e(O),e(d),e(c),e(M)})},S=g=>{const w=new Date;let D;switch(g){case"hoy":D=new Date(w);break;case"semana":D=new Date(w),D.setDate(w.getDate()-7);break;case"mes":D=new Date(w),D.setDate(w.getDate()-30);break;case"mes_actual":D=new Date(w.getFullYear(),w.getMonth(),1);break;case"trimestre":D=new Date(w),D.setDate(w.getDate()-90);break;default:p();return}const H=K=>{const se=K.getFullYear(),Ee=String(K.getMonth()+1).padStart(2,"0"),Z=String(K.getDate()).padStart(2,"0");return`${se}-${Ee}-${Z}`};ye(l,e(l).fechaInicio=H(D)),Pe(()=>{e(t),e(O),e(d),e(c),e(M)}),ye(l,e(l).fechaFin=H(w)),Pe(()=>{e(t),e(O),e(d),e(c),e(M)}),i(E,!0),console.log("‚úÖ setFechaPreset ejecutado:",{preset:g,fechaInicio:e(l).fechaInicio,fechaFin:e(l).fechaFin,filtrarPorFecha:e(E)})},L=[{value:"Sin excusa",icon:"üö´",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},{value:"Excusa",icon:"üìÑ",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},{value:"LLegada Tarde",icon:"‚è∞",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},{value:"Transporte Escolar",icon:"üöå",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},{value:"Permiso",icon:"‚úÖ",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},{value:"No portar/sin uniforme",icon:"üëö",color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"},{value:"Pacto de Aula",icon:"ü§ù",color:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"},{value:"Uso del celular",icon:"üì±",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},{value:"Desorden en Clase",icon:"üîä",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"},{value:"Fuga",icon:"üèÉ‚Äç‚ôÇÔ∏è",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},{value:"No realizaci√≥n de Aseo",icon:"üßπ",color:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200"},{value:"Licencia por salud",icon:"üè•",color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"},{value:"Incapacidad",icon:"ü©∫",color:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200"},{value:"Reuni√≥n interna",icon:"üë•",color:"bg-zinc-100 text-zinc-800 dark:bg-zinc-900 dark:text-zinc-200"},{value:"Psicoorientaci√≥n",icon:"üß†",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}],T=g=>L.find(w=>w.value===g)||{icon:"‚ùì",color:"bg-gray-100 text-gray-800"};let O=b([]),je=b([]),Se=b([]),Ke=b([]);const vt=g=>{if(!g)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(g))return g;const w=g.split("/");if(w.length===3){const H=w[0].padStart(2,"0"),K=w[1].padStart(2,"0");return`${w[2].length===2?`20${w[2]}`:w[2]}-${K}-${H}`}const D=new Date(g);if(!isNaN(D.getTime())){const H=D.getFullYear(),K=String(D.getMonth()+1).padStart(2,"0"),se=String(D.getDate()).padStart(2,"0");return`${H}-${K}-${se}`}return g},Ze=async()=>{i(A,!0);try{const[g,w,D,H]=await Promise.all([Eo({spreadsheetId:vo,worksheetTitle:ho}),Jr(),Kr(),Zr()]);console.log("Respuesta cruda de inasistencias:",g),console.log("Tipo de dato:",typeof g),console.log("Es array:",Array.isArray(g)),g&&typeof g=="object"&&console.log("Keys:",Object.keys(g));const K=j=>{if(!j?.records||!Array.isArray(j.records))return[];const ee=j.records[0]?.values||[];return j.records.slice(1).map(fe=>{const qe=fe.values||[];return{timestamp:qe[0]||"",docente:qe[1]||"",fecha:qe[2]||"",horas:qe[3]||"",materia:qe[4]||"",motivo:qe[5]||"",grado:qe[6]||"",nombre:qe[7]||"",observaciones:qe[8]||""}}).filter(fe=>fe.docente&&fe.fecha)},se=j=>Array.isArray(j)?j:j?.data&&Array.isArray(j.data)?j.data:j?.rows&&Array.isArray(j.rows)?j.rows:j?.values&&Array.isArray(j.values)?j.values:j?.inasistencias&&Array.isArray(j.inasistencias)?j.inasistencias:[];i(B,K(g)),le=se(w),J=se(D),Y=se(H),i(O,e(B).length>0?[...new Set(e(B).map(j=>j.docente).filter(Boolean))].sort():[]),i(je,e(B).length>0?[...new Set(e(B).map(j=>j.materia).filter(Boolean))].sort():[]);const Ee=[...new Set(Y.map(j=>(typeof j=="string"?j:j.grado||"").toString()).filter(Boolean))],Z=e(B).length>0?e(B).map(j=>j.grado).filter(Boolean):[];i(Se,[...new Set([...Ee,...Z])].sort((j,ee)=>{const ue=parseInt(j),fe=parseInt(ee);return!isNaN(ue)&&!isNaN(fe)?ue-fe:j.localeCompare(ee)})),i(Ke,e(B).length>0?[...new Set(e(B).map(j=>j.motivo).filter(Boolean))].sort():[]),p(),console.log("Datos cargados:",{inasistencias:e(B).length,docentes:le.length,docentesUnicos:e(O).length,materiasUnicas:e(je).length,gradosUnicos:e(Se).length,motivosUnicos:e(Ke).length})}catch(g){console.error("Error cargando datos:",g),await jt.fire({icon:"error",title:"Error",text:"No se pudieron cargar los datos de inasistencias",confirmButtonColor:"#ef4444"})}finally{i(A,!1)}},lt=()=>{i(l,{docente:Fe()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",motivo:""}),p(),i(E,!1)},oe=()=>{if(e(I).length===0){jt.fire({icon:"warning",title:"Sin datos",text:"No hay datos para exportar",confirmButtonColor:"#f59e0b"});return}const w=[["Fecha","Docente","Materia","Grado","Estudiante","Motivo","Horas","Observaciones"].join(","),...e(I).map(se=>[se.fecha,`"${se.docente}"`,`"${se.materia}"`,se.grado,`"${se.nombre}"`,`"${se.motivo}"`,se.horas,`"${se.observaciones}"`].join(","))].join(`
`),D=new Blob([w],{type:"text/csv;charset=utf-8;"}),H=document.createElement("a"),K=URL.createObjectURL(D);H.setAttribute("href",K),H.setAttribute("download",`inasistencias_${new Date().toISOString().split("T")[0]}.csv`),H.style.visibility="hidden",document.body.appendChild(H),H.click(),document.body.removeChild(H)},x=g=>{try{const[w,D,H]=g.split("-");return w&&D&&H?`${H}/${D}/${w}`:g}catch{return g}},ae=g=>{if(!e(l).docente||!e(l).materia||!e(l).grado)return;const D=e(B).filter(K=>{if(K.nombre!==g||K.docente!==e(l).docente||K.materia!==e(l).materia||K.grado!==e(l).grado)return!1;if(e(E)){const se=vt(K.fecha);if(e(l).fechaInicio&&se<e(l).fechaInicio||e(l).fechaFin&&se>e(l).fechaFin)return!1}return!0}).reduce((K,se)=>{const Ee=parseInt(se.horas)||0;return K+Ee},0);let H="";e(E)&&e(l).fechaInicio&&e(l).fechaFin?H=`entre ${x(e(l).fechaInicio)} y ${x(e(l).fechaFin)}`:H="en total (hist√≥rico)",jt.fire({icon:"info",title:g,html:`
        <div class="text-left space-y-2">
          <p><strong>Materia:</strong> ${e(l).materia}</p>
          <p><strong>Total inasistencias:</strong> ${D} horas</p>
          <p class="text-sm text-gray-500 text-center mt-4">(${H})</p>
        </div>
      `,confirmButtonColor:"#4f46e5"})};vr(()=>{Ze()}),Be(()=>(e(l),e(B),e(je)),()=>{i(d,e(l).docente?[...new Set(e(B).filter(g=>g.docente===e(l).docente).map(g=>g.materia).filter(Boolean))].sort():e(je))}),Be(()=>(e(l),e(B),e(Se)),()=>{i(we,e(l).docente?[...new Set(e(B).filter(g=>g.docente===e(l).docente).map(g=>g.grado).filter(Boolean))].sort((g,w)=>{const D=parseInt(g),H=parseInt(w);return!isNaN(D)&&!isNaN(H)?D-H:g.localeCompare(w)}):e(Se))}),Be(()=>(e(l),e(B),e(we)),()=>{i(c,e(l).materia?[...new Set(e(B).filter(g=>g.materia===e(l).materia).map(g=>g.grado).filter(Boolean))].sort((g,w)=>{const D=parseInt(g),H=parseInt(w);return!isNaN(D)&&!isNaN(H)?D-H:g.localeCompare(w)}):e(we))}),Be(()=>(e(l),e(B),e(Ke)),()=>{i(M,e(l).docente||e(l).materia||e(l).grado?[...new Set(e(B).filter(g=>!(e(l).docente&&g.docente!==e(l).docente||e(l).materia&&g.materia!==e(l).materia||e(l).grado&&g.grado!==e(l).grado)).map(g=>g.motivo).filter(Boolean))].sort():e(Ke))}),Be(()=>{},()=>{i(t,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Be(()=>(e(B),e(E),e(l),e(I)),()=>{console.log("üîÑ Filtro reactivo ejecut√°ndose:",{totalInasistencias:e(B).length,filtrarPorFecha:e(E),fechaInicio:e(l).fechaInicio,fechaFin:e(l).fechaFin}),i(I,e(B).filter(g=>{if(e(l).docente&&g.docente!==e(l).docente||e(l).materia&&g.materia!==e(l).materia||e(l).grado&&g.grado!==e(l).grado||e(l).motivo&&g.motivo!==e(l).motivo)return!1;if(e(E)){const w=vt(g.fecha);if(e(l).fechaInicio&&w<e(l).fechaInicio||e(l).fechaFin&&w>e(l).fechaFin)return!1}return!0})),console.log(`üìä Resultados filtrados: ${e(I).length} de ${e(B).length}`)}),Be(()=>(e(E),e(l)),()=>{e(E)&&(!e(l).fechaInicio||!e(l).fechaFin)&&p()}),Er(),Ir();var Re=Ua(),$e=o(Re),ne=o($e),U=o(ne),re=o(U),X=a(re,2),Ge=o(X),ze=a(Ge,2),pe=a(U,2),Q=o(pe),Ae=a(Q,2),Qe=a(ne,2),Le=o(Qe);{var Ue=g=>{var w=$a(),D=o(w),H=a(o(D),2);C(()=>s(H,`color: ${e(t),r(()=>e(t).text)??""};`)),v(g,w)},y=g=>{var w=Ga(),D=Kt(w),H=o(D),K=o(H),se=a(o(K));{var Ee=me=>{var We=Ca();v(me,We)};te(se,me=>{e(l),r(()=>e(l).docente||e(l).materia||e(l).grado||e(l).motivo||e(l).fechaInicio||e(l).fechaFin)&&me(Ee)})}var Z=a(K,2),j=a(H,2),ee=o(j),ue=a(ee,2),fe=o(ue),qe=a(fe,2),Je=a(ue,2),de=o(Je),P=a(de,2),q=a(P,2),ce=a(q,2),Me=a(ce,2),n=a(j,2),f=o(n),$=o(f),R=o($),Ce=a(R,2),He=o(Ce);He.value=He.__value="";var Ve=a(He);xe(Ve,1,()=>e(O),ke,(me,We)=>{var nt=Sa(),Bt=o(nt),Tt={};C(()=>{u(Bt,e(We)),Tt!==(Tt=e(We))&&(nt.value=(nt.__value=e(We))??"")}),v(me,nt)});var Ie=a($,2),Mt=o(Ie),Ut=o(Mt),Vt=a(Mt,2),Yt=o(Vt),Wt=o(Yt);Yt.value=Yt.__value="";var ht=a(Yt);xe(ht,1,()=>e(d),ke,(me,We)=>{var nt=Aa(),Bt=o(nt),Tt={};C(()=>{u(Bt,e(We)),Tt!==(Tt=e(We))&&(nt.value=(nt.__value=e(We))??"")}),v(me,nt)});var St=a(Vt,2);{var Xe=me=>{var We=Da();v(me,We)};te(St,me=>{e(l),e(d),r(()=>e(l).docente&&e(d).length===0)&&me(Xe)})}var At=a(f,2),Et=o(At),Pt=o(Et),It=o(Pt),wt=a(Pt,2),Zt=o(wt),mr=o(Zt);Zt.value=Zt.__value="";var gr=a(Zt);xe(gr,1,()=>e(c),ke,(me,We)=>{var nt=Ea(),Bt=o(nt),Tt={};C(()=>{u(Bt,e(We)),Tt!==(Tt=e(We))&&(nt.value=(nt.__value=e(We))??"")}),v(me,nt)});var pr=a(wt,2);{var W=me=>{var We=Ia();v(me,We)};te(pr,me=>{e(l),e(c),r(()=>(e(l).docente||e(l).materia)&&e(c).length===0)&&me(W)})}var ie=a(Et,2),Ye=o(ie),ot=a(Ye,2),mt=o(ot),Ht=o(mt);mt.value=mt.__value="";var zr=a(mt);xe(zr,1,()=>e(M),ke,(me,We)=>{const nt=Lt(()=>(e(We),r(()=>T(e(We)))));var Bt=Ba(),Tt=o(Bt),lr={};C(()=>{u(Tt,`${Oe(e(nt)),r(()=>e(nt).icon)??""}
                      ${e(We)??""}`),lr!==(lr=e(We))&&(Bt.value=(Bt.__value=e(We))??"")}),v(me,Bt)});var _r=a(ot,2);{var sr=me=>{var We=Fa();v(me,We)};te(_r,me=>{e(l),e(M),r(()=>(e(l).docente||e(l).materia||e(l).grado)&&e(M).length===0)&&me(sr)})}var Gr=a(At,2),Qr=o(Gr),Mr=o(Qr),yr=a(Mr,2),Tr=a(Qr,2),kr=o(Tr),Br=a(kr,2),Or=a(D,2),Ur=o(Or),De=o(Ur),at=a(o(De)),gt=o(at),Gt=a(Ur,2);{var Qt=me=>{var We=za(),nt=o(We),Bt=o(nt),Tt=a(Bt,2);C(()=>{s(Bt,`color: ${e(t),r(()=>e(t).icon)??""};`),s(Tt,`color: ${e(t),r(()=>e(t).text)??""};`)}),v(me,We)},Vr=me=>{var We=Ha(),nt=Kt(We),Bt=o(nt),Tt=o(Bt),lr=o(Tt),Yr=o(lr),Nr=o(Yr),jr=a(Nr),Wr=a(jr),Fr=a(Wr),Rr=a(Fr),be=a(Rr),Xt=a(be),ar=a(Xt),wr=a(lr);xe(wr,5,()=>e(I),ke,(pt,z)=>{const ct=Lt(()=>(e(z),r(()=>T(e(z).motivo))));var tt=Ta(),st=o(tt),zt=o(st),Ot=a(st),nr=o(Ot),qt=a(Ot),tr=o(qt),ir=a(qt),br=o(ir),ut=a(ir),Rt=o(ut);{var $r=kt=>{var Dt=Ma(),cr=o(Dt);C(()=>u(cr,(e(z),r(()=>e(z).nombre)))),G("click",Dt,()=>ae(e(z).nombre)),v(kt,Dt)},yt=kt=>{var Dt=zo();C(()=>u(Dt,(e(z),r(()=>e(z).nombre)))),v(kt,Dt)};te(Rt,kt=>{e(l),r(()=>e(l).docente&&e(l).materia&&e(l).grado)?kt($r):kt(yt,!1)})}var Cr=a(ut),Nt=o(Cr),rr=o(Nt),Sr=o(rr),Pr=a(rr),or=a(Cr),Hr=o(or),Ar=a(or),dr=o(Ar),Jt=o(dr);C(kt=>{s(tt,`border-color: ${e(t),r(()=>e(t).border)??""};`),s(st,`color: ${e(t),r(()=>e(t).text)??""};`),u(zt,kt),s(Ot,`color: ${e(t),r(()=>e(t).text)??""};`),$t(Ot,"title",(e(z),r(()=>e(z).docente))),u(nr,(e(z),r(()=>e(z).docente))),s(qt,`color: ${e(t),r(()=>e(t).text)??""};`),$t(qt,"title",(e(z),r(()=>e(z).materia))),u(tr,(e(z),r(()=>e(z).materia))),s(ir,`color: ${e(t),r(()=>e(t).text)??""};`),u(br,(e(z),r(()=>e(z).grado))),s(ut,`color: ${e(t),r(()=>e(t).text)??""};`),$t(ut,"title",(e(z),r(()=>e(z).nombre))),er(Nt,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Oe(e(ct)),r(()=>e(ct).color)??""}`),u(Sr,(Oe(e(ct)),r(()=>e(ct).icon))),u(Pr,` ${e(z),r(()=>e(z).motivo)??""}`),s(or,`color: ${e(t),r(()=>e(t).text)??""};`),u(Hr,(e(z),r(()=>e(z).horas))),s(Ar,`color: ${e(t),r(()=>e(t).text)??""};`),u(Jt,(e(z),r(()=>e(z).observaciones||"-")))},[()=>(e(z),r(()=>x(e(z).fecha)))]),v(pt,tt)});var Lr=a(nt,2),ur=o(Lr),h=o(ur),N=o(h),ve=o(N),_e=o(ve),Ne=a(_e),et=a(Ne),_t=a(et),m=a(_t),F=a(m),ge=a(F),Te=a(N);xe(Te,5,()=>e(I),ke,(pt,z)=>{const ct=Lt(()=>(e(z),r(()=>T(e(z).motivo))));var tt=Na(),st=o(tt),zt=o(st),Ot=a(st),nr=o(Ot),qt=o(nr),tr=a(Ot),ir=o(tr),br=a(tr),ut=o(br),Rt=o(ut);{var $r=Jt=>{var kt=Oa(),Dt=o(kt);C(()=>u(Dt,(e(z),r(()=>e(z).nombre)))),G("click",kt,()=>ae(e(z).nombre)),v(Jt,kt)},yt=Jt=>{var kt=zo();C(()=>u(kt,(e(z),r(()=>e(z).nombre)))),v(Jt,kt)};te(Rt,Jt=>{e(l),r(()=>e(l).docente&&e(l).materia&&e(l).grado)?Jt($r):Jt(yt,!1)})}var Cr=a(br),Nt=o(Cr),rr=o(Nt),Sr=o(rr),Pr=a(rr),or=a(Cr),Hr=o(or),Ar=a(or),dr=o(Ar);C(Jt=>{s(tt,`border-color: ${e(t),r(()=>e(t).border)??""};`),s(st,`color: ${e(t),r(()=>e(t).text)??""};`),u(zt,Jt),s(Ot,`color: ${e(t),r(()=>e(t).text)??""};`),$t(nr,"title",(e(z),r(()=>e(z).docente))),u(qt,(e(z),r(()=>e(z).docente))),s(tr,`color: ${e(t),r(()=>e(t).text)??""};`),$t(tr,"title",(e(z),r(()=>e(z).materia))),u(ir,(e(z),r(()=>e(z).materia))),s(br,`color: ${e(t),r(()=>e(t).text)??""};`),$t(ut,"title",(e(z),r(()=>e(z).nombre))),er(Nt,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Oe(e(ct)),r(()=>e(ct).color)??""}`),u(Sr,(Oe(e(ct)),r(()=>e(ct).icon))),u(Pr,` ${e(z),r(()=>e(z).motivo)??""}`),s(or,`color: ${e(t),r(()=>e(t).text)??""};`),u(Hr,(e(z),r(()=>e(z).horas))),s(Ar,`color: ${e(t),r(()=>e(t).text)??""};`),u(dr,(e(z),r(()=>e(z).grado)))},[()=>(e(z),r(()=>x(e(z).fecha)))]),v(pt,tt)});var dt=a(Lr,2),Ft=o(dt);xe(Ft,5,()=>e(I),ke,(pt,z)=>{const ct=Lt(()=>(e(z),r(()=>T(e(z).motivo))));var tt=Pa(),st=o(tt),zt=o(st),Ot=o(zt);{var nr=Dt=>{var cr=ja(),Xr=o(cr);C(()=>u(Xr,(e(z),r(()=>e(z).nombre)))),G("click",cr,()=>ae(e(z).nombre)),v(Dt,cr)},qt=Dt=>{var cr=Ra(),Xr=o(cr);C(()=>u(Xr,(e(z),r(()=>e(z).nombre)))),v(Dt,cr)};te(Ot,Dt=>{e(l),r(()=>e(l).docente&&e(l).materia&&e(l).grado)?Dt(nr):Dt(qt,!1)})}var tr=a(Ot,2),ir=o(tr),br=a(zt,2),ut=o(br),Rt=o(ut),$r=o(Rt),yt=a(Rt),Cr=a(ut,2),Nt=o(Cr),rr=a(st,2),Sr=o(rr),Pr=a(o(Sr),2),or=o(Pr),Hr=a(Sr,2),Ar=a(o(Hr),2),dr=o(Ar),Jt=a(rr,2);{var kt=Dt=>{var cr=La(),Xr=o(cr),mo=a(o(Xr),2),_o=o(mo);C(()=>{s(cr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; color: ${e(t),r(()=>e(t).label)??""};`),u(_o,(e(z),r(()=>e(z).observaciones)))}),v(Dt,cr)};te(Jt,Dt=>{e(z),r(()=>e(z).observaciones)&&Dt(kt)})}C(Dt=>{s(tt,`border-color: ${e(t),r(()=>e(t).cardBorder)??""}; background-color: ${e(t),r(()=>e(t).cardBg)??""};`),s(tr,`color: ${e(t),r(()=>e(t).label)??""};`),u(ir,`${e(z),r(()=>e(z).grado)??""} ‚Ä¢ ${Dt??""}`),er(ut,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium ${Oe(e(ct)),r(()=>e(ct).color)??""} mb-0.5`),u($r,(Oe(e(ct)),r(()=>e(ct).icon))),u(yt,` ${e(z),r(()=>e(z).motivo)??""}`),s(Cr,`color: ${e(t),r(()=>e(t).text)??""};`),u(Nt,`${e(z),r(()=>e(z).horas)??""}h`),s(rr,`color: ${e(t),r(()=>e(t).text)??""};`),u(or,(e(z),r(()=>e(z).docente))),$t(Ar,"title",(e(z),r(()=>e(z).materia))),u(dr,(e(z),r(()=>e(z).materia)))},[()=>(e(z),r(()=>x(e(z).fecha)))]),v(pt,tt)}),C(()=>{s(Bt,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),s(lr,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""};`),s(Nr,`color: ${e(t),r(()=>e(t).text)??""};`),s(jr,`color: ${e(t),r(()=>e(t).text)??""};`),s(Wr,`color: ${e(t),r(()=>e(t).text)??""};`),s(Fr,`color: ${e(t),r(()=>e(t).text)??""};`),s(Rr,`color: ${e(t),r(()=>e(t).text)??""};`),s(be,`color: ${e(t),r(()=>e(t).text)??""};`),s(Xt,`color: ${e(t),r(()=>e(t).text)??""};`),s(ar,`color: ${e(t),r(()=>e(t).text)??""};`),s(ur,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),s(N,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""};`),s(_e,`color: ${e(t),r(()=>e(t).text)??""};`),s(Ne,`color: ${e(t),r(()=>e(t).text)??""};`),s(et,`color: ${e(t),r(()=>e(t).text)??""};`),s(_t,`color: ${e(t),r(()=>e(t).text)??""};`),s(m,`color: ${e(t),r(()=>e(t).text)??""};`),s(F,`color: ${e(t),r(()=>e(t).text)??""};`),s(ge,`color: ${e(t),r(()=>e(t).text)??""};`)}),v(me,We)};te(Gt,me=>{e(I),r(()=>e(I).length===0)?me(Qt):me(Vr,!1)})}C(()=>{s(D,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),s(K,`color: ${e(t),r(()=>e(t).text)??""};`),s(Z,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(ee,`color: ${e(t),r(()=>e(t).text)??""};`),s(qe,`color: ${e(t),r(()=>e(t).text)??""};`),s(de,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(P,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(q,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(ce,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(Me,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(R,`color: ${e(t),r(()=>e(t).label)??""};`),s(Ce,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(Mt,`color: ${e(t),r(()=>e(t).label)??""};`),u(Ut,`Materia ${e(l),r(()=>e(l).docente?"(del docente)":"")??""}`),s(Vt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),u(Wt,(e(l),r(()=>e(l).docente?"Todas las materias del docente":"Todas las materias"))),s(Pt,`color: ${e(t),r(()=>e(t).label)??""};`),u(It,`Grado ${e(l),r(()=>e(l).docente||e(l).materia?"(filtrado)":"")??""}`),s(wt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),u(mr,(e(l),r(()=>e(l).docente||e(l).materia?"Todos los grados filtrados":"Todos los grados"))),s(Ye,`color: ${e(t),r(()=>e(t).label)??""};`),s(ot,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),u(Ht,(e(l),r(()=>e(l).docente||e(l).materia||e(l).grado?"Todos los motivos filtrados":"Todos los motivos"))),s(Mr,`color: ${e(t),r(()=>e(t).label)??""};`),yr.disabled=!e(E),s(yr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(kr,`color: ${e(t),r(()=>e(t).label)??""};`),Br.disabled=!e(E),s(Br,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(De,`color: ${e(t),r(()=>e(t).label)??""};`),u(gt,(e(I),r(()=>e(I).length)))}),G("click",Z,lt),Ao(fe,()=>e(E),me=>i(E,me)),G("click",de,()=>S("hoy")),G("click",P,()=>S("semana")),G("click",q,()=>S("mes")),G("click",ce,()=>S("mes_actual")),G("click",Me,()=>S("trimestre")),rt(Ce,()=>e(l).docente,me=>(ye(l,e(l).docente=me),Pe(()=>{e(t),e(O),e(d),e(c),e(M)}))),rt(Vt,()=>e(l).materia,me=>(ye(l,e(l).materia=me),Pe(()=>{e(t),e(O),e(d),e(c),e(M)}))),rt(wt,()=>e(l).grado,me=>(ye(l,e(l).grado=me),Pe(()=>{e(t),e(O),e(d),e(c),e(M)}))),rt(ot,()=>e(l).motivo,me=>(ye(l,e(l).motivo=me),Pe(()=>{e(t),e(O),e(d),e(c),e(M)}))),fr(yr,()=>e(l).fechaInicio,me=>(ye(l,e(l).fechaInicio=me),Pe(()=>{e(t),e(O),e(d),e(c),e(M)}))),fr(Br,()=>e(l).fechaFin,me=>(ye(l,e(l).fechaFin=me),Pe(()=>{e(t),e(O),e(d),e(c),e(M)}))),v(g,w)};te(Le,g=>{e(A)?g(Ue):g(y,!1)})}C(()=>{s($e,`background-color: ${e(t),r(()=>e(t).cardBg)??""};`),s(ne,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),$t(re,"src",ro),s(Ge,`color: ${e(t),r(()=>e(t).text)??""};`),s(ze,`color: ${e(t),r(()=>e(t).label)??""};`),Q.disabled=(e(I),r(()=>e(I).length===0)),s(Ae,`color: ${e(t),r(()=>e(t).text)??""};`)}),G("click",Q,oe),G("click",Ae,function(...g){he()?.apply(this,g)}),G("click",Re,lo(function(...g){he()?.apply(this,g)})),G("keydown",Re,g=>{(g.key==="Enter"||g.key===" ")&&he()()}),v(V,Re),hr()}var Ya=_('<p class="text-sm font-medium tracking-wide animate-pulse" style="color: rgb(var(--text-secondary));"> </p>'),Wa=_('<div class="flex flex-col items-center justify-center gap-4 p-8 animate-in fade-in duration-500"><div><div class="absolute inset-0 bg-indigo-500/20 blur-xl rounded-full animate-pulse"></div> <div class="absolute inset-0 rounded-full border-2 border-indigo-500/20 border-t-indigo-500 animate-spin"></div> <div class="absolute inset-2 rounded-full border-2 border-violet-500/20 border-b-violet-500 animate-[spin_1.5s_linear_infinite_reverse]"></div> <div class="absolute inset-[35%] bg-gradient-to-tr from-indigo-600 to-violet-600 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)] animate-pulse"></div></div> <!></div>');function io(V,k){xr(k,!1);const d=b();let we=Ct(k,"size",8,"medium"),c=Ct(k,"message",8,"");const M={small:"w-8 h-8",medium:"w-16 h-16",large:"w-24 h-24"};Be(()=>Oe(we()),()=>{i(d,M[we()]||M.medium)}),Er();var t=Wa(),he=o(t),Fe=a(he,2);{var B=le=>{var J=Ya(),Y=o(J);C(()=>u(Y,c())),v(le,J)};te(Fe,le=>{c()&&le(B)})}C(()=>er(he,1,`relative ${e(d)??""}`)),v(V,t),hr()}var qa=_('<div class="flex justify-center py-12"><!></div>'),Ja=_("<option> </option>"),Ka=_("<option> </option>"),Za=_("<option> </option>"),Qa=_("<option> </option>"),Xa=xt('<svg class="animate-spin h-5 w-5" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Generando...',1),es=xt('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg> Ver Reporte',1),ts=_('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="space-y-2"><label for="view-docente" class="block text-sm font-medium">Docente</label> <select id="view-docente" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione docente</option><!></select></div> <div class="space-y-2"><label for="view-materia" class="block text-sm font-medium">Materia</label> <select id="view-materia" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione materia</option><!></select></div> <div class="space-y-2"><label for="view-grado" class="block text-sm font-medium">Grado</label> <select id="view-grado" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione grado</option><!></select></div> <div class="space-y-2"><label for="view-periodo" class="block text-sm font-medium">Periodo</label> <select id="view-periodo" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"></select></div></div> <div class="pt-4 flex gap-3"><button class="flex-1 px-6 py-3 border rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors font-medium">Cancelar</button> <button class="flex-[2] px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"><!></button></div>',1),rs=_('<th class="p-2 border text-white font-bold text-center sticky top-0 z-20" style="background-color: #4472C4; min-width: 60px;"> </th>'),os=_('<td class="p-2 border text-center font-medium bg-white cell-hover svelte-14neep5"> </td>'),as=_('<tr class="hover-row svelte-14neep5"><td class="p-2 border font-medium sticky left-0 z-10 bg-[#F2F2F2] svelte-14neep5" style="background-color: #F2F2F2;"> </td><!><td class="p-2 border text-center font-bold bg-white cell-hover svelte-14neep5"> </td></tr>'),ss=_('<div class="space-y-4 min-w-0"><div class="text-center p-4 rounded-lg flex-shrink-0" style="background-color: #2E75B6; color: white;"><h3 class="text-lg font-bold whitespace-nowrap"> </h3></div> <div class="p-3 rounded-lg text-sm flex-shrink-0" style="background-color: #5B9BD5; color: white;"><p class="font-medium whitespace-nowrap"> </p></div> <div class="overflow-auto border rounded-lg flex-1 min-h-[200px] max-h-[50vh]"><table class="w-full border-collapse text-xs md:text-sm"><thead class="sticky top-0 z-30 shadow-sm"><tr><th class="p-2 border text-white font-bold sticky left-0 z-40" style="background-color: #4472C4; width: 200px;">Estudiantes</th><!><th class="p-2 border text-white font-bold text-center sticky top-0 z-20" style="background-color: #FF6B6B; width: 80px;">Total Horas</th></tr></thead><tbody class="bg-white"></tbody></table></div> <div class="pt-4 flex gap-3 flex-shrink-0"><button class="flex-1 px-6 py-3 border rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors font-medium">Nueva Consulta</button> <button class="flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-xl transition-colors font-medium">Cerrar</button></div></div>'),ls=_('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-2 md:p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-[95vw] max-h-[90vh] overflow-hidden shadow-2xl border flex flex-col"><div class="flex items-center justify-between p-4 md:p-6 border-b flex-shrink-0"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h2 id="modal-title" class="text-lg md:text-xl font-bold">Vista de Reporte</h2> <p class="text-sm opacity-75">Inasistencias por materia y grado</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-4 md:p-6 space-y-4 overflow-y-auto flex-1"><!></div></div></div>');function jo(V,k){xr(k,!1);const d=b();let we=Ct(k,"onClose",8),c=Ct(k,"initialDocente",8,""),M=b([]),t=b([]),he=b([]),Fe=b(c()||""),B=b(""),le=b(""),J=b(ao[0].nombre),Y=b(!1),A=b(!1),E=b(null);const I=oe=>oe?oe.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g," ").trim().toLowerCase():"",l=oe=>{if(!oe)return"";const x=oe.split("/");if(x.length===3){const ae=x[0].padStart(2,"0"),Re=x[1].padStart(2,"0");return`${x[2]}-${Re}-${ae}`}return oe},p=oe=>{const x=[],ae=new Date(oe.fecha_inicio),Re=new Date(oe.fecha_fin);for(;ae<=Re;){const $e=ae.getUTCDay();$e>=1&&$e<=6&&x.push(new Date(ae)),ae.setUTCDate(ae.getUTCDate()+1)}return x},S=oe=>{const x=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return`${oe.getUTCDate()}/${x[oe.getUTCMonth()]}/${oe.getUTCFullYear().toString().substr(2)}`};vr(async()=>{i(Y,!0);try{const[oe,x,ae]=await Promise.all([Jr(),Kr(),Zr()]);i(M,oe),i(t,x),i(he,ae)}catch(oe){console.error("Error cargando datos iniciales:",oe)}finally{i(Y,!1)}});const L=async()=>{if(!e(Fe)||!e(B)||!e(le)){jt.fire({icon:"warning",title:"Campos incompletos",text:"Por favor seleccione Docente, Materia y Grado."});return}const oe=ao.find(x=>x.nombre===e(J));if(!oe){jt.fire({icon:"error",title:"Error",text:"Periodo no encontrado"});return}i(A,!0);try{const x=await Eo({spreadsheetId:vo,worksheetTitle:ho});if(!x?.records||!Array.isArray(x.records))throw new Error("No se pudieron obtener los registros de inasistencias");const ae=x.records.slice(1),Re=I(e(Fe)),$e=I(e(B)),ne=e(le).toString().trim(),U=ae.map(pe=>{const Q=pe.values||[];return{fecha:Q[2]||"",docente:Q[1]||"",materia:Q[4]||"",grado:(Q[6]||"").toString().trim(),nombre:Q[7]||"",motivo:Q[5]||"",horas:Q[3]||"0"}}).filter(pe=>{const Q=I(pe.docente),Ae=I(pe.materia),Qe=pe.grado,Le=Q.includes(Re)||Re.includes(Q),Ue=Ae.includes($e)||$e.includes(Ae),y=Qe===ne||Qe.startsWith(ne)||ne.startsWith(Qe),g=l(pe.fecha),w=new Date(g),D=new Date(oe.fecha_inicio),H=new Date(oe.fecha_fin);D.setHours(0,0,0,0),H.setHours(23,59,59,999);const K=w>=D&&w<=H;return Le&&Ue&&y&&K}),re=e(he).filter(pe=>pe.grado.toString()===e(le)).map(pe=>pe.nombre).sort();if(re.length===0)throw new Error("No hay estudiantes registrados para el grado seleccionado");const Ge=p(oe).filter(pe=>{const Q=pe.toISOString().split("T")[0];return U.some(Ae=>l(Ae.fecha)===Q)});if(Ge.length===0){jt.fire({icon:"info",title:"Sin datos",text:"No se encontraron inasistencias para los filtros seleccionados en este periodo."});return}const ze=re.map(pe=>{const Q=[];let Ae=0;return Ge.forEach(Qe=>{const Le=Qe.toISOString().split("T")[0],Ue=U.filter(y=>I(y.nombre)===I(pe)&&l(y.fecha)===Le);if(Ue.length>0){const y=Ue[0],g=parseFloat(y.horas)||0,w=y.motivo||"";g>0?(Q.push({valor:g.toString(),horas:g}),Ae+=g):w?Q.push({valor:w,horas:0}):Q.push({valor:"X",horas:0})}else Q.push({valor:"‚úì",horas:0})}),{nombre:pe,registros:Q,totalHoras:Ae}});i(E,{docente:e(Fe),materia:e(B),grado:e(le),periodo:oe.nombre,fechaInicio:S(oe.fecha_inicio),fechaFin:S(oe.fecha_fin),fechas:Ge.map(pe=>S(pe)),estudiantes:ze})}catch(x){console.error("Error generando reporte:",x);const ae=x instanceof Error?x.message:"Error desconocido";jt.fire({icon:"error",title:"Error",text:ae})}finally{i(A,!1)}};Be(()=>{},()=>{i(d,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Er(),Ir();var T=ls(),O=o(T),je=o(O),Se=a(o(je),2),Ke=a(je,2),vt=o(Ke);{var Ze=oe=>{var x=qa(),ae=o(x);io(ae,{message:"Cargando datos..."}),v(oe,x)},lt=oe=>{var x=go(),ae=Kt(x);{var Re=ne=>{var U=ts(),re=Kt(U),X=o(re),Ge=o(X),ze=a(Ge,2),pe=o(ze);pe.value=pe.__value="";var Q=a(pe);xe(Q,1,()=>e(M),ke,(de,P)=>{var q=Ja(),ce=o(q),Me={};C(()=>{u(ce,e(P)),Me!==(Me=e(P))&&(q.value=(q.__value=e(P))??"")}),v(de,q)});var Ae=a(X,2),Qe=o(Ae),Le=a(Qe,2),Ue=o(Le);Ue.value=Ue.__value="";var y=a(Ue);xe(y,1,()=>e(t),ke,(de,P)=>{var q=Ka(),ce=o(q),Me={};C(()=>{u(ce,(e(P),r(()=>e(P).materia))),Me!==(Me=(e(P),r(()=>e(P).materia)))&&(q.value=(q.__value=(e(P),r(()=>e(P).materia)))??"")}),v(de,q)});var g=a(Ae,2),w=o(g),D=a(w,2),H=o(D);H.value=H.__value="";var K=a(H);xe(K,1,()=>(e(he),r(()=>[...new Set(e(he).map(de=>de.grado.toString()))])),ke,(de,P)=>{var q=Za(),ce=o(q),Me={};C(n=>{u(ce,n),Me!==(Me=e(P))&&(q.value=(q.__value=e(P))??"")},[()=>(e(P),r(()=>e(P).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),v(de,q)});var se=a(g,2),Ee=o(se),Z=a(Ee,2);xe(Z,5,()=>ao,ke,(de,P)=>{var q=Qa(),ce=o(q),Me={};C(()=>{u(ce,`Periodo ${e(P),r(()=>e(P).nombre)??""}`),Me!==(Me=(e(P),r(()=>e(P).nombre)))&&(q.value=(q.__value=(e(P),r(()=>e(P).nombre)))??"")}),v(de,q)});var j=a(re,2),ee=o(j),ue=a(ee,2),fe=o(ue);{var qe=de=>{var P=Xa();v(de,P)},Je=de=>{var P=es();v(de,P)};te(fe,de=>{e(A)?de(qe):de(Je,!1)})}C(()=>{s(Ge,`color: ${e(d),r(()=>e(d).label)??""};`),s(ze,`background-color: ${e(d),r(()=>e(d).inputBg)??""}; border-color: ${e(d),r(()=>e(d).border)??""}; color: ${e(d),r(()=>e(d).text)??""};`),s(Qe,`color: ${e(d),r(()=>e(d).label)??""};`),s(Le,`background-color: ${e(d),r(()=>e(d).inputBg)??""}; border-color: ${e(d),r(()=>e(d).border)??""}; color: ${e(d),r(()=>e(d).text)??""};`),s(w,`color: ${e(d),r(()=>e(d).label)??""};`),s(D,`background-color: ${e(d),r(()=>e(d).inputBg)??""}; border-color: ${e(d),r(()=>e(d).border)??""}; color: ${e(d),r(()=>e(d).text)??""};`),s(Ee,`color: ${e(d),r(()=>e(d).label)??""};`),s(Z,`background-color: ${e(d),r(()=>e(d).inputBg)??""}; border-color: ${e(d),r(()=>e(d).border)??""}; color: ${e(d),r(()=>e(d).text)??""};`),s(ee,`border-color: ${e(d),r(()=>e(d).border)??""};`),ue.disabled=e(A)||!e(Fe)||!e(B)||!e(le)}),rt(ze,()=>e(Fe),de=>i(Fe,de)),rt(Le,()=>e(B),de=>i(B,de)),rt(D,()=>e(le),de=>i(le,de)),rt(Z,()=>e(J),de=>i(J,de)),G("click",ee,function(...de){we()?.apply(this,de)}),G("click",ue,L),v(ne,U)},$e=ne=>{var U=ss(),re=o(U),X=o(re),Ge=o(X),ze=a(re,2),pe=o(ze),Q=o(pe),Ae=a(ze,2),Qe=o(Ae),Le=o(Qe),Ue=o(Le),y=a(o(Ue));xe(y,1,()=>(e(E),r(()=>e(E).fechas)),ke,(K,se)=>{var Ee=rs(),Z=o(Ee);C(()=>u(Z,e(se))),v(K,Ee)});var g=a(Le);xe(g,5,()=>(e(E),r(()=>e(E).estudiantes)),ke,(K,se)=>{var Ee=as(),Z=o(Ee),j=o(Z),ee=a(Z);xe(ee,1,()=>(e(se),r(()=>e(se).registros)),ke,(qe,Je)=>{const de=Lt(()=>(e(Je),r(()=>e(Je).valor==="‚úì")));var P=os(),q=o(P);C(()=>{s(P,e(de)?"color: #00AA00;":"color: #FF0000; background-color: #FFE6E6;"),u(q,(e(Je),r(()=>e(Je).valor)))}),v(qe,P)});var ue=a(ee),fe=o(ue);C(()=>{u(j,(e(se),r(()=>e(se).nombre))),s(ue,(e(se),r(()=>e(se).totalHoras>0?"color: #FF0000; background-color: #FFE6E6;":"color: #00AA00; background-color: #E6FFE6;"))),u(fe,(e(se),r(()=>e(se).totalHoras)))}),v(K,Ee)});var w=a(Ae,2),D=o(w),H=a(D,2);C(()=>{u(Ge,`REPORTE DE INASISTENCIAS - ${e(E),r(()=>e(E).materia)??""} - GRADO ${e(E),r(()=>e(E).grado)??""}`),u(Q,`Docente: ${e(E),r(()=>e(E).docente)??""} | Periodo: ${e(E),r(()=>e(E).periodo)??""} (${e(E),r(()=>e(E).fechaInicio)??""} - ${e(E),r(()=>e(E).fechaFin)??""})`),s(D,`border-color: ${e(d),r(()=>e(d).border)??""};`)}),G("click",D,()=>i(E,null)),G("click",H,function(...K){we()?.apply(this,K)}),v(ne,U)};te(ae,ne=>{e(E)?ne($e,!1):ne(Re)})}v(oe,x)};te(vt,oe=>{e(Y)?oe(Ze):oe(lt,!1)})}C(()=>{s(O,`background-color: ${e(d),r(()=>e(d).cardBg)??""}; border-color: ${e(d),r(()=>e(d).cardBorder)??""}; color: ${e(d),r(()=>e(d).text)??""};`),s(je,`border-color: ${e(d),r(()=>e(d).cardBorder)??""};`)}),G("click",Se,function(...oe){we()?.apply(this,oe)}),G("click",T,lo(function(...oe){we()?.apply(this,oe)})),G("keydown",T,oe=>oe.key==="Escape"&&we()()),v(V,T),hr()}var ns=_('<div class="flex justify-center py-12"><!></div>'),is=_("<option> </option>"),ds=_("<option> </option>"),cs=_("<option> </option>"),vs=_("<option> </option>"),gs=xt('<svg class="animate-spin h-5 w-5 text-white" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Generando...',1),ps=xt('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg> Descargar Excel',1),us=_('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="space-y-2"><label for="rep-docente" class="block text-sm font-medium">Docente</label> <select id="rep-docente" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione docente</option><!></select></div> <div class="space-y-2"><label for="rep-materia" class="block text-sm font-medium">Materia</label> <select id="rep-materia" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione materia</option><!></select></div> <div class="space-y-2"><label for="rep-grado" class="block text-sm font-medium">Grado</label> <select id="rep-grado" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione grado</option><!></select></div> <div class="space-y-2"><label for="rep-periodo" class="block text-sm font-medium">Periodo</label> <select id="rep-periodo" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"></select></div></div> <div class="pt-4 flex gap-3"><button class="flex-1 px-6 py-3 border rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors font-medium">Cancelar</button> <button class="flex-1 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg hover:shadow-green-500/20"><!></button></div>',1),bs=_('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-2xl overflow-hidden shadow-2xl border"><div class="flex items-center justify-between p-6 border-b"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h2 id="modal-title" class="text-xl font-bold">Generador de Reporte Excel</h2> <p class="text-sm opacity-75">Inasistencias por materia y grado</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar modal"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 space-y-6"><!></div></div></div> <!>',1);function fs(V,k){xr(k,!1);const d=b();let we=null,c=null,M=Ct(k,"onClose",8),t=Ct(k,"initialDocente",8,""),he=b([]),Fe=b([]),B=b([]),le=b(t()||""),J=b(""),Y=b(""),A=b(ao[0].nombre),E=b(!1),I=b(!1),l=b(!1);const p=async()=>{if(!we||!c){const[U,re]=await Promise.all([so(()=>import("./excel-G1qE2FwJ.js").then(X=>X.e),[]),so(()=>import("./utils-Dc41pFlL.js").then(X=>X.F),__vite__mapDeps([0,1]))]);we=U.default,c=re.default}},S=U=>U?U.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g," ").trim().toLowerCase():"",L=U=>{if(!U)return"";const re=U.split("/");if(re.length===3){const X=re[0].padStart(2,"0"),Ge=re[1].padStart(2,"0");return`${re[2]}-${Ge}-${X}`}return U},T=U=>{const re=[],X=new Date(U.fecha_inicio),Ge=new Date(U.fecha_fin);for(;X<=Ge;){const ze=X.getUTCDay();ze>=1&&ze<=6&&re.push(new Date(X)),X.setUTCDate(X.getUTCDate()+1)}return re},O=U=>{const re=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return`${U.getUTCDate()}/${re[U.getUTCMonth()]}/${U.getUTCFullYear().toString().substr(2)}`};vr(async()=>{i(E,!0);try{const[U,re,X]=await Promise.all([Jr(),Kr(),Zr()]);i(he,U),i(Fe,re),i(B,X)}catch(U){console.error("Error cargando datos iniciales:",U)}finally{i(E,!1)}});const je=async()=>{if(await p(),!e(le)||!e(J)||!e(Y)){jt.fire({icon:"warning",title:"Campos incompletos",text:"Por favor seleccione Docente, Materia y Grado."});return}const U=ao.find(re=>re.nombre===e(A));if(!U){jt.fire({icon:"error",title:"Error",text:"Periodo no encontrado"});return}i(I,!0);try{const re=await Eo({spreadsheetId:vo,worksheetTitle:ho});if(!re?.records||!Array.isArray(re.records))throw new Error("No se pudieron obtener los registros de inasistencias");const X=re.records.slice(1),Ge=S(e(le)),ze=S(e(J)),pe=e(Y).toString().trim(),Q=X.map(j=>{const ee=j.values||[];return{fecha:ee[2]||"",docente:ee[1]||"",materia:ee[4]||"",grado:(ee[6]||"").toString().trim(),nombre:ee[7]||"",motivo:ee[5]||"",horas:ee[3]||"0"}}).filter(j=>{const ee=S(j.docente),ue=S(j.materia),fe=j.grado,qe=ee.includes(Ge)||Ge.includes(ee),Je=ue.includes(ze)||ze.includes(ue),de=fe===pe||fe.startsWith(pe)||pe.startsWith(fe),P=L(j.fecha),q=new Date(P),ce=new Date(U.fecha_inicio),Me=new Date(U.fecha_fin);ce.setHours(0,0,0,0),Me.setHours(23,59,59,999);const n=q>=ce&&q<=Me;return qe&&Je&&de&&n}),Ae=e(B).filter(j=>j.grado.toString()===e(Y)).map(j=>j.nombre).sort();if(Ae.length===0)throw new Error("No hay estudiantes registrados para el grado seleccionado");const Le=T(U).filter(j=>{const ee=j.toISOString().split("T")[0];return Q.some(ue=>L(ue.fecha)===ee)});if(Le.length===0){jt.fire({icon:"info",title:"Sin datos",text:"No se encontraron inasistencias para los filtros seleccionados en este periodo."}),i(I,!1);return}const Ue=new we.Workbook,y=Ue.addWorksheet("Reporte de Inasistencias"),g=Le.length+2,w=y.addRow([`REPORTE DE INASISTENCIAS - ${e(J)} - GRADO ${e(Y)}`]);w.height=30,w.font={bold:!0,size:16,color:{argb:"FFFFFF"}},w.fill={type:"pattern",pattern:"solid",fgColor:{argb:"2E75B6"}},w.alignment={vertical:"middle",horizontal:"center"},y.mergeCells(1,1,1,g);const D=y.addRow([`Docente: ${e(le)} | Periodo: ${U.nombre} (${O(U.fecha_inicio)} - ${O(U.fecha_fin)})`]);D.height=20,D.font={bold:!0,size:10,color:{argb:"FFFFFF"}},D.fill={type:"pattern",pattern:"solid",fgColor:{argb:"5B9BD5"}},D.alignment={vertical:"middle",horizontal:"left"},y.mergeCells(2,1,2,g);const H=["Estudiantes",...Le.map(j=>O(j)),"Total Horas"],K=y.addRow(H);K.height=25,K.font={bold:!0,size:11,color:{argb:"FFFFFF"}},K.alignment={vertical:"middle",horizontal:"center"},y.getColumn(1).width=35,Le.forEach((j,ee)=>{y.getColumn(ee+2).width=22}),y.getColumn(g).width=15,K.eachCell((j,ee)=>{j.fill={type:"pattern",pattern:"solid",fgColor:{argb:ee===g?"FF6B6B":"4472C4"}},j.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}),Ae.forEach(j=>{const ee=[j];let ue=0;Le.forEach(Je=>{const de=Je.toISOString().split("T")[0],P=Q.filter(q=>S(q.nombre)===S(j)&&L(q.fecha)===de);if(P.length>0){const q=P[0],ce=parseFloat(q.horas)||0,Me=q.motivo||"";ce>0?(ee.push(ce.toString()),ue+=ce):Me?ee.push(Me):ee.push("X")}else ee.push("‚úì")}),ee.push(ue.toString());const fe=y.addRow(ee);fe.height=30,fe.getCell(1).font={bold:!0},fe.getCell(1).fill={type:"pattern",pattern:"solid",fgColor:{argb:"F2F2F2"}},Le.forEach((Je,de)=>{const P=fe.getCell(de+2);P.alignment={horizontal:"center",vertical:"middle",wrapText:!0};const q=P.value?.toString()||"",ce=parseFloat(q)||0;q==="‚úì"?P.font={color:{argb:"00AA00"}}:ce>0||isNaN(ce)?(P.font={color:{argb:"FF0000"},bold:!0},P.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE6E6"}}):(P.font={color:{argb:"FF0000"},bold:!0},P.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE6E6"}})});const qe=fe.getCell(g);qe.font={bold:!0,color:{argb:ue>0?"FF0000":"00AA00"}},qe.alignment={horizontal:"center"},qe.fill={type:"pattern",pattern:"solid",fgColor:{argb:ue>0?"FFE6E6":"E6FFE6"}},fe.eachCell(Je=>{Je.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})});const se=await Ue.xlsx.writeBuffer(),Ee=new Blob([se],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Z=`Reporte_Inasistencias_${e(Y)}_${e(J).replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.xlsx`;c(Ee,Z),jt.fire({icon:"success",title:"Reporte generado",text:`Se ha generado el reporte con ${Ae.length} estudiantes.`,timer:2e3,showConfirmButton:!1})}catch(re){console.error("Error generando Excel:",re);const X=re instanceof Error?re.message:"Error desconocido";jt.fire({icon:"error",title:"Error",text:X})}finally{i(I,!1)}};Be(()=>{},()=>{i(d,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Er(),Ir();var Se=bs(),Ke=Kt(Se),vt=o(Ke),Ze=o(vt),lt=a(o(Ze),2),oe=a(Ze,2),x=o(oe);{var ae=U=>{var re=ns(),X=o(re);io(X,{message:"Cargando datos..."}),v(U,re)},Re=U=>{var re=us(),X=Kt(re),Ge=o(X),ze=o(Ge),pe=a(ze,2),Q=o(pe);Q.value=Q.__value="";var Ae=a(Q);xe(Ae,1,()=>e(he),ke,(P,q)=>{var ce=is(),Me=o(ce),n={};C(()=>{u(Me,e(q)),n!==(n=e(q))&&(ce.value=(ce.__value=e(q))??"")}),v(P,ce)});var Qe=a(Ge,2),Le=o(Qe),Ue=a(Le,2),y=o(Ue);y.value=y.__value="";var g=a(y);xe(g,1,()=>e(Fe),ke,(P,q)=>{var ce=ds(),Me=o(ce),n={};C(()=>{u(Me,(e(q),r(()=>e(q).materia))),n!==(n=(e(q),r(()=>e(q).materia)))&&(ce.value=(ce.__value=(e(q),r(()=>e(q).materia)))??"")}),v(P,ce)});var w=a(Qe,2),D=o(w),H=a(D,2),K=o(H);K.value=K.__value="";var se=a(K);xe(se,1,()=>(e(B),r(()=>[...new Set(e(B).map(P=>P.grado.toString()))])),ke,(P,q)=>{var ce=cs(),Me=o(ce),n={};C(f=>{u(Me,f),n!==(n=e(q))&&(ce.value=(ce.__value=e(q))??"")},[()=>(e(q),r(()=>e(q).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),v(P,ce)});var Ee=a(w,2),Z=o(Ee),j=a(Z,2);xe(j,5,()=>ao,ke,(P,q)=>{var ce=vs(),Me=o(ce),n={};C(()=>{u(Me,`Periodo ${e(q),r(()=>e(q).nombre)??""}`),n!==(n=(e(q),r(()=>e(q).nombre)))&&(ce.value=(ce.__value=(e(q),r(()=>e(q).nombre)))??"")}),v(P,ce)});var ee=a(X,2),ue=o(ee),fe=a(ue,2),qe=o(fe);{var Je=P=>{var q=gs();v(P,q)},de=P=>{var q=ps();v(P,q)};te(qe,P=>{e(I)?P(Je):P(de,!1)})}C(()=>{s(ze,`color: ${e(d),r(()=>e(d).label)??""};`),s(pe,`background-color: ${e(d),r(()=>e(d).inputBg)??""}; border-color: ${e(d),r(()=>e(d).border)??""}; color: ${e(d),r(()=>e(d).text)??""};`),s(Le,`color: ${e(d),r(()=>e(d).label)??""};`),s(Ue,`background-color: ${e(d),r(()=>e(d).inputBg)??""}; border-color: ${e(d),r(()=>e(d).border)??""}; color: ${e(d),r(()=>e(d).text)??""};`),s(D,`color: ${e(d),r(()=>e(d).label)??""};`),s(H,`background-color: ${e(d),r(()=>e(d).inputBg)??""}; border-color: ${e(d),r(()=>e(d).border)??""}; color: ${e(d),r(()=>e(d).text)??""};`),s(Z,`color: ${e(d),r(()=>e(d).label)??""};`),s(j,`background-color: ${e(d),r(()=>e(d).inputBg)??""}; border-color: ${e(d),r(()=>e(d).border)??""}; color: ${e(d),r(()=>e(d).text)??""};`),s(ue,`border-color: ${e(d),r(()=>e(d).border)??""};`),fe.disabled=e(I)||!e(le)||!e(J)||!e(Y)}),rt(pe,()=>e(le),P=>i(le,P)),rt(Ue,()=>e(J),P=>i(J,P)),rt(H,()=>e(Y),P=>i(Y,P)),rt(j,()=>e(A),P=>i(A,P)),G("click",ue,function(...P){M()?.apply(this,P)}),G("click",fe,je),v(U,re)};te(x,U=>{e(E)?U(ae):U(Re,!1)})}var $e=a(Ke,2);{var ne=U=>{jo(U,{onClose:()=>i(l,!1),get initialDocente(){return e(le)}})};te($e,U=>{e(l)&&U(ne)})}C(()=>{s(vt,`background-color: ${e(d),r(()=>e(d).cardBg)??""}; border-color: ${e(d),r(()=>e(d).cardBorder)??""}; color: ${e(d),r(()=>e(d).text)??""};`),s(Ze,`border-color: ${e(d),r(()=>e(d).cardBorder)??""};`)}),G("click",lt,function(...U){M()?.apply(this,U)}),G("click",Ke,lo(function(...U){M()?.apply(this,U)})),G("keydown",Ke,U=>U.key==="Escape"&&M()()),v(V,Se),hr()}var xs=_('<div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping svelte-gsxx31"></div> <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full svelte-gsxx31"></div>',1),hs=_('<div class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-ping svelte-gsxx31"></div> <div class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full svelte-gsxx31"></div>',1),ms=xt('<svg class="w-5 h-5 text-indigo-500 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-gsxx31"></path></svg>'),_s=xt('<svg class="w-5 h-5 text-amber-500 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="svelte-gsxx31"></path></svg>'),ys=xt('<svg class="w-5 h-5 text-indigo-400 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-gsxx31"></path></svg>'),ks=_('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-gsxx31"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0 svelte-gsxx31"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-gsxx31"></path></svg></div> <div class="flex-1 pr-6 pt-0.5 svelte-gsxx31"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100 svelte-gsxx31">Informaci√≥n</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200 svelte-gsxx31"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors svelte-gsxx31" aria-label="Cerrar alerta"><svg class="w-4 h-4 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-gsxx31"></path></svg></button></div>'),ws=_('<option class="svelte-gsxx31"> </option>'),$s=_('<option class="svelte-gsxx31"> </option>'),Cs=_('<option class="svelte-gsxx31"> </option>'),Ss=_('<option class="svelte-gsxx31"> </option>'),As=_('<span><span class="mr-1.5 svelte-gsxx31"> </span> <button type="button" class="ml-1.5 hover:opacity-70 transition-opacity svelte-gsxx31" aria-label="Eliminar motivo"><svg class="w-3 h-3 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12" class="svelte-gsxx31"></path></svg></button></span>'),Ds=_('<option class="svelte-gsxx31"> </option>'),Es=_('<option class="svelte-gsxx31"> </option>'),Is=_('<div class="flex items-center gap-2 svelte-gsxx31"><button type="button" class="p-2 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Agregar observaci√≥n"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" class="svelte-gsxx31"></path></svg></button></div>'),Bs=_('<div class="px-4 pb-4 animate-fade-in svelte-gsxx31"><textarea placeholder="Escribe una observaci√≥n espec√≠fica para este estudiante..." rows="2" class="w-full px-4 py-2 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none resize-none text-sm svelte-gsxx31"></textarea></div>'),Fs=_('<div><div class="flex-1 min-w-0 svelte-gsxx31"><span class="text-base font-medium block svelte-gsxx31"> </span> <div class="flex flex-wrap gap-2 mt-2 svelte-gsxx31"></div></div> <div class="flex flex-col sm:flex-row items-center gap-2 w-full sm:w-auto svelte-gsxx31"><div><select class="w-full appearance-none border rounded-lg px-4 py-2 pr-10 text-sm focus:ring-2 focus:ring-indigo-500 cursor-pointer transition-all outline-none svelte-gsxx31"><option class="svelte-gsxx31">Hora...</option><option class="svelte-gsxx31">0 (Sin hora)</option><!></select> <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 svelte-gsxx31"><svg class="w-4 h-4 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-gsxx31"></path></svg></div></div> <div class="relative w-full sm:w-56 svelte-gsxx31"><select class="w-full appearance-none border rounded-lg px-4 py-2 pr-10 text-sm focus:ring-2 focus:ring-indigo-500 cursor-pointer transition-all outline-none svelte-gsxx31"><option class="svelte-gsxx31">A√±adir motivo...</option><option class="svelte-gsxx31">üö´ Limpiar todo</option><!></select> <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 svelte-gsxx31"><svg class="w-4 h-4 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" class="svelte-gsxx31"></path></svg></div></div></div> <!></div> <!>',1),zs=_('<div class="text-center py-12 opacity-60 svelte-gsxx31">No hay estudiantes en este grado.</div>'),Ms=_('<div class="space-y-3 animate-fade-in svelte-gsxx31"><label class="block text-sm font-semibold uppercase tracking-wider svelte-gsxx31"> </label> <div class="space-y-2 max-h-[700px] overflow-y-auto border rounded-2xl p-4 bg-zinc-50/50 dark:bg-zinc-900/50 backdrop-blur-sm scrollbar-thin scrollbar-thumb-zinc-300 dark:scrollbar-thumb-zinc-600 svelte-gsxx31"><!> <!></div></div>'),Ts=xt('<svg class="animate-spin h-6 w-6 lg:h-7 lg:w-7 svelte-gsxx31" fill="none" viewBox="0 0 24 24"><circle class="opacity-25 svelte-gsxx31" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75 svelte-gsxx31" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Os=xt('<svg class="h-6 w-6 lg:h-7 lg:w-7 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" class="svelte-gsxx31"></path></svg>'),Ns=_('<span class="absolute -top-1 -right-1 lg:-top-2 lg:-right-2 bg-red-500 text-white text-[10px] lg:text-xs font-bold rounded-full h-5 w-5 lg:h-6 lg:w-6 flex items-center justify-center ring-2 ring-white dark:ring-zinc-950 animate-bounce svelte-gsxx31"> </span>'),js=_('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200 svelte-gsxx31"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40 svelte-gsxx31"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8 svelte-gsxx31"><div class="flex items-center gap-4 lg:flex-col svelte-gsxx31"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto svelte-gsxx31"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center svelte-gsxx31">Registrar Inasistencias</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full svelte-gsxx31"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Abrir hoja de c√°lculo"><svg class="w-5 h-5 svelte-gsxx31" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Hoja de C√°lculo</span></button> <button id="filter-button-target" class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 relative svelte-gsxx31" title="Abrir Looker Studio"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Filtros</span> <!></button> <button id="report-button-target" class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 relative svelte-gsxx31" title="Generar reportes Excel"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Reporte Excel</span> <!></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Ver reporte online"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" class="svelte-gsxx31"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Ver Online</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Abrir Looker Studio"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Looker Studio</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Volver al Dashboard"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Dashboard</span></button> <div class="relative svelte-gsxx31"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full svelte-gsxx31" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize svelte-gsxx31"> </span></button></div></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto svelte-gsxx31"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border svelte-gsxx31"><!> <!> <!> <form class="space-y-6 svelte-gsxx31"><div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-gsxx31"><div class="space-y-2 svelte-gsxx31"><label for="docente" class="block text-sm font-medium svelte-gsxx31">Docente</label> <select id="docente" name="docente" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-gsxx31"><option class="svelte-gsxx31"> </option><!></select></div> <div class="space-y-2 svelte-gsxx31"><div class="flex items-center justify-between svelte-gsxx31"><label for="materia" class="block text-sm font-medium svelte-gsxx31">Materia</label></div> <select id="materia" name="materia" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-gsxx31"><option class="svelte-gsxx31"> </option><!></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-gsxx31"><div class="space-y-2 svelte-gsxx31"><label for="horas" class="block text-sm font-medium svelte-gsxx31">Cantidad de Horas</label> <select id="horas" name="horas" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer svelte-gsxx31"><option class="svelte-gsxx31">Seleccione horas</option><option class="svelte-gsxx31">Sin hora espec√≠fica</option><!></select></div> <div class="space-y-2 svelte-gsxx31"><label for="grado" class="block text-sm font-medium svelte-gsxx31">Grado</label> <select id="grado" name="grado" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-gsxx31"><option class="svelte-gsxx31"> </option><!></select></div></div> <!> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-gsxx31"><div class="space-y-2 svelte-gsxx31"><label for="fecha" class="block text-sm font-medium svelte-gsxx31">Fecha</label> <input type="date" id="fecha" name="fecha" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none svelte-gsxx31"/></div> <div class="space-y-2 svelte-gsxx31"><label for="observaciones" class="block text-sm font-medium svelte-gsxx31">Observaciones</label> <textarea id="observaciones" name="observaciones" rows="3" placeholder="Opcional..." class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none resize-none svelte-gsxx31"></textarea></div></div> <div class="flex items-center justify-between pt-6 border-t svelte-gsxx31"><div class="text-sm font-medium svelte-gsxx31">Inasistencias marcadas: <span class="text-indigo-500 font-bold ml-1 svelte-gsxx31"> </span></div></div></form></div></main> <button class="fixed bottom-6 right-6 lg:bottom-10 lg:right-10 bg-green-600 hover:bg-green-700 text-white p-4 lg:p-5 rounded-full shadow-2xl hover:shadow-green-500/20 transform transition-all duration-300 hover:scale-110 active:scale-95 disabled:opacity-50 disabled:grayscale disabled:cursor-not-allowed z-50 group svelte-gsxx31" title="Guardar inasistencias"><!> <!></button></div> <!> <!> <!>',1);function Rs(V,k){xr(k,!1);const d=()=>xo(qr,"$theme",we),[we,c]=fo(),M=b(),t=b(),he=b(),Fe="¬°Nueva funci√≥n de filtrado avanzado disponible!",B="¬°Nueva funci√≥n de reporte en Excel disponible!";let le=Ct(k,"onBack",8),J=b([]),Y=b([]),A=b([]),E=b(!1),I=b(!1),l=b(!1),p=b({docente:localStorage.getItem("lastDocente")||"",materia:"",horas:"",grado:"",fecha:new Date().toISOString().split("T")[0],observaciones:""}),S=b([]),L=b({}),T=b({}),O=b(!1),je=b(!1),Se=b(!1),Ke=b(!1);const vt=()=>{i(je,!0)},Ze=()=>{i(je,!1)},lt=()=>{i(Se,!0)},oe=()=>{i(Se,!1)},x=()=>{i(Ke,!0)},ae=()=>{i(Ke,!1)};let Re=b(localStorage.getItem("dismissedInfoInasistenciaContent")!==ko),$e=b(!0),ne=b(!0);function U(m){return!0}const re=()=>{localStorage.setItem("dismissedInfoInasistenciaContent",ko),i(Re,!1)},X=()=>{localStorage.setItem("dismissedFeatureAlertFilters",new Date().toISOString()),i($e,!1)},Ge=()=>{localStorage.setItem("dismissedFeatureAlertFilters",new Date().toISOString()),vt()},ze=()=>{localStorage.setItem("dismissedFeatureAlertReport",new Date().toISOString()),i(ne,!1)},pe=()=>{localStorage.setItem("dismissedFeatureAlertReport",new Date().toISOString()),lt(),i(ne,!1)};let Q=b(JSON.parse(localStorage.getItem("docenteMaterias")||"{}"));const Ae=(m,F)=>{!m||!F||(e(Q)[m]||ye(Q,e(Q)[m]=[]),e(Q)[m].includes(F)||(ye(Q,e(Q)[m]=[...e(Q)[m],F]),localStorage.setItem("docenteMaterias",JSON.stringify(e(Q)))))},Qe=()=>`https://docs.google.com/spreadsheets/d/${vo}`,Le=()=>{window.open(Qe(),"_blank")},Ue=()=>{window.open(xa,"_blank")},y=[{value:"Sin excusa",label:"Sin excusa",icon:"üö´",bgColor:"bg-red-50",borderColor:"border-red-300",textColor:"text-red-700",darkBgColor:"dark:bg-red-950",darkBorderColor:"dark:border-red-800",darkTextColor:"dark:text-red-300",obligaHoras:!0},{value:"Excusa",label:"Excusa",icon:"üìÑ",bgColor:"bg-blue-50",borderColor:"border-blue-300",textColor:"text-blue-700",darkBgColor:"dark:bg-blue-950",darkBorderColor:"dark:border-blue-800",darkTextColor:"dark:text-blue-300",obligaHoras:!0},{value:"LLegada Tarde",label:"Llegada Tarde",icon:"‚è∞",bgColor:"bg-indigo-50",borderColor:"border-indigo-300",textColor:"text-indigo-700",darkBgColor:"dark:bg-indigo-950",darkBorderColor:"dark:border-indigo-800",darkTextColor:"dark:text-indigo-300",obligaHoras:!1},{value:"Transporte Escolar",label:"Transporte Escolar",icon:"üöå",bgColor:"bg-red-50",borderColor:"border-red-300",textColor:"text-red-700",darkBgColor:"dark:bg-red-950",darkBorderColor:"dark:border-red-800",darkTextColor:"dark:text-red-300",obligaHoras:!0},{value:"Permiso",label:"Permiso",icon:"‚úÖ",bgColor:"bg-green-50",borderColor:"border-green-300",textColor:"text-green-700",darkBgColor:"dark:bg-green-950",darkBorderColor:"dark:border-green-800",darkTextColor:"dark:text-green-300",obligaHoras:!0},{value:"No portar/sin uniforme",label:"No portar/sin uniforme",icon:"üëö",bgColor:"bg-cyan-50",borderColor:"border-cyan-300",textColor:"text-cyan-700",darkBgColor:"dark:bg-cyan-950",darkBorderColor:"dark:border-cyan-800",darkTextColor:"dark:text-cyan-300",obligaHoras:!1},{value:"Pacto de Aula",label:"Pacto de Aula",icon:"ü§ù",bgColor:"bg-purple-50",borderColor:"border-purple-300",textColor:"text-purple-700",darkBgColor:"dark:bg-purple-950",darkBorderColor:"dark:border-purple-800",darkTextColor:"dark:text-purple-300",obligaHoras:!1},{value:"Uso del celular",label:"Uso del celular",icon:"üì±",bgColor:"bg-orange-50",borderColor:"border-orange-300",textColor:"text-orange-700",darkBgColor:"dark:bg-orange-950",darkBorderColor:"dark:border-orange-800",darkTextColor:"dark:text-orange-300",obligaHoras:!1},{value:"Desorden en Clase",label:"Desorden en Clase",icon:"üîä",bgColor:"bg-yellow-50",borderColor:"border-yellow-300",textColor:"text-yellow-700",darkBgColor:"dark:bg-yellow-950",darkBorderColor:"dark:border-yellow-800",darkTextColor:"dark:text-yellow-300",obligaHoras:!1},{value:"Fuga",label:"Fuga",icon:"üèÉ‚Äç‚ôÇÔ∏è",bgColor:"bg-red-100",borderColor:"border-red-400",textColor:"text-red-800",darkBgColor:"dark:bg-red-950",darkBorderColor:"dark:border-red-800",darkTextColor:"dark:text-red-300",obligaHoras:!0},{value:"No realizaci√≥n de Aseo",label:"No realizaci√≥n de Aseo",icon:"üßπ",bgColor:"bg-teal-50",borderColor:"border-teal-300",textColor:"text-teal-700",darkBgColor:"dark:bg-teal-950",darkBorderColor:"dark:border-teal-800",darkTextColor:"dark:text-teal-300",obligaHoras:!1},{value:"Licencia por salud",label:"Licencia por salud",icon:"üè•",bgColor:"bg-cyan-50",borderColor:"border-cyan-300",textColor:"text-cyan-700",darkBgColor:"dark:bg-cyan-950",darkBorderColor:"dark:border-cyan-800",darkTextColor:"dark:text-cyan-300",obligaHoras:!0},{value:"Incapacidad",label:"Incapacidad",icon:"ü©∫",bgColor:"bg-pink-50",borderColor:"border-pink-300",textColor:"text-pink-700",darkBgColor:"dark:bg-pink-950",darkBorderColor:"dark:border-pink-800",darkTextColor:"dark:text-pink-300",obligaHoras:!0},{value:"Reuni√≥n interna",label:"Reuni√≥n interna",icon:"üë•",bgColor:"bg-zinc-50",borderColor:"border-zinc-300",textColor:"text-zinc-700",darkBgColor:"dark:bg-zinc-950",darkBorderColor:"dark:border-zinc-800",darkTextColor:"dark:text-zinc-300",obligaHoras:!1},{value:"Ignorar",label:"Ignorar",icon:"üö´",bgColor:"bg-zinc-50",borderColor:"border-zinc-300",textColor:"text-zinc-700",darkBgColor:"dark:bg-zinc-950",darkBorderColor:"dark:border-zinc-800",darkTextColor:"dark:text-zinc-300",obligaHoras:!1},{value:"Psicoorientaci√≥n",label:"Psicoorientaci√≥n",icon:"üß†",bgColor:"bg-green-50",borderColor:"border-green-300",textColor:"text-green-700",darkBgColor:"dark:bg-green-950",darkBorderColor:"dark:border-green-800",darkTextColor:"dark:text-green-300",obligaHoras:!1},{value:"Retirado por el acudiente",label:"Retirado por el acudiente",icon:"üë®",bgColor:"bg-green-50",borderColor:"border-green-300",textColor:"text-green-700",darkBgColor:"dark:bg-green-950",darkBorderColor:"dark:border-green-800",darkTextColor:"dark:text-green-300",obligaHoras:!1}],g=()=>{qr.update(m=>m==="light"?"dim":m==="dim"?"dark":"light")},w=async()=>{i(E,!0),i(I,!0),i(l,!0);try{const[m,F,ge]=await Promise.all([Jr(),Kr(),Zr()]);i(J,m),i(Y,F),i(A,ge)}catch(m){console.error("Error cargando datos iniciales:",m)}finally{i(E,!1),i(I,!1),i(l,!1)}},D=(m,F)=>{i(S,e(S).filter(ge=>!(ge.nombre===m&&ge.motivo===F)))},H=(m,F,ge)=>{if(F===""||F==="Ignorar"){i(S,e(S).filter(pt=>pt.nombre!==m));return}const Te=y.find(pt=>pt.value===F);if(!Te)return;let dt=e(L)[m]||e(p).horas;if(Te.obligaHoras||(dt="0"),Te.obligaHoras&&i(S,e(S).filter(pt=>{if(pt.nombre!==m)return!0;const z=y.find(ct=>ct.value===pt.motivo);return z&&!z.obligaHoras})),!e(S).some(pt=>pt.nombre===m&&pt.motivo===F)){const pt=e(S).find(z=>z.nombre===m)?.observaciones||"";i(S,[...e(S),{nombre:m,motivo:F,horas:dt,observaciones:pt}])}},K=(m,F)=>{i(S,e(S).map(ge=>ge.nombre===m?{...ge,observaciones:F}:ge))},se=m=>{ye(T,e(T)[m]=!e(T)[m])},Ee=(m,F)=>{ye(L,e(L)[m]=F),i(S,e(S).map(ge=>{if(ge.nombre===m){const Te=y.find(dt=>dt.value===ge.motivo);if(Te&&Te.obligaHoras)return{...ge,horas:F}}return ge}))},Z=async m=>{if(m.preventDefault(),!(e(O)||e(S).length===0)){i(O,!0);try{const F=new Date().toISOString(),ge=e(S).filter(Te=>Te.motivo&&Te.motivo!=="Ignorar").map(Te=>[F,e(p).docente,e(p).fecha,Te.horas,e(p).materia,Te.motivo,e(p).grado,Te.nombre,Te.observaciones||e(p).observaciones]);await _a({spreadsheetId:vo,worksheetTitle:ho,inasistencias:ge}),Ae(e(p).docente,e(p).materia),await jt.fire({icon:"success",title:"¬°√âxito!",text:`${e(S).length} inasistencia(s) registrada(s) exitosamente`,timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),i(p,{...e(p),grado:"",fecha:new Date().toISOString().split("T")[0],observaciones:"",horas:""}),i(S,[]),i(L,{}),i(T,{})}catch(F){console.error("Error enviando:",F),await jt.fire({icon:"error",title:"Error",text:"Error al registrar la inasistencia",confirmButtonColor:"#ef4444"})}finally{i(O,!1)}}};vr(()=>{w(),i($e,U()),i(ne,U())}),Be(()=>e(p),()=>{e(p).docente&&localStorage.setItem("lastDocente",e(p).docente)}),Be(()=>(e(p),e(Y),e(Q)),()=>{i(M,e(p).docente?[...e(Y)].sort((m,F)=>{const ge=e(Q)[e(p).docente]?.includes(m.materia),Te=e(Q)[e(p).docente]?.includes(F.materia);return ge&&!Te?-1:!ge&&Te?1:m.materia.localeCompare(F.materia)}):e(Y))}),Be(()=>{},()=>{i(t,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Be(()=>(e(p),e(A)),()=>{i(he,e(p).grado?e(A).filter(m=>m.grado.toString()===e(p).grado):[])}),Er(),Ir();var j=js(),ee=Kt(j),ue=o(ee),fe=o(ue),qe=o(fe),Je=o(qe),de=a(Je,2),P=a(qe,2),q=o(P),ce=a(q,2),Me=a(o(ce),4);{var n=m=>{var F=xs();v(m,F)};te(Me,m=>{e($e)&&m(n)})}var f=a(ce,2),$=a(o(f),4);{var R=m=>{var F=hs();v(m,F)};te($,m=>{e(ne)&&m(R)})}var Ce=a(f,2),He=a(Ce,2),Ve=a(He,2),Ie=a(Ve,2),Mt=o(Ie),Ut=o(Mt);{var Vt=m=>{var F=ms();v(m,F)},Yt=m=>{var F=_s();v(m,F)},Wt=m=>{var F=ys();v(m,F)};te(Ut,m=>{d()==="dark"?m(Vt):d()==="light"?m(Yt,1):m(Wt,!1)})}var ht=a(Ut,2),St=o(ht),Xe=a(ue,2),At=o(Xe),Et=o(At);{var Pt=m=>{var F=ks(),ge=a(o(F),2),Te=a(o(ge),2),dt=o(Te),Ft=a(ge,2);C(()=>u(dt,ko)),G("click",Ft,re),v(m,F)};te(Et,m=>{e(Re)&&m(Pt)})}var It=a(Et,2);uo(It,{featureMessage:Fe,description:"Ahora puedes filtrar tus datos de forma avanzada. ¬°Pru√©balo!",onTryNow:Ge,onDismiss:X,targetSelector:"#filter-button-target",showPopup:!1,colorTheme:"blue"});var wt=a(It,2);uo(wt,{featureMessage:B,description:"Ahora puedes generar reportes de inasistencias en formato Excel. ¬°Descarga y analiza tus datos!",onTryNow:pe,onDismiss:ze,targetSelector:"#report-button-target",showPopup:!1,colorTheme:"green"});var Zt=a(wt,2),mr=o(Zt),gr=o(mr),pr=o(gr),W=a(pr,2),ie=o(W),Ye=o(ie);ie.value=ie.__value="";var ot=a(ie);xe(ot,1,()=>e(J),ke,(m,F)=>{var ge=ws(),Te=o(ge),dt={};C(()=>{u(Te,e(F)),dt!==(dt=e(F))&&(ge.value=(ge.__value=e(F))??"")}),v(m,ge)});var mt=a(gr,2),Ht=o(mt),zr=o(Ht),_r=a(Ht,2),sr=o(_r),Gr=o(sr);sr.value=sr.__value="";var Qr=a(sr);xe(Qr,1,()=>e(M),ke,(m,F)=>{const ge=Lt(()=>(e(Q),e(p),e(F),r(()=>e(Q)[e(p).docente]?.includes(e(F).materia))));var Te=$s(),dt=o(Te),Ft={};C(()=>{s(Te,e(ge)?"color: #6366f1; font-weight: 600;":""),u(dt,`${e(ge)?"‚≠ê ":""}${e(F),r(()=>e(F).materia)??""}`),Ft!==(Ft=(e(F),r(()=>e(F).materia)))&&(Te.value=(Te.__value=(e(F),r(()=>e(F).materia)))??"")}),v(m,Te)});var Mr=a(mr,2),yr=o(Mr),Tr=o(yr),kr=a(Tr,2),Br=o(kr);Br.value=Br.__value="";var Or=a(Br);Or.value=Or.__value="0";var Ur=a(Or);xe(Ur,0,()=>[1,2,3,4],ke,(m,F)=>{var ge=Cs(),Te=o(ge),dt={};C(Ft=>{u(Te,`${F??""} ${F===1?"Hora":"Horas"}`),dt!==(dt=Ft)&&(ge.value=(ge.__value=Ft)??"")},[()=>r(()=>F.toString())]),v(m,ge)});var De=a(yr,2),at=o(De),gt=a(at,2),Gt=o(gt),Qt=o(Gt);Gt.value=Gt.__value="";var Vr=a(Gt);xe(Vr,1,()=>(e(A),r(()=>[...new Set(e(A).map(m=>m.grado.toString()))])),ke,(m,F)=>{var ge=Ss(),Te=o(ge),dt={};C(Ft=>{u(Te,Ft),dt!==(dt=e(F))&&(ge.value=(ge.__value=e(F))??"")},[()=>(e(F),r(()=>e(F).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),v(m,ge)});var me=a(Mr,2);{var We=m=>{var F=Ms(),ge=o(F),Te=o(ge),dt=a(ge,2),Ft=o(dt);xe(Ft,1,()=>e(he),ct=>ct.nombre,(ct,tt)=>{const st=Lt(()=>(e(S),e(tt),r(()=>e(S).filter(ft=>ft.nombre===e(tt).nombre)))),zt=Lt(()=>(Oe(e(st)),r(()=>e(st).length>0))),Ot=Lt(()=>(Oe(e(st)),r(()=>e(st).some(ft=>{const bt=y.find(it=>it.value===ft.motivo);return bt&&bt.obligaHoras}))));var nr=Fs(),qt=Kt(nr);let tr;var ir=o(qt),br=o(ir),ut=o(br),Rt=a(br,2);xe(Rt,5,()=>e(st),ke,(ft,bt)=>{const it=Lt(()=>(e(bt),r(()=>y.find(to=>to.value===e(bt).motivo))));var Dr=go(),oo=Kt(Dr);{var eo=to=>{var yo=As(),Io=o(yo),Lo=o(Io),Bo=a(Io),Po=a(Bo);C(()=>{er(yo,1,(Oe(e(it)),r(()=>`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold border ${e(it).bgColor} ${e(it).textColor} ${e(it).borderColor} ${e(it).darkBgColor} ${e(it).darkTextColor} ${e(it).darkBorderColor}`)),"svelte-gsxx31"),u(Lo,(Oe(e(it)),r(()=>e(it).icon))),u(Bo,` ${Oe(e(it)),r(()=>e(it).label)??""} `)}),G("click",Po,()=>D(e(tt).nombre,e(bt).motivo)),v(to,yo)};te(oo,to=>{e(it)&&to(eo)})}v(ft,Dr)});var $r=a(ir,2),yt=o($r);let Cr;var Nt=o(yt),rr=o(Nt);rr.value=rr.__value="";var Sr=a(rr);Sr.value=Sr.__value="0";var Pr=a(Sr);xe(Pr,0,()=>[1,2,3,4],ke,(ft,bt)=>{var it=Ds(),Dr=o(it),oo={};C(eo=>{u(Dr,bt),oo!==(oo=eo)&&(it.value=(it.__value=eo)??"")},[()=>r(()=>bt.toString())]),v(ft,it)});var or;Uo(Nt);var Hr=a(Nt,2),Ar=a(yt,2),dr=o(Ar),Jt=o(dr);Jt.value=Jt.__value="";var kt=a(Jt);kt.value=kt.__value="Ignorar";var Dt=a(kt);xe(Dt,1,()=>y,ke,(ft,bt)=>{const it=Lt(()=>(Oe(e(st)),e(bt),r(()=>e(st).some(to=>to.motivo===e(bt).value))));var Dr=Es(),oo=o(Dr),eo={};C(()=>{Dr.disabled=e(it),u(oo,`${e(bt),r(()=>e(bt).icon)??""} ${e(bt),r(()=>e(bt).label)??""} ${e(it)?"‚úì":""}`),eo!==(eo=(e(bt),r(()=>e(bt).value)))&&(Dr.value=(Dr.__value=(e(bt),r(()=>e(bt).value)))??"")}),v(ft,Dr)}),dr.value=dr.__value="";var cr=a(dr,2),Xr=a($r,2);{var mo=ft=>{var bt=Is(),it=o(bt);C(()=>s(it,`color: ${Oe(e(st)),e(t),r(()=>e(st)[0]?.observaciones?"rgb(var(--text-primary))":e(t).icon)??""};`)),G("click",it,()=>se(e(tt).nombre)),v(ft,bt)};te(Xr,ft=>{e(zt)&&ft(mo)})}var _o=a(qt,2);{var Ro=ft=>{var bt=Bs(),it=o(bt);C(()=>{Yo(it,(Oe(e(st)),r(()=>e(st)[0]?.observaciones||""))),s(it,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`)}),G("input",it,Dr=>K(e(tt).nombre,Dr.currentTarget.value)),v(ft,bt)};te(_o,ft=>{Oe(e(zt)),e(T),e(tt),Oe(e(st)),r(()=>e(zt)&&(e(T)[e(tt).nombre]||e(st)[0]?.observaciones))&&ft(Ro)})}C(ft=>{tr=er(qt,1,"flex flex-col sm:flex-row sm:items-center justify-between p-4 border rounded-xl transition-all duration-200 gap-4 svelte-gsxx31",null,tr,{"ring-2":e(zt),"ring-indigo-500":e(zt)}),s(qt,`background-color: ${e(t),r(()=>e(t).bg)??""}; border-color: ${Oe(e(zt)),e(t),r(()=>e(zt)?"transparent":e(t).border)??""};`),s(br,`color: ${e(t),r(()=>e(t).text)??""};`),u(ut,(e(tt),r(()=>e(tt).nombre))),Cr=er(yt,1,"relative w-full sm:w-32 transition-opacity duration-200 svelte-gsxx31",null,Cr,{"opacity-40":!e(Ot)}),Nt.disabled=!e(Ot),s(Nt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),or!==(or=ft)&&(Nt.value=(Nt.__value=ft)??"",Vo(Nt,ft)),s(Hr,`color: ${e(t),r(()=>e(t).icon)??""};`),s(dr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(cr,`color: ${e(t),r(()=>e(t).icon)??""};`)},[()=>(Oe(e(st)),e(L),e(tt),e(p),r(()=>e(st).find(ft=>{const bt=y.find(it=>it.value===ft.motivo);return bt&&bt.obligaHoras})?.horas||e(L)[e(tt).nombre]||e(p).horas))]),G("change",Nt,ft=>Ee(e(tt).nombre,ft.currentTarget.value)),G("change",dr,ft=>{H(e(tt).nombre,ft.currentTarget.value),ft.currentTarget.value=""}),v(ct,nr)});var pt=a(Ft,2);{var z=ct=>{var tt=zs();C(()=>s(tt,`color: ${e(t),r(()=>e(t).text)??""};`)),v(ct,tt)};te(pt,ct=>{e(he),r(()=>e(he).length===0)&&ct(z)})}C(()=>{s(ge,`color: ${e(t),r(()=>e(t).label)??""};`),u(Te,`Estudiantes del Grado ${e(p),r(()=>e(p).grado)??""}`),s(dt,`border-color: ${e(t),r(()=>e(t).border)??""};`)}),v(m,F)};te(me,m=>{e(p),r(()=>e(p).grado&&e(p).horas!=="")&&m(We)})}var nt=a(me,2),Bt=o(nt),Tt=o(Bt),lr=a(Tt,2),Yr=a(Bt,2),Nr=o(Yr),jr=a(Nr,2),Wr=a(nt,2),Fr=o(Wr),Rr=a(o(Fr)),be=o(Rr),Xt=a(Xe,2),ar=o(Xt);{var wr=m=>{var F=Ts();v(m,F)},Lr=m=>{var F=Os();v(m,F)};te(ar,m=>{e(O)?m(wr):m(Lr,!1)})}var ur=a(ar,2);{var h=m=>{var F=Ns(),ge=o(F);C(()=>u(ge,(e(S),r(()=>e(S).length)))),v(m,F)};te(ur,m=>{e(O),e(S),r(()=>!e(O)&&e(S).length>0)&&m(h)})}var N=a(ee,2);{var ve=m=>{Va(m,{onClose:Ze,get selectedDocente(){return e(p),r(()=>e(p).docente)}})};te(N,m=>{e(je)&&m(ve)})}var _e=a(N,2);{var Ne=m=>{fs(m,{onClose:oe,get initialDocente(){return e(p),r(()=>e(p).docente)}})};te(_e,m=>{e(Se)&&m(Ne)})}var et=a(_e,2);{var _t=m=>{jo(m,{onClose:ae,get initialDocente(){return e(p),r(()=>e(p).docente)}})};te(et,m=>{e(Ke)&&m(_t)})}C(()=>{s(ee,`background-color: ${e(t),r(()=>e(t).bg)??""};`),s(ue,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),$t(Je,"src",ro),s(de,`color: ${e(t),r(()=>e(t).text)??""};`),s(q,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(ce,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(f,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(Ce,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(He,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(Ve,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(Mt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),u(St,d()),s(At,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),s(pr,`color: ${e(t),r(()=>e(t).label)??""};`),W.disabled=e(E),s(W,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),u(Ye,e(E)?"Cargando...":"Seleccione docente"),s(zr,`color: ${e(t),r(()=>e(t).label)??""};`),_r.disabled=e(I),s(_r,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),u(Gr,e(I)?"Cargando...":"Seleccione materia"),s(Tr,`color: ${e(t),r(()=>e(t).label)??""};`),s(kr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(at,`color: ${e(t),r(()=>e(t).label)??""};`),gt.disabled=e(l),s(gt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),u(Qt,e(l)?"Cargando...":"Seleccione grado"),s(Tt,`color: ${e(t),r(()=>e(t).label)??""};`),s(lr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(Nr,`color: ${e(t),r(()=>e(t).label)??""};`),s(jr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(Wr,`border-color: ${e(t),r(()=>e(t).border)??""};`),s(Fr,`color: ${e(t),r(()=>e(t).label)??""};`),u(be,(e(S),r(()=>e(S).length))),Xt.disabled=(e(O),e(S),e(p),r(()=>e(O)||e(S).length===0||!e(p).docente||!e(p).materia))}),G("click",q,Le),G("click",ce,vt),G("click",f,lt),G("click",Ce,x),G("click",He,Ue),G("click",Ve,function(...m){le()?.apply(this,m)}),G("click",Mt,g),rt(W,()=>e(p).docente,m=>(ye(p,e(p).docente=m),Pe(()=>{e(E),e(t),e(J),e(I),e(M),e(Q),e(l),e(A)}))),rt(_r,()=>e(p).materia,m=>(ye(p,e(p).materia=m),Pe(()=>{e(E),e(t),e(J),e(I),e(M),e(Q),e(l),e(A)}))),rt(kr,()=>e(p).horas,m=>(ye(p,e(p).horas=m),Pe(()=>{e(E),e(t),e(J),e(I),e(M),e(Q),e(l),e(A)}))),rt(gt,()=>e(p).grado,m=>(ye(p,e(p).grado=m),Pe(()=>{e(E),e(t),e(J),e(I),e(M),e(Q),e(l),e(A)}))),fr(lr,()=>e(p).fecha,m=>(ye(p,e(p).fecha=m),Pe(()=>{e(E),e(t),e(J),e(I),e(M),e(Q),e(l),e(A)}))),fr(jr,()=>e(p).observaciones,m=>(ye(p,e(p).observaciones=m),Pe(()=>{e(E),e(t),e(J),e(I),e(M),e(Q),e(l),e(A)}))),G("submit",Zt,Z),G("click",Xt,Z),v(V,j),hr(),c()}var Ls=_('<div class="flex-1 flex items-center justify-center"><div class="text-center"><div class="animate-spin w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full mx-auto mb-4"></div> <p>Cargando datos...</p></div></div>'),Ps=_('<span class="ml-2 px-2 py-1 text-xs bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full">Activos</span>'),Hs=_("<option> </option>"),Gs=_("<option> </option>"),Us=_('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">Este docente no tiene registros de materias</p>'),Vs=_("<option> </option>"),Ys=_('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">No hay grados para los filtros seleccionados</p>'),Ws=_('<div class="flex-1 flex items-center justify-center"><div class="text-center py-12 px-4"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm sm:text-base">No se encontraron registros con los filtros seleccionados</p></div></div>'),qs=_('<tr class="border-b transition-colors hover:bg-black/5 dark:hover:bg-white/5 text-xs"><td class="p-2"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 text-center"> </td><td class="p-2 text-center"> </td><td class="p-2"><div class="flex items-center gap-2 max-w-[300px]"><span><span> </span></span> <span class="truncate"> </span></div></td><td class="p-2"><span class="truncate block max-w-xs text-xs"> </span></td></tr>'),Js=_('<div><p class="text-xs font-medium mb-1">Observaci√≥n:</p> <p class="text-xs"> </p></div>'),Ks=_('<div class="border rounded-lg p-3 transition-colors hover:bg-black/5 dark:hover:bg-white/5"><div class="flex justify-between items-center mb-2"><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><span><span> </span></span> <p class="text-xs opacity-75"> </p></div></div></div> <div class="flex gap-2 text-[10px] mb-2"><div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="truncate"> </span></div> <div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <span class="truncate"> </span></div></div> <div class="mb-2"><p class="text-xs font-medium mb-1">Anotaci√≥n:</p> <p class="text-xs"> </p></div> <!></div>'),Zs=_('<div class="hidden lg:flex flex-1 flex-col overflow-hidden min-h-0"><div class="flex-1 overflow-auto min-w-full border rounded-lg"><table class="w-full border-collapse text-sm min-w-[900px]"><thead class="sticky top-0 z-10 border-b"><tr><th class="text-left p-2 font-semibold whitespace-nowrap">Fecha</th><th class="text-left p-2 font-semibold whitespace-nowrap">Docente</th><th class="text-left p-2 font-semibold whitespace-nowrap">Materia</th><th class="text-center p-2 font-semibold whitespace-nowrap">Grado</th><th class="text-center p-2 font-semibold whitespace-nowrap">Horas</th><th class="text-left p-2 font-semibold whitespace-nowrap">Anotaci√≥n</th><th class="text-left p-2 font-semibold whitespace-nowrap">Observaci√≥n</th></tr></thead><tbody></tbody></table></div></div> <div class="flex-1 overflow-y-auto lg:hidden px-1"><div class="space-y-2"></div></div>',1),Qs=_('<div class="p-3 sm:p-4 border-b"><div class="flex items-center justify-between mb-2 sm:mb-3"><h3 class="text-lg font-semibold">Filtros <!></h3> <button class="text-sm px-3 py-1 rounded-lg border transition-colors hover:bg-black/5 dark:hover:bg-white/5">Limpiar filtros</button></div> <div class="mb-3 p-1.5 sm:p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg"><p class="text-[10px] sm:text-xs font-medium mb-1.5">R√°pido: Fechas</p> <div class="flex items-center mb-2"><input id="checkFiltrarFecha" type="checkbox" class="w-4 h-4 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 dark:bg-zinc-700"/> <label for="checkFiltrarFecha" class="ml-2 text-xs font-medium">Activar filtro por fechas</label></div> <div class="flex flex-wrap gap-1 sm:gap-2"><button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Hoy</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 7 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 30 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Mes actual</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimo trimestre</button></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"><div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroDocente" class="block text-xs sm:text-sm font-medium">Docente</label> <select id="filtroDocente" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option>Todos los docentes</option><!></select></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroMateria" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroMateria" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroGrado" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroGrado" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroAnotacion" class="block text-xs sm:text-sm font-medium">B√∫squeda en anotaci√≥n</label> <input id="filtroAnotacion" type="text" placeholder="Buscar en anotaciones..." class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"/></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaInicio" class="block text-xs sm:text-sm font-medium">Fecha desde</label> <input id="filtroFechaInicio" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaFin" class="block text-xs sm:text-sm font-medium">Fecha hasta</label> <input id="filtroFechaFin" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div></div></div></div> <div class="flex-1 flex flex-col p-2 sm:p-4 min-h-0"><div class="mb-4 px-0 sm:px-3"><p class="text-sm">Se encontraron <span class="font-bold text-indigo-500"> </span> registros</p></div> <!></div>',1),Xs=_('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4" role="button" tabindex="0" aria-label="Cerrar ventana"><div class="w-full max-w-7xl max-h-[95vh] bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl overflow-hidden flex flex-col"><div class="flex items-center justify-between p-3 sm:p-4 border-b"><div class="flex items-center gap-3"><img alt="EIE Logo" class="h-8 w-auto hidden sm:block"/> <div><h2 class="text-lg sm:text-xl font-bold">Anotaciones de Clase</h2> <p class="text-xs hidden sm:block">Filtra y consulta los registros</p></div></div> <div class="flex items-center gap-3"><button class="inline-flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Exportar CSV</button> <button class="p-2 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5" aria-label="Cerrar"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div> <div class="flex-1 overflow-hidden flex flex-col min-h-0"><!></div></div></div>');function el(V,k){xr(k,!1);const d=b(),we=b(),c=b(),M=b(),t=b();let he=Ct(k,"onClose",8),Fe=Ct(k,"selectedDocente",8,""),B=b([]),le=[],J=[],Y=[],A=b(!1),E=b(!1),I=b([]),l=b({docente:Fe()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",anotacion:""});const p=()=>{const y=new Date,g=new Date(y.getFullYear(),y.getMonth()-1,y.getDate()),w=D=>{const H=D.getFullYear(),K=String(D.getMonth()+1).padStart(2,"0"),se=String(D.getDate()).padStart(2,"0");return`${H}-${K}-${se}`};ye(l,e(l).fechaInicio=w(g)),Pe(()=>{e(t),e(O),e(d),e(c)}),ye(l,e(l).fechaFin=w(y)),Pe(()=>{e(t),e(O),e(d),e(c)})},S=y=>{const g=new Date;let w;switch(y){case"hoy":w=new Date(g);break;case"semana":w=new Date(g),w.setDate(g.getDate()-7);break;case"mes":w=new Date(g),w.setDate(g.getDate()-30);break;case"mes_actual":w=new Date(g.getFullYear(),g.getMonth(),1);break;case"trimestre":w=new Date(g),w.setDate(g.getDate()-90);break;default:p();return}const D=H=>{const K=H.getFullYear(),se=String(H.getMonth()+1).padStart(2,"0"),Ee=String(H.getDate()).padStart(2,"0");return`${K}-${se}-${Ee}`};ye(l,e(l).fechaInicio=D(w)),Pe(()=>{e(t),e(O),e(d),e(c)}),ye(l,e(l).fechaFin=D(g)),Pe(()=>{e(t),e(O),e(d),e(c)}),i(E,!0)},L=[{value:"Estrategias de Ense√±anza-Aprendizaje",icon:"üìö",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},{value:"Evaluaci√≥n y Verificaci√≥n de Saberes",icon:"üìù",color:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200"},{value:"Enfoque STEM+ y Contexto Rural",icon:"üî¨",color:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200"},{value:"Pr√°cticas de Laboratorio y Mantenimiento",icon:"üîß",color:"bg-rose-100 text-rose-800 dark:bg-rose-900 dark:text-rose-200"},{value:"Ciudadan√≠a Digital y √âtica",icon:"üíª",color:"bg-violet-100 text-violet-800 dark:bg-violet-900 dark:text-violet-200"},{value:"Pensamiento Computacional y Programaci√≥n",icon:"üíª",color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"},{value:"Recursos Anal√≥gicos y Contingencias",icon:"üìã",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},{value:"Ofim√°tica y Competencias Productivas",icon:"üñ•Ô∏è",color:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200"},{value:"Gesti√≥n Administrativa y Proyectos Transversales",icon:"üìä",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}],T=y=>{for(const g of L)if(y.includes(g.value))return g;return{icon:"üìù",color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};let O=b([]),je=b([]),Se=b([]),Ke=b([]);const vt=async()=>{i(A,!0);try{const[y,g,w,D]=await Promise.all([No({spreadsheetId:bo,worksheetTitle:Do}),Jr(),Kr(),Zr()]),H=Z=>{if(!Z?.records||!Array.isArray(Z.records))return[];const j=Z.records[0]?.values||[];return Z.records.slice(1).map(ue=>{const fe=ue.values||[];return{timestamp:fe[0]||"",fecha:fe[1]||"",docente:fe[2]||"",materia:fe[3]||"",grado:fe[4]||"",horas:fe[5]||"",anotacion:fe[6]||"",observacion:fe[7]||""}}).filter(ue=>ue.docente&&ue.fecha)},K=Z=>Array.isArray(Z)?Z:Z?.data&&Array.isArray(Z.data)?Z.data:Z?.rows&&Array.isArray(Z.rows)?Z.rows:Z?.values&&Array.isArray(Z.values)?Z.values:Z?.anotaciones&&Array.isArray(Z.anotaciones)?Z.anotaciones:[];i(B,H(y)),le=K(g),J=K(w),Y=K(D),i(O,e(B).length>0?[...new Set(e(B).map(Z=>Z.docente).filter(Boolean))].sort():[]),i(je,e(B).length>0?[...new Set(e(B).map(Z=>Z.materia).filter(Boolean))].sort():[]);const se=[...new Set(Y.map(Z=>(typeof Z=="string"?Z:Z.grado||"").toString()).filter(Boolean))],Ee=e(B).length>0?e(B).map(Z=>Z.grado).filter(Boolean):[];i(Se,[...new Set([...se,...Ee])].sort((Z,j)=>{const ee=parseInt(Z),ue=parseInt(j);return!isNaN(ee)&&!isNaN(ue)?ee-ue:Z.localeCompare(j)})),i(Ke,e(B).length>0?[...new Set(e(B).map(Z=>Z.anotacion).filter(Boolean))].sort():[]),p(),console.log("Datos cargados:",{anotaciones:e(B).length,docentes:le.length,docentesUnicos:e(O).length,materiasUnicas:e(je).length,gradosUnicos:e(Se).length,anotacionesUnicas:e(Ke).length})}catch(y){console.error("Error cargando datos:",y),await jt.fire({icon:"error",title:"Error",text:"No se pudieron cargar los datos de anotaciones",confirmButtonColor:"#ef4444"})}finally{i(A,!1)}},Ze=()=>{i(l,{docente:Fe()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",anotacion:""}),p(),i(E,!1)},lt=()=>{if(e(I).length===0){jt.fire({icon:"warning",title:"Sin datos",text:"No hay datos para exportar",confirmButtonColor:"#f59e0b"});return}const g=[["Fecha","Docente","Materia","Grado","Horas","Anotaci√≥n","Observaci√≥n"].join(","),...e(I).map(K=>[K.fecha,`"${K.docente}"`,`"${K.materia}"`,K.grado,K.horas,`"${K.anotacion}"`,`"${K.observacion}"`].join(","))].join(`
`),w=new Blob([g],{type:"text/csv;charset=utf-8;"}),D=document.createElement("a"),H=URL.createObjectURL(w);D.setAttribute("href",H),D.setAttribute("download",`anotaciones_${new Date().toISOString().split("T")[0]}.csv`),D.style.visibility="hidden",document.body.appendChild(D),D.click(),document.body.removeChild(D)},oe=y=>{try{const[g,w,D]=y.split("-");return g&&w&&D?`${D}/${w}/${g}`:y}catch{return y}},x=(y,g=50)=>y.length<=g?y:y.substring(0,g)+"...";vr(()=>{vt()}),Be(()=>(e(l),e(B),e(je)),()=>{i(d,e(l).docente?[...new Set(e(B).filter(y=>y.docente===e(l).docente).map(y=>y.materia).filter(Boolean))].sort():e(je))}),Be(()=>(e(l),e(B),e(Se)),()=>{i(we,e(l).docente?[...new Set(e(B).filter(y=>y.docente===e(l).docente).map(y=>y.grado).filter(Boolean))].sort((y,g)=>{const w=parseInt(y),D=parseInt(g);return!isNaN(w)&&!isNaN(D)?w-D:y.localeCompare(g)}):e(Se))}),Be(()=>(e(l),e(B),e(we)),()=>{i(c,e(l).materia?[...new Set(e(B).filter(y=>y.materia===e(l).materia).map(y=>y.grado).filter(Boolean))].sort((y,g)=>{const w=parseInt(y),D=parseInt(g);return!isNaN(w)&&!isNaN(D)?w-D:y.localeCompare(g)}):e(we))}),Be(()=>(e(l),e(B),e(Ke)),()=>{i(M,e(l).docente||e(l).materia||e(l).grado?[...new Set(e(B).filter(y=>!(e(l).docente&&y.docente!==e(l).docente||e(l).materia&&y.materia!==e(l).materia||e(l).grado&&y.grado!==e(l).grado)).map(y=>y.anotacion).filter(Boolean))].sort():e(Ke))}),Be(()=>{},()=>{i(t,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Be(()=>(e(B),e(l),e(E)),()=>{i(I,e(B).filter(y=>{if(e(l).docente&&y.docente!==e(l).docente||e(l).materia&&y.materia!==e(l).materia||e(l).grado&&y.grado!==e(l).grado||e(l).anotacion&&!y.anotacion.toLowerCase().includes(e(l).anotacion.toLowerCase()))return!1;if(e(E)){const g=y.fecha;if(e(l).fechaInicio&&g<e(l).fechaInicio||e(l).fechaFin&&g>e(l).fechaFin)return!1}return!0}))}),Be(()=>(e(E),e(l)),()=>{e(E)&&(!e(l).fechaInicio||!e(l).fechaFin)&&p()}),Er(),Ir();var ae=Xs(),Re=o(ae),$e=o(Re),ne=o($e),U=o(ne),re=a(U,2),X=o(re),Ge=a(X,2),ze=a(ne,2),pe=o(ze),Q=a(pe,2),Ae=a($e,2),Qe=o(Ae);{var Le=y=>{var g=Ls(),w=o(g),D=a(o(w),2);C(()=>s(D,`color: ${e(t),r(()=>e(t).text)??""};`)),v(y,g)},Ue=y=>{var g=Qs(),w=Kt(g),D=o(w),H=o(D),K=a(o(H));{var se=De=>{var at=Ps();v(De,at)};te(K,De=>{e(l),r(()=>e(l).docente||e(l).materia||e(l).grado||e(l).anotacion||e(l).fechaInicio||e(l).fechaFin)&&De(se)})}var Ee=a(H,2),Z=a(D,2),j=o(Z),ee=a(j,2),ue=o(ee),fe=a(ue,2),qe=a(ee,2),Je=o(qe),de=a(Je,2),P=a(de,2),q=a(P,2),ce=a(q,2),Me=a(Z,2),n=o(Me),f=o(n),$=o(f),R=a($,2),Ce=o(R);Ce.value=Ce.__value="";var He=a(Ce);xe(He,1,()=>e(O),ke,(De,at)=>{var gt=Hs(),Gt=o(gt),Qt={};C(()=>{u(Gt,e(at)),Qt!==(Qt=e(at))&&(gt.value=(gt.__value=e(at))??"")}),v(De,gt)});var Ve=a(f,2),Ie=o(Ve),Mt=o(Ie),Ut=a(Ie,2),Vt=o(Ut),Yt=o(Vt);Vt.value=Vt.__value="";var Wt=a(Vt);xe(Wt,1,()=>e(d),ke,(De,at)=>{var gt=Gs(),Gt=o(gt),Qt={};C(()=>{u(Gt,e(at)),Qt!==(Qt=e(at))&&(gt.value=(gt.__value=e(at))??"")}),v(De,gt)});var ht=a(Ut,2);{var St=De=>{var at=Us();v(De,at)};te(ht,De=>{e(l),e(d),r(()=>e(l).docente&&e(d).length===0)&&De(St)})}var Xe=a(n,2),At=o(Xe),Et=o(At),Pt=o(Et),It=a(Et,2),wt=o(It),Zt=o(wt);wt.value=wt.__value="";var mr=a(wt);xe(mr,1,()=>e(c),ke,(De,at)=>{var gt=Vs(),Gt=o(gt),Qt={};C(()=>{u(Gt,e(at)),Qt!==(Qt=e(at))&&(gt.value=(gt.__value=e(at))??"")}),v(De,gt)});var gr=a(It,2);{var pr=De=>{var at=Ys();v(De,at)};te(gr,De=>{e(l),e(c),r(()=>(e(l).docente||e(l).materia)&&e(c).length===0)&&De(pr)})}var W=a(At,2),ie=o(W),Ye=a(ie,2),ot=a(Xe,2),mt=o(ot),Ht=o(mt),zr=a(Ht,2),_r=a(mt,2),sr=o(_r),Gr=a(sr,2),Qr=a(w,2),Mr=o(Qr),yr=o(Mr),Tr=a(o(yr)),kr=o(Tr),Br=a(Mr,2);{var Or=De=>{var at=Ws(),gt=o(at),Gt=o(gt),Qt=a(Gt,2);C(()=>{s(Gt,`color: ${e(t),r(()=>e(t).icon)??""};`),s(Qt,`color: ${e(t),r(()=>e(t).text)??""};`)}),v(De,at)},Ur=De=>{var at=Zs(),gt=Kt(at),Gt=o(gt),Qt=o(Gt),Vr=o(Qt),me=o(Vr),We=o(me),nt=a(We),Bt=a(nt),Tt=a(Bt),lr=a(Tt),Yr=a(lr),Nr=a(Yr),jr=a(Vr);xe(jr,5,()=>e(I),ke,(Rr,be)=>{const Xt=Lt(()=>(e(be),r(()=>T(e(be).anotacion))));var ar=qs(),wr=o(ar),Lr=o(wr),ur=a(wr),h=o(ur),N=a(ur),ve=o(N),_e=a(N),Ne=o(_e),et=a(_e),_t=o(et),m=a(et),F=o(m),ge=o(F),Te=o(ge),dt=o(Te),Ft=a(ge,2),pt=o(Ft),z=a(m),ct=o(z),tt=o(ct);C((st,zt)=>{s(ar,`border-color: ${e(t),r(()=>e(t).border)??""};`),s(wr,`color: ${e(t),r(()=>e(t).text)??""};`),u(Lr,st),s(ur,`color: ${e(t),r(()=>e(t).text)??""};`),$t(ur,"title",(e(be),r(()=>e(be).docente))),u(h,(e(be),r(()=>e(be).docente))),s(N,`color: ${e(t),r(()=>e(t).text)??""};`),$t(N,"title",(e(be),r(()=>e(be).materia))),u(ve,(e(be),r(()=>e(be).materia))),s(_e,`color: ${e(t),r(()=>e(t).text)??""};`),u(Ne,(e(be),r(()=>e(be).grado))),s(et,`color: ${e(t),r(()=>e(t).text)??""};`),u(_t,(e(be),r(()=>e(be).horas))),s(m,`color: ${e(t),r(()=>e(t).text)??""};`),er(ge,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Oe(e(Xt)),r(()=>e(Xt).color)??""} flex-shrink-0`),u(dt,(Oe(e(Xt)),r(()=>e(Xt).icon))),$t(Ft,"title",(e(be),r(()=>e(be).anotacion))),u(pt,zt),s(z,`color: ${e(t),r(()=>e(t).text)??""};`),u(tt,(e(be),r(()=>e(be).observacion||"-")))},[()=>(e(be),r(()=>oe(e(be).fecha))),()=>(e(be),r(()=>x(e(be).anotacion,100)))]),v(Rr,ar)});var Wr=a(gt,2),Fr=o(Wr);xe(Fr,5,()=>e(I),ke,(Rr,be)=>{const Xt=Lt(()=>(e(be),r(()=>T(e(be).anotacion))));var ar=Ks(),wr=o(ar),Lr=o(wr),ur=o(Lr),h=o(ur),N=o(h),ve=o(N),_e=a(h,2),Ne=o(_e),et=a(wr,2),_t=o(et),m=a(o(_t),2),F=o(m),ge=a(_t,2),Te=a(o(ge),2),dt=o(Te),Ft=a(et,2),pt=o(Ft),z=a(pt,2),ct=o(z),tt=a(Ft,2);{var st=zt=>{var Ot=Js(),nr=o(Ot),qt=a(nr,2),tr=o(qt);C(ir=>{s(nr,`color: ${e(t),r(()=>e(t).label)??""};`),s(qt,`color: ${e(t),r(()=>e(t).text)??""};`),$t(qt,"title",(e(be),r(()=>e(be).observacion))),u(tr,ir)},[()=>(e(be),r(()=>x(e(be).observacion,150)))]),v(zt,Ot)};te(tt,zt=>{e(be),r(()=>e(be).observacion)&&zt(st)})}C((zt,Ot)=>{s(ar,`border-color: ${e(t),r(()=>e(t).cardBorder)??""}; background-color: ${e(t),r(()=>e(t).cardBg)??""};`),er(h,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium ${Oe(e(Xt)),r(()=>e(Xt).color)??""} flex-shrink-0`),u(ve,(Oe(e(Xt)),r(()=>e(Xt).icon))),s(_e,`color: ${e(t),r(()=>e(t).label)??""};`),u(Ne,`${e(be),r(()=>e(be).grado)??""} ‚Ä¢ ${zt??""} ‚Ä¢ ${e(be),r(()=>e(be).horas)??""}h`),s(et,`color: ${e(t),r(()=>e(t).text)??""};`),u(F,(e(be),r(()=>e(be).docente))),$t(Te,"title",(e(be),r(()=>e(be).materia))),u(dt,(e(be),r(()=>e(be).materia))),s(pt,`color: ${e(t),r(()=>e(t).label)??""};`),s(z,`color: ${e(t),r(()=>e(t).text)??""};`),$t(z,"title",(e(be),r(()=>e(be).anotacion))),u(ct,Ot)},[()=>(e(be),r(()=>oe(e(be).fecha))),()=>(e(be),r(()=>x(e(be).anotacion,150)))]),v(Rr,ar)}),C(()=>{s(Gt,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),s(Vr,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""};`),s(We,`color: ${e(t),r(()=>e(t).text)??""};`),s(nt,`color: ${e(t),r(()=>e(t).text)??""};`),s(Bt,`color: ${e(t),r(()=>e(t).text)??""};`),s(Tt,`color: ${e(t),r(()=>e(t).text)??""};`),s(lr,`color: ${e(t),r(()=>e(t).text)??""};`),s(Yr,`color: ${e(t),r(()=>e(t).text)??""};`),s(Nr,`color: ${e(t),r(()=>e(t).text)??""};`)}),v(De,at)};te(Br,De=>{e(I),r(()=>e(I).length===0)?De(Or):De(Ur,!1)})}C(()=>{s(w,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),s(H,`color: ${e(t),r(()=>e(t).text)??""};`),s(Ee,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(j,`color: ${e(t),r(()=>e(t).text)??""};`),s(fe,`color: ${e(t),r(()=>e(t).text)??""};`),s(Je,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(de,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(P,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(q,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(ce,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s($,`color: ${e(t),r(()=>e(t).label)??""};`),s(R,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(Ie,`color: ${e(t),r(()=>e(t).label)??""};`),u(Mt,`Materia ${e(l),r(()=>e(l).docente?"(del docente)":"")??""}`),s(Ut,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),u(Yt,(e(l),r(()=>e(l).docente?"Todas las materias del docente":"Todas las materias"))),s(Et,`color: ${e(t),r(()=>e(t).label)??""};`),u(Pt,`Grado ${e(l),r(()=>e(l).docente||e(l).materia?"(filtrado)":"")??""}`),s(It,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),u(Zt,(e(l),r(()=>e(l).docente||e(l).materia?"Todos los grados filtrados":"Todos los grados"))),s(ie,`color: ${e(t),r(()=>e(t).label)??""};`),s(Ye,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(Ht,`color: ${e(t),r(()=>e(t).label)??""};`),zr.disabled=!e(E),s(zr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(sr,`color: ${e(t),r(()=>e(t).label)??""};`),Gr.disabled=!e(E),s(Gr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(yr,`color: ${e(t),r(()=>e(t).label)??""};`),u(kr,(e(I),r(()=>e(I).length)))}),G("click",Ee,Ze),Ao(ue,()=>e(E),De=>i(E,De)),G("click",Je,()=>S("hoy")),G("click",de,()=>S("semana")),G("click",P,()=>S("mes")),G("click",q,()=>S("mes_actual")),G("click",ce,()=>S("trimestre")),rt(R,()=>e(l).docente,De=>(ye(l,e(l).docente=De),Pe(()=>{e(t),e(O),e(d),e(c)}))),rt(Ut,()=>e(l).materia,De=>(ye(l,e(l).materia=De),Pe(()=>{e(t),e(O),e(d),e(c)}))),rt(It,()=>e(l).grado,De=>(ye(l,e(l).grado=De),Pe(()=>{e(t),e(O),e(d),e(c)}))),fr(Ye,()=>e(l).anotacion,De=>(ye(l,e(l).anotacion=De),Pe(()=>{e(t),e(O),e(d),e(c)}))),fr(zr,()=>e(l).fechaInicio,De=>(ye(l,e(l).fechaInicio=De),Pe(()=>{e(t),e(O),e(d),e(c)}))),fr(Gr,()=>e(l).fechaFin,De=>(ye(l,e(l).fechaFin=De),Pe(()=>{e(t),e(O),e(d),e(c)}))),v(y,g)};te(Qe,y=>{e(A)?y(Le):y(Ue,!1)})}C(()=>{s(Re,`background-color: ${e(t),r(()=>e(t).cardBg)??""};`),s($e,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),$t(U,"src",ro),s(X,`color: ${e(t),r(()=>e(t).text)??""};`),s(Ge,`color: ${e(t),r(()=>e(t).label)??""};`),pe.disabled=(e(I),r(()=>e(I).length===0)),s(Q,`color: ${e(t),r(()=>e(t).text)??""};`)}),G("click",pe,lt),G("click",Q,function(...y){he()?.apply(this,y)}),G("click",ae,lo(function(...y){he()?.apply(this,y)})),G("keydown",ae,y=>{(y.key==="Enter"||y.key===" ")&&he()()}),v(V,ae),hr()}var tl=_("<option> </option>"),rl=_("<option> </option>"),ol=_("<option> </option>"),al=xt('<svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Cargando...',1),sl=xt('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> Aplicar Filtros',1),ll=_('<div class="text-sm opacity-75"> </div>'),nl=_('<div class="flex items-center justify-center py-12"><!></div>'),il=_('<div class="text-center py-12"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v2a2 2 0 002 2h6a2 2 0 002-2v-2M9 17H5a2 2 0 01-2-2v-6a2 2 0 012-2h4M9 7V5a2 2 0 012-2h6a2 2 0 012 2v2M9 7h10a2 2 0 012 2v6a2 2 0 01-2 2H9M9 7V17m0 0h10"></path></svg> <p class="text-lg font-medium mb-2">No hay datos disponibles</p> <p class="text-sm"> </p></div>'),dl=_('<tr class="border-t transition-colors hover:bg-gray-50 dark:hover:bg-gray-800"><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"><div class="truncate"> </div></td></tr>'),cl=_('<tr class="border-t-2 font-bold bg-gray-100 dark:bg-gray-800"><td class="px-4 py-3 text-sm font-bold">TOTAL</td><td class="px-4 py-3 text-sm font-bold text-center"> </td><td class="px-4 py-3 text-sm font-bold text-center"> </td></tr>'),vl=_('<div class="overflow-x-auto rounded-lg border"><table class="w-full"><thead><tr><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Fecha</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Horas</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Anotaci√≥n</th></tr></thead><tbody><!><!></tbody></table></div>'),gl=_('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-2xl" role="document"><div class="flex items-center justify-between p-6 border-b"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v2a2 2 0 002 2h6a2 2 0 002-2v-2M9 17H5a2 2 0 01-2-2v-6a2 2 0 012-2h4M9 7V5a2 2 0 012-2h6a2 2 0 012 2v2M9 7h10a2 2 0 012 2v6a2 2 0 01-2 2H9M9 7V17m0 0h10"></path></svg></div> <div><h2 id="modal-title" class="text-xl font-bold">Generador de Reportes PDF</h2> <p class="text-sm opacity-75">Filtre y genere reportes de anotaciones</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar ventana de reportes" title="Cerrar"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 140px);"><div class="mb-6 p-4 rounded-xl border"><h3 class="text-lg font-semibold mb-4">Filtros</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="space-y-2"><label for="docente-filter" class="block text-sm font-medium">Docente</label> <select id="docente-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los docentes</option><!></select></div> <div class="space-y-2"><label for="materia-filter" class="block text-sm font-medium">Asignatura</label> <select id="materia-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todas las asignaturas</option><!></select></div> <div class="space-y-2"><label for="grado-filter" class="block text-sm font-medium">Grado</label> <select id="grado-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los grados</option><!></select></div></div> <div class="flex gap-3 mt-4"><button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2"><!></button> <button class="px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> Limpiar</button> <button class="ml-auto px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Generar PDF</button></div></div> <div class="mb-4"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold"> </h3> <!></div></div> <!></div></div></div>');function pl(V,k){xr(k,!1);const d=b(),we=b(),c=b();let M=null,t=null,he=Ct(k,"onClose",8),Fe=Ct(k,"initialDocente",8,""),B=b([]),le=b([]),J=b([]),Y=[],A=b([]),E=b(!1);const I=async()=>{if(!M||!t){const[n,f]=await Promise.all([so(()=>import("./pdf-CBBHH09D.js").then($=>$.j),[]),so(()=>import("./pdf-CBBHH09D.js").then($=>$.b),[])]);M=n.default,t=f.default}};let l=b(JSON.parse(localStorage.getItem("docenteMaterias")||"{}")),p=b(""),S=b(""),L=b("");vr(()=>{Fe()&&i(p,Fe())}),vr(async()=>{console.log("üöÄ ReportGenerator montado"),await T()});const T=async()=>{try{const[n,f,$]=await Promise.all([Jr(),Kr(),Zr()]);i(B,n),i(le,f),i(J,$),i(l,JSON.parse(localStorage.getItem("docenteMaterias")||"{}"))}catch(n){console.error("Error cargando datos iniciales:",n)}},O=async()=>{i(E,!0);try{const n={spreadsheetId:bo,worksheetTitle:Do};e(p)&&(n.docente=e(p)),e(S)&&(n.materia=e(S)),e(L)&&(n.grado=e(L)),console.log("üîç Enviando payload a getAnotador:",n);const f=await No(n);console.log("üìä Respuesta de getAnotador:",f);let $=f;if(f&&typeof f=="object"&&(f.data?$=f.data:f.records?$=f.records:Array.isArray(f)&&($=f)),Y=Array.isArray($)?$:[],console.log("‚úÖ Datos procesados:",Y.length,"registros"),console.log("üîç Keys del primer registro:",Y[0]?Object.keys(Y[0]):"No hay registros"),Y.length>0&&Y[0].values){console.log("üîÑ Transformando datos desde formato .values");const R=["Marca Temporal","Fecha","Docente","Asignatura","Grado","Horas","Anotaci√≥n"];Y=Y.map(Ce=>{const He={"Marca Temporal":"",Fecha:"",Docente:"",Asignatura:"",Grado:"",Horas:"",Anotaci√≥n:""};return R.forEach((Ve,Ie)=>{He[Ve]=Ce.values?.[Ie]||""}),He}),console.log("üìä Datos transformados:",Y.length,"registros")}je()}catch(n){if(console.error("‚ùå Error cargando datos del anotador:",n),n instanceof Error&&console.error("üìã Error details:",n.message),n&&typeof n=="object"&&"response"in n){const f=n.response;f&&(console.error("üåê Response status:",f.status),console.error("üåê Response data:",f.data))}Y=[],i(A,[])}finally{i(E,!1)}},je=()=>{if(console.log("üîç Aplicando filtros locales:",{totalRegistros:Y.length,isArray:Array.isArray(Y),docente:e(p),materia:e(S),grado:e(L)}),!Array.isArray(Y)){console.error("‚ùå anotadorData no es un array:",typeof Y,Y),i(A,[]);return}i(A,Y.filter(n=>{if(!n||typeof n!="object")return console.log("‚ö†Ô∏è Registro inv√°lido:",n),!1;const f=!e(p)||n.Docente===e(p),$=!e(S)||n.Asignatura===e(S),R=!e(L)||n.Grado===e(L);return!f&&e(p)&&console.log("‚ùå No coincide docente:",{expected:e(p),actual:n.Docente}),!$&&e(S)&&console.log("‚ùå No coincide materia:",{expected:e(S),actual:n.Asignatura}),!R&&e(L)&&console.log("‚ùå No coincide grado:",{expected:e(L),actual:n.Grado}),f&&$&&R})),console.log("‚úÖ Registros filtrados:",e(A).length)},Se=()=>{O()},Ke=()=>{i(p,""),i(S,""),i(L,""),Y=[],i(A,[])},vt=async()=>{if(await I(),e(A).length===0){alert("No hay datos para generar el PDF");return}const n=new M({format:"letter"}),f="Anotador de Clases",$=[];e(p)&&$.push(`Docente: ${e(p)}`),e(S)&&$.push(`Asignatura: ${e(S)}`),e(L)&&$.push(`Grado: ${e(L)}`);let R=20;try{console.log("üñºÔ∏è Intentando agregar logo EIE al PDF..."),n.setTextColor(99,102,241),n.setFontSize(28),n.setFont("helvetica","bold"),n.text("EIE",n.internal.pageSize.getWidth()/2,R,{align:"center"}),R+=15,console.log("‚úÖ Logo EIE (texto) agregado correctamente")}catch(Ie){console.log("‚ùå Error con logo EIE, usando fallback:",Ie),n.setTextColor(99,102,241),n.setFontSize(24),n.text("EIE",n.internal.pageSize.getWidth()/2,R,{align:"center"}),R+=15}n.setTextColor(0,0,0),n.setFontSize(18),n.setFont("helvetica","bold"),n.text(f,n.internal.pageSize.getWidth()/2,R,{align:"center"}),R+=12,n.setTextColor(0,0,0),n.setFontSize(12),n.setFont("helvetica","normal"),n.text("Instituci√≥n Educativa Instituto Gu√°tica",n.internal.pageSize.getWidth()/2,R,{align:"center"}),R+=10,n.setTextColor(60,60,60),n.setFontSize(10),n.setFont("helvetica","normal"),n.text(`Fecha de generaci√≥n: ${new Date().toLocaleDateString()}`,n.internal.pageSize.getWidth()/2,R,{align:"center"}),R+=15,n.setDrawColor(200,200,200),n.setLineWidth(1),n.line(20,R,n.internal.pageSize.getWidth()-20,R),R+=15,$.length>0&&(n.setTextColor(80,80,80),n.setFontSize(9),n.setFont("helvetica","normal"),$.forEach(Ie=>{n.text(Ie,20,R,{align:"left"}),R+=6}),R+=10);const Ce=e(A).map(Ie=>[Ie.Fecha||"",Ie.Horas||"",Ie.Anotaci√≥n||""]),He=["TOTAL",e(d).toFixed(1),""];Ce.push(He),console.log("üìä Generando PDF con:",{totalHoras:e(d),registros:e(A).length,filasTabla:Ce.length}),t(n,{head:[["Fecha","Horas","Anotaci√≥n"]],body:Ce,startY:R,styles:{fontSize:8,cellPadding:2,cellWidth:"wrap",valign:"top",overflow:"linebreak"},headStyles:{fillColor:[99,102,241],textColor:255,fontSize:9,fontStyle:"bold",halign:"center"},bodyStyles:{fillColor:[255,255,255],textColor:[0,0,0]},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:{0:{cellWidth:60,minCellHeight:8,halign:"center"},1:{cellWidth:30,minCellHeight:8,halign:"center"},2:{cellWidth:"auto",minCellHeight:12}},margin:{top:15,right:15,bottom:15,left:15},tableWidth:"auto",didParseCell:Ie=>{Ie.row.index===Ce.length-1&&(Ie.cell.styles.fillColor=[240,240,240],Ie.cell.styles.fontStyle="bold",Ie.cell.styles.textColor=[0,0,0],Ie.column.index===0&&(Ie.cell.styles.halign="center",Ie.cell.styles.fillColor=[230,230,230]),Ie.column.index===1&&(Ie.cell.styles.halign="center",Ie.cell.styles.fillColor=[220,220,220]),Ie.column.index===2&&(Ie.cell.styles.halign="center",Ie.cell.styles.fillColor=[220,220,220]))}});const Ve=`reporte_anotaciones_${e(p)||"todos"}_${e(S)||"todas"}_${e(L)||"todos"}_${new Date().toISOString().split("T")[0]}.pdf`;n.save(Ve),console.log("üíæ PDF guardado exitosamente:",Ve)};Be(()=>e(A),()=>{i(d,e(A).reduce((n,f)=>{const $=parseFloat(f.Horas||"0");return n+(isNaN($)?0:$)},0))}),Be(()=>(e(p),e(le),e(l)),()=>{i(we,e(p)?[...e(le)].sort((n,f)=>{const $=e(l)[e(p)]?.includes(n.materia),R=e(l)[e(p)]?.includes(f.materia);return $&&!R?-1:!$&&R?1:n.materia.localeCompare(f.materia)}):e(le))}),Be(()=>{},()=>{i(c,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Er(),Ir();var Ze=gl(),lt=o(Ze),oe=o(lt),x=a(o(oe),2),ae=a(oe,2),Re=o(ae),$e=a(o(Re),2),ne=o($e),U=o(ne),re=a(U,2),X=o(re);X.value=X.__value="";var Ge=a(X);xe(Ge,1,()=>e(B),ke,(n,f)=>{var $=tl(),R=o($),Ce={};C(()=>{u(R,e(f)),Ce!==(Ce=e(f))&&($.value=($.__value=e(f))??"")}),v(n,$)});var ze=a(ne,2),pe=o(ze),Q=a(pe,2),Ae=o(Q);Ae.value=Ae.__value="";var Qe=a(Ae);xe(Qe,1,()=>e(we),ke,(n,f)=>{const $=Lt(()=>(e(p),e(l),e(f),r(()=>e(p)&&e(l)[e(p)]?.includes(e(f).materia))));var R=rl(),Ce=o(R),He={};C(()=>{s(R,e($)?"color: #6366f1; font-weight: 600;":""),u(Ce,`${e($)?"‚≠ê ":""}${e(f),r(()=>e(f).materia)??""}`),He!==(He=(e(f),r(()=>e(f).materia)))&&(R.value=(R.__value=(e(f),r(()=>e(f).materia)))??"")}),v(n,R)});var Le=a(ze,2),Ue=o(Le),y=a(Ue,2),g=o(y);g.value=g.__value="";var w=a(g);xe(w,1,()=>(e(J),r(()=>[...new Set(e(J).map(n=>n.grado.toString()))])),ke,(n,f)=>{var $=ol(),R=o($),Ce={};C(He=>{u(R,He),Ce!==(Ce=e(f))&&($.value=($.__value=e(f))??"")},[()=>(e(f),r(()=>e(f).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),v(n,$)});var D=a($e,2),H=o(D),K=o(H);{var se=n=>{var f=al();v(n,f)},Ee=n=>{var f=sl();v(n,f)};te(K,n=>{e(E)?n(se):n(Ee,!1)})}var Z=a(H,2),j=a(Z,2),ee=a(Re,2),ue=o(ee),fe=o(ue),qe=o(fe),Je=a(fe,2);{var de=n=>{var f=ll(),$=o(f);C(()=>u($,`${(e(p)&&`Docente: ${e(p)}`)??""}
              ${(e(S)&&` | Asignatura: ${e(S)}`)??""}
              ${(e(L)&&` | Grado: ${e(L)}`)??""}`)),v(n,f)};te(Je,n=>{e(A),r(()=>e(A).length>0)&&n(de)})}var P=a(ee,2);{var q=n=>{var f=nl(),$=o(f);io($,{message:"Cargando datos del anotador..."}),v(n,f)},ce=n=>{var f=il(),$=a(o(f),4),R=o($);C(()=>{s(f,`color: ${e(c),r(()=>e(c).placeholder)??""};`),u(R,e(p)||e(S)||e(L)?"No se encontraron registros con los filtros seleccionados. Intente con otros criterios.":"Seleccione filtros y haga clic en 'Aplicar Filtros' para cargar los datos.")}),v(n,f)},Me=n=>{var f=vl(),$=o(f),R=o($),Ce=o(R),He=o(Ce),Ve=a(He),Ie=a(Ve),Mt=a(R),Ut=o(Mt);xe(Ut,1,()=>e(A),ke,(Wt,ht)=>{var St=dl(),Xe=o(St),At=o(Xe),Et=a(Xe),Pt=o(Et),It=a(Et),wt=o(It),Zt=o(wt);C(()=>{s(St,`border-color: ${e(c),r(()=>e(c).border)??""};`),u(At,(e(ht),r(()=>e(ht).Fecha||"-"))),u(Pt,(e(ht),r(()=>e(ht).Horas||"-"))),$t(wt,"title",(e(ht),r(()=>e(ht).Anotaci√≥n))),u(Zt,(e(ht),r(()=>e(ht).Anotaci√≥n||"-")))}),v(Wt,St)});var Vt=a(Ut);{var Yt=Wt=>{var ht=cl(),St=a(o(ht)),Xe=o(St),At=a(St),Et=o(At);C(Pt=>{s(ht,`border-color: ${e(c),r(()=>e(c).border)??""}; border-top-width: 2px;`),u(Xe,Pt),u(Et,`${e(A),r(()=>e(A).length)??""} registros`)},[()=>(e(d),r(()=>e(d).toFixed(1)))]),v(Wt,ht)};te(Vt,Wt=>{e(A),r(()=>e(A).length>0)&&Wt(Yt)})}C(()=>{s(f,`border-color: ${e(c),r(()=>e(c).border)??""};`),s(R,`background-color: ${e(c),r(()=>e(c).inputBg)??""};`),s(He,`color: ${e(c),r(()=>e(c).label)??""};`),s(Ve,`color: ${e(c),r(()=>e(c).label)??""};`),s(Ie,`color: ${e(c),r(()=>e(c).label)??""};`)}),v(n,f)};te(P,n=>{e(E)?n(q):(e(A),r(()=>e(A).length===0)?n(ce,1):n(Me,!1))})}C(()=>{s(lt,`background-color: ${e(c),r(()=>e(c).cardBg)??""}; color: ${e(c),r(()=>e(c).text)??""};`),s(oe,`border-color: ${e(c),r(()=>e(c).cardBorder)??""};`),s(Re,`background-color: ${e(c),r(()=>e(c).inputBg)??""}; border-color: ${e(c),r(()=>e(c).border)??""};`),s(U,`color: ${e(c),r(()=>e(c).label)??""};`),s(re,`background-color: ${e(c),r(()=>e(c).cardBg)??""}; border-color: ${e(c),r(()=>e(c).border)??""}; color: ${e(c),r(()=>e(c).text)??""};`),s(pe,`color: ${e(c),r(()=>e(c).label)??""};`),s(Q,`background-color: ${e(c),r(()=>e(c).cardBg)??""}; border-color: ${e(c),r(()=>e(c).border)??""}; color: ${e(c),r(()=>e(c).text)??""};`),s(Ue,`color: ${e(c),r(()=>e(c).label)??""};`),s(y,`background-color: ${e(c),r(()=>e(c).cardBg)??""}; border-color: ${e(c),r(()=>e(c).border)??""}; color: ${e(c),r(()=>e(c).text)??""};`),H.disabled=e(E),s(Z,`color: ${e(c),r(()=>e(c).text)??""};`),j.disabled=(e(A),r(()=>e(A).length===0)),u(qe,`Resultados (${e(A),r(()=>e(A).length)??""} registros)`)}),G("click",x,function(...n){he()?.apply(this,n)}),rt(re,()=>e(p),n=>i(p,n)),rt(Q,()=>e(S),n=>i(S,n)),rt(y,()=>e(L),n=>i(L,n)),G("click",H,Se),G("click",Z,Ke),G("click",j,vt),G("click",Ze,lo(function(...n){he()?.apply(this,n)})),G("keydown",Ze,n=>n.key==="Escape"&&he()()),v(V,Ze),hr()}var ul=_('<div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping svelte-1p7gzb0"></div> <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full svelte-1p7gzb0"></div>',1),bl=xt('<svg class="w-5 h-5 text-indigo-500 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1p7gzb0"></path></svg>'),fl=xt('<svg class="w-5 h-5 text-amber-500 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="svelte-1p7gzb0"></path></svg>'),xl=xt('<svg class="w-5 h-5 text-indigo-400 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1p7gzb0"></path></svg>'),hl=_('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-1p7gzb0"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0 svelte-1p7gzb0"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-1p7gzb0"></path></svg></div> <div class="flex-1 pr-6 pt-0.5 svelte-1p7gzb0"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100 svelte-1p7gzb0">Informaci√≥n</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200 svelte-1p7gzb0"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors svelte-1p7gzb0" aria-label="Cerrar alerta"><svg class="w-4 h-4 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-1p7gzb0"></path></svg></button></div>'),ml=_('<option class="svelte-1p7gzb0"> </option>'),_l=_('<option class="svelte-1p7gzb0"> </option>'),yl=_('<option class="svelte-1p7gzb0"> </option>'),kl=_('<option class="svelte-1p7gzb0"> </option>'),wl=_('<button class="absolute right-4 top-1/2 transform -translate-y-1/2 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors svelte-1p7gzb0" title="Limpiar b√∫squeda"><svg class="w-4 h-4 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-1p7gzb0"></path></svg></button>'),$l=_('<div class="text-center py-8 svelte-1p7gzb0"><svg class="w-12 h-12 mx-auto mb-4 opacity-50 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" class="svelte-1p7gzb0"></path></svg> <p class="text-sm svelte-1p7gzb0"> </p></div>'),Cl=_('<div class="flex items-center justify-center py-12 svelte-1p7gzb0"><!></div>'),Sl=_('<span class="ml-2 inline-block animate-bounce svelte-1p7gzb0">‚ú®</span>'),Al=_('<span class="text-xs font-medium svelte-1p7gzb0"> </span>'),Dl=_('<div class="h-px flex-1 transition-all duration-300 group-hover:opacity-50 svelte-1p7gzb0"></div>'),El=xt('<svg class="w-3 h-3 text-white svelte-1p7gzb0" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" class="svelte-1p7gzb0"></path></svg>'),Il=_('<div class="relative group flex flex-col p-0 rounded-2xl border transition-all duration-200 shadow-sm hover:shadow-md svelte-1p7gzb0"><div class="flex items-start gap-1 p-4 svelte-1p7gzb0"><label class="flex-shrink-0 cursor-pointer p-1 mt-1 svelte-1p7gzb0"><input type="checkbox" class="hidden svelte-1p7gzb0"/> <div class="w-5 h-5 rounded border flex items-center justify-center transition-colors cursor-pointer svelte-1p7gzb0"><!></div></label> <textarea rows="8" class="w-full bg-transparent border-none focus:ring-0 text-base font-medium leading-relaxed resize-none p-1 transition-colors min-h-[180px] pb-6 svelte-1p7gzb0" placeholder="Escriba aqu√≠..."></textarea></div></div>'),Bl=_('<div class="grid grid-cols-1 md:grid-cols-2 gap-4 svelte-1p7gzb0"></div>'),Fl=_('<div class="space-y-4 svelte-1p7gzb0"><button type="button" class="flex items-center gap-3 w-full text-left cursor-pointer group focus:outline-none svelte-1p7gzb0"><div class="flex items-center gap-3 flex-1 svelte-1p7gzb0"><h3> <!></h3> <!></div> <!> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" class="svelte-1p7gzb0"></path></svg></button> <!></div>'),zl=xt('<svg class="animate-spin h-7 w-7 text-white svelte-1p7gzb0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25 svelte-1p7gzb0" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75 svelte-1p7gzb0" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Ml=xt('<svg class="w-8 h-8 transform rotate-90 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" class="svelte-1p7gzb0"></path></svg>'),Tl=_('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200 svelte-1p7gzb0"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40 svelte-1p7gzb0"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8 svelte-1p7gzb0"><div class="flex items-center gap-4 lg:flex-col svelte-1p7gzb0"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto svelte-1p7gzb0"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center svelte-1p7gzb0">Anotador de Clase</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full svelte-1p7gzb0"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Abrir hoja de c√°lculo"><svg class="w-5 h-5 svelte-1p7gzb0" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Hoja de C√°lculo</span></button> <button id="filter-button-target" class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Abrir filtros de anotaciones"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Filtros</span> <!></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Generar reportes PDF"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Reportes PDF</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Volver al Dashboard"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Dashboard</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full svelte-1p7gzb0" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize svelte-1p7gzb0"> </span></button></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto pb-32 svelte-1p7gzb0"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border svelte-1p7gzb0"><!> <!> <form class="space-y-6 svelte-1p7gzb0"><div class="grid grid-cols-1 md:grid-cols-3 gap-6 svelte-1p7gzb0"><div class="space-y-2 svelte-1p7gzb0"><label for="fecha" class="block text-sm font-medium svelte-1p7gzb0">Fecha</label> <input type="date" id="fecha" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none svelte-1p7gzb0"/></div> <div class="space-y-2 svelte-1p7gzb0"><label for="docente" class="block text-sm font-medium svelte-1p7gzb0">Docente</label> <select id="docente" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-1p7gzb0"><option class="svelte-1p7gzb0"> </option><!></select></div> <div class="space-y-2 svelte-1p7gzb0"><label for="materia" class="block text-sm font-medium svelte-1p7gzb0">Asignatura</label> <select id="materia" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-1p7gzb0"><option class="svelte-1p7gzb0"> </option><!></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-1p7gzb0"><div class="space-y-2 svelte-1p7gzb0"><label for="grado" class="block text-sm font-medium svelte-1p7gzb0">Grado</label> <select id="grado" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-1p7gzb0"><option class="svelte-1p7gzb0"> </option><!></select></div> <div class="space-y-2 svelte-1p7gzb0"><label for="horas" class="block text-sm font-medium svelte-1p7gzb0">Horas</label> <select id="horas" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer svelte-1p7gzb0"><option class="svelte-1p7gzb0">Seleccione horas</option><!></select></div></div> <div class="space-y-2 svelte-1p7gzb0"><label for="search" class="block text-sm font-medium svelte-1p7gzb0">Buscar anotaciones</label> <div class="relative svelte-1p7gzb0"><input type="text" id="search" placeholder="Buscar por palabra clave o categor√≠a..." class="w-full px-4 py-3 pl-12 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none svelte-1p7gzb0"/> <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" class="svelte-1p7gzb0"></path></svg> <!></div> <!></div> <div class="space-y-8 svelte-1p7gzb0"><!></div> <div class="space-y-2 svelte-1p7gzb0"><label for="observacion" class="block text-sm font-medium svelte-1p7gzb0">Observaci√≥n</label> <textarea id="observacion" rows="3" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none resize-none svelte-1p7gzb0" placeholder="Observaciones adicionales (opcional)..."></textarea></div> <div class="fixed bottom-8 right-8 z-50 svelte-1p7gzb0"><button type="submit" class="w-16 h-16 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-400 dark:disabled:bg-slate-700 disabled:cursor-not-allowed disabled:scale-100 text-white rounded-full shadow-2xl transition-all duration-300 transform hover:scale-110 active:scale-95 backdrop-blur-sm bg-opacity-95 flex items-center justify-center overflow-hidden border border-white/20 svelte-1p7gzb0" aria-label="Guardar Anotaci√≥n"><!></button></div></form></div></main></div> <!> <!>',1);function Ol(V,k){xr(k,!1);const d=()=>xo(qr,"$theme",we),[we,c]=fo(),M=b(),t=b(),he=b(),Fe=b();let B=Ct(k,"onBack",8),le=b([]),J=b([]),Y=b([]),A=b(!1),E=b(!1),I=b(!1),l=b(!1),p=b({}),S=b({}),L=b(""),T=b({}),O=b([]),je=b(""),Se=b("");const Ke=h=>{ye(S,e(S)[h]=!e(S)[h]),i(S,e(S))},vt=(h,N)=>{const ve=e(p)[h].indexOf(N);if(ve!==-1){const _e={...N,selected:!N.selected},Ne=[...e(p)[h].slice(0,ve),_e,...e(p)[h].slice(ve+1)];i(p,{...e(p),[h]:Ne}),console.log("üîÑ Anotaci√≥n toggle:",{categoria:h,index:ve,texto:_e.text,nuevoEstado:_e.selected,totalSeleccionadas:Object.values(e(p)).flat().filter(et=>et.selected).length})}},Ze=h=>({"C√ÅTEDRA DE LA PAZ":"#8b5cf6","CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL":"#10b981","CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y":"#f59e0b","DIRECCI√ìN DE GRUPO":"#3b82f6","EDUCACI√ìN ART√çSTICA":"#f43f5e","EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES":"#ef4444","EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS":"#8b5cf6",EMPRENDIMIENTO:"#f97316",ESTAD√çSTICA:"#06b6d4","FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS":"#6366f1",F√çSICA:"#3b82f6",INGL√âS:"#14b8a6","LENGUA CASTELLANA":"#10b981",MATEM√ÅTICAS:"#3b82f6","PROYECTO Y EMPRENDIMIENTO":"#f97316",QU√çMICA:"#06b6d4","TECNOLOG√çA E INFORM√ÅTICA":"#6366f1","√âTICA PROFESIONAL":"#8b5cf6","Estrategias de Ense√±anza-Aprendizaje":"#6366f1","Evaluaci√≥n y Verificaci√≥n de Saberes":"#10b981","Enfoque STEM+ y Contexto Rural":"#f59e0b","Pr√°cticas de Laboratorio y Mantenimiento":"#f43f5e","Ciudadan√≠a Digital y √âtica":"#8b5cf6","Pensamiento Computacional y Programaci√≥n":"#06b6d4","Recursos Anal√≥gicos y Contingencias":"#f97316","Ofim√°tica y Competencias Productivas":"#14b8a6","Gesti√≥n Administrativa y Proyectos Transversales":"#3b82f6"})[h]||"#6366f1",lt={MATEM√ÅTICAS:"MATEM√ÅTICAS","LENGUA CASTELLANA":"LENGUA CASTELLANA",INGL√âS:"INGL√âS","CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL":"CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL","CIENCIAS NATURALES":"CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL","CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y":"CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y","CIENCIAS SOCIALES":"CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y",F√çSICA:"F√çSICA",QU√çMICA:"QU√çMICA","EDUCACI√ìN ART√çSTICA":"EDUCACI√ìN ART√çSTICA","EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES":"EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES","EDUCACI√ìN F√çSICA":"EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES","TECNOLOG√çA E INFORM√ÅTICA":"TECNOLOG√çA E INFORM√ÅTICA",TECNOLOG√çA:"TECNOLOG√çA E INFORM√ÅTICA",INFORM√ÅTICA:"TECNOLOG√çA E INFORM√ÅTICA",EMPRENDIMIENTO:"EMPRENDIMIENTO","FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS":"FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS",FILOSOF√çA:"FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS",ESTAD√çSTICA:"ESTAD√çSTICA","EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS":"EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS",√âTICA:"EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS","DIRECCI√ìN DE GRUPO":"DIRECCI√ìN DE GRUPO","PROYECTO Y EMPRENDIMIENTO":"PROYECTO Y EMPRENDIMIENTO",PROYECTO:"PROYECTO Y EMPRENDIMIENTO","C√ÅTEDRA DE LA PAZ":"C√ÅTEDRA DE LA PAZ","√âTICA PROFESIONAL":"√âTICA PROFESIONAL"},oe=h=>{if(!e(x).materia)return h;let N=lt[e(x).materia.toUpperCase()]||lt[e(x).materia]||"";if(!N){const ve=e(x).materia.toUpperCase();for(const[_e,Ne]of Object.entries(lt))if(_e.includes(ve)||ve.includes(_e)){N=Ne;break}}return console.log("Materia seleccionada:",e(x).materia,"‚Üí Categor√≠a:",N),h.sort(([ve],[_e])=>ve===N&&_e!==N?-1:_e===N&&ve!==N?1:ve.localeCompare(_e))};let x=b({fecha:new Date().toISOString().split("T")[0],docente:localStorage.getItem("lastDocente")||"",materia:"",horas:"",grado:"",anotacion:"",observacion:""}),ae=b(JSON.parse(localStorage.getItem("docenteMaterias")||"{}"));const Re=(h,N)=>{!h||!N||(e(ae)[h]||ye(ae,e(ae)[h]=[]),e(ae)[h].includes(N)||(ye(ae,e(ae)[h]=[...e(ae)[h],N]),localStorage.setItem("docenteMaterias",JSON.stringify(e(ae)))))};let $e=b(localStorage.getItem("dismissedInfoAnotadorContent")!==wo);const ne=()=>{i($e,!1),localStorage.setItem("dismissedInfoAnotadorContent",wo)};let U=b(!1),re=b(!1),X=b(!1);const Ge=()=>{i(re,!0)},ze=()=>{i(re,!1)},pe=()=>{i(X,!0)},Q=()=>{i(X,!1)};let Ae=b(!0);const Qe="¬°Nueva funci√≥n de filtrado avanzado disponible!";function Le(){return!0}const Ue=()=>{localStorage.setItem("dismissedFeatureAlertAnotador",new Date().toISOString()),i(Ae,!1)},y=()=>{localStorage.setItem("dismissedFeatureAlertAnotador",new Date().toISOString()),Ge()},g=()=>`https://docs.google.com/spreadsheets/d/${bo}`,w=()=>{window.open(g(),"_blank")},D=()=>{qr.update(h=>h==="light"?"dim":h==="dim"?"dark":"light")},H=async()=>{i(A,!0),i(E,!0),i(I,!0),i(l,!0);try{const[h,N,ve,_e]=await Promise.all([Jr(),Kr(),Zr(),ya()]);i(le,h),i(J,N),i(Y,ve);const Ne={},et={};for(const[_t,m]of Object.entries(_e))Ne[_t]=m.map(F=>({text:F,selected:!1})),et[_t]=!1;i(p,Ne),i(S,et)}catch(h){console.error("Error cargando datos iniciales:",h)}finally{i(A,!1),i(E,!1),i(I,!1),i(l,!1)}},K=async h=>{if(h.preventDefault(),e(U))return;const N=Object.values(e(p)).flat().filter(Ne=>Ne.selected).map(Ne=>Ne.text),ve=N.join(" | ");if((await jt.fire({title:"¬øConfirmar Registro?",html:`
        <div class="text-left space-y-2 p-2 rounded-xl bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10" style="font-size: 0.9rem; line-height: 1.4;">
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Fecha:</strong> ${e(x).fecha}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Docente:</strong> ${e(x).docente}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Asignatura:</strong> ${e(x).materia}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Grado:</strong> ${e(x).grado}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Horas:</strong> ${e(x).horas}</div>
          <div style="margin-top: 12px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 8px;">
            <strong style="color: #6366f1;">Anotaciones:</strong>
            <ul style="list-style-type: disc; padding-left: 20px; margin-top: 4px; font-size: 0.8rem; opacity: 0.8;">
              ${N.map(Ne=>`<li>${Ne}</li>`).join("")}
            </ul>
          </div>
          ${e(x).observacion?`<div style="margin-top: 12px;"><strong style="color: #6366f1;">Observaci√≥n:</strong> <span style="font-size: 0.8rem;">${e(x).observacion}</span></div>`:""}
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonText:"Si, de acuerdo",cancelButtonText:"No",confirmButtonColor:"#4f46e5",cancelButtonColor:"#64748b",reverseButtons:!0,background:d()==="light"?"#fff":"#1e293b",color:d()==="light"?"#1e293b":"#f1f5f9"})).isConfirmed){i(U,!0);try{const et=[[new Date().toLocaleString(),e(x).fecha,e(x).docente,e(x).materia,e(x).grado,e(x).horas,ve,e(x).observacion]];await ka({spreadsheetId:bo,worksheetTitle:Do,datos:et}),Re(e(x).docente,e(x).materia),await jt.fire({icon:"success",title:"¬°√âxito!",text:"Anotaci√≥n registrada exitosamente",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),i(x,{fecha:new Date().toISOString().split("T")[0],docente:e(x).docente,materia:e(x).materia,grado:e(x).grado,horas:"",anotacion:"",observacion:""});for(const _t in e(p))ye(p,e(p)[_t]=e(p)[_t].map(m=>({...m,selected:!1})));i(p,{...e(p)})}catch(Ne){console.error("Error enviando:",Ne),await jt.fire({icon:"error",title:"Error",text:"Error al registrar la anotaci√≥n",confirmButtonColor:"#ef4444"})}finally{i(U,!1)}}};vr(()=>{H(),i(Ae,Le())}),Be(()=>(e(x),e(Se)),()=>{if(e(x).materia&&e(x).materia!==e(Se)){i(Se,e(x).materia);let h=lt[e(x).materia.toUpperCase()]||lt[e(x).materia]||"";if(!h){const N=e(x).materia.toUpperCase();for(const[ve,_e]of Object.entries(lt))if(ve.includes(N)||N.includes(ve)){h=_e;break}}h&&(i(je,h),console.log("‚ú® Categoria destacada:",h),setTimeout(()=>{i(je,"")},3e3))}}),Be(()=>(e(p),e(L)),()=>{i(T,Object.entries(e(p)).reduce((h,[N,ve])=>{if(!e(L).trim())return h[N]=ve,h;const _e=e(L).toLowerCase().trim(),Ne=ve.filter(et=>et.text.toLowerCase().includes(_e));return Ne.length>0&&(h[N]=Ne),h},{}))}),Be(()=>(e(J),e(x),e(p),e(T),e(O)),()=>{console.log("üîÑ Reactividad actualizada"),console.log("üìö Materias disponibles:",e(J).map(h=>h.materia)),console.log("‚úçÔ∏è Materia seleccionada:",e(x).materia),console.log("üìä Categor√≠as disponibles:",Object.keys(e(p))),console.log("üîç Categor√≠as filtradas:",Object.keys(e(T))),i(O,oe(Object.entries(e(T)))),console.log("üìã Entradas ordenadas:",e(O).map(([h])=>h))}),Be(()=>e(x),()=>{e(x).docente&&localStorage.setItem("lastDocente",e(x).docente)}),Be(()=>(e(x),e(J),e(ae)),()=>{i(M,e(x).docente?[...e(J)].sort((h,N)=>{const ve=e(ae)[e(x).docente]?.includes(h.materia),_e=e(ae)[e(x).docente]?.includes(N.materia);return ve&&!_e?-1:!ve&&_e?1:h.materia.localeCompare(N.materia)}):e(J))}),Be(()=>{},()=>{i(t,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Be(()=>e(p),()=>{i(he,Object.values(e(p)).flat().some(h=>h.selected))}),Be(()=>(e(x),e(he)),()=>{i(Fe,e(x).fecha&&e(x).docente&&e(x).materia&&e(x).grado&&e(x).horas&&e(he))}),Be(()=>(e(x),e(he),e(Fe),e(p)),()=>{console.log("üîç Validaci√≥n formulario:",{fecha:e(x).fecha,docente:e(x).docente,materia:e(x).materia,grado:e(x).grado,horas:e(x).horas,hasSelectedAnotacion:e(he),isFormValid:e(Fe),totalAnotaciones:Object.values(e(p)).flat().length,selectedCount:Object.values(e(p)).flat().filter(h=>h.selected).length})}),Er(),Ir();var se=Tl(),Ee=Kt(se),Z=o(Ee),j=o(Z),ee=o(j),ue=o(ee),fe=a(ue,2),qe=a(ee,2),Je=o(qe),de=a(Je,2),P=a(o(de),4);{var q=h=>{var N=ul();v(h,N)};te(P,h=>{e(Ae)&&h(q)})}var ce=a(de,2),Me=a(ce,2),n=a(Me,2),f=o(n);{var $=h=>{var N=bl();v(h,N)},R=h=>{var N=fl();v(h,N)},Ce=h=>{var N=xl();v(h,N)};te(f,h=>{d()==="dark"?h($):d()==="light"?h(R,1):h(Ce,!1)})}var He=a(f,2),Ve=o(He),Ie=a(Z,2),Mt=o(Ie),Ut=o(Mt);{var Vt=h=>{var N=hl(),ve=a(o(N),2),_e=a(o(ve),2),Ne=o(_e),et=a(ve,2);C(()=>u(Ne,wo)),G("click",et,ne),v(h,N)};te(Ut,h=>{e($e)&&h(Vt)})}var Yt=a(Ut,2);uo(Yt,{featureMessage:Qe,description:"Ahora puedes filtrar tus anotaciones de forma avanzada. ¬°Pru√©balo!",onTryNow:y,onDismiss:Ue,targetSelector:"#filter-button-target",showPopup:!1,colorTheme:"purple"});var Wt=a(Yt,2),ht=o(Wt),St=o(ht),Xe=o(St),At=a(Xe,2),Et=a(St,2),Pt=o(Et),It=a(Pt,2),wt=o(It),Zt=o(wt);wt.value=wt.__value="";var mr=a(wt);xe(mr,1,()=>e(le),ke,(h,N)=>{var ve=ml(),_e=o(ve),Ne={};C(()=>{u(_e,e(N)),Ne!==(Ne=e(N))&&(ve.value=(ve.__value=e(N))??"")}),v(h,ve)});var gr=a(Et,2),pr=o(gr),W=a(pr,2),ie=o(W),Ye=o(ie);ie.value=ie.__value="";var ot=a(ie);xe(ot,1,()=>e(M),ke,(h,N)=>{const ve=Lt(()=>(e(ae),e(x),e(N),r(()=>e(ae)[e(x).docente]?.includes(e(N).materia))));var _e=_l(),Ne=o(_e),et={};C(()=>{s(_e,e(ve)?"color: #6366f1; font-weight: 600;":""),u(Ne,`${e(ve)?"‚≠ê ":""}${e(N),r(()=>e(N).materia)??""}`),et!==(et=(e(N),r(()=>e(N).materia)))&&(_e.value=(_e.__value=(e(N),r(()=>e(N).materia)))??"")}),v(h,_e)});var mt=a(ht,2),Ht=o(mt),zr=o(Ht),_r=a(zr,2),sr=o(_r),Gr=o(sr);sr.value=sr.__value="";var Qr=a(sr);xe(Qr,1,()=>(e(Y),r(()=>[...new Set(e(Y).map(h=>h.grado.toString()))])),ke,(h,N)=>{var ve=yl(),_e=o(ve),Ne={};C(et=>{u(_e,et),Ne!==(Ne=e(N))&&(ve.value=(ve.__value=e(N))??"")},[()=>(e(N),r(()=>e(N).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),v(h,ve)});var Mr=a(Ht,2),yr=o(Mr),Tr=a(yr,2),kr=o(Tr);kr.value=kr.__value="";var Br=a(kr);xe(Br,0,()=>[1,2,3,4],ke,(h,N)=>{var ve=kl(),_e=o(ve),Ne={};C(et=>{u(_e,`${N??""} ${N===1?"Hora":"Horas"}`),Ne!==(Ne=et)&&(ve.value=(ve.__value=et)??"")},[()=>r(()=>N.toString())]),v(h,ve)});var Or=a(mt,2),Ur=o(Or),De=a(Ur,2),at=o(De),gt=a(at,2),Gt=a(gt,2);{var Qt=h=>{var N=wl();C(()=>s(N,`color: ${e(t),r(()=>e(t).placeholder)??""};`)),G("click",N,()=>i(L,"")),v(h,N)};te(Gt,h=>{e(L)&&h(Qt)})}var Vr=a(De,2);{var me=h=>{var N=$l(),ve=a(o(N),2),_e=o(ve);C(()=>{s(N,`color: ${e(t),r(()=>e(t).placeholder)??""};`),u(_e,`No se encontraron anotaciones para "${e(L)??""}"`)}),v(h,N)},We=Co(()=>(e(L),e(T),r(()=>e(L)&&Object.keys(e(T)).length===0)));te(Vr,h=>{e(We)&&h(me)})}var nt=a(Or,2),Bt=o(nt);{var Tt=h=>{var N=Cl(),ve=o(N);io(ve,{message:"Cargando opciones de anotaci√≥n..."}),v(h,N)},lr=h=>{var N=go(),ve=Kt(N);xe(ve,1,()=>e(O),ke,(_e,Ne)=>{var et=Co(()=>To(e(Ne),2));let _t=()=>e(et)[0],m=()=>e(et)[1];const F=Lt(()=>(_t(),r(()=>Ze(_t())))),ge=Lt(()=>(m(),r(()=>m().length)));var Te=Fl(),dt=o(Te),Ft=o(dt),pt=o(Ft),z=o(pt),ct=a(z);{var tt=ut=>{var Rt=Sl();v(ut,Rt)};te(ct,ut=>{_t()===e(je)&&ut(tt)})}var st=a(pt,2);{var zt=ut=>{var Rt=Al(),$r=o(Rt);C(()=>{s(Rt,`color: ${e(F)??""};`),u($r,`(${e(ge)??""} resultado${e(ge)!==1?"s":""})`)}),v(ut,Rt)};te(st,ut=>{e(L)&&ut(zt)})}var Ot=a(Ft,2);{var nr=ut=>{var Rt=Dl();C(()=>s(Rt,`background-color: ${e(F)??""}; opacity: 0.2;`)),v(ut,Rt)};te(Ot,ut=>{e(L)||ut(nr)})}var qt=a(Ot,2);let tr;var ir=a(dt,2);{var br=ut=>{var Rt=Bl();xe(Rt,5,m,ke,($r,yt,Cr)=>{const Nt=Lt(()=>(e(L),e(yt),r(()=>e(L)&&e(yt).text.toLowerCase().includes(e(L).toLowerCase()))));var rr=Il(),Sr=o(rr),Pr=o(Sr),or=o(Pr),Hr=a(or,2),Ar=o(Hr);{var dr=kt=>{var Dt=El();v(kt,Dt)};te(Ar,kt=>{e(yt),r(()=>e(yt).selected)&&kt(dr)})}var Jt=a(Pr,2);C(()=>{s(rr,`
                          background-color: ${e(yt),Oe(e(F)),Oe(e(Nt)),e(t),r(()=>e(yt).selected?`${e(F)}10`:e(Nt)?`${e(F)}05`:e(t).inputBg)??""};
                          border-color: ${e(yt),Oe(e(F)),Oe(e(Nt)),e(t),r(()=>e(yt).selected?e(F):e(Nt)?e(F):e(t).border)??""};
                        `),Wo(or,(e(yt),r(()=>e(yt).selected))),s(Hr,`
                              border-color: ${e(yt),Oe(e(F)),e(t),r(()=>e(yt).selected?e(F):e(t).border)??""};
                              background-color: ${e(yt),Oe(e(F)),r(()=>e(yt).selected?e(F):"transparent")??""};
                            `),s(Jt,`color: ${e(t),r(()=>e(t).text)??""};`)}),G("change",or,()=>vt(_t(),e(yt))),fr(Jt,()=>e(yt).text,kt=>(e(yt).text=kt,Pe(()=>(m(),e(O))))),v($r,rr)}),co(3,Rt,()=>Mo),v(ut,Rt)};te(ir,ut=>{e(S),_t(),r(()=>e(S)[_t()])&&ut(br)})}C(()=>{er(pt,1,`text-xs font-black uppercase tracking-widest px-3 py-1 rounded-full text-white flex-shrink-0 transition-all duration-300 group-hover:shadow-md ${_t()===e(je)?"animate-glow ring-4 ring-opacity-50":""}`,"svelte-1p7gzb0"),s(pt,`background-color: ${e(F)??""}; ${_t()===e(je)?`box-shadow: 0 0 25px ${e(F)}60, 0 0 50px ${e(F)}30; ring-color: ${e(F)}; border: 2px solid ${e(F)};`:""}`),u(z,`${_t()??""} `),tr=er(qt,0,"w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0 svelte-1p7gzb0",null,tr,{"rotate-180":e(S)[_t()]})}),G("click",dt,()=>Ke(_t())),v(_e,Te)}),v(h,N)};te(Bt,h=>{e(l)?h(Tt):h(lr,!1)})}var Yr=a(nt,2),Nr=o(Yr),jr=a(Nr,2),Wr=a(Yr,2),Fr=o(Wr),Rr=o(Fr);{var be=h=>{var N=zl();v(h,N)},Xt=h=>{var N=Ml();v(h,N)};te(Rr,h=>{e(U)?h(be):h(Xt,!1)})}var ar=a(Ee,2);{var wr=h=>{el(h,{onClose:ze,get selectedDocente(){return e(x),r(()=>e(x).docente)}})};te(ar,h=>{e(re)&&h(wr)})}var Lr=a(ar,2);{var ur=h=>{pl(h,{onClose:Q,get initialDocente(){return e(x),r(()=>e(x).docente)}})};te(Lr,h=>{e(X)&&h(ur)})}C(()=>{s(Ee,`background-color: ${e(t),r(()=>e(t).bg)??""};`),s(Z,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),$t(ue,"src",ro),s(fe,`color: ${e(t),r(()=>e(t).text)??""};`),s(Je,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(de,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(ce,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(Me,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(n,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),u(Ve,d()),s(Mt,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),s(Xe,`color: ${e(t),r(()=>e(t).label)??""};`),s(At,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""}; color-scheme: ${d()==="light"?"light":"dark"};`),s(Pt,`color: ${e(t),r(()=>e(t).label)??""};`),s(It,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),u(Zt,e(A)?"Cargando...":"Seleccione docente"),s(pr,`color: ${e(t),r(()=>e(t).label)??""};`),s(W,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),u(Ye,e(E)?"Cargando...":"Seleccione asignatura"),s(zr,`color: ${e(t),r(()=>e(t).label)??""};`),s(_r,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),u(Gr,e(I)?"Cargando...":"Seleccione grado"),s(yr,`color: ${e(t),r(()=>e(t).label)??""};`),s(Tr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(Ur,`color: ${e(t),r(()=>e(t).label)??""};`),s(at,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(gt,`color: ${e(t),r(()=>e(t).placeholder)??""};`),s(Nr,`color: ${e(t),r(()=>e(t).label)??""};`),s(jr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),Fr.disabled=e(U)||!e(Fe),$t(Fr,"title",e(Fe)?"Guardar Anotaci√≥n":"Complete todos los campos requeridos y al menos una anotaci√≥n")}),G("click",Je,w),G("click",de,Ge),G("click",ce,pe),G("click",Me,function(...h){B()?.apply(this,h)}),G("click",n,D),fr(At,()=>e(x).fecha,h=>(ye(x,e(x).fecha=h),Pe(()=>{e(t),e(A),e(le),e(E),e(M),e(ae),e(I),e(Y)}))),rt(It,()=>e(x).docente,h=>(ye(x,e(x).docente=h),Pe(()=>{e(t),e(A),e(le),e(E),e(M),e(ae),e(I),e(Y)}))),rt(W,()=>e(x).materia,h=>(ye(x,e(x).materia=h),Pe(()=>{e(t),e(A),e(le),e(E),e(M),e(ae),e(I),e(Y)}))),rt(_r,()=>e(x).grado,h=>(ye(x,e(x).grado=h),Pe(()=>{e(t),e(A),e(le),e(E),e(M),e(ae),e(I),e(Y)}))),rt(Tr,()=>e(x).horas,h=>(ye(x,e(x).horas=h),Pe(()=>{e(t),e(A),e(le),e(E),e(M),e(ae),e(I),e(Y)}))),fr(at,()=>e(L),h=>i(L,h)),fr(jr,()=>e(x).observacion,h=>(ye(x,e(x).observacion=h),Pe(()=>{e(t),e(A),e(le),e(E),e(M),e(ae),e(I),e(Y)}))),G("submit",Wt,K),v(V,se),hr(),c()}var Nl=_('<div class="flex items-center justify-center py-12"><!></div>'),jl=xt('<svg class="w-3 h-3 text-white" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),Rl=_('<div class="relative group flex flex-col p-0 rounded-2xl border transition-all duration-200 shadow-sm hover:shadow-md"><div class="flex flex-col p-4 gap-3"><div class="flex items-start justify-between gap-2"><div class="flex items-center gap-2"><label class="flex-shrink-0 cursor-pointer"><input type="checkbox" class="hidden"/> <div class="w-5 h-5 rounded border flex items-center justify-center transition-colors"><!></div></label> <span class="font-bold text-sm leading-tight"> </span></div> <div class="flex gap-1.5 flex-shrink-0"><span class="text-[10px] font-bold px-1.5 py-0.5 rounded bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 opacity-60"> </span> <span class="text-[10px] font-bold px-1.5 py-0.5 rounded bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 opacity-60"> </span></div></div> <textarea rows="4" class="w-full bg-transparent border-none focus:ring-0 text-sm font-medium leading-relaxed resize-none p-0 transition-colors opacity-80" placeholder="Escriba aqu√≠..."></textarea></div></div>'),Ll=_('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>'),Pl=_('<div class="space-y-4"><button type="button" class="flex items-center gap-3 w-full text-left cursor-pointer group focus:outline-none"><h3 class="text-xs font-black uppercase tracking-widest px-3 py-1 rounded-full text-white flex-shrink-0 transition-all duration-300 group-hover:shadow-md"> </h3> <div class="h-px flex-1 transition-all duration-300 group-hover:opacity-50"></div> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>'),Hl=_('<div class="space-y-8"><!></div>');function Gl(V,k){xr(k,!1);const d=b();let we=Ct(k,"selectedDiarioAnots",28,()=>[]),c=b({}),M=b({}),t=b(!1);const he=qo(),Fe=I=>{if(e(M)[I])ye(M,e(M)[I]=!1);else{for(const l in e(M))ye(M,e(M)[l]=!1);ye(M,e(M)[I]=!0)}i(M,e(M))},B=I=>({Administrativo:"#6366f1",Emergencia:"#ef4444",Acad√©mico:"#f59e0b",Convivencia:"#22c55e",Infraestructura:"#0ea5e9",Salud:"#ec4899",Tecnol√≥gico:"#8b5cf6",Comunicaci√≥n:"#3b82f6",Disciplinario:"#64748b",Normalidad:"#10b981"})[I]||"#6366f1",le=async()=>{i(t,!0);try{const l=(await ha()).situaciones||{},p={},S={};Object.entries(l).forEach(([L,T])=>{T.length>0&&(S[L]=!1,p[L]=T.map(O=>({id:O.id,text:O.descripcion,selected:!1,originalTitulo:O.titulo,categoria:O.categoria,impacto:O.impacto,tiempo_estimado:O.tiempo_estimado})))}),i(c,p),i(M,S)}catch(I){console.error("Error cargando opciones de diario:",I)}finally{i(t,!1)}};vr(()=>{le()}),Be(()=>(e(c),Oe(we())),()=>{const I=Object.values(e(c)).flat().filter(l=>l.selected&&l.text.trim()!=="").map(l=>`[${l.categoria}] ${l.originalTitulo}: ${l.text}`);JSON.stringify(I)!==JSON.stringify(we())&&(we(I),he("change",we()))}),Be(()=>{},()=>{i(d,{text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",inputBg:"rgb(var(--bg-secondary))"})}),Er(),Ir();var J=Hl(),Y=o(J);{var A=I=>{var l=Nl(),p=o(l);io(p,{message:"Cargando opciones de diario..."}),v(I,l)},E=I=>{var l=go(),p=Kt(l);xe(p,1,()=>(e(c),r(()=>Object.entries(e(c)))),ke,(S,L)=>{var T=Co(()=>To(e(L),2));let O=()=>e(T)[0],je=()=>e(T)[1];const Se=Lt(()=>(O(),r(()=>B(O()))));var Ke=Pl(),vt=o(Ke),Ze=o(vt),lt=o(Ze),oe=a(Ze,2),x=a(oe,2);let ae;var Re=a(vt,2);{var $e=ne=>{var U=Ll();xe(U,5,je,re=>re.id,(re,X,Ge)=>{var ze=Rl(),pe=o(ze),Q=o(pe),Ae=o(Q),Qe=o(Ae),Le=o(Qe),Ue=a(Le,2),y=o(Ue);{var g=ee=>{var ue=jl();v(ee,ue)};te(y,ee=>{e(X),r(()=>e(X).selected)&&ee(g)})}var w=a(Qe,2),D=o(w),H=a(Ae,2),K=o(H),se=o(K),Ee=a(K,2),Z=o(Ee),j=a(Q,2);C(()=>{s(ze,`
                  background-color: ${e(X),Oe(e(Se)),e(d),r(()=>e(X).selected?`${e(Se)}10`:e(d).inputBg)??""};
                  border-color: ${e(X),Oe(e(Se)),e(d),r(()=>e(X).selected?e(Se):e(d).border)??""};
                `),s(Ue,`
                            border-color: ${e(X),Oe(e(Se)),e(d),r(()=>e(X).selected?e(Se):e(d).border)??""};
                            background-color: ${e(X),Oe(e(Se)),r(()=>e(X).selected?e(Se):"transparent")??""};
                          `),s(w,`color: ${e(d),r(()=>e(d).text)??""};`),u(D,(e(X),r(()=>e(X).originalTitulo))),s(K,`color: ${e(d),r(()=>e(d).text)??""};`),u(se,`IMP: ${e(X),r(()=>e(X).impacto)??""}`),s(Ee,`color: ${e(d),r(()=>e(d).text)??""};`),u(Z,`${e(X),r(()=>e(X).tiempo_estimado)??""} MIN`),s(j,`color: ${e(d),r(()=>e(d).text)??""};`)}),Ao(Le,()=>e(X).selected,ee=>(e(X).selected=ee,Pe(()=>(je(),e(c))))),G("change",Le,()=>{i(c,e(c))}),fr(j,()=>e(X).text,ee=>(e(X).text=ee,Pe(()=>(je(),e(c))))),G("input",j,()=>{i(c,e(c))}),v(re,ze)}),co(3,U,()=>Mo),v(ne,U)};te(Re,ne=>{e(M),O(),r(()=>e(M)[O()])&&ne($e)})}C(()=>{s(Ze,`background-color: ${e(Se)??""};`),u(lt,O()),s(oe,`background-color: ${e(Se)??""}; opacity: 0.2;`),ae=er(x,0,"w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0",null,ae,{"rotate-180":e(M)[O()]})}),G("click",vt,()=>Fe(O())),v(S,Ke)}),v(I,l)};te(Y,I=>{e(t)?I(A):I(E,!1)})}v(V,J),hr()}var Ul=_("<option> </option>"),Vl=_("<option> </option>"),Yl=_("<option> </option>"),Wl=xt('<svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Cargando...',1),ql=xt('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> Aplicar Filtros',1),Jl=_('<div class="text-sm opacity-75"> </div>'),Kl=_('<div class="flex items-center justify-center py-12"><!></div>'),Zl=_('<div class="text-center py-12"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-lg font-medium mb-2">No hay datos disponibles</p> <p class="text-sm"> </p></div>'),Ql=_('<tr class="border-t transition-colors hover:bg-gray-50 dark:hover:bg-gray-800"><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"><div class="truncate"> </div></td></tr>'),Xl=_('<tr class="border-t-2 font-bold bg-gray-100 dark:bg-gray-800"><td class="px-4 py-3 text-sm font-bold">TOTAL</td><td class="px-4 py-3 text-sm font-bold text-center"> </td><td class="px-4 py-3 text-sm"></td><td class="px-4 py-3 text-sm"></td><td class="px-4 py-3 text-sm font-bold text-center"> </td></tr>'),en=_('<div class="overflow-x-auto rounded-lg border"><table class="w-full"><thead><tr><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Fecha</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Horas</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Asignatura</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Grado</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Diario de Campo</th></tr></thead><tbody><!><!></tbody></table></div>'),tn=_('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-2xl" role="document"><div class="flex items-center justify-between p-6 border-b"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h2 id="modal-title" class="text-xl font-bold">Generador de Reportes PDF</h2> <p class="text-sm opacity-75">Filtre y genere reportes del Diario de Campo</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar ventana"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 140px);"><div class="mb-6 p-4 rounded-xl border"><h3 class="text-lg font-semibold mb-4">Filtros</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="space-y-2"><label for="docente-filter" class="block text-sm font-medium">Docente</label> <select id="docente-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los docentes</option><!></select></div> <div class="space-y-2"><label for="materia-filter" class="block text-sm font-medium">Asignatura</label> <select id="materia-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todas las asignaturas</option><!></select></div> <div class="space-y-2"><label for="grado-filter" class="block text-sm font-medium">Grado</label> <select id="grado-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los grados</option><!></select></div></div> <div class="flex gap-3 mt-4"><button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2"><!></button> <button class="px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> Limpiar</button> <button class="ml-auto px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Generar PDF</button></div></div> <div class="mb-4"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold"> </h3> <!></div></div> <!></div></div></div>');function rn(V,k){xr(k,!1);const d=b(),we=b(),c=b();let M=null,t=null,he=Ct(k,"onClose",8),Fe=Ct(k,"initialDocente",8,""),B=b([]),le=b([]),J=b([]),Y=[],A=b([]),E=b(!1);const I=async()=>{if(!M||!t){const[n,f]=await Promise.all([so(()=>import("./pdf-CBBHH09D.js").then($=>$.j),[]),so(()=>import("./pdf-CBBHH09D.js").then($=>$.b),[])]);M=n.default,t=f.default}};let l=b(JSON.parse(localStorage.getItem("docenteMateriasDiario")||"{}")),p=b(""),S=b(""),L=b("");vr(()=>{Fe()&&i(p,Fe())}),vr(async()=>{await T()});const T=async()=>{try{const[n,f,$]=await Promise.all([Jr(),Kr(),Zr()]);i(B,n),i(le,f),i(J,$),i(l,JSON.parse(localStorage.getItem("docenteMateriasDiario")||"{}"))}catch(n){console.error("Error cargando datos iniciales:",n)}},O=async()=>{i(E,!0);try{const n={spreadsheetId:So,worksheetTitle:Oo};e(p)&&(n.docente=e(p)),e(S)&&(n.materia=e(S)),e(L)&&(n.grado=e(L));const f=await ma(n);let $=f;if(f&&typeof f=="object"&&(f.data?$=f.data:f.records?$=f.records:Array.isArray(f)&&($=f)),Y=Array.isArray($)?$:[],Y.length>0&&Y[0].values){const R=["Marca Temporal","Fecha","Horas","Docente","Asignatura","Grado","Diario de Campo"];Y=Y.map(Ce=>{const He={"Marca Temporal":"",Fecha:"",Horas:"",Docente:"",Asignatura:"",Grado:"","Diario de Campo":""};return R.forEach((Ve,Ie)=>{He[Ve]=Ce.values?.[Ie]||""}),He})}je()}catch(n){console.error("Error cargando datos del diario:",n),Y=[],i(A,[])}finally{i(E,!1)}},je=()=>{if(!Array.isArray(Y)){i(A,[]);return}i(A,Y.filter(n=>{if(!n||typeof n!="object")return!1;const f=!e(p)||n.Docente===e(p),$=!e(S)||n.Asignatura===e(S),R=!e(L)||n.Grado===e(L);return f&&$&&R}))},Se=()=>{O()},Ke=()=>{i(p,""),i(S,""),i(L,""),Y=[],i(A,[])},vt=async()=>{if(await I(),e(A).length===0){alert("No hay datos para generar el PDF");return}const n=new M({format:"letter"}),f="Diario de Campo",$=[];e(p)&&$.push(`Docente: ${e(p)}`),e(S)&&$.push(`Asignatura: ${e(S)}`),e(L)&&$.push(`Grado: ${e(L)}`);let R=20;n.setTextColor(99,102,241),n.setFontSize(28),n.setFont("helvetica","bold"),n.text("EIE",n.internal.pageSize.getWidth()/2,R,{align:"center"}),R+=15,n.setTextColor(0,0,0),n.setFontSize(18),n.setFont("helvetica","bold"),n.text(f,n.internal.pageSize.getWidth()/2,R,{align:"center"}),R+=12,n.setTextColor(0,0,0),n.setFontSize(12),n.setFont("helvetica","normal"),n.text("Instituci√≥n Educativa Instituto Gu√°tica",n.internal.pageSize.getWidth()/2,R,{align:"center"}),R+=10,n.setTextColor(60,60,60),n.setFontSize(10),n.setFont("helvetica","normal"),n.text(`Fecha de generaci√≥n: ${new Date().toLocaleDateString()}`,n.internal.pageSize.getWidth()/2,R,{align:"center"}),R+=15,n.setDrawColor(200,200,200),n.setLineWidth(1),n.line(20,R,n.internal.pageSize.getWidth()-20,R),R+=15,$.length>0&&(n.setTextColor(80,80,80),n.setFontSize(9),n.setFont("helvetica","normal"),$.forEach(Ve=>{n.text(Ve,20,R,{align:"left"}),R+=6}),R+=10);const Ce=e(A).map(Ve=>[Ve.Fecha||"",Ve.Horas||"",Ve.Asignatura||"",Ve.Grado||"",Ve["Diario de Campo"]||""]);Ce.push(["TOTAL",e(d).toFixed(1),"","",`${e(A).length} registros`]),t(n,{head:[["Fecha","Horas","Asignatura","Grado","Diario de Campo"]],body:Ce,startY:R,styles:{fontSize:8,cellPadding:2,cellWidth:"wrap",valign:"top",overflow:"linebreak"},headStyles:{fillColor:[99,102,241],textColor:255,fontSize:9,fontStyle:"bold",halign:"center"},bodyStyles:{fillColor:[255,255,255],textColor:[0,0,0]},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:{0:{cellWidth:25,minCellHeight:8,halign:"center"},1:{cellWidth:15,minCellHeight:8,halign:"center"},2:{cellWidth:35,minCellHeight:8},3:{cellWidth:20,minCellHeight:8,halign:"center"},4:{cellWidth:"auto",minCellHeight:12}},margin:{top:15,right:15,bottom:15,left:15},tableWidth:"auto",didParseCell:Ve=>{Ve.row.index===Ce.length-1&&(Ve.cell.styles.fillColor=[240,240,240],Ve.cell.styles.fontStyle="bold",Ve.cell.styles.textColor=[0,0,0])}});const He=`reporte_diario_${e(p)||"todos"}_${e(S)||"todas"}_${e(L)||"todos"}_${new Date().toISOString().split("T")[0]}.pdf`;n.save(He)};Be(()=>e(A),()=>{i(d,e(A).reduce((n,f)=>{const $=parseFloat(f.Horas||"0");return n+(isNaN($)?0:$)},0))}),Be(()=>(e(p),e(le),e(l)),()=>{i(we,e(p)?[...e(le)].sort((n,f)=>{const $=e(l)[e(p)]?.includes(n.materia),R=e(l)[e(p)]?.includes(f.materia);return $&&!R?-1:!$&&R?1:n.materia.localeCompare(f.materia)}):e(le))}),Be(()=>{},()=>{i(c,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Er(),Ir();var Ze=tn(),lt=o(Ze),oe=o(lt),x=a(o(oe),2),ae=a(oe,2),Re=o(ae),$e=a(o(Re),2),ne=o($e),U=o(ne),re=a(U,2),X=o(re);X.value=X.__value="";var Ge=a(X);xe(Ge,1,()=>e(B),ke,(n,f)=>{var $=Ul(),R=o($),Ce={};C(()=>{u(R,e(f)),Ce!==(Ce=e(f))&&($.value=($.__value=e(f))??"")}),v(n,$)});var ze=a(ne,2),pe=o(ze),Q=a(pe,2),Ae=o(Q);Ae.value=Ae.__value="";var Qe=a(Ae);xe(Qe,1,()=>e(we),ke,(n,f)=>{const $=Lt(()=>(e(p),e(l),e(f),r(()=>e(p)&&e(l)[e(p)]?.includes(e(f).materia))));var R=Vl(),Ce=o(R),He={};C(()=>{s(R,e($)?"color: #6366f1; font-weight: 600;":""),u(Ce,`${e($)?"‚≠ê ":""}${e(f),r(()=>e(f).materia)??""}`),He!==(He=(e(f),r(()=>e(f).materia)))&&(R.value=(R.__value=(e(f),r(()=>e(f).materia)))??"")}),v(n,R)});var Le=a(ze,2),Ue=o(Le),y=a(Ue,2),g=o(y);g.value=g.__value="";var w=a(g);xe(w,1,()=>(e(J),r(()=>[...new Set(e(J).map(n=>n.grado.toString()))])),ke,(n,f)=>{var $=Yl(),R=o($),Ce={};C(He=>{u(R,He),Ce!==(Ce=e(f))&&($.value=($.__value=e(f))??"")},[()=>(e(f),r(()=>e(f).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),v(n,$)});var D=a($e,2),H=o(D),K=o(H);{var se=n=>{var f=Wl();v(n,f)},Ee=n=>{var f=ql();v(n,f)};te(K,n=>{e(E)?n(se):n(Ee,!1)})}var Z=a(H,2),j=a(Z,2),ee=a(Re,2),ue=o(ee),fe=o(ue),qe=o(fe),Je=a(fe,2);{var de=n=>{var f=Jl(),$=o(f);C(()=>u($,`${(e(p)&&`Docente: ${e(p)}`)??""}
              ${(e(S)&&` | Asignatura: ${e(S)}`)??""}
              ${(e(L)&&` | Grado: ${e(L)}`)??""}`)),v(n,f)};te(Je,n=>{e(A),r(()=>e(A).length>0)&&n(de)})}var P=a(ee,2);{var q=n=>{var f=Kl(),$=o(f);io($,{message:"Cargando datos del diario..."}),v(n,f)},ce=n=>{var f=Zl(),$=a(o(f),4),R=o($);C(()=>{s(f,`color: ${e(c),r(()=>e(c).placeholder)??""};`),u(R,e(p)||e(S)||e(L)?"No se encontraron registros con los filtros seleccionados.":"Seleccione filtros y haga clic en 'Aplicar Filtros'.")}),v(n,f)},Me=n=>{var f=en(),$=o(f),R=o($),Ce=o(R),He=o(Ce),Ve=a(He),Ie=a(Ve),Mt=a(Ie),Ut=a(Mt),Vt=a(R),Yt=o(Vt);xe(Yt,1,()=>e(A),ke,(St,Xe)=>{var At=Ql(),Et=o(At),Pt=o(Et),It=a(Et),wt=o(It),Zt=a(It),mr=o(Zt),gr=a(Zt),pr=o(gr),W=a(gr),ie=o(W),Ye=o(ie);C(()=>{s(At,`border-color: ${e(c),r(()=>e(c).border)??""};`),u(Pt,(e(Xe),r(()=>e(Xe).Fecha||"-"))),u(wt,(e(Xe),r(()=>e(Xe).Horas||"-"))),u(mr,(e(Xe),r(()=>e(Xe).Asignatura||"-"))),u(pr,(e(Xe),r(()=>e(Xe).Grado||"-"))),$t(ie,"title",(e(Xe),r(()=>e(Xe)["Diario de Campo"]))),u(Ye,(e(Xe),r(()=>e(Xe)["Diario de Campo"]||"-")))}),v(St,At)});var Wt=a(Yt);{var ht=St=>{var Xe=Xl(),At=a(o(Xe)),Et=o(At),Pt=a(At,3),It=o(Pt);C(wt=>{s(Xe,`border-color: ${e(c),r(()=>e(c).border)??""}; border-top-width: 2px;`),u(Et,wt),u(It,`${e(A),r(()=>e(A).length)??""} registros`)},[()=>(e(d),r(()=>e(d).toFixed(1)))]),v(St,Xe)};te(Wt,St=>{e(A),r(()=>e(A).length>0)&&St(ht)})}C(()=>{s(f,`border-color: ${e(c),r(()=>e(c).border)??""};`),s(R,`background-color: ${e(c),r(()=>e(c).inputBg)??""};`),s(He,`color: ${e(c),r(()=>e(c).label)??""};`),s(Ve,`color: ${e(c),r(()=>e(c).label)??""};`),s(Ie,`color: ${e(c),r(()=>e(c).label)??""};`),s(Mt,`color: ${e(c),r(()=>e(c).label)??""};`),s(Ut,`color: ${e(c),r(()=>e(c).label)??""};`)}),v(n,f)};te(P,n=>{e(E)?n(q):(e(A),r(()=>e(A).length===0)?n(ce,1):n(Me,!1))})}C(()=>{s(lt,`background-color: ${e(c),r(()=>e(c).cardBg)??""}; color: ${e(c),r(()=>e(c).text)??""};`),s(oe,`border-color: ${e(c),r(()=>e(c).cardBorder)??""};`),s(Re,`background-color: ${e(c),r(()=>e(c).inputBg)??""}; border-color: ${e(c),r(()=>e(c).border)??""};`),s(U,`color: ${e(c),r(()=>e(c).label)??""};`),s(re,`background-color: ${e(c),r(()=>e(c).cardBg)??""}; border-color: ${e(c),r(()=>e(c).border)??""}; color: ${e(c),r(()=>e(c).text)??""};`),s(pe,`color: ${e(c),r(()=>e(c).label)??""};`),s(Q,`background-color: ${e(c),r(()=>e(c).cardBg)??""}; border-color: ${e(c),r(()=>e(c).border)??""}; color: ${e(c),r(()=>e(c).text)??""};`),s(Ue,`color: ${e(c),r(()=>e(c).label)??""};`),s(y,`background-color: ${e(c),r(()=>e(c).cardBg)??""}; border-color: ${e(c),r(()=>e(c).border)??""}; color: ${e(c),r(()=>e(c).text)??""};`),H.disabled=e(E),s(Z,`color: ${e(c),r(()=>e(c).text)??""};`),j.disabled=(e(A),r(()=>e(A).length===0)),u(qe,`Resultados (${e(A),r(()=>e(A).length)??""} registros)`)}),G("click",x,function(...n){he()?.apply(this,n)}),rt(re,()=>e(p),n=>i(p,n)),rt(Q,()=>e(S),n=>i(S,n)),rt(y,()=>e(L),n=>i(L,n)),G("click",H,Se),G("click",Z,Ke),G("click",j,vt),G("click",Ze,lo(function(...n){he()?.apply(this,n)})),G("keydown",Ze,n=>n.key==="Escape"&&he()()),v(V,Ze),hr()}var on=xt('<svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>'),an=xt('<svg class="w-5 h-5 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>'),sn=xt('<svg class="w-5 h-5 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>'),ln=_('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-qemcko"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <div class="flex-1 pr-6 pt-0.5"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100">Informaci√≥n</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors" aria-label="Cerrar alerta"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),nn=_("<option> </option>"),dn=_("<option> </option>"),cn=_("<option> </option>"),vn=_("<option> </option>"),gn=xt('<svg class="animate-spin h-7 w-7 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),pn=xt('<svg class="w-8 h-8 transform rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>'),un=_('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8"><div class="flex items-center gap-4 lg:flex-col"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center">Diario de Campo</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Abrir hoja de c√°lculo"><svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Hoja de C√°lculo</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Generar reportes PDF"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Reportes PDF</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Volver al Dashboard"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Dashboard</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize"> </span></button></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto pb-32"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border"><!> <form class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="space-y-2"><label for="fecha" class="block text-sm font-medium">Fecha</label> <input type="date" id="fecha" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"/></div> <div class="space-y-2"><label for="docente" class="block text-sm font-medium">Docente</label> <select id="docente" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50"><option> </option><!></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="space-y-2"><label for="materia" class="block text-sm font-medium">Asignatura</label> <select id="materia" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50"><option> </option><!></select></div> <div class="space-y-2"><label for="grado" class="block text-sm font-medium">Grado</label> <select id="grado" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50"><option> </option><!></select></div></div> <div class="space-y-2"><label for="horas" class="block text-sm font-medium">Horas</label> <select id="horas" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer"><option>Seleccione horas</option><!></select></div> <div class="space-y-2"><!></div> <div class="fixed bottom-8 right-8 z-50"><button type="submit" class="w-16 h-16 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-400 dark:disabled:bg-slate-700 disabled:cursor-not-allowed disabled:scale-100 text-white rounded-full shadow-2xl transition-all duration-300 transform hover:scale-110 active:scale-95 backdrop-blur-sm bg-opacity-95 flex items-center justify-center overflow-hidden border border-white/20" aria-label="Guardar Diario de Campo"><!></button></div></form></div></main></div> <!>',1);function bn(V,k){xr(k,!1);const d=()=>xo(qr,"$theme",we),[we,c]=fo(),M=b(),t=b(),he=b();let Fe=Ct(k,"onBack",8),B=b([]),le=b([]),J=b([]),Y=b(!1),A=b(!1),E=b(!1),I=b(!1),l=b(!1);const p=()=>{i(l,!0)},S=()=>{i(l,!1)};let L=b([]),T=b({fecha:new Date().toISOString().split("T")[0],docente:localStorage.getItem("lastDocenteDiario")||"",materia:"",grado:"",horas:""}),O=b(JSON.parse(localStorage.getItem("docenteMateriasDiario")||"{}"));const je=(W,ie)=>{!W||!ie||(e(O)[W]||ye(O,e(O)[W]=[]),e(O)[W].includes(ie)||(ye(O,e(O)[W]=[...e(O)[W],ie]),localStorage.setItem("docenteMateriasDiario",JSON.stringify(e(O)))))};let Se=b(localStorage.getItem("dismissedInfoDiarioContent")!==$o);const Ke=()=>{i(Se,!1),localStorage.setItem("dismissedInfoDiarioContent",$o)},vt=()=>`https://docs.google.com/spreadsheets/d/${So}`,Ze=()=>{window.open(vt(),"_blank")},lt=()=>{qr.update(W=>W==="light"?"dim":W==="dim"?"dark":"light")},oe=async()=>{i(Y,!0),i(A,!0),i(E,!0);try{const[W,ie,Ye]=await Promise.all([Jr(),Kr(),Zr()]);i(B,W),i(le,ie),i(J,Ye)}catch(W){console.error("Error cargando datos iniciales:",W)}finally{i(Y,!1),i(A,!1),i(E,!1)}},x=async W=>{if(W.preventDefault(),e(I))return;const ie=e(L).join(" | ");if((await jt.fire({title:"¬øConfirmar Registro?",html:`
        <div class="text-left space-y-2 p-2 rounded-xl bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10" style="font-size: 0.9rem; line-height: 1.4;">
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Fecha:</strong> ${e(T).fecha}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Docente:</strong> ${e(T).docente}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Asignatura:</strong> ${e(T).materia}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Grado:</strong> ${e(T).grado}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Horas:</strong> ${e(T).horas}</div>
          <div style="margin-top: 12px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 8px;">
            <strong style="color: #6366f1;">Diario de Campo:</strong>
            <ul style="list-style-type: disc; padding-left: 20px; margin-top: 4px; font-size: 0.8rem; opacity: 0.8;">
              ${e(L).map(ot=>`<li>${ot}</li>`).join("")}
            </ul>
          </div>
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonText:"Si, de acuerdo",cancelButtonText:"No",confirmButtonColor:"#4f46e5",cancelButtonColor:"#64748b",reverseButtons:!0,background:d()==="light"?"#fff":"#1e293b",color:d()==="light"?"#1e293b":"#f1f5f9"})).isConfirmed){i(I,!0);try{const mt=[[new Date().toLocaleString(),e(T).fecha,e(T).horas,e(T).docente,e(T).materia,e(T).grado,ie]];await wa({spreadsheetId:So,worksheetTitle:Oo,datos:mt}),je(e(T).docente,e(T).materia),await jt.fire({icon:"success",title:"¬°√âxito!",text:"Diario de Campo registrado exitosamente",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),i(T,{fecha:new Date().toISOString().split("T")[0],docente:e(T).docente,materia:e(T).materia,grado:e(T).grado,horas:""}),i(L,[])}catch(ot){console.error("Error enviando:",ot),await jt.fire({icon:"error",title:"Error",text:"Error al registrar el Diario de Campo",confirmButtonColor:"#ef4444"})}finally{i(I,!1)}}};vr(()=>{oe()}),Be(()=>e(T),()=>{e(T).docente&&localStorage.setItem("lastDocenteDiario",e(T).docente)}),Be(()=>(e(T),e(le),e(O)),()=>{i(M,e(T).docente?[...e(le)].sort((W,ie)=>{const Ye=e(O)[e(T).docente]?.includes(W.materia),ot=e(O)[e(T).docente]?.includes(ie.materia);return Ye&&!ot?-1:!Ye&&ot?1:W.materia.localeCompare(ie.materia)}):e(le))}),Be(()=>{},()=>{i(t,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Be(()=>(e(T),e(L)),()=>{i(he,e(T).fecha&&e(T).docente&&e(T).materia&&e(T).grado&&e(T).horas&&e(L).length>0)}),Er(),Ir();var ae=un(),Re=Kt(ae),$e=o(Re),ne=o($e),U=o(ne),re=o(U),X=a(re,2),Ge=a(U,2),ze=o(Ge),pe=a(ze,2),Q=a(pe,2),Ae=a(Q,2),Qe=o(Ae);{var Le=W=>{var ie=on();v(W,ie)},Ue=W=>{var ie=an();v(W,ie)},y=W=>{var ie=sn();v(W,ie)};te(Qe,W=>{d()==="dark"?W(Le):d()==="light"?W(Ue,1):W(y,!1)})}var g=a(Qe,2),w=o(g),D=a($e,2),H=o(D),K=o(H);{var se=W=>{var ie=ln(),Ye=a(o(ie),2),ot=a(o(Ye),2),mt=o(ot),Ht=a(Ye,2);C(()=>u(mt,$o)),G("click",Ht,Ke),v(W,ie)};te(K,W=>{e(Se)&&W(se)})}var Ee=a(K,2),Z=o(Ee),j=o(Z),ee=o(j),ue=a(ee,2),fe=a(j,2),qe=o(fe),Je=a(qe,2),de=o(Je),P=o(de);de.value=de.__value="";var q=a(de);xe(q,1,()=>e(B),ke,(W,ie)=>{var Ye=nn(),ot=o(Ye),mt={};C(()=>{u(ot,e(ie)),mt!==(mt=e(ie))&&(Ye.value=(Ye.__value=e(ie))??"")}),v(W,Ye)});var ce=a(Z,2),Me=o(ce),n=o(Me),f=a(n,2),$=o(f),R=o($);$.value=$.__value="";var Ce=a($);xe(Ce,1,()=>e(M),ke,(W,ie)=>{const Ye=Lt(()=>(e(O),e(T),e(ie),r(()=>e(O)[e(T).docente]?.includes(e(ie).materia))));var ot=dn(),mt=o(ot),Ht={};C(()=>{s(ot,e(Ye)?"color: #6366f1; font-weight: 600;":""),u(mt,`${e(Ye)?"‚≠ê ":""}${e(ie),r(()=>e(ie).materia)??""}`),Ht!==(Ht=(e(ie),r(()=>e(ie).materia)))&&(ot.value=(ot.__value=(e(ie),r(()=>e(ie).materia)))??"")}),v(W,ot)});var He=a(Me,2),Ve=o(He),Ie=a(Ve,2),Mt=o(Ie),Ut=o(Mt);Mt.value=Mt.__value="";var Vt=a(Mt);xe(Vt,1,()=>(e(J),r(()=>[...new Set(e(J).map(W=>W.grado.toString()))])),ke,(W,ie)=>{var Ye=cn(),ot=o(Ye),mt={};C(Ht=>{u(ot,Ht),mt!==(mt=e(ie))&&(Ye.value=(Ye.__value=e(ie))??"")},[()=>(e(ie),r(()=>e(ie).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),v(W,Ye)});var Yt=a(ce,2),Wt=o(Yt),ht=a(Wt,2),St=o(ht);St.value=St.__value="";var Xe=a(St);xe(Xe,0,()=>[1,2,3,4],ke,(W,ie)=>{var Ye=vn(),ot=o(Ye),mt={};C(Ht=>{u(ot,`${ie??""} ${ie===1?"Hora":"Horas"}`),mt!==(mt=Ht)&&(Ye.value=(Ye.__value=Ht)??"")},[()=>r(()=>ie.toString())]),v(W,Ye)});var At=a(Yt,2),Et=o(At);Gl(Et,{get selectedDiarioAnots(){return e(L)},set selectedDiarioAnots(W){i(L,W)},$$legacy:!0});var Pt=a(At,2),It=o(Pt),wt=o(It);{var Zt=W=>{var ie=gn();v(W,ie)},mr=W=>{var ie=pn();v(W,ie)};te(wt,W=>{e(I)?W(Zt):W(mr,!1)})}var gr=a(Re,2);{var pr=W=>{rn(W,{onClose:S,get initialDocente(){return e(T),r(()=>e(T).docente)}})};te(gr,W=>{e(l)&&W(pr)})}C(()=>{s(Re,`background-color: ${e(t),r(()=>e(t).bg)??""};`),s($e,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),$t(re,"src",ro),s(X,`color: ${e(t),r(()=>e(t).text)??""};`),s(ze,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(pe,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(Q,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),s(Ae,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),u(w,d()),s(H,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),s(ee,`color: ${e(t),r(()=>e(t).label)??""};`),s(ue,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""}; color-scheme: ${d()==="light"?"light":"dark"};`),s(qe,`color: ${e(t),r(()=>e(t).label)??""};`),s(Je,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),u(P,e(Y)?"Cargando...":"Seleccione docente"),s(n,`color: ${e(t),r(()=>e(t).label)??""};`),s(f,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),u(R,e(A)?"Cargando...":"Seleccione asignatura"),s(Ve,`color: ${e(t),r(()=>e(t).label)??""};`),s(Ie,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),u(Ut,e(E)?"Cargando...":"Seleccione grado"),s(Wt,`color: ${e(t),r(()=>e(t).label)??""};`),s(ht,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),It.disabled=e(I)||!e(he),$t(It,"title",e(he)?"Guardar Diario de Campo":"Complete todos los campos requeridos")}),G("click",ze,Ze),G("click",pe,p),G("click",Q,function(...W){Fe()?.apply(this,W)}),G("click",Ae,lt),fr(ue,()=>e(T).fecha,W=>(ye(T,e(T).fecha=W),Pe(()=>{e(t),e(Y),e(B),e(A),e(M),e(O),e(E),e(J)}))),rt(Je,()=>e(T).docente,W=>(ye(T,e(T).docente=W),Pe(()=>{e(t),e(Y),e(B),e(A),e(M),e(O),e(E),e(J)}))),rt(f,()=>e(T).materia,W=>(ye(T,e(T).materia=W),Pe(()=>{e(t),e(Y),e(B),e(A),e(M),e(O),e(E),e(J)}))),rt(Ie,()=>e(T).grado,W=>(ye(T,e(T).grado=W),Pe(()=>{e(t),e(Y),e(B),e(A),e(M),e(O),e(E),e(J)}))),rt(ht,()=>e(T).horas,W=>(ye(T,e(T).horas=W),Pe(()=>{e(t),e(Y),e(B),e(A),e(M),e(O),e(E),e(J)}))),G("submit",Ee,x),v(V,ae),hr(),c()}var fn=_('<div class="w-full h-screen flex flex-col bg-[rgb(var(--bg-primary))]"><div class="h-16 flex items-center justify-between px-6 border-b transition-colors duration-200" style="background-color: rgb(var(--card-bg)); border-color: rgb(var(--card-border));"><button class="flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 font-medium" style="color: rgb(var(--text-primary));"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> Volver al Dashboard</button> <h2 class="text-lg font-bold" style="color: rgb(var(--text-primary));">Horas Laborables</h2> <div class="w-10"></div></div> <iframe src="https://ceslep.github.io/horas_laborables" title="Horas Laborables" class="flex-1 w-full border-none"></iframe></div>'),xn=_('<main class="w-full min-h-screen"><!></main>');function hn(V){let k=b("dashboard");const d=J=>{i(k,J)},we=()=>{i(k,"dashboard")};var c=xn(),M=o(c);{var t=J=>{ia(J,{onSelect:d})},he=J=>{Rs(J,{onBack:we})},Fe=J=>{Ol(J,{onBack:we})},B=J=>{bn(J,{onBack:we})},le=J=>{var Y=fn(),A=o(Y),E=o(A);G("click",E,we),v(J,Y)};te(M,J=>{e(k)==="dashboard"?J(t):e(k)==="inasistencia"?J(he,1):e(k)==="anotador"?J(Fe,2):e(k)==="diario"?J(B,3):e(k)==="horas_laborables"&&J(le,4)})}v(V,c)}Jo(hn,{target:document.getElementById("app")});
