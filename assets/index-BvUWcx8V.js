const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/utils-Dc41pFlL.js","assets/excel-G1qE2FwJ.js"])))=>i.map(i=>d[i]);
import{w as Wo,p as xr,a as St,o as vr,l as Fe,b as Sr,i as Ar,c as uo,f as Wt,d as te,e as g,g as hr,s as a,t as A,h as G,j as i,k as w,m as o,n as f,q as Ne,r as Kt,u as e,v as t,x as s,y as u,z as ho,A as he,B as go,C as mo,D as wt,E as Fo,F as ke,G as qo,H as kt,I as Se,J as Ye,K as Ao,L as ct,M as fr,N as Ot,O as zo,P as lo,Q as Jo,R as Ko,S as Zo,T as Qo,U as Co,V as Xo,W as Mo,X as To,Y as ea,Z as ta}from"./svelte-FhpfikOP.js";import{S as zt}from"./ui-CHfsb5jC.js";import{_ as so}from"./pdf-CBBHH09D.js";(function(){const $=document.createElement("link").relList;if($&&$.supports&&$.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))Ae(v);new MutationObserver(v=>{for(const T of v)if(T.type==="childList")for(const r of T.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&Ae(r)}).observe(document,{childList:!0,subtree:!0});function c(v){const T={};return v.integrity&&(T.integrity=v.integrity),v.referrerPolicy&&(T.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?T.credentials="include":v.crossOrigin==="anonymous"?T.credentials="omit":T.credentials="same-origin",T}function Ae(v){if(v.ep)return;v.ep=!0;const T=c(v);fetch(v.href,T)}})();const ra="/inasistig/assets/asistencia_hero-DmIvUlDZ.png",oa="/inasistig/assets/anotador_hero-DBB4ReZf.png",aa="/inasistig/assets/diario_hero-B7a5kf5J.png",ro="/inasistig/assets/eie-DMab_WyA.png",sa=()=>{if(typeof window<"u"){const V=localStorage.getItem("theme");if(V&&["light","dim","dark"].includes(V))return V}return"dark"},Jr=Wo(sa());typeof window<"u"&&Jr.subscribe(V=>{localStorage.setItem("theme",V);const $=document.documentElement;$.classList.remove("light","dim","dark"),$.classList.add(V)});var la=w('<div class="relative svelte-dtuciw"><div style="top: -8px; left: 50%; transform: translateX(-50%);"></div></div>'),na=w('<div class="fixed inset-0 bg-black/30 z-40 svelte-dtuciw" style="pointer-events: none;"></div> <div class="fixed z-50 animate-bounce-in svelte-dtuciw"><!> <div><div class="flex items-center gap-2 mb-3 svelte-dtuciw"><div class="p-1.5 bg-white/20 rounded-lg svelte-dtuciw"><svg class="w-5 h-5 svelte-dtuciw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="svelte-dtuciw"></path></svg></div> <span class="inline-block px-2 py-0.5 text-xs font-bold rounded-full bg-white/25 animate-pulse svelte-dtuciw">¬°NUEVO!</span></div> <h3 class="font-bold text-base mb-2 svelte-dtuciw"> </h3> <p> </p> <div class="flex gap-2 svelte-dtuciw"><button>Probar ahora</button> <button class="px-3 py-2 rounded-lg text-sm hover:bg-white/20 transition-colors svelte-dtuciw" aria-label="Cerrar popup">M√°s tarde</button></div> <button class="absolute top-2 right-2 p-1 rounded-lg hover:bg-white/20 transition-colors svelte-dtuciw" aria-label="Cerrar notificaci√≥n"><svg class="w-4 h-4 svelte-dtuciw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-dtuciw"></path></svg></button></div></div>',1);function fo(V,$){xr($,!1);const c=f();let Ae=St($,"featureMessage",8),v=St($,"description",8),T=St($,"onTryNow",8),r=St($,"onDismiss",8),d=St($,"targetSelector",8,void 0),ze=St($,"showPopup",8),I=St($,"colorTheme",8,"blue"),re=f({top:0,left:0});function X(){if(typeof window<"u"&&d()){const F=document.querySelector(d());if(F){const l=F.getBoundingClientRect();i(re,{top:l.bottom+10,left:l.left+l.width/2})}}else i(re,{top:window.innerHeight/2-100,left:window.innerWidth/2})}vr(()=>(X(),window.addEventListener("resize",X),()=>{window.removeEventListener("resize",X)})),Fe(()=>{},()=>{i(c,{arrowBorder:{blue:"border-t-blue-600 dark:border-t-blue-400",green:"border-t-green-600 dark:border-t-green-400",purple:"border-t-purple-600 dark:border-t-purple-400",emerald:"border-t-emerald-600 dark:border-t-emerald-400"},bgGradientFrom:{blue:"from-blue-600 dark:from-blue-700",green:"from-green-600 dark:from-green-700",purple:"from-purple-600 dark:from-purple-700",emerald:"from-emerald-600 dark:from-emerald-700"},bgGradientTo:{blue:"to-indigo-600 dark:to-indigo-700",green:"to-emerald-600 dark:to-emerald-700",purple:"to-fuchsia-600 dark:to-fuchsia-700",emerald:"to-teal-600 dark:to-teal-700"},borderColor:{blue:"border-blue-400 dark:border-blue-500",green:"border-green-400 dark:border-green-500",purple:"border-purple-400 dark:border-purple-500",emerald:"border-emerald-400 dark:border-emerald-500"},buttonTextColor:{blue:"text-blue-600",green:"text-green-600",purple:"text-purple-600",emerald:"text-emerald-600"},buttonHoverBg:{blue:"hover:bg-blue-50",green:"hover:bg-green-50",purple:"hover:bg-purple-50",emerald:"hover:bg-emerald-50"},descriptionColor:{blue:"text-blue-100",green:"text-green-100",purple:"text-purple-100",emerald:"text-emerald-100"}})}),Fe(()=>Ne(ze()),()=>{ze()&&X()}),Sr(),Ar();var J=uo(),O=Wt(J);{var R=F=>{var l=na(),D=a(Wt(l),2),U=o(D);{var N=h=>{var le=la(),Ge=o(le);A(()=>Kt(Ge,1,`absolute w-0 h-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent ${e(c),Ne(I()),t(()=>e(c).arrowBorder[I()])??""}`,"svelte-dtuciw")),g(h,le)};te(U,h=>{d()&&h(N)})}var B=a(U,2),b=a(o(B),2),ne=o(b),we=a(b,2),qe=o(we),rt=a(we,2),Le=o(rt),vt=a(Le,2),se=a(rt,2);A(()=>{s(D,`top: ${e(re),t(()=>e(re).top)??""}px; left: ${e(re),t(()=>e(re).left)??""}px; transform: translateX(-50%);`),Kt(B,1,`bg-gradient-to-r ${e(c),Ne(I()),t(()=>e(c).bgGradientFrom[I()])??""} ${e(c),Ne(I()),t(()=>e(c).bgGradientTo[I()])??""} text-white p-4 rounded-xl shadow-2xl border ${e(c),Ne(I()),t(()=>e(c).borderColor[I()])??""} min-w-[280px] max-w-[calc(100vw-20px)] md:max-w-[320px]`,"svelte-dtuciw"),u(ne,Ae()),Kt(we,1,`text-sm ${e(c),Ne(I()),t(()=>e(c).descriptionColor[I()])??""} mb-3`,"svelte-dtuciw"),u(qe,v()),Kt(Le,1,`px-3 py-2 rounded-lg text-sm bg-white ${e(c),Ne(I()),t(()=>e(c).buttonTextColor[I()])??""} font-semibold ${e(c),Ne(I()),t(()=>e(c).buttonHoverBg[I()])??""} transition-colors`,"svelte-dtuciw")}),G("click",Le,function(...h){T()?.apply(this,h)}),G("click",vt,function(...h){r()?.apply(this,h)}),G("click",se,function(...h){r()?.apply(this,h)}),g(F,l)};te(O,F=>{ze()&&F(R)})}g(V,J),hr()}var ia=kt('<svg class="w-6 h-6 text-amber-500 svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707M16.95 16.95l.707.707M7.636 7.636l.707.707M12 8a4 4 0 100 8 4 4 0 000-8z" class="svelte-1y1a8hs"></path></svg>'),da=kt('<svg class="w-6 h-6 text-indigo-400 svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1y1a8hs"></path></svg>'),ca=kt('<svg class="w-6 h-6 text-indigo-500 svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707M16.95 16.95l.707.707M7.636 7.636l.707.707M12 8a4 4 0 100 8 4 4 0 000-8z" class="svelte-1y1a8hs"></path></svg>'),va=w('<button class="group relative flex flex-col justify-between overflow-hidden rounded-[2.5rem] border border-[rgb(var(--card-border))] bg-[rgb(var(--card-bg))] backdrop-blur-xl transition-all duration-500 hover:border-[rgb(var(--accent-primary))]/30 hover:bg-[rgb(var(--bg-secondary))] p-1 svelte-1y1a8hs"><div class="absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent svelte-1y1a8hs"></div> <div class="relative p-8 flex flex-col h-full svelte-1y1a8hs"><div class="flex justify-between items-start mb-12 svelte-1y1a8hs"><div class="flex flex-col gap-1 svelte-1y1a8hs"><span class="text-[10px] font-bold uppercase tracking-[0.2em] text-[rgb(var(--accent-primary))] svelte-1y1a8hs"> </span> <h2 class="text-2xl font-bold tracking-tight text-[rgb(var(--text-primary))] group-hover:text-[rgb(var(--accent-primary))] transition-colors duration-300 svelte-1y1a8hs"> </h2></div> <span class="px-3 py-1 rounded-full text-[10px] font-bold bg-[rgb(var(--bg-tertiary))] border border-[rgb(var(--border-primary))] text-[rgb(var(--text-muted))] uppercase tracking-wider svelte-1y1a8hs"> </span></div> <div class="flex flex-col gap-6 mt-auto svelte-1y1a8hs"><div class="relative w-full aspect-video rounded-3xl overflow-hidden bg-black/20 border border-white/5 svelte-1y1a8hs"><div></div> <img class="w-3/4 h-3/4 mx-auto object-cover grayscale-[0.5] group-hover:grayscale-0 group-hover:scale-110 transition-all duration-700 ease-in-out opacity-60 group-hover:opacity-100 svelte-1y1a8hs"/> <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-500 z-20 svelte-1y1a8hs"><div class="p-3 rounded-full bg-white/10 backdrop-blur-md border border-white/20 svelte-1y1a8hs"><svg class="w-6 h-6 text-white svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" class="svelte-1y1a8hs"></path></svg></div></div></div> <p class="text-sm font-medium leading-relaxed text-[rgb(var(--text-muted))] line-clamp-2 svelte-1y1a8hs"> </p></div> <div class="mt-8 flex items-center justify-between svelte-1y1a8hs"><div class="flex -space-x-2 svelte-1y1a8hs"><div class="w-6 h-6 rounded-full border border-black bg-indigo-500/20 svelte-1y1a8hs"></div> <div class="w-6 h-6 rounded-full border border-black bg-purple-500/20 svelte-1y1a8hs"></div></div> <div class="text-[10px] font-bold text-[rgb(var(--text-muted))] tracking-[0.1em] group-hover:text-[rgb(var(--accent-primary))] transition-colors uppercase svelte-1y1a8hs">Explorar &rarr;</div></div></div> <div></div></button>'),ga=w(`<header class="max-w-7xl w-full mb-6 lg:mb-8 text-center relative svelte-1y1a8hs"><div class="absolute right-0 top-0 svelte-1y1a8hs"><button class="p-3 rounded-2xl bg-[rgb(var(--bg-secondary))] border border-[rgb(var(--border-primary))] hover:border-[rgb(var(--accent-primary))] transition-all duration-300 group svelte-1y1a8hs" aria-label="Toggle Theme"><!></button></div> <div class="inline-block mb-4 relative svelte-1y1a8hs"><div class="absolute inset-0 bg-indigo-500/20 blur-2xl rounded-full svelte-1y1a8hs"></div> <img alt="EIE Logo" class="relative h-12 md:h-16 object-contain hover:scale-110 transition-transform duration-700 ease-out cursor-none svelte-1y1a8hs"/></div> <div class="space-y-1 svelte-1y1a8hs"><h1 class="text-3xl md:text-5xl font-black tracking-tight svelte-1y1a8hs"><span class="bg-gradient-to-b from-[rgb(var(--text-primary))] to-[rgb(var(--text-secondary))] bg-clip-text text-transparent svelte-1y1a8hs">Ecosistema Digital</span> <span class="text-[rgb(var(--accent-primary))] svelte-1y1a8hs">Instituto Gu√°tica</span></h1> <p class="text-base md:text-lg text-[rgb(var(--text-muted))] max-w-xl mx-auto font-medium svelte-1y1a8hs">Potenciando la excelencia pedag√≥gica a trav√©s de herramientas
          inteligentes y dise√±o centrado en el docente.</p></div></header> <div class="max-w-7xl w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8 svelte-1y1a8hs"></div> <footer class="mt-20 flex flex-col md:flex-row items-center gap-8 text-[rgb(var(--text-muted))] text-xs font-bold tracking-widest uppercase svelte-1y1a8hs"><div class="flex items-center gap-4 px-6 py-3 rounded-full bg-[rgb(var(--bg-secondary))] border border-[rgb(var(--border-primary))] backdrop-blur-sm svelte-1y1a8hs"><span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse svelte-1y1a8hs"></span> SISTEMA OPERATIVO</div> <div class="hidden md:block w-px h-4 bg-[rgb(var(--border-primary))] svelte-1y1a8hs"></div> <div class="svelte-1y1a8hs">v2.0.4 PLATINUM</div> <div class="hidden md:block w-px h-4 bg-[rgb(var(--border-primary))] svelte-1y1a8hs"></div> <div class="svelte-1y1a8hs">2026 EIE DIGITAL</div></footer>`,1),pa=w(`<div class="min-h-screen w-full flex flex-col items-center p-6 lg:p-12 transition-colors duration-700 bg-[rgb(var(--bg-primary))] text-[rgb(var(--text-primary))] svelte-1y1a8hs"><div class="fixed inset-0 overflow-hidden pointer-events-none -z-10 svelte-1y1a8hs"><div class="absolute -top-[20%] -left-[10%] w-[60%] h-[60%] bg-indigo-500/5 blur-[120px] rounded-full animate-pulse svelte-1y1a8hs"></div> <div class="absolute -bottom-[20%] -right-[10%] w-[60%] h-[60%] bg-purple-500/5 blur-[120px] rounded-full animate-pulse svelte-1y1a8hs" style="animation-delay: 2s"></div> <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-[0.02] mix-blend-overlay svelte-1y1a8hs"></div></div> <!></div> <!>`,1);function ua(V,$){xr($,!1);const c=()=>mo(Jr,"$theme",Ae),[Ae,v]=ho();let T=St($,"onSelect",8),r=f(!1);const d="¬°Nueva forma de anotar el Diario de Campo!",ze="Ahora el Diario de Campo permite seleccionar y personalizar anotaciones predefinidas. ¬°Expl√≥ralo!";function I(){const N=localStorage.getItem("dismissedFeatureAlertDashboardDiario");if(!N)return!0;const B=new Date(N);return(new Date().getTime()-B.getTime())/(1e3*60*60*24)>5}const re=()=>{localStorage.setItem("dismissedFeatureAlertDashboardDiario",new Date().toISOString())},X=()=>{localStorage.setItem("dismissedFeatureAlertDashboardDiario",new Date().toISOString()),T()("diario")};vr(()=>{i(r,!0),I()});const J=()=>{Jr.update(N=>N==="light"?"dim":N==="dim"?"dark":"light")},O=[{id:"inasistencia",title:"Registro Diario",subtitle:"Gesti√≥n de Asistencia",description:"Control preciso de inasistencias y novedades diarias del aula.",image:ra,color:"from-blue-600/20 to-indigo-600/20",accent:"blue",tag:"Operativo"},{id:"anotador",title:"Anotador de Clase",subtitle:"Seguimiento √Ågil",description:"Registro din√°mico de incidencias y avances pedag√≥gicos por sesi√≥n.",image:oa,color:"from-purple-600/20 to-pink-600/20",accent:"purple",tag:"Acad√©mico"},{id:"diario",title:"Diario de Campo",subtitle:"Reflexi√≥n Docente",description:"Espacio para la reflexi√≥n profunda y documentaci√≥n pedag√≥gica.",image:aa,color:"from-emerald-600/20 to-teal-600/20",accent:"emerald",tag:"Estrat√©gico"},{id:"horas_laborables",title:"Horas Laborables",subtitle:"Gesti√≥n de Tiempo",description:"Calculadora especializada para el seguimiento de jornadas y horas docentes.",image:ro,color:"from-orange-600/20 to-amber-600/20",accent:"orange",tag:"Herramienta",url:"https://ceslep.github.io/horas_laborables"}];Ar();var R=pa(),F=Wt(R),l=a(o(F),2);{var D=N=>{var B=ga(),b=Wt(B),ne=o(b),we=o(ne),qe=o(we);{var rt=Ee=>{var ie=ia();g(Ee,ie)},Le=Ee=>{var ie=da();g(Ee,ie)},vt=Ee=>{var ie=ca();g(Ee,ie)};te(qe,Ee=>{c()==="light"?Ee(rt):c()==="dim"?Ee(Le,1):Ee(vt,!1)})}var se=a(ne,2),h=a(o(se),2),le=a(b,2);he(le,5,()=>O,ke,(Ee,ie,Y)=>{var oe=va(),Q=a(o(oe),2),Ue=o(Q),Me=o(Ue),ge=o(Me),pe=o(ge),Ie=a(ge,2),ot=o(Ie),Ve=a(Me,2),Je=o(Ve),y=a(Ue,2),p=o(y),C=o(p),E=a(C,2),H=a(p,2),K=o(H),ee=a(Q,2);A(()=>{wt(oe,"id",(e(ie),t(()=>e(ie).id==="diario"?"diario-module-target":""))),u(pe,(e(ie),t(()=>e(ie).subtitle))),u(ot,(e(ie),t(()=>e(ie).title))),u(Je,(e(ie),t(()=>e(ie).tag))),Kt(C,1,`absolute inset-0 bg-gradient-to-br ${e(ie),t(()=>e(ie).color)??""} mix-blend-overlay z-10`,"svelte-1y1a8hs"),wt(E,"src",(e(ie),t(()=>e(ie).image))),wt(E,"alt",(e(ie),t(()=>e(ie).title))),u(K,(e(ie),t(()=>e(ie).description))),Kt(ee,1,`absolute inset-0 bg-gradient-to-br ${e(ie),t(()=>e(ie).color)??""} opacity-0 group-hover:opacity-[0.03] transition-opacity duration-500 pointer-events-none`,"svelte-1y1a8hs")}),G("click",oe,()=>T()(e(ie).id)),go(1,oe,()=>Fo,()=>({y:40,duration:800,delay:200+Y*150})),g(Ee,oe)});var Ge=a(le,2);A(()=>wt(h,"src",ro)),G("click",we,J),go(1,b,()=>Fo,()=>({y:-20,duration:800,delay:100})),go(1,Ge,()=>qo,()=>({duration:1e3,delay:800})),g(N,B)};te(l,N=>{e(r)&&N(D)})}var U=a(F,2);fo(U,{featureMessage:d,description:ze,onTryNow:X,onDismiss:re,targetSelector:"#diario-module-target",showPopup:!1,colorTheme:"emerald"}),g(V,R),hr(),v()}const po="1wN7lp7lOGyxKYIUJ9TU89N9knnJjX2Z_TfsOUg48QpQ",no="https://app.iedeoccidente.com/gs",bo="https://app.iedeoccidente.com/ig",ba=`${bo}/getprofes.php`,fa=`${bo}/getMaterias.php`,xa=`${bo}/getEstudiantes.php`,ha=`${no}/save_inasistencias.php`,ma=`${no}/save_anotador.php`,_a=`${bo}/getOpcionesAnotador3.php`,ya=`${bo}/adiario.php`,ka=`${no}/save_diario.php`,_o="Inasistencias",Do="Datos",xo="1Q6EcSvccB7BoJiw9PD2s5J4PB8AJmr-6v-yKhiE4E8k",So="10pBVNYnS-ctmBYP9Y8KL3h32GZKsyi0bwoyil-kEGaE",Oo="diario",ko="Selecciona un grado y una asignatura para comenzar a registrar inasistencias. Ahora puedes marcar motivos individuales y observaciones espec√≠ficas por estudiante.Tambien pueden ver el filtro de datos en Locker Studio",wo="Completa los datos de la clase y selecciona las observaciones que correspondan. Puedes editar el texto de cada observaci√≥n si es necesario.Recuerda hacer check en el cuadro de selecci√≥n para guardar esa anotaci√≥n.",$o="Completa los datos de la clase y selecciona las observaciones que correspondan. Puedes editar el texto de cada observaci√≥n si es necesario.Recuerda hacer check en el cuadro de selecci√≥n para guardar esa anotaci√≥n.",wa="https://lookerstudio.google.com/reporting/be2efb22-dc5f-4f21-9dfc-0253e763e19f",ao=[{nombre:"UNO",fecha_inicio:new Date("2026-01-26"),fecha_fin:new Date("2026-03-27")},{nombre:"DOS",fecha_inicio:new Date("2026-03-30"),fecha_fin:new Date("2026-06-12")},{nombre:"TRES",fecha_inicio:new Date("2026-07-07"),fecha_fin:new Date("2026-09-11")},{nombre:"CUATRO",fecha_inicio:new Date("2026-09-14"),fecha_fin:new Date("2026-11-20")}],$a=async()=>{try{const V=await fetch(`${ya}`);if(!V.ok)throw new Error(`Error: ${V.status}`);return await V.json()}catch(V){throw console.error("Error fetching diario options:",V),V}},Eo=async(V={})=>{try{const $=await fetch(`${no}/get_inasistencias.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!$.ok)throw new Error(`Error: ${$.status}`);return await $.json()}catch($){throw console.error("Error fetching inasistencias:",$),$}},No=async(V={})=>{try{const $=await fetch(`${no}/get_anotador.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!$.ok)throw new Error(`Error: ${$.status}`);return await $.json()}catch($){throw console.error("Error fetching inasistencias:",$),$}},Ca=async(V={})=>{try{const $=await fetch(`${no}/get_diario.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!$.ok)throw new Error(`Error: ${$.status}`);return await $.json()}catch($){throw console.error("Error fetching diario:",$),$}},Sa=async V=>{try{const $=await fetch(`${ha}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!$.ok)throw new Error(`Error: ${$.status}`);return await $.json()}catch($){throw console.error("Error saving inasistencias:",$),$}},Kr=async()=>{try{const V=await fetch(`${ba}`);if(!V.ok)throw new Error(`Error: ${V.status}`);return await V.json()}catch(V){throw console.error("Error fetching docentes:",V),V}},Zr=async()=>{try{const V=await fetch(`${fa}`);if(!V.ok)throw new Error(`Error: ${V.status}`);return await V.json()}catch(V){throw console.error("Error fetching materias:",V),V}},Qr=async()=>{try{const V=await fetch(`${xa}`);if(!V.ok)throw new Error(`Error: ${V.status}`);return await V.json()}catch(V){throw console.error("Error fetching estudiantes:",V),V}},Aa=async()=>{try{const V=await fetch(`${_a}`);if(!V.ok)throw new Error(`Error: ${V.status}`);return await V.json()}catch(V){throw console.error("Error fetching opciones anotador3:",V),V}},Da=async V=>{try{const $=await fetch(`${ma}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!$.ok)throw new Error(`Error: ${$.status}`);return await $.json()}catch($){throw console.error("Error saving inasistencias:",$),$}},Ea=async V=>{try{const $=await fetch(`${ka}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!$.ok)throw new Error(`Error: ${$.status}`);return await $.json()}catch($){throw console.error("Error saving inasistencias:",$),$}};var Ia=w('<div class="flex-1 flex items-center justify-center"><div class="text-center"><div class="animate-spin w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full mx-auto mb-4"></div> <p>Cargando datos...</p></div></div>'),Ba=w('<span class="ml-2 px-2 py-1 text-xs bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full">Activos</span>'),Fa=w("<option> </option>"),za=w("<option> </option>"),Ma=w('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">Este docente no tiene registros de materias</p>'),Ta=w("<option> </option>"),Oa=w('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">No hay grados para los filtros seleccionados</p>'),Na=w("<option> </option>"),ja=w('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">No hay motivos para los filtros seleccionados</p>'),Ra=w('<div class="flex-1 flex items-center justify-center"><div class="text-center py-12 px-4"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm sm:text-base">No se encontraron registros con los filtros seleccionados</p></div></div>'),La=w('<button class="text-indigo-600 dark:text-indigo-400 hover:underline font-medium text-left truncate w-full"> </button>'),Pa=w('<tr class="border-b transition-colors hover:bg-black/5 dark:hover:bg-white/5 text-xs"><td class="p-2"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 text-center"> </td><td class="p-2 truncate max-w-[150px]"><!></td><td class="p-2 text-center"><span><span> </span> </span></td><td class="p-2 text-center"> </td><td class="p-2"><span class="truncate block max-w-xs text-xs"> </span></td></tr>'),Ha=w('<button class="text-indigo-600 dark:text-indigo-400 hover:underline font-medium text-left truncate w-full"> </button>'),Ga=w('<tr class="border-b transition-colors hover:bg-black/5 dark:hover:bg-white/5 text-xs"><td class="p-2 whitespace-nowrap"> </td><td class="p-2"><span class="truncate block max-w-[120px]"> </span></td><td class="p-2 truncate max-w-[120px]"> </td><td class="p-2"><span class="truncate block max-w-[100px]"><!></span></td><td class="p-2 text-center"><span><span> </span> </span></td><td class="p-2 whitespace-nowrap text-center"> </td><td class="p-2 whitespace-nowrap text-center"> </td></tr>'),Ua=w('<button class="font-semibold text-xs text-indigo-600 dark:text-indigo-400 truncate hover:underline text-left w-full"> </button>'),Va=w('<p class="font-semibold text-xs text-indigo-600 dark:text-indigo-400 truncate"> </p>'),Ya=w('<div class="text-[10px] p-1.5 rounded"><div class="flex items-start"><svg class="w-3 h-3 mr-1 mt-0.5 flex-shrink-0 opacity-60" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="line-clamp-1"> </span></div></div>'),Wa=w('<div class="border rounded-lg p-2 transition-colors hover:bg-black/5 dark:hover:bg-white/5"><div class="flex justify-between items-center mb-1.5"><div class="flex-1 min-w-0"><!> <p class="text-[10px] opacity-75"> </p></div> <div class="flex flex-col items-end ml-2 flex-shrink-0"><span><span> </span> </span> <span class="text-[10px] font-semibold"> </span></div></div> <div class="flex gap-3 text-[10px] mb-1.5"><div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="truncate"> </span></div> <div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <span class="truncate"> </span></div></div> <!></div>'),qa=w('<div class="hidden lg:flex flex-1 flex-col overflow-hidden min-h-0"><div class="flex-1 overflow-auto min-w-full border rounded-lg"><table class="w-full border-collapse text-sm min-w-[800px]"><thead class="sticky top-0 z-10 border-b"><tr><th class="text-left p-2 font-semibold whitespace-nowrap">Fecha</th><th class="text-left p-2 font-semibold whitespace-nowrap">Docente</th><th class="text-left p-2 font-semibold whitespace-nowrap">Materia</th><th class="text-center p-2 font-semibold whitespace-nowrap">Grado</th><th class="text-left p-2 font-semibold whitespace-nowrap">Estudiante</th><th class="text-center p-2 font-semibold whitespace-nowrap">Motivo</th><th class="text-center p-2 font-semibold whitespace-nowrap">Horas</th><th class="text-left p-2 font-semibold whitespace-nowrap">Observaciones</th></tr></thead><tbody></tbody></table></div></div> <div class="hidden md:flex lg:hidden flex-1 overflow-auto"><div class="min-w-full border rounded-lg"><table class="w-full border-collapse text-xs"><thead class="sticky top-0 z-10 border-b"><tr><th class="text-left p-2 font-semibold whitespace-nowrap">Fecha</th><th class="text-left p-2 font-semibold whitespace-nowrap">Docente</th><th class="text-left p-2 font-semibold whitespace-nowrap">Materia</th><th class="text-left p-2 font-semibold whitespace-nowrap">Estudiante</th><th class="text-center p-2 font-semibold whitespace-nowrap">Motivo</th><th class="text-center p-2 font-semibold whitespace-nowrap">Horas</th><th class="text-center p-2 font-semibold whitespace-nowrap">Grado</th></tr></thead><tbody></tbody></table></div></div> <div class="flex-1 overflow-y-auto md:hidden px-1"><div class="space-y-2"></div></div>',1),Ja=w('<div class="p-3 sm:p-4 border-b"><div class="flex items-center justify-between mb-2 sm:mb-3"><h3 class="text-lg font-semibold">Filtros <!></h3> <button class="text-sm px-3 py-1 rounded-lg border transition-colors hover:bg-black/5 dark:hover:bg-white/5">Limpiar filtros</button></div> <div class="mb-3 p-1.5 sm:p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg"><p class="text-[10px] sm:text-xs font-medium mb-1.5">R√°pido: Fechas</p> <div class="flex items-center mb-2"><input id="checkFiltrarFecha" type="checkbox" class="w-4 h-4 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 dark:bg-zinc-700"/> <label for="checkFiltrarFecha" class="ml-2 text-xs font-medium">Activar filtro por fechas</label></div> <div class="flex flex-wrap gap-1 sm:gap-2"><button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Hoy</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 7 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 30 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Mes actual</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimo trimestre</button></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"><div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroDocente" class="block text-xs sm:text-sm font-medium">Docente</label> <select id="filtroDocente" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option>Todos los docentes</option><!></select></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroMateria" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroMateria" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroGrado" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroGrado" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroMotivo" class="block text-xs sm:text-sm font-medium">Motivo</label> <select id="filtroMotivo" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaInicio" class="block text-xs sm:text-sm font-medium">Fecha desde</label> <input id="filtroFechaInicio" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaFin" class="block text-xs sm:text-sm font-medium">Fecha hasta</label> <input id="filtroFechaFin" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div></div></div></div> <div class="flex-1 flex flex-col p-2 sm:p-4 min-h-0"><div class="mb-4 px-0 sm:px-3"><p class="text-sm">Se encontraron <span class="font-bold text-indigo-500"> </span> registros</p></div> <!></div>',1),Ka=w('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4" role="button" tabindex="0" aria-label="Cerrar ventana"><div class="w-full max-w-7xl max-h-[95vh] bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl overflow-hidden flex flex-col"><div class="flex items-center justify-between p-3 sm:p-4 border-b"><div class="flex items-center gap-3"><img alt="EIE Logo" class="h-8 w-auto hidden sm:block"/> <div><h2 class="text-lg sm:text-xl font-bold">Inasistencias</h2> <p class="text-xs hidden sm:block">Filtra y consulta los registros</p></div></div> <div class="flex items-center gap-3"><button class="inline-flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Exportar CSV</button> <button class="p-2 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5" aria-label="Cerrar"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div> <div class="flex-1 overflow-hidden flex flex-col min-h-0"><!></div></div></div>');function Za(V,$){xr($,!1);const c=f(),Ae=f(),v=f(),T=f(),r=f();let d=St($,"onClose",8),ze=St($,"selectedDocente",8,""),I=f([]),re=[],X=[],J=[],O=f(!1),R=f(!1),F=f([]),l=f({docente:ze()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",motivo:""});const D=()=>{const p=new Date,C=new Date(p.getFullYear(),p.getMonth()-1,p.getDate()),E=H=>{const K=H.getFullYear(),ee=String(H.getMonth()+1).padStart(2,"0"),Te=String(H.getDate()).padStart(2,"0");return`${K}-${ee}-${Te}`};Se(l,e(l).fechaInicio=E(C)),Ye(()=>{e(r),e(b),e(c),e(v),e(T)}),Se(l,e(l).fechaFin=E(p)),Ye(()=>{e(r),e(b),e(c),e(v),e(T)})},U=p=>{const C=new Date;let E;switch(p){case"hoy":E=new Date(C);break;case"semana":E=new Date(C),E.setDate(C.getDate()-7);break;case"mes":E=new Date(C),E.setDate(C.getDate()-30);break;case"mes_actual":E=new Date(C.getFullYear(),C.getMonth(),1);break;case"trimestre":E=new Date(C),E.setDate(C.getDate()-90);break;default:D();return}const H=K=>{const ee=K.getFullYear(),Te=String(K.getMonth()+1).padStart(2,"0"),Z=String(K.getDate()).padStart(2,"0");return`${ee}-${Te}-${Z}`};Se(l,e(l).fechaInicio=H(E)),Ye(()=>{e(r),e(b),e(c),e(v),e(T)}),Se(l,e(l).fechaFin=H(C)),Ye(()=>{e(r),e(b),e(c),e(v),e(T)}),i(R,!0),console.log("‚úÖ setFechaPreset ejecutado:",{preset:p,fechaInicio:e(l).fechaInicio,fechaFin:e(l).fechaFin,filtrarPorFecha:e(R)})},N=[{value:"Sin excusa",icon:"üö´",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},{value:"Excusa",icon:"üìÑ",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},{value:"LLegada Tarde",icon:"‚è∞",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},{value:"Transporte Escolar",icon:"üöå",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},{value:"Permiso",icon:"‚úÖ",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},{value:"No portar/sin uniforme",icon:"üëö",color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"},{value:"Pacto de Aula",icon:"ü§ù",color:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"},{value:"Uso del celular",icon:"üì±",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},{value:"Desorden en Clase",icon:"üîä",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"},{value:"Fuga",icon:"üèÉ‚Äç‚ôÇÔ∏è",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},{value:"No realizaci√≥n de Aseo",icon:"üßπ",color:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200"},{value:"Licencia por salud",icon:"üè•",color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"},{value:"Incapacidad",icon:"ü©∫",color:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200"},{value:"Reuni√≥n interna",icon:"üë•",color:"bg-zinc-100 text-zinc-800 dark:bg-zinc-900 dark:text-zinc-200"},{value:"Psicoorientaci√≥n",icon:"üß†",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}],B=p=>N.find(C=>C.value===p)||{icon:"‚ùì",color:"bg-gray-100 text-gray-800"};let b=f([]),ne=f([]),we=f([]),qe=f([]);const rt=p=>{if(!p)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(p))return p;const C=p.split("/");if(C.length===3){const H=C[0].padStart(2,"0"),K=C[1].padStart(2,"0");return`${C[2].length===2?`20${C[2]}`:C[2]}-${K}-${H}`}const E=new Date(p);if(!isNaN(E.getTime())){const H=E.getFullYear(),K=String(E.getMonth()+1).padStart(2,"0"),ee=String(E.getDate()).padStart(2,"0");return`${H}-${K}-${ee}`}return p},Le=async()=>{i(O,!0);try{const[p,C,E,H]=await Promise.all([Eo({spreadsheetId:po,worksheetTitle:_o}),Kr(),Zr(),Qr()]);console.log("Respuesta cruda de inasistencias:",p),console.log("Tipo de dato:",typeof p),console.log("Es array:",Array.isArray(p)),p&&typeof p=="object"&&console.log("Keys:",Object.keys(p));const K=j=>{if(!j?.records||!Array.isArray(j.records))return[];const ae=j.records[0]?.values||[];return j.records.slice(1).map(xe=>{const Qe=xe.values||[];return{timestamp:Qe[0]||"",docente:Qe[1]||"",fecha:Qe[2]||"",horas:Qe[3]||"",materia:Qe[4]||"",motivo:Qe[5]||"",grado:Qe[6]||"",nombre:Qe[7]||"",observaciones:Qe[8]||""}}).filter(xe=>xe.docente&&xe.fecha)},ee=j=>Array.isArray(j)?j:j?.data&&Array.isArray(j.data)?j.data:j?.rows&&Array.isArray(j.rows)?j.rows:j?.values&&Array.isArray(j.values)?j.values:j?.inasistencias&&Array.isArray(j.inasistencias)?j.inasistencias:[];i(I,K(p)),re=ee(C),X=ee(E),J=ee(H),i(b,e(I).length>0?[...new Set(e(I).map(j=>j.docente).filter(Boolean))].sort():[]),i(ne,e(I).length>0?[...new Set(e(I).map(j=>j.materia).filter(Boolean))].sort():[]);const Te=[...new Set(J.map(j=>(typeof j=="string"?j:j.grado||"").toString()).filter(Boolean))],Z=e(I).length>0?e(I).map(j=>j.grado).filter(Boolean):[];i(we,[...new Set([...Te,...Z])].sort((j,ae)=>{const me=parseInt(j),xe=parseInt(ae);return!isNaN(me)&&!isNaN(xe)?me-xe:j.localeCompare(ae)})),i(qe,e(I).length>0?[...new Set(e(I).map(j=>j.motivo).filter(Boolean))].sort():[]),D(),console.log("Datos cargados:",{inasistencias:e(I).length,docentes:re.length,docentesUnicos:e(b).length,materiasUnicas:e(ne).length,gradosUnicos:e(we).length,motivosUnicos:e(qe).length})}catch(p){console.error("Error cargando datos:",p),await zt.fire({icon:"error",title:"Error",text:"No se pudieron cargar los datos de inasistencias",confirmButtonColor:"#ef4444"})}finally{i(O,!1)}},vt=()=>{i(l,{docente:ze()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",motivo:""}),D(),i(R,!1)},se=()=>{if(e(F).length===0){zt.fire({icon:"warning",title:"Sin datos",text:"No hay datos para exportar",confirmButtonColor:"#f59e0b"});return}const C=[["Fecha","Docente","Materia","Grado","Estudiante","Motivo","Horas","Observaciones"].join(","),...e(F).map(ee=>[ee.fecha,`"${ee.docente}"`,`"${ee.materia}"`,ee.grado,`"${ee.nombre}"`,`"${ee.motivo}"`,ee.horas,`"${ee.observaciones}"`].join(","))].join(`
`),E=new Blob([C],{type:"text/csv;charset=utf-8;"}),H=document.createElement("a"),K=URL.createObjectURL(E);H.setAttribute("href",K),H.setAttribute("download",`inasistencias_${new Date().toISOString().split("T")[0]}.csv`),H.style.visibility="hidden",document.body.appendChild(H),H.click(),document.body.removeChild(H)},h=p=>{try{const[C,E,H]=p.split("-");return C&&E&&H?`${H}/${E}/${C}`:p}catch{return p}},le=p=>{if(!e(l).docente||!e(l).materia||!e(l).grado)return;const E=e(I).filter(K=>{if(K.nombre!==p||K.docente!==e(l).docente||K.materia!==e(l).materia||K.grado!==e(l).grado)return!1;if(e(R)){const ee=rt(K.fecha);if(e(l).fechaInicio&&ee<e(l).fechaInicio||e(l).fechaFin&&ee>e(l).fechaFin)return!1}return!0}).reduce((K,ee)=>{const Te=parseInt(ee.horas)||0;return K+Te},0);let H="";e(R)&&e(l).fechaInicio&&e(l).fechaFin?H=`entre ${h(e(l).fechaInicio)} y ${h(e(l).fechaFin)}`:H="en total (hist√≥rico)",zt.fire({icon:"info",title:p,html:`
        <div class="text-left space-y-2">
          <p><strong>Materia:</strong> ${e(l).materia}</p>
          <p><strong>Total inasistencias:</strong> ${E} horas</p>
          <p class="text-sm text-gray-500 text-center mt-4">(${H})</p>
        </div>
      `,confirmButtonColor:"#4f46e5"})};vr(()=>{Le()}),Fe(()=>(e(l),e(I),e(ne)),()=>{i(c,e(l).docente?[...new Set(e(I).filter(p=>p.docente===e(l).docente).map(p=>p.materia).filter(Boolean))].sort():e(ne))}),Fe(()=>(e(l),e(I),e(we)),()=>{i(Ae,e(l).docente?[...new Set(e(I).filter(p=>p.docente===e(l).docente).map(p=>p.grado).filter(Boolean))].sort((p,C)=>{const E=parseInt(p),H=parseInt(C);return!isNaN(E)&&!isNaN(H)?E-H:p.localeCompare(C)}):e(we))}),Fe(()=>(e(l),e(I),e(Ae)),()=>{i(v,e(l).materia?[...new Set(e(I).filter(p=>p.materia===e(l).materia).map(p=>p.grado).filter(Boolean))].sort((p,C)=>{const E=parseInt(p),H=parseInt(C);return!isNaN(E)&&!isNaN(H)?E-H:p.localeCompare(C)}):e(Ae))}),Fe(()=>(e(l),e(I),e(qe)),()=>{i(T,e(l).docente||e(l).materia||e(l).grado?[...new Set(e(I).filter(p=>!(e(l).docente&&p.docente!==e(l).docente||e(l).materia&&p.materia!==e(l).materia||e(l).grado&&p.grado!==e(l).grado)).map(p=>p.motivo).filter(Boolean))].sort():e(qe))}),Fe(()=>{},()=>{i(r,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Fe(()=>(e(I),e(R),e(l),e(F)),()=>{console.log("üîÑ Filtro reactivo ejecut√°ndose:",{totalInasistencias:e(I).length,filtrarPorFecha:e(R),fechaInicio:e(l).fechaInicio,fechaFin:e(l).fechaFin}),i(F,e(I).filter(p=>{if(e(l).docente&&p.docente!==e(l).docente||e(l).materia&&p.materia!==e(l).materia||e(l).grado&&p.grado!==e(l).grado||e(l).motivo&&p.motivo!==e(l).motivo)return!1;if(e(R)){const C=rt(p.fecha);if(e(l).fechaInicio&&C<e(l).fechaInicio||e(l).fechaFin&&C>e(l).fechaFin)return!1}return!0})),console.log(`üìä Resultados filtrados: ${e(F).length} de ${e(I).length}`)}),Fe(()=>(e(R),e(l)),()=>{e(R)&&(!e(l).fechaInicio||!e(l).fechaFin)&&D()}),Sr(),Ar();var Ge=Ka(),Ee=o(Ge),ie=o(Ee),Y=o(ie),oe=o(Y),Q=a(oe,2),Ue=o(Q),Me=a(Ue,2),ge=a(Y,2),pe=o(ge),Ie=a(pe,2),ot=a(ie,2),Ve=o(ot);{var Je=p=>{var C=Ia(),E=o(C),H=a(o(E),2);A(()=>s(H,`color: ${e(r),t(()=>e(r).text)??""};`)),g(p,C)},y=p=>{var C=Ja(),E=Wt(C),H=o(E),K=o(H),ee=a(o(K));{var Te=ye=>{var Pe=Ba();g(ye,Pe)};te(ee,ye=>{e(l),t(()=>e(l).docente||e(l).materia||e(l).grado||e(l).motivo||e(l).fechaInicio||e(l).fechaFin)&&ye(Te)})}var Z=a(K,2),j=a(H,2),ae=o(j),me=a(ae,2),xe=o(me),Qe=a(xe,2),Xe=a(me,2),de=o(Xe),L=a(de,2),q=a(L,2),ue=a(q,2),Oe=a(ue,2),n=a(j,2),m=o(n),S=o(m),z=o(S),De=a(z,2),Ke=o(De);Ke.value=Ke.__value="";var et=a(Ke);he(et,1,()=>e(b),ke,(ye,Pe)=>{var dt=Fa(),Ft=o(dt),Rt={};A(()=>{u(Ft,e(Pe)),Rt!==(Rt=e(Pe))&&(dt.value=(dt.__value=e(Pe))??"")}),g(ye,dt)});var _e=a(S,2),Lt=o(_e),Zt=o(Lt),Mt=a(Lt,2),Nt=o(Mt),Qt=o(Nt);Nt.value=Nt.__value="";var Pt=a(Nt);he(Pt,1,()=>e(c),ke,(ye,Pe)=>{var dt=za(),Ft=o(dt),Rt={};A(()=>{u(Ft,e(Pe)),Rt!==(Rt=e(Pe))&&(dt.value=(dt.__value=e(Pe))??"")}),g(ye,dt)});var Ze=a(Mt,2);{var tt=ye=>{var Pe=Ma();g(ye,Pe)};te(Ze,ye=>{e(l),e(c),t(()=>e(l).docente&&e(c).length===0)&&ye(tt)})}var At=a(m,2),Tt=o(At),jt=o(Tt),Dt=o(jt),Et=a(jt,2),Gt=o(Et),lr=o(Gt);Gt.value=Gt.__value="";var rr=a(Gt);he(rr,1,()=>e(v),ke,(ye,Pe)=>{var dt=Ta(),Ft=o(dt),Rt={};A(()=>{u(Ft,e(Pe)),Rt!==(Rt=e(Pe))&&(dt.value=(dt.__value=e(Pe))??"")}),g(ye,dt)});var or=a(Et,2);{var W=ye=>{var Pe=Oa();g(ye,Pe)};te(or,ye=>{e(l),e(v),t(()=>(e(l).docente||e(l).materia)&&e(v).length===0)&&ye(W)})}var ce=a(Tt,2),We=o(ce),nt=a(We,2),ht=o(nt),Ht=o(ht);ht.value=ht.__value="";var gr=a(ht);he(gr,1,()=>e(T),ke,(ye,Pe)=>{const dt=Ot(()=>(e(Pe),t(()=>B(e(Pe)))));var Ft=Na(),Rt=o(Ft),nr={};A(()=>{u(Rt,`${Ne(e(dt)),t(()=>e(dt).icon)??""}
                      ${e(Pe)??""}`),nr!==(nr=e(Pe))&&(Ft.value=(Ft.__value=e(Pe))??"")}),g(ye,Ft)});var mr=a(nt,2);{var Dr=ye=>{var Pe=ja();g(ye,Pe)};te(mr,ye=>{e(l),e(T),t(()=>(e(l).docente||e(l).materia||e(l).grado)&&e(T).length===0)&&ye(Dr)})}var Hr=a(At,2),Xr=o(Hr),Tr=o(Xr),Er=a(Tr,2),Gr=a(Xr,2),Or=o(Gr),Ur=a(Or,2),Vr=a(E,2),Nr=o(Vr),Be=o(Nr),it=a(o(Be)),mt=o(it),Ut=a(Nr,2);{var qt=ye=>{var Pe=Ra(),dt=o(Pe),Ft=o(dt),Rt=a(Ft,2);A(()=>{s(Ft,`color: ${e(r),t(()=>e(r).icon)??""};`),s(Rt,`color: ${e(r),t(()=>e(r).text)??""};`)}),g(ye,Pe)},Yr=ye=>{var Pe=qa(),dt=Wt(Pe),Ft=o(dt),Rt=o(Ft),nr=o(Rt),Wr=o(nr),jr=o(Wr),Rr=a(jr),qr=a(Rr),Ir=a(qr),Lr=a(Ir),fe=a(Lr),Xt=a(fe),ar=a(Xt),pr=a(nr);he(pr,5,()=>e(F),ke,(P,x)=>{const be=Ot(()=>(e(x),t(()=>B(e(x).motivo))));var Re=Pa(),He=o(Re),Ce=o(He),gt=a(He),ut=o(gt),at=a(gt),st=o(at),Yt=a(at),yr=o(Yt),bt=a(Yt),Bt=o(bt);{var kr=Ct=>{var It=La(),cr=o(It);A(()=>u(cr,(e(x),t(()=>e(x).nombre)))),G("click",It,()=>le(e(x).nombre)),g(Ct,It)},$t=Ct=>{var It=zo();A(()=>u(It,(e(x),t(()=>e(x).nombre)))),g(Ct,It)};te(Bt,Ct=>{e(l),t(()=>e(l).docente&&e(l).materia&&e(l).grado)?Ct(kr):Ct($t,!1)})}var br=a(bt),ir=o(br),sr=o(ir),zr=o(sr),wr=a(sr),tr=a(br),Jt=o(tr),dr=a(tr),Mr=o(dr),er=o(Mr);A(Ct=>{s(Re,`border-color: ${e(r),t(()=>e(r).border)??""};`),s(He,`color: ${e(r),t(()=>e(r).text)??""};`),u(Ce,Ct),s(gt,`color: ${e(r),t(()=>e(r).text)??""};`),wt(gt,"title",(e(x),t(()=>e(x).docente))),u(ut,(e(x),t(()=>e(x).docente))),s(at,`color: ${e(r),t(()=>e(r).text)??""};`),wt(at,"title",(e(x),t(()=>e(x).materia))),u(st,(e(x),t(()=>e(x).materia))),s(Yt,`color: ${e(r),t(()=>e(r).text)??""};`),u(yr,(e(x),t(()=>e(x).grado))),s(bt,`color: ${e(r),t(()=>e(r).text)??""};`),wt(bt,"title",(e(x),t(()=>e(x).nombre))),Kt(ir,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Ne(e(be)),t(()=>e(be).color)??""}`),u(zr,(Ne(e(be)),t(()=>e(be).icon))),u(wr,` ${e(x),t(()=>e(x).motivo)??""}`),s(tr,`color: ${e(r),t(()=>e(r).text)??""};`),u(Jt,(e(x),t(()=>e(x).horas))),s(dr,`color: ${e(r),t(()=>e(r).text)??""};`),u(er,(e(x),t(()=>e(x).observaciones||"-")))},[()=>(e(x),t(()=>h(e(x).fecha)))]),g(P,Re)});var Pr=a(dt,2),ur=o(Pr),_=o(ur),M=o(_),ve=o(M),$e=o(ve),je=a($e),lt=a(je),_t=a(lt),Vt=a(_t),ft=a(Vt),_r=a(ft),Br=a(M);he(Br,5,()=>e(F),ke,(P,x)=>{const be=Ot(()=>(e(x),t(()=>B(e(x).motivo))));var Re=Ga(),He=o(Re),Ce=o(He),gt=a(He),ut=o(gt),at=o(ut),st=a(gt),Yt=o(st),yr=a(st),bt=o(yr),Bt=o(bt);{var kr=er=>{var Ct=Ha(),It=o(Ct);A(()=>u(It,(e(x),t(()=>e(x).nombre)))),G("click",Ct,()=>le(e(x).nombre)),g(er,Ct)},$t=er=>{var Ct=zo();A(()=>u(Ct,(e(x),t(()=>e(x).nombre)))),g(er,Ct)};te(Bt,er=>{e(l),t(()=>e(l).docente&&e(l).materia&&e(l).grado)?er(kr):er($t,!1)})}var br=a(yr),ir=o(br),sr=o(ir),zr=o(sr),wr=a(sr),tr=a(br),Jt=o(tr),dr=a(tr),Mr=o(dr);A(er=>{s(Re,`border-color: ${e(r),t(()=>e(r).border)??""};`),s(He,`color: ${e(r),t(()=>e(r).text)??""};`),u(Ce,er),s(gt,`color: ${e(r),t(()=>e(r).text)??""};`),wt(ut,"title",(e(x),t(()=>e(x).docente))),u(at,(e(x),t(()=>e(x).docente))),s(st,`color: ${e(r),t(()=>e(r).text)??""};`),wt(st,"title",(e(x),t(()=>e(x).materia))),u(Yt,(e(x),t(()=>e(x).materia))),s(yr,`color: ${e(r),t(()=>e(r).text)??""};`),wt(bt,"title",(e(x),t(()=>e(x).nombre))),Kt(ir,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Ne(e(be)),t(()=>e(be).color)??""}`),u(zr,(Ne(e(be)),t(()=>e(be).icon))),u(wr,` ${e(x),t(()=>e(x).motivo)??""}`),s(tr,`color: ${e(r),t(()=>e(r).text)??""};`),u(Jt,(e(x),t(()=>e(x).horas))),s(dr,`color: ${e(r),t(()=>e(r).text)??""};`),u(Mr,(e(x),t(()=>e(x).grado)))},[()=>(e(x),t(()=>h(e(x).fecha)))]),g(P,Re)});var Fr=a(Pr,2),k=o(Fr);he(k,5,()=>e(F),ke,(P,x)=>{const be=Ot(()=>(e(x),t(()=>B(e(x).motivo))));var Re=Wa(),He=o(Re),Ce=o(He),gt=o(Ce);{var ut=It=>{var cr=Ua(),$r=o(cr);A(()=>u($r,(e(x),t(()=>e(x).nombre)))),G("click",cr,()=>le(e(x).nombre)),g(It,cr)},at=It=>{var cr=Va(),$r=o(cr);A(()=>u($r,(e(x),t(()=>e(x).nombre)))),g(It,cr)};te(gt,It=>{e(l),t(()=>e(l).docente&&e(l).materia&&e(l).grado)?It(ut):It(at,!1)})}var st=a(gt,2),Yt=o(st),yr=a(Ce,2),bt=o(yr),Bt=o(bt),kr=o(Bt),$t=a(Bt),br=a(bt,2),ir=o(br),sr=a(He,2),zr=o(sr),wr=a(o(zr),2),tr=o(wr),Jt=a(zr,2),dr=a(o(Jt),2),Mr=o(dr),er=a(sr,2);{var Ct=It=>{var cr=Ya(),$r=o(cr),co=a(o($r),2),vo=o(co);A(()=>{s(cr,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; color: ${e(r),t(()=>e(r).label)??""};`),u(vo,(e(x),t(()=>e(x).observaciones)))}),g(It,cr)};te(er,It=>{e(x),t(()=>e(x).observaciones)&&It(Ct)})}A(It=>{s(Re,`border-color: ${e(r),t(()=>e(r).cardBorder)??""}; background-color: ${e(r),t(()=>e(r).cardBg)??""};`),s(st,`color: ${e(r),t(()=>e(r).label)??""};`),u(Yt,`${e(x),t(()=>e(x).grado)??""} ‚Ä¢ ${It??""}`),Kt(bt,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium ${Ne(e(be)),t(()=>e(be).color)??""} mb-0.5`),u(kr,(Ne(e(be)),t(()=>e(be).icon))),u($t,` ${e(x),t(()=>e(x).motivo)??""}`),s(br,`color: ${e(r),t(()=>e(r).text)??""};`),u(ir,`${e(x),t(()=>e(x).horas)??""}h`),s(sr,`color: ${e(r),t(()=>e(r).text)??""};`),u(tr,(e(x),t(()=>e(x).docente))),wt(dr,"title",(e(x),t(()=>e(x).materia))),u(Mr,(e(x),t(()=>e(x).materia)))},[()=>(e(x),t(()=>h(e(x).fecha)))]),g(P,Re)}),A(()=>{s(Ft,`border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),s(nr,`background-color: ${e(r),t(()=>e(r).cardBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""};`),s(jr,`color: ${e(r),t(()=>e(r).text)??""};`),s(Rr,`color: ${e(r),t(()=>e(r).text)??""};`),s(qr,`color: ${e(r),t(()=>e(r).text)??""};`),s(Ir,`color: ${e(r),t(()=>e(r).text)??""};`),s(Lr,`color: ${e(r),t(()=>e(r).text)??""};`),s(fe,`color: ${e(r),t(()=>e(r).text)??""};`),s(Xt,`color: ${e(r),t(()=>e(r).text)??""};`),s(ar,`color: ${e(r),t(()=>e(r).text)??""};`),s(ur,`border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),s(M,`background-color: ${e(r),t(()=>e(r).cardBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""};`),s($e,`color: ${e(r),t(()=>e(r).text)??""};`),s(je,`color: ${e(r),t(()=>e(r).text)??""};`),s(lt,`color: ${e(r),t(()=>e(r).text)??""};`),s(_t,`color: ${e(r),t(()=>e(r).text)??""};`),s(Vt,`color: ${e(r),t(()=>e(r).text)??""};`),s(ft,`color: ${e(r),t(()=>e(r).text)??""};`),s(_r,`color: ${e(r),t(()=>e(r).text)??""};`)}),g(ye,Pe)};te(Ut,ye=>{e(F),t(()=>e(F).length===0)?ye(qt):ye(Yr,!1)})}A(()=>{s(E,`border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),s(K,`color: ${e(r),t(()=>e(r).text)??""};`),s(Z,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(ae,`color: ${e(r),t(()=>e(r).text)??""};`),s(Qe,`color: ${e(r),t(()=>e(r).text)??""};`),s(de,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(L,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(q,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(ue,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(Oe,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(z,`color: ${e(r),t(()=>e(r).label)??""};`),s(De,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(Lt,`color: ${e(r),t(()=>e(r).label)??""};`),u(Zt,`Materia ${e(l),t(()=>e(l).docente?"(del docente)":"")??""}`),s(Mt,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),u(Qt,(e(l),t(()=>e(l).docente?"Todas las materias del docente":"Todas las materias"))),s(jt,`color: ${e(r),t(()=>e(r).label)??""};`),u(Dt,`Grado ${e(l),t(()=>e(l).docente||e(l).materia?"(filtrado)":"")??""}`),s(Et,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),u(lr,(e(l),t(()=>e(l).docente||e(l).materia?"Todos los grados filtrados":"Todos los grados"))),s(We,`color: ${e(r),t(()=>e(r).label)??""};`),s(nt,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),u(Ht,(e(l),t(()=>e(l).docente||e(l).materia||e(l).grado?"Todos los motivos filtrados":"Todos los motivos"))),s(Tr,`color: ${e(r),t(()=>e(r).label)??""};`),Er.disabled=!e(R),s(Er,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(Or,`color: ${e(r),t(()=>e(r).label)??""};`),Ur.disabled=!e(R),s(Ur,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(Be,`color: ${e(r),t(()=>e(r).label)??""};`),u(mt,(e(F),t(()=>e(F).length)))}),G("click",Z,vt),Ao(xe,()=>e(R),ye=>i(R,ye)),G("click",de,()=>U("hoy")),G("click",L,()=>U("semana")),G("click",q,()=>U("mes")),G("click",ue,()=>U("mes_actual")),G("click",Oe,()=>U("trimestre")),ct(De,()=>e(l).docente,ye=>(Se(l,e(l).docente=ye),Ye(()=>{e(r),e(b),e(c),e(v),e(T)}))),ct(Mt,()=>e(l).materia,ye=>(Se(l,e(l).materia=ye),Ye(()=>{e(r),e(b),e(c),e(v),e(T)}))),ct(Et,()=>e(l).grado,ye=>(Se(l,e(l).grado=ye),Ye(()=>{e(r),e(b),e(c),e(v),e(T)}))),ct(nt,()=>e(l).motivo,ye=>(Se(l,e(l).motivo=ye),Ye(()=>{e(r),e(b),e(c),e(v),e(T)}))),fr(Er,()=>e(l).fechaInicio,ye=>(Se(l,e(l).fechaInicio=ye),Ye(()=>{e(r),e(b),e(c),e(v),e(T)}))),fr(Ur,()=>e(l).fechaFin,ye=>(Se(l,e(l).fechaFin=ye),Ye(()=>{e(r),e(b),e(c),e(v),e(T)}))),g(p,C)};te(Ve,p=>{e(O)?p(Je):p(y,!1)})}A(()=>{s(Ee,`background-color: ${e(r),t(()=>e(r).cardBg)??""};`),s(ie,`border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),wt(oe,"src",ro),s(Ue,`color: ${e(r),t(()=>e(r).text)??""};`),s(Me,`color: ${e(r),t(()=>e(r).label)??""};`),pe.disabled=(e(F),t(()=>e(F).length===0)),s(Ie,`color: ${e(r),t(()=>e(r).text)??""};`)}),G("click",pe,se),G("click",Ie,function(...p){d()?.apply(this,p)}),G("click",Ge,lo(function(...p){d()?.apply(this,p)})),G("keydown",Ge,p=>{(p.key==="Enter"||p.key===" ")&&d()()}),g(V,Ge),hr()}var Qa=w('<p class="text-sm font-medium tracking-wide animate-pulse" style="color: rgb(var(--text-secondary));"> </p>'),Xa=w('<div class="flex flex-col items-center justify-center gap-4 p-8 animate-in fade-in duration-500"><div><div class="absolute inset-0 bg-indigo-500/20 blur-xl rounded-full animate-pulse"></div> <div class="absolute inset-0 rounded-full border-2 border-indigo-500/20 border-t-indigo-500 animate-spin"></div> <div class="absolute inset-2 rounded-full border-2 border-violet-500/20 border-b-violet-500 animate-[spin_1.5s_linear_infinite_reverse]"></div> <div class="absolute inset-[35%] bg-gradient-to-tr from-indigo-600 to-violet-600 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)] animate-pulse"></div></div> <!></div>');function io(V,$){xr($,!1);const c=f();let Ae=St($,"size",8,"medium"),v=St($,"message",8,"");const T={small:"w-8 h-8",medium:"w-16 h-16",large:"w-24 h-24"};Fe(()=>Ne(Ae()),()=>{i(c,T[Ae()]||T.medium)}),Sr();var r=Xa(),d=o(r),ze=a(d,2);{var I=re=>{var X=Qa(),J=o(X);A(()=>u(J,v())),g(re,X)};te(ze,re=>{v()&&re(I)})}A(()=>Kt(d,1,`relative ${e(c)??""}`)),g(V,r),hr()}var es=w('<div class="flex justify-center py-12"><!></div>'),ts=w("<option> </option>"),rs=w("<option> </option>"),os=w("<option> </option>"),as=w("<option> </option>"),ss=kt('<svg class="animate-spin h-5 w-5" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Generando...',1),ls=kt('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg> Ver Reporte',1),ns=w('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="space-y-2"><label for="view-docente" class="block text-sm font-medium">Docente</label> <select id="view-docente" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione docente</option><!></select></div> <div class="space-y-2"><label for="view-materia" class="block text-sm font-medium">Materia</label> <select id="view-materia" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione materia</option><!></select></div> <div class="space-y-2"><label for="view-grado" class="block text-sm font-medium">Grado</label> <select id="view-grado" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione grado</option><!></select></div> <div class="space-y-2"><label for="view-periodo" class="block text-sm font-medium">Periodo</label> <select id="view-periodo" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"></select></div></div> <div class="pt-4 flex gap-3"><button class="flex-1 px-6 py-3 border rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors font-medium">Cancelar</button> <button class="flex-[2] px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"><!></button></div>',1),is=w('<th class="p-2 border text-white font-bold text-center sticky top-0 z-20" style="background-color: #4472C4; min-width: 60px;"> </th>'),ds=w('<td class="p-2 border text-center font-medium bg-white cell-hover svelte-14neep5"> </td>'),cs=w('<tr class="hover-row svelte-14neep5"><td class="p-2 border font-medium sticky left-0 z-10 bg-[#F2F2F2] svelte-14neep5" style="background-color: #F2F2F2;"> </td><!><td class="p-2 border text-center font-bold bg-white cell-hover svelte-14neep5"> </td></tr>'),vs=w('<div class="space-y-4 min-w-0"><div class="text-center p-4 rounded-lg flex-shrink-0" style="background-color: #2E75B6; color: white;"><h3 class="text-lg font-bold whitespace-nowrap"> </h3></div> <div class="p-3 rounded-lg text-sm flex-shrink-0" style="background-color: #5B9BD5; color: white;"><p class="font-medium whitespace-nowrap"> </p></div> <div class="overflow-auto border rounded-lg flex-1 min-h-[200px] max-h-[50vh]"><table class="w-full border-collapse text-xs md:text-sm"><thead class="sticky top-0 z-30 shadow-sm"><tr><th class="p-2 border text-white font-bold sticky left-0 z-40" style="background-color: #4472C4; width: 200px;">Estudiantes</th><!><th class="p-2 border text-white font-bold text-center sticky top-0 z-20" style="background-color: #FF6B6B; width: 80px;">Total Horas</th></tr></thead><tbody class="bg-white"></tbody></table></div> <div class="pt-4 flex gap-3 flex-shrink-0"><button class="flex-1 px-6 py-3 border rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors font-medium">Nueva Consulta</button> <button class="flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-xl transition-colors font-medium">Cerrar</button></div></div>'),gs=w('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-2 md:p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-[95vw] max-h-[90vh] overflow-hidden shadow-2xl border flex flex-col"><div class="flex items-center justify-between p-4 md:p-6 border-b flex-shrink-0"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h2 id="modal-title" class="text-lg md:text-xl font-bold">Vista de Reporte</h2> <p class="text-sm opacity-75">Inasistencias por materia y grado</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-4 md:p-6 space-y-4 overflow-y-auto flex-1"><!></div></div></div>');function jo(V,$){xr($,!1);const c=f();let Ae=St($,"onClose",8),v=St($,"initialDocente",8,""),T=f([]),r=f([]),d=f([]),ze=f(v()||""),I=f(""),re=f(""),X=f(ao[0].nombre),J=f(!1),O=f(!1),R=f(null);const F=se=>se?se.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g," ").trim().toLowerCase():"",l=se=>{if(!se)return"";const h=se.split("/");if(h.length===3){const le=h[0].padStart(2,"0"),Ge=h[1].padStart(2,"0");return`${h[2]}-${Ge}-${le}`}return se},D=se=>{const h=[],le=new Date(se.fecha_inicio),Ge=new Date(se.fecha_fin);for(;le<=Ge;){const Ee=le.getUTCDay();Ee>=1&&Ee<=6&&h.push(new Date(le)),le.setUTCDate(le.getUTCDate()+1)}return h},U=se=>{const h=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return`${se.getUTCDate()}/${h[se.getUTCMonth()]}/${se.getUTCFullYear().toString().substr(2)}`};vr(async()=>{i(J,!0);try{const[se,h,le]=await Promise.all([Kr(),Zr(),Qr()]);i(T,se),i(r,h),i(d,le)}catch(se){console.error("Error cargando datos iniciales:",se)}finally{i(J,!1)}});const N=async()=>{if(!e(ze)||!e(I)||!e(re)){zt.fire({icon:"warning",title:"Campos incompletos",text:"Por favor seleccione Docente, Materia y Grado."});return}const se=ao.find(h=>h.nombre===e(X));if(!se){zt.fire({icon:"error",title:"Error",text:"Periodo no encontrado"});return}i(O,!0);try{const h=await Eo({spreadsheetId:po,worksheetTitle:_o});if(!h?.records||!Array.isArray(h.records))throw new Error("No se pudieron obtener los registros de inasistencias");const le=h.records.slice(1),Ge=F(e(ze)),Ee=F(e(I)),ie=e(re).toString().trim(),Y=le.map(ge=>{const pe=ge.values||[];return{fecha:pe[2]||"",docente:pe[1]||"",materia:pe[4]||"",grado:(pe[6]||"").toString().trim(),nombre:pe[7]||"",motivo:pe[5]||"",horas:pe[3]||"0"}}).filter(ge=>{const pe=F(ge.docente),Ie=F(ge.materia),ot=ge.grado,Ve=pe.includes(Ge)||Ge.includes(pe),Je=Ie.includes(Ee)||Ee.includes(Ie),y=ot===ie||ot.startsWith(ie)||ie.startsWith(ot),p=l(ge.fecha),C=new Date(p),E=new Date(se.fecha_inicio),H=new Date(se.fecha_fin);E.setHours(0,0,0,0),H.setHours(23,59,59,999);const K=C>=E&&C<=H;return Ve&&Je&&y&&K}),oe=e(d).filter(ge=>ge.grado.toString()===e(re)).map(ge=>ge.nombre).sort();if(oe.length===0)throw new Error("No hay estudiantes registrados para el grado seleccionado");const Ue=D(se).filter(ge=>{const pe=ge.toISOString().split("T")[0];return Y.some(Ie=>l(Ie.fecha)===pe)});if(Ue.length===0){zt.fire({icon:"info",title:"Sin datos",text:"No se encontraron inasistencias para los filtros seleccionados en este periodo."});return}const Me=oe.map(ge=>{const pe=[];let Ie=0;return Ue.forEach(ot=>{const Ve=ot.toISOString().split("T")[0],Je=Y.filter(y=>F(y.nombre)===F(ge)&&l(y.fecha)===Ve);if(Je.length>0){const y=Je[0],p=parseFloat(y.horas)||0,C=y.motivo||"";p>0?(pe.push({valor:p.toString(),horas:p}),Ie+=p):C?pe.push({valor:C,horas:0}):pe.push({valor:"X",horas:0})}else pe.push({valor:"‚úì",horas:0})}),{nombre:ge,registros:pe,totalHoras:Ie}});i(R,{docente:e(ze),materia:e(I),grado:e(re),periodo:se.nombre,fechaInicio:U(se.fecha_inicio),fechaFin:U(se.fecha_fin),fechas:Ue.map(ge=>U(ge)),estudiantes:Me})}catch(h){console.error("Error generando reporte:",h);const le=h instanceof Error?h.message:"Error desconocido";zt.fire({icon:"error",title:"Error",text:le})}finally{i(O,!1)}};Fe(()=>{},()=>{i(c,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Sr(),Ar();var B=gs(),b=o(B),ne=o(b),we=a(o(ne),2),qe=a(ne,2),rt=o(qe);{var Le=se=>{var h=es(),le=o(h);io(le,{message:"Cargando datos..."}),g(se,h)},vt=se=>{var h=uo(),le=Wt(h);{var Ge=ie=>{var Y=ns(),oe=Wt(Y),Q=o(oe),Ue=o(Q),Me=a(Ue,2),ge=o(Me);ge.value=ge.__value="";var pe=a(ge);he(pe,1,()=>e(T),ke,(de,L)=>{var q=ts(),ue=o(q),Oe={};A(()=>{u(ue,e(L)),Oe!==(Oe=e(L))&&(q.value=(q.__value=e(L))??"")}),g(de,q)});var Ie=a(Q,2),ot=o(Ie),Ve=a(ot,2),Je=o(Ve);Je.value=Je.__value="";var y=a(Je);he(y,1,()=>e(r),ke,(de,L)=>{var q=rs(),ue=o(q),Oe={};A(()=>{u(ue,(e(L),t(()=>e(L).materia))),Oe!==(Oe=(e(L),t(()=>e(L).materia)))&&(q.value=(q.__value=(e(L),t(()=>e(L).materia)))??"")}),g(de,q)});var p=a(Ie,2),C=o(p),E=a(C,2),H=o(E);H.value=H.__value="";var K=a(H);he(K,1,()=>(e(d),t(()=>[...new Set(e(d).map(de=>de.grado.toString()))])),ke,(de,L)=>{var q=os(),ue=o(q),Oe={};A(n=>{u(ue,n),Oe!==(Oe=e(L))&&(q.value=(q.__value=e(L))??"")},[()=>(e(L),t(()=>e(L).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),g(de,q)});var ee=a(p,2),Te=o(ee),Z=a(Te,2);he(Z,5,()=>ao,ke,(de,L)=>{var q=as(),ue=o(q),Oe={};A(()=>{u(ue,`Periodo ${e(L),t(()=>e(L).nombre)??""}`),Oe!==(Oe=(e(L),t(()=>e(L).nombre)))&&(q.value=(q.__value=(e(L),t(()=>e(L).nombre)))??"")}),g(de,q)});var j=a(oe,2),ae=o(j),me=a(ae,2),xe=o(me);{var Qe=de=>{var L=ss();g(de,L)},Xe=de=>{var L=ls();g(de,L)};te(xe,de=>{e(O)?de(Qe):de(Xe,!1)})}A(()=>{s(Ue,`color: ${e(c),t(()=>e(c).label)??""};`),s(Me,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(ot,`color: ${e(c),t(()=>e(c).label)??""};`),s(Ve,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(C,`color: ${e(c),t(()=>e(c).label)??""};`),s(E,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(Te,`color: ${e(c),t(()=>e(c).label)??""};`),s(Z,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(ae,`border-color: ${e(c),t(()=>e(c).border)??""};`),me.disabled=e(O)||!e(ze)||!e(I)||!e(re)}),ct(Me,()=>e(ze),de=>i(ze,de)),ct(Ve,()=>e(I),de=>i(I,de)),ct(E,()=>e(re),de=>i(re,de)),ct(Z,()=>e(X),de=>i(X,de)),G("click",ae,function(...de){Ae()?.apply(this,de)}),G("click",me,N),g(ie,Y)},Ee=ie=>{var Y=vs(),oe=o(Y),Q=o(oe),Ue=o(Q),Me=a(oe,2),ge=o(Me),pe=o(ge),Ie=a(Me,2),ot=o(Ie),Ve=o(ot),Je=o(Ve),y=a(o(Je));he(y,1,()=>(e(R),t(()=>e(R).fechas)),ke,(K,ee)=>{var Te=is(),Z=o(Te);A(()=>u(Z,e(ee))),g(K,Te)});var p=a(Ve);he(p,5,()=>(e(R),t(()=>e(R).estudiantes)),ke,(K,ee)=>{var Te=cs(),Z=o(Te),j=o(Z),ae=a(Z);he(ae,1,()=>(e(ee),t(()=>e(ee).registros)),ke,(Qe,Xe)=>{const de=Ot(()=>(e(Xe),t(()=>e(Xe).valor==="‚úì")));var L=ds(),q=o(L);A(()=>{s(L,e(de)?"color: #00AA00;":"color: #FF0000; background-color: #FFE6E6;"),u(q,(e(Xe),t(()=>e(Xe).valor)))}),g(Qe,L)});var me=a(ae),xe=o(me);A(()=>{u(j,(e(ee),t(()=>e(ee).nombre))),s(me,(e(ee),t(()=>e(ee).totalHoras>0?"color: #FF0000; background-color: #FFE6E6;":"color: #00AA00; background-color: #E6FFE6;"))),u(xe,(e(ee),t(()=>e(ee).totalHoras)))}),g(K,Te)});var C=a(Ie,2),E=o(C),H=a(E,2);A(()=>{u(Ue,`REPORTE DE INASISTENCIAS - ${e(R),t(()=>e(R).materia)??""} - GRADO ${e(R),t(()=>e(R).grado)??""}`),u(pe,`Docente: ${e(R),t(()=>e(R).docente)??""} | Periodo: ${e(R),t(()=>e(R).periodo)??""} (${e(R),t(()=>e(R).fechaInicio)??""} - ${e(R),t(()=>e(R).fechaFin)??""})`),s(E,`border-color: ${e(c),t(()=>e(c).border)??""};`)}),G("click",E,()=>i(R,null)),G("click",H,function(...K){Ae()?.apply(this,K)}),g(ie,Y)};te(le,ie=>{e(R)?ie(Ee,!1):ie(Ge)})}g(se,h)};te(rt,se=>{e(J)?se(Le):se(vt,!1)})}A(()=>{s(b,`background-color: ${e(c),t(()=>e(c).cardBg)??""}; border-color: ${e(c),t(()=>e(c).cardBorder)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(ne,`border-color: ${e(c),t(()=>e(c).cardBorder)??""};`)}),G("click",we,function(...se){Ae()?.apply(this,se)}),G("click",B,lo(function(...se){Ae()?.apply(this,se)})),G("keydown",B,se=>se.key==="Escape"&&Ae()()),g(V,B),hr()}var ps=w('<div class="flex justify-center py-12"><!></div>'),us=w("<option> </option>"),bs=w("<option> </option>"),fs=w("<option> </option>"),xs=w("<option> </option>"),hs=kt('<svg class="animate-spin h-5 w-5 text-white" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Generando...',1),ms=kt('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg> Descargar Excel',1),_s=w('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="space-y-2"><label for="rep-docente" class="block text-sm font-medium">Docente</label> <select id="rep-docente" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione docente</option><!></select></div> <div class="space-y-2"><label for="rep-materia" class="block text-sm font-medium">Materia</label> <select id="rep-materia" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione materia</option><!></select></div> <div class="space-y-2"><label for="rep-grado" class="block text-sm font-medium">Grado</label> <select id="rep-grado" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione grado</option><!></select></div> <div class="space-y-2"><label for="rep-periodo" class="block text-sm font-medium">Periodo</label> <select id="rep-periodo" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"></select></div></div> <div class="pt-4 flex gap-3"><button class="flex-1 px-6 py-3 border rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors font-medium">Cancelar</button> <button class="flex-1 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg hover:shadow-green-500/20"><!></button></div>',1),ys=w('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-2xl overflow-hidden shadow-2xl border"><div class="flex items-center justify-between p-6 border-b"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h2 id="modal-title" class="text-xl font-bold">Generador de Reporte Excel</h2> <p class="text-sm opacity-75">Inasistencias por materia y grado</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar modal"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 space-y-6"><!></div></div></div> <!>',1);function ks(V,$){xr($,!1);const c=f();let Ae=null,v=null,T=St($,"onClose",8),r=St($,"initialDocente",8,""),d=f([]),ze=f([]),I=f([]),re=f(r()||""),X=f(""),J=f(""),O=f(ao[0].nombre),R=f(!1),F=f(!1),l=f(!1);const D=async()=>{if(!Ae||!v){const[Y,oe]=await Promise.all([so(()=>import("./excel-G1qE2FwJ.js").then(Q=>Q.e),[]),so(()=>import("./utils-Dc41pFlL.js").then(Q=>Q.F),__vite__mapDeps([0,1]))]);Ae=Y.default,v=oe.default}},U=Y=>Y?Y.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g," ").trim().toLowerCase():"",N=Y=>{if(!Y)return"";const oe=Y.split("/");if(oe.length===3){const Q=oe[0].padStart(2,"0"),Ue=oe[1].padStart(2,"0");return`${oe[2]}-${Ue}-${Q}`}return Y},B=Y=>{const oe=[],Q=new Date(Y.fecha_inicio),Ue=new Date(Y.fecha_fin);for(;Q<=Ue;){const Me=Q.getUTCDay();Me>=1&&Me<=6&&oe.push(new Date(Q)),Q.setUTCDate(Q.getUTCDate()+1)}return oe},b=Y=>{const oe=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return`${Y.getUTCDate()}/${oe[Y.getUTCMonth()]}/${Y.getUTCFullYear().toString().substr(2)}`};vr(async()=>{i(R,!0);try{const[Y,oe,Q]=await Promise.all([Kr(),Zr(),Qr()]);i(d,Y),i(ze,oe),i(I,Q)}catch(Y){console.error("Error cargando datos iniciales:",Y)}finally{i(R,!1)}});const ne=async()=>{if(await D(),!e(re)||!e(X)||!e(J)){zt.fire({icon:"warning",title:"Campos incompletos",text:"Por favor seleccione Docente, Materia y Grado."});return}const Y=ao.find(oe=>oe.nombre===e(O));if(!Y){zt.fire({icon:"error",title:"Error",text:"Periodo no encontrado"});return}i(F,!0);try{const oe=await Eo({spreadsheetId:po,worksheetTitle:_o});if(!oe?.records||!Array.isArray(oe.records))throw new Error("No se pudieron obtener los registros de inasistencias");const Q=oe.records.slice(1),Ue=U(e(re)),Me=U(e(X)),ge=e(J).toString().trim(),pe=Q.map(j=>{const ae=j.values||[];return{fecha:ae[2]||"",docente:ae[1]||"",materia:ae[4]||"",grado:(ae[6]||"").toString().trim(),nombre:ae[7]||"",motivo:ae[5]||"",horas:ae[3]||"0"}}).filter(j=>{const ae=U(j.docente),me=U(j.materia),xe=j.grado,Qe=ae.includes(Ue)||Ue.includes(ae),Xe=me.includes(Me)||Me.includes(me),de=xe===ge||xe.startsWith(ge)||ge.startsWith(xe),L=N(j.fecha),q=new Date(L),ue=new Date(Y.fecha_inicio),Oe=new Date(Y.fecha_fin);ue.setHours(0,0,0,0),Oe.setHours(23,59,59,999);const n=q>=ue&&q<=Oe;return Qe&&Xe&&de&&n}),Ie=e(I).filter(j=>j.grado.toString()===e(J)).map(j=>j.nombre).sort();if(Ie.length===0)throw new Error("No hay estudiantes registrados para el grado seleccionado");const Ve=B(Y).filter(j=>{const ae=j.toISOString().split("T")[0];return pe.some(me=>N(me.fecha)===ae)});if(Ve.length===0){zt.fire({icon:"info",title:"Sin datos",text:"No se encontraron inasistencias para los filtros seleccionados en este periodo."}),i(F,!1);return}const Je=new Ae.Workbook,y=Je.addWorksheet("Reporte de Inasistencias"),p=Ve.length+2,C=y.addRow([`REPORTE DE INASISTENCIAS - ${e(X)} - GRADO ${e(J)}`]);C.height=30,C.font={bold:!0,size:16,color:{argb:"FFFFFF"}},C.fill={type:"pattern",pattern:"solid",fgColor:{argb:"2E75B6"}},C.alignment={vertical:"middle",horizontal:"center"},y.mergeCells(1,1,1,p);const E=y.addRow([`Docente: ${e(re)} | Periodo: ${Y.nombre} (${b(Y.fecha_inicio)} - ${b(Y.fecha_fin)})`]);E.height=20,E.font={bold:!0,size:10,color:{argb:"FFFFFF"}},E.fill={type:"pattern",pattern:"solid",fgColor:{argb:"5B9BD5"}},E.alignment={vertical:"middle",horizontal:"left"},y.mergeCells(2,1,2,p);const H=["Estudiantes",...Ve.map(j=>b(j)),"Total Horas"],K=y.addRow(H);K.height=25,K.font={bold:!0,size:11,color:{argb:"FFFFFF"}},K.alignment={vertical:"middle",horizontal:"center"},y.getColumn(1).width=35,Ve.forEach((j,ae)=>{y.getColumn(ae+2).width=22}),y.getColumn(p).width=15,K.eachCell((j,ae)=>{j.fill={type:"pattern",pattern:"solid",fgColor:{argb:ae===p?"FF6B6B":"4472C4"}},j.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}),Ie.forEach(j=>{const ae=[j];let me=0;Ve.forEach(Xe=>{const de=Xe.toISOString().split("T")[0],L=pe.filter(q=>U(q.nombre)===U(j)&&N(q.fecha)===de);if(L.length>0){const q=L[0],ue=parseFloat(q.horas)||0,Oe=q.motivo||"";ue>0?(ae.push(ue.toString()),me+=ue):Oe?ae.push(Oe):ae.push("X")}else ae.push("‚úì")}),ae.push(me.toString());const xe=y.addRow(ae);xe.height=30,xe.getCell(1).font={bold:!0},xe.getCell(1).fill={type:"pattern",pattern:"solid",fgColor:{argb:"F2F2F2"}},Ve.forEach((Xe,de)=>{const L=xe.getCell(de+2);L.alignment={horizontal:"center",vertical:"middle",wrapText:!0};const q=L.value?.toString()||"",ue=parseFloat(q)||0;q==="‚úì"?L.font={color:{argb:"00AA00"}}:ue>0||isNaN(ue)?(L.font={color:{argb:"FF0000"},bold:!0},L.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE6E6"}}):(L.font={color:{argb:"FF0000"},bold:!0},L.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE6E6"}})});const Qe=xe.getCell(p);Qe.font={bold:!0,color:{argb:me>0?"FF0000":"00AA00"}},Qe.alignment={horizontal:"center"},Qe.fill={type:"pattern",pattern:"solid",fgColor:{argb:me>0?"FFE6E6":"E6FFE6"}},xe.eachCell(Xe=>{Xe.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})});const ee=await Je.xlsx.writeBuffer(),Te=new Blob([ee],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Z=`Reporte_Inasistencias_${e(J)}_${e(X).replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.xlsx`;v(Te,Z),zt.fire({icon:"success",title:"Reporte generado",text:`Se ha generado el reporte con ${Ie.length} estudiantes.`,timer:2e3,showConfirmButton:!1})}catch(oe){console.error("Error generando Excel:",oe);const Q=oe instanceof Error?oe.message:"Error desconocido";zt.fire({icon:"error",title:"Error",text:Q})}finally{i(F,!1)}};Fe(()=>{},()=>{i(c,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Sr(),Ar();var we=ys(),qe=Wt(we),rt=o(qe),Le=o(rt),vt=a(o(Le),2),se=a(Le,2),h=o(se);{var le=Y=>{var oe=ps(),Q=o(oe);io(Q,{message:"Cargando datos..."}),g(Y,oe)},Ge=Y=>{var oe=_s(),Q=Wt(oe),Ue=o(Q),Me=o(Ue),ge=a(Me,2),pe=o(ge);pe.value=pe.__value="";var Ie=a(pe);he(Ie,1,()=>e(d),ke,(L,q)=>{var ue=us(),Oe=o(ue),n={};A(()=>{u(Oe,e(q)),n!==(n=e(q))&&(ue.value=(ue.__value=e(q))??"")}),g(L,ue)});var ot=a(Ue,2),Ve=o(ot),Je=a(Ve,2),y=o(Je);y.value=y.__value="";var p=a(y);he(p,1,()=>e(ze),ke,(L,q)=>{var ue=bs(),Oe=o(ue),n={};A(()=>{u(Oe,(e(q),t(()=>e(q).materia))),n!==(n=(e(q),t(()=>e(q).materia)))&&(ue.value=(ue.__value=(e(q),t(()=>e(q).materia)))??"")}),g(L,ue)});var C=a(ot,2),E=o(C),H=a(E,2),K=o(H);K.value=K.__value="";var ee=a(K);he(ee,1,()=>(e(I),t(()=>[...new Set(e(I).map(L=>L.grado.toString()))])),ke,(L,q)=>{var ue=fs(),Oe=o(ue),n={};A(m=>{u(Oe,m),n!==(n=e(q))&&(ue.value=(ue.__value=e(q))??"")},[()=>(e(q),t(()=>e(q).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),g(L,ue)});var Te=a(C,2),Z=o(Te),j=a(Z,2);he(j,5,()=>ao,ke,(L,q)=>{var ue=xs(),Oe=o(ue),n={};A(()=>{u(Oe,`Periodo ${e(q),t(()=>e(q).nombre)??""}`),n!==(n=(e(q),t(()=>e(q).nombre)))&&(ue.value=(ue.__value=(e(q),t(()=>e(q).nombre)))??"")}),g(L,ue)});var ae=a(Q,2),me=o(ae),xe=a(me,2),Qe=o(xe);{var Xe=L=>{var q=hs();g(L,q)},de=L=>{var q=ms();g(L,q)};te(Qe,L=>{e(F)?L(Xe):L(de,!1)})}A(()=>{s(Me,`color: ${e(c),t(()=>e(c).label)??""};`),s(ge,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(Ve,`color: ${e(c),t(()=>e(c).label)??""};`),s(Je,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(E,`color: ${e(c),t(()=>e(c).label)??""};`),s(H,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(Z,`color: ${e(c),t(()=>e(c).label)??""};`),s(j,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(me,`border-color: ${e(c),t(()=>e(c).border)??""};`),xe.disabled=e(F)||!e(re)||!e(X)||!e(J)}),ct(ge,()=>e(re),L=>i(re,L)),ct(Je,()=>e(X),L=>i(X,L)),ct(H,()=>e(J),L=>i(J,L)),ct(j,()=>e(O),L=>i(O,L)),G("click",me,function(...L){T()?.apply(this,L)}),G("click",xe,ne),g(Y,oe)};te(h,Y=>{e(R)?Y(le):Y(Ge,!1)})}var Ee=a(qe,2);{var ie=Y=>{jo(Y,{onClose:()=>i(l,!1),get initialDocente(){return e(re)}})};te(Ee,Y=>{e(l)&&Y(ie)})}A(()=>{s(rt,`background-color: ${e(c),t(()=>e(c).cardBg)??""}; border-color: ${e(c),t(()=>e(c).cardBorder)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(Le,`border-color: ${e(c),t(()=>e(c).cardBorder)??""};`)}),G("click",vt,function(...Y){T()?.apply(this,Y)}),G("click",qe,lo(function(...Y){T()?.apply(this,Y)})),G("keydown",qe,Y=>Y.key==="Escape"&&T()()),g(V,we),hr()}var ws=w('<div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping svelte-gsxx31"></div> <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full svelte-gsxx31"></div>',1),$s=w('<div class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-ping svelte-gsxx31"></div> <div class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full svelte-gsxx31"></div>',1),Cs=kt('<svg class="w-5 h-5 text-indigo-500 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-gsxx31"></path></svg>'),Ss=kt('<svg class="w-5 h-5 text-amber-500 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="svelte-gsxx31"></path></svg>'),As=kt('<svg class="w-5 h-5 text-indigo-400 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-gsxx31"></path></svg>'),Ds=w('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-gsxx31"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0 svelte-gsxx31"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-gsxx31"></path></svg></div> <div class="flex-1 pr-6 pt-0.5 svelte-gsxx31"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100 svelte-gsxx31">Informaci√≥n</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200 svelte-gsxx31"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors svelte-gsxx31" aria-label="Cerrar alerta"><svg class="w-4 h-4 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-gsxx31"></path></svg></button></div>'),Es=w('<option class="svelte-gsxx31"> </option>'),Is=w('<label class="flex items-center gap-3 cursor-pointer p-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 transition-colors svelte-gsxx31"><input type="checkbox" class="w-5 h-5 rounded border-2 text-indigo-500 focus:ring-indigo-500 svelte-gsxx31"/> <span class="text-sm svelte-gsxx31"> </span></label>'),Bs=w('<div class="max-h-48 overflow-y-auto border rounded-xl p-3 space-y-2 svelte-gsxx31"></div>'),Fs=w('<option class="svelte-gsxx31"> </option>'),zs=w('<select id="materia" name="materia" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-gsxx31"><option class="svelte-gsxx31"> </option><!></select>'),Ms=w('<option class="svelte-gsxx31"> </option>'),Ts=w('<option class="svelte-gsxx31"> </option>'),Os=w('<span><span class="mr-1.5 svelte-gsxx31"> </span> <button type="button" class="ml-1.5 hover:opacity-70 transition-opacity svelte-gsxx31" aria-label="Eliminar motivo"><svg class="w-3 h-3 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12" class="svelte-gsxx31"></path></svg></button></span>'),Ns=w('<option class="svelte-gsxx31"> </option>'),js=w('<option class="svelte-gsxx31"> </option>'),Rs=w('<div class="flex items-center gap-2 svelte-gsxx31"><button type="button" class="p-2 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Agregar observaci√≥n"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" class="svelte-gsxx31"></path></svg></button></div>'),Ls=w('<div class="px-4 pb-4 animate-fade-in svelte-gsxx31"><textarea placeholder="Escribe una observaci√≥n espec√≠fica para este estudiante..." rows="2" class="w-full px-4 py-2 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none resize-none text-sm svelte-gsxx31"></textarea></div>'),Ps=w('<div><div class="flex-1 min-w-0 svelte-gsxx31"><span class="text-base font-medium block svelte-gsxx31"> </span> <div class="flex flex-wrap gap-2 mt-2 svelte-gsxx31"></div></div> <div class="flex flex-col sm:flex-row items-center gap-2 w-full sm:w-auto svelte-gsxx31"><div><select class="w-full appearance-none border rounded-lg px-4 py-2 pr-10 text-sm focus:ring-2 focus:ring-indigo-500 cursor-pointer transition-all outline-none svelte-gsxx31"><option class="svelte-gsxx31">Hora...</option><option class="svelte-gsxx31">0 (Sin hora)</option><!></select> <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 svelte-gsxx31"><svg class="w-4 h-4 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-gsxx31"></path></svg></div></div> <div class="relative w-full sm:w-56 svelte-gsxx31"><select class="w-full appearance-none border rounded-lg px-4 py-2 pr-10 text-sm focus:ring-2 focus:ring-indigo-500 cursor-pointer transition-all outline-none svelte-gsxx31"><option class="svelte-gsxx31">A√±adir motivo...</option><option class="svelte-gsxx31">üö´ Limpiar todo</option><!></select> <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 svelte-gsxx31"><svg class="w-4 h-4 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" class="svelte-gsxx31"></path></svg></div></div></div> <!></div> <!>',1),Hs=w('<div class="text-center py-12 opacity-60 svelte-gsxx31">No hay estudiantes en este grado.</div>'),Gs=w('<div class="space-y-3 animate-fade-in svelte-gsxx31"><label class="block text-sm font-semibold uppercase tracking-wider svelte-gsxx31"> </label> <div class="space-y-2 max-h-[700px] overflow-y-auto border rounded-2xl p-4 bg-zinc-50/50 dark:bg-zinc-900/50 backdrop-blur-sm scrollbar-thin scrollbar-thumb-zinc-300 dark:scrollbar-thumb-zinc-600 svelte-gsxx31"><!> <!></div></div>'),Us=kt('<svg class="animate-spin h-6 w-6 lg:h-7 lg:w-7 svelte-gsxx31" fill="none" viewBox="0 0 24 24"><circle class="opacity-25 svelte-gsxx31" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75 svelte-gsxx31" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Vs=kt('<svg class="h-6 w-6 lg:h-7 lg:w-7 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" class="svelte-gsxx31"></path></svg>'),Ys=w('<span class="absolute -top-1 -right-1 lg:-top-2 lg:-right-2 bg-red-500 text-white text-[10px] lg:text-xs font-bold rounded-full h-5 w-5 lg:h-6 lg:w-6 flex items-center justify-center ring-2 ring-white dark:ring-zinc-950 animate-bounce svelte-gsxx31"> </span>'),Ws=w('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200 svelte-gsxx31"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40 svelte-gsxx31"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8 svelte-gsxx31"><div class="flex items-center gap-4 lg:flex-col svelte-gsxx31"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto svelte-gsxx31"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center svelte-gsxx31">Registrar Inasistencias</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full svelte-gsxx31"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Abrir hoja de c√°lculo"><svg class="w-5 h-5 svelte-gsxx31" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Hoja de C√°lculo</span></button> <button id="filter-button-target" class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 relative svelte-gsxx31" title="Abrir Looker Studio"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Filtros</span> <!></button> <button id="report-button-target" class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 relative svelte-gsxx31" title="Generar reportes Excel"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Reporte Excel</span> <!></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Ver reporte online"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" class="svelte-gsxx31"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Ver Online</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Abrir Looker Studio"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Looker Studio</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Volver al Dashboard"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Dashboard</span></button> <div class="relative svelte-gsxx31"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full svelte-gsxx31" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize svelte-gsxx31"> </span></button></div></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto svelte-gsxx31"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border svelte-gsxx31"><!> <!> <!> <form class="space-y-6 svelte-gsxx31"><div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-gsxx31"><div class="space-y-2 svelte-gsxx31"><label for="docente" class="block text-sm font-medium svelte-gsxx31">Docente</label> <select id="docente" name="docente" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-gsxx31"><option class="svelte-gsxx31"> </option><!></select></div> <div class="space-y-2 svelte-gsxx31"><div class="flex items-center justify-between svelte-gsxx31"><label for="materia" class="block text-sm font-medium svelte-gsxx31">Materia</label></div> <!></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-gsxx31"><div class="space-y-2 svelte-gsxx31"><label for="horas" class="block text-sm font-medium svelte-gsxx31">Cantidad de Horas</label> <select id="horas" name="horas" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer svelte-gsxx31"><option class="svelte-gsxx31">Seleccione horas</option><option class="svelte-gsxx31">Sin hora espec√≠fica</option><!></select></div> <div class="space-y-2 svelte-gsxx31"><label for="grado" class="block text-sm font-medium svelte-gsxx31">Grado</label> <select id="grado" name="grado" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-gsxx31"><option class="svelte-gsxx31"> </option><!></select></div></div> <!> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-gsxx31"><div class="space-y-2 svelte-gsxx31"><label for="fecha" class="block text-sm font-medium svelte-gsxx31">Fecha</label> <input type="date" id="fecha" name="fecha" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none svelte-gsxx31"/></div> <div class="space-y-2 svelte-gsxx31"><label for="observaciones" class="block text-sm font-medium svelte-gsxx31">Observaciones</label> <textarea id="observaciones" name="observaciones" rows="3" placeholder="Opcional..." class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none resize-none svelte-gsxx31"></textarea></div></div> <div class="flex items-center justify-between pt-6 border-t svelte-gsxx31"><div class="text-sm font-medium svelte-gsxx31">Inasistencias marcadas: <span class="text-indigo-500 font-bold ml-1 svelte-gsxx31"> </span></div></div></form></div></main> <button class="fixed bottom-6 right-6 lg:bottom-10 lg:right-10 bg-green-600 hover:bg-green-700 text-white p-4 lg:p-5 rounded-full shadow-2xl hover:shadow-green-500/20 transform transition-all duration-300 hover:scale-110 active:scale-95 disabled:opacity-50 disabled:grayscale disabled:cursor-not-allowed z-50 group svelte-gsxx31" title="Guardar inasistencias"><!> <!></button></div> <!> <!> <!>',1);function qs(V,$){xr($,!1);const c=()=>mo(Jr,"$theme",Ae),[Ae,v]=ho(),T=f(),r=f(),d=f(),ze=f(),I=f(),re=f(),X=[],J="¬°Nueva funci√≥n de filtrado avanzado disponible!",O="¬°Nueva funci√≥n de reporte en Excel disponible!";let R=St($,"onBack",8),F=f([]),l=f([]),D=f([]),U=f(!1),N=f(!1),B=f(!1),b=f({docente:localStorage.getItem("lastDocente")||"",materia:"",horas:"",grado:"",fecha:new Date().toISOString().split("T")[0],observaciones:""}),ne=f([]),we=f({}),qe=f({}),rt=f(!1),Le=f([]),vt=f(!1),se=f(!1),h=f(!1);const le=()=>{i(vt,!0)},Ge=()=>{i(vt,!1)},Ee=()=>{i(se,!0)},ie=()=>{i(se,!1)},Y=()=>{i(h,!0)},oe=()=>{i(h,!1)};let Q=f(localStorage.getItem("dismissedInfoInasistenciaContent")!==ko),Ue=f(!0),Me=f(!0);function ge(k){return!0}const pe=()=>{localStorage.setItem("dismissedInfoInasistenciaContent",ko),i(Q,!1)},Ie=()=>{localStorage.setItem("dismissedFeatureAlertFilters",new Date().toISOString()),i(Ue,!1)},ot=()=>{localStorage.setItem("dismissedFeatureAlertFilters",new Date().toISOString()),le()},Ve=()=>{localStorage.setItem("dismissedFeatureAlertReport",new Date().toISOString()),i(Me,!1)},Je=()=>{localStorage.setItem("dismissedFeatureAlertReport",new Date().toISOString()),Ee(),i(Me,!1)};let y=f(JSON.parse(localStorage.getItem("docenteMaterias")||"{}"));const p=(k,P)=>{!k||!P||(e(y)[k]||Se(y,e(y)[k]=[]),e(y)[k].includes(P)||(Se(y,e(y)[k]=[...e(y)[k],P]),localStorage.setItem("docenteMaterias",JSON.stringify(e(y)))))},C=()=>`https://docs.google.com/spreadsheets/d/${po}`,E=()=>{window.open(C(),"_blank")},H=()=>{window.open(wa,"_blank")},K=k=>{const P=k.match(/-(\d+)$/);return P?P[1]:null},ee=[{value:"Sin excusa",label:"Sin excusa",icon:"üö´",bgColor:"bg-red-50",borderColor:"border-red-300",textColor:"text-red-700",darkBgColor:"dark:bg-red-950",darkBorderColor:"dark:border-red-800",darkTextColor:"dark:text-red-300",obligaHoras:!0},{value:"Excusa",label:"Excusa",icon:"üìÑ",bgColor:"bg-blue-50",borderColor:"border-blue-300",textColor:"text-blue-700",darkBgColor:"dark:bg-blue-950",darkBorderColor:"dark:border-blue-800",darkTextColor:"dark:text-blue-300",obligaHoras:!0},{value:"LLegada Tarde",label:"Llegada Tarde",icon:"‚è∞",bgColor:"bg-indigo-50",borderColor:"border-indigo-300",textColor:"text-indigo-700",darkBgColor:"dark:bg-indigo-950",darkBorderColor:"dark:border-indigo-800",darkTextColor:"dark:text-indigo-300",obligaHoras:!1},{value:"Transporte Escolar",label:"Transporte Escolar",icon:"üöå",bgColor:"bg-red-50",borderColor:"border-red-300",textColor:"text-red-700",darkBgColor:"dark:bg-red-950",darkBorderColor:"dark:border-red-800",darkTextColor:"dark:text-red-300",obligaHoras:!0},{value:"Permiso",label:"Permiso",icon:"‚úÖ",bgColor:"bg-green-50",borderColor:"border-green-300",textColor:"text-green-700",darkBgColor:"dark:bg-green-950",darkBorderColor:"dark:border-green-800",darkTextColor:"dark:text-green-300",obligaHoras:!0},{value:"No portar/sin uniforme",label:"No portar/sin uniforme",icon:"üëö",bgColor:"bg-cyan-50",borderColor:"border-cyan-300",textColor:"text-cyan-700",darkBgColor:"dark:bg-cyan-950",darkBorderColor:"dark:border-cyan-800",darkTextColor:"dark:text-cyan-300",obligaHoras:!1},{value:"Pacto de Aula",label:"Pacto de Aula",icon:"ü§ù",bgColor:"bg-purple-50",borderColor:"border-purple-300",textColor:"text-purple-700",darkBgColor:"dark:bg-purple-950",darkBorderColor:"dark:border-purple-800",darkTextColor:"dark:text-purple-300",obligaHoras:!1},{value:"Uso del celular",label:"Uso del celular",icon:"üì±",bgColor:"bg-orange-50",borderColor:"border-orange-300",textColor:"text-orange-700",darkBgColor:"dark:bg-orange-950",darkBorderColor:"dark:border-orange-800",darkTextColor:"dark:text-orange-300",obligaHoras:!1},{value:"Desorden en Clase",label:"Desorden en Clase",icon:"üîä",bgColor:"bg-yellow-50",borderColor:"border-yellow-300",textColor:"text-yellow-700",darkBgColor:"dark:bg-yellow-950",darkBorderColor:"dark:border-yellow-800",darkTextColor:"dark:text-yellow-300",obligaHoras:!1},{value:"Fuga",label:"Fuga",icon:"üèÉ‚Äç‚ôÇÔ∏è",bgColor:"bg-red-100",borderColor:"border-red-400",textColor:"text-red-800",darkBgColor:"dark:bg-red-950",darkBorderColor:"dark:border-red-800",darkTextColor:"dark:text-red-300",obligaHoras:!0},{value:"No realizaci√≥n de Aseo",label:"No realizaci√≥n de Aseo",icon:"üßπ",bgColor:"bg-teal-50",borderColor:"border-teal-300",textColor:"text-teal-700",darkBgColor:"dark:bg-teal-950",darkBorderColor:"dark:border-teal-800",darkTextColor:"dark:text-teal-300",obligaHoras:!1},{value:"Licencia por salud",label:"Licencia por salud",icon:"üè•",bgColor:"bg-cyan-50",borderColor:"border-cyan-300",textColor:"text-cyan-700",darkBgColor:"dark:bg-cyan-950",darkBorderColor:"dark:border-cyan-800",darkTextColor:"dark:text-cyan-300",obligaHoras:!0},{value:"Incapacidad",label:"Incapacidad",icon:"ü©∫",bgColor:"bg-pink-50",borderColor:"border-pink-300",textColor:"text-pink-700",darkBgColor:"dark:bg-pink-950",darkBorderColor:"dark:border-pink-800",darkTextColor:"dark:text-pink-300",obligaHoras:!0},{value:"Reuni√≥n interna",label:"Reuni√≥n interna",icon:"üë•",bgColor:"bg-zinc-50",borderColor:"border-zinc-300",textColor:"text-zinc-700",darkBgColor:"dark:bg-zinc-950",darkBorderColor:"dark:border-zinc-800",darkTextColor:"dark:text-zinc-300",obligaHoras:!1},{value:"Ignorar",label:"Ignorar",icon:"üö´",bgColor:"bg-zinc-50",borderColor:"border-zinc-300",textColor:"text-zinc-700",darkBgColor:"dark:bg-zinc-950",darkBorderColor:"dark:border-zinc-800",darkTextColor:"dark:text-zinc-300",obligaHoras:!1},{value:"Psicoorientaci√≥n",label:"Psicoorientaci√≥n",icon:"üß†",bgColor:"bg-green-50",borderColor:"border-green-300",textColor:"text-green-700",darkBgColor:"dark:bg-green-950",darkBorderColor:"dark:border-green-800",darkTextColor:"dark:text-green-300",obligaHoras:!1},{value:"Retirado por el acudiente",label:"Retirado por el acudiente",icon:"üë®",bgColor:"bg-green-50",borderColor:"border-green-300",textColor:"text-green-700",darkBgColor:"dark:bg-green-950",darkBorderColor:"dark:border-green-800",darkTextColor:"dark:text-green-300",obligaHoras:!1}],Te=()=>{Jr.update(k=>k==="light"?"dim":k==="dim"?"dark":"light")},Z=async()=>{i(U,!0),i(N,!0),i(B,!0);try{const[k,P,x]=await Promise.all([Kr(),Zr(),Qr()]);i(F,k),i(l,P),i(D,x)}catch(k){console.error("Error cargando datos iniciales:",k)}finally{i(U,!1),i(N,!1),i(B,!1)}},j=(k,P)=>{i(ne,e(ne).filter(x=>!(x.nombre===k&&x.motivo===P)))},ae=(k,P,x)=>{if(P===""||P==="Ignorar"){i(ne,e(ne).filter(Ce=>Ce.nombre!==k));return}const be=ee.find(Ce=>Ce.value===P);if(!be)return;let Re=e(we)[k]||e(b).horas;if(be.obligaHoras||(Re="0"),be.obligaHoras&&i(ne,e(ne).filter(Ce=>{if(Ce.nombre!==k)return!0;const gt=ee.find(ut=>ut.value===Ce.motivo);return gt&&!gt.obligaHoras})),!e(ne).some(Ce=>Ce.nombre===k&&Ce.motivo===P)){const Ce=e(ne).find(gt=>gt.nombre===k)?.observaciones||"";i(ne,[...e(ne),{nombre:k,motivo:P,horas:Re,observaciones:Ce}])}},me=(k,P)=>{i(ne,e(ne).map(x=>x.nombre===k?{...x,observaciones:P}:x))},xe=k=>{Se(qe,e(qe)[k]=!e(qe)[k])},Qe=(k,P)=>{Se(we,e(we)[k]=P),i(ne,e(ne).map(x=>{if(x.nombre===k){const be=ee.find(Re=>Re.value===x.motivo);if(be&&be.obligaHoras)return{...x,horas:P}}return x}))},Xe=async k=>{if(k.preventDefault(),!(e(rt)||e(ne).length===0)){i(rt,!0);try{const P=new Date().toISOString(),x=e(T)?e(Le):[e(b).materia];if(e(T)&&e(Le).length===0){await zt.fire({icon:"warning",title:"Atenci√≥n",text:"Seleccione al menos una materia",confirmButtonColor:"#6366f1"});return}const be=[],Re=e(ne).filter(He=>He.motivo&&He.motivo!=="Ignorar");for(const He of x)for(const Ce of Re)be.push([P,e(b).docente,e(b).fecha,Ce.horas,He,Ce.motivo,e(b).grado,Ce.nombre,Ce.observaciones||e(b).observaciones]);await Sa({spreadsheetId:po,worksheetTitle:_o,inasistencias:be});for(const He of x)p(e(b).docente,He);await zt.fire({icon:"success",title:"¬°√âxito!",text:`${be.length} inasistencia(s) registrada(s) exitosamente`,timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),i(b,{...e(b),grado:"",fecha:new Date().toISOString().split("T")[0],observaciones:"",horas:""}),i(ne,[]),i(we,{}),i(qe,{}),i(Le,[])}catch(P){console.error("Error enviando:",P),await zt.fire({icon:"error",title:"Error",text:"Error al registrar la inasistencia",confirmButtonColor:"#ef4444"})}finally{i(rt,!1)}}};vr(()=>{Z(),i(Ue,ge()),i(Me,ge())}),Fe(()=>e(b),()=>{i(T,e(b).docente.includes("-"))}),Fe(()=>e(b),()=>{e(b).docente&&localStorage.setItem("lastDocente",e(b).docente)}),Fe(()=>(e(b),e(l),e(y)),()=>{i(r,e(b).docente?[...e(l)].sort((k,P)=>{const x=e(y)[e(b).docente]?.includes(k.materia),be=e(y)[e(b).docente]?.includes(P.materia);return x&&!be?-1:!x&&be?1:k.materia.localeCompare(P.materia)}):e(l))}),Fe(()=>{},()=>{i(d,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Fe(()=>(e(b),e(D)),()=>{i(ze,e(b).grado?e(D).filter(k=>k.grado.toString()===e(b).grado):[])}),Fe(()=>e(b),()=>{i(I,K(e(b).docente))}),Fe(()=>(e(I),e(D)),()=>{i(re,e(I)?[...new Set(e(D).map(k=>k.grado.toString()))].filter(k=>k.startsWith(`${e(I)}-`)):[...new Set(e(D).map(k=>k.grado.toString()))])}),Sr(),Ar();var de=Ws(),L=Wt(de),q=o(L),ue=o(q),Oe=o(ue),n=o(Oe),m=a(n,2),S=a(Oe,2),z=o(S),De=a(z,2),Ke=a(o(De),4);{var et=k=>{var P=ws();g(k,P)};te(Ke,k=>{e(Ue)&&k(et)})}var _e=a(De,2),Lt=a(o(_e),4);{var Zt=k=>{var P=$s();g(k,P)};te(Lt,k=>{e(Me)&&k(Zt)})}var Mt=a(_e,2),Nt=a(Mt,2),Qt=a(Nt,2),Pt=a(Qt,2),Ze=o(Pt),tt=o(Ze);{var At=k=>{var P=Cs();g(k,P)},Tt=k=>{var P=Ss();g(k,P)},jt=k=>{var P=As();g(k,P)};te(tt,k=>{c()==="dark"?k(At):c()==="light"?k(Tt,1):k(jt,!1)})}var Dt=a(tt,2),Et=o(Dt),Gt=a(q,2),lr=o(Gt),rr=o(lr);{var or=k=>{var P=Ds(),x=a(o(P),2),be=a(o(x),2),Re=o(be),He=a(x,2);A(()=>u(Re,ko)),G("click",He,pe),g(k,P)};te(rr,k=>{e(Q)&&k(or)})}var W=a(rr,2);fo(W,{featureMessage:J,description:"Ahora puedes filtrar tus datos de forma avanzada. ¬°Pru√©balo!",onTryNow:ot,onDismiss:Ie,targetSelector:"#filter-button-target",showPopup:!1,colorTheme:"blue"});var ce=a(W,2);fo(ce,{featureMessage:O,description:"Ahora puedes generar reportes de inasistencias en formato Excel. ¬°Descarga y analiza tus datos!",onTryNow:Je,onDismiss:Ve,targetSelector:"#report-button-target",showPopup:!1,colorTheme:"green"});var We=a(ce,2),nt=o(We),ht=o(nt),Ht=o(ht),gr=a(Ht,2),mr=o(gr),Dr=o(mr);mr.value=mr.__value="";var Hr=a(mr);he(Hr,1,()=>e(F),ke,(k,P)=>{var x=Es(),be=o(x),Re={};A(()=>{u(be,e(P)),Re!==(Re=e(P))&&(x.value=(x.__value=e(P))??"")}),g(k,x)});var Xr=a(ht,2),Tr=o(Xr),Er=o(Tr),Gr=a(Tr,2);{var Or=k=>{var P=Bs();he(P,5,()=>e(r),ke,(x,be)=>{const Re=Ot(()=>(e(y),e(b),e(be),t(()=>e(y)[e(b).docente]?.includes(e(be).materia))));var He=Is(),Ce=o(He),gt,ut=a(Ce,2),at=o(ut);A(()=>{s(Ce,`border-color: ${e(d),t(()=>e(d).border)??""}; accent-color: #6366f1;`),gt!==(gt=(e(be),t(()=>e(be).materia)))&&(Ce.value=(Ce.__value=(e(be),t(()=>e(be).materia)))??""),s(ut,`color: ${e(d),t(()=>e(d).text)??""};`),u(at,`${e(Re)?"‚≠ê ":""}${e(be),t(()=>e(be).materia)??""}`)}),Jo(X,[],Ce,()=>(e(be),t(()=>e(be).materia),e(Le)),st=>i(Le,st)),g(x,He)}),A(()=>s(P,`border-color: ${e(d),t(()=>e(d).border)??""}; background-color: ${e(d),t(()=>e(d).inputBg)??""};`)),g(k,P)},Ur=k=>{var P=zs(),x=o(P),be=o(x);x.value=x.__value="";var Re=a(x);he(Re,1,()=>e(r),ke,(He,Ce)=>{const gt=Ot(()=>(e(y),e(b),e(Ce),t(()=>e(y)[e(b).docente]?.includes(e(Ce).materia))));var ut=Fs(),at=o(ut),st={};A(()=>{s(ut,e(gt)?"color: #6366f1; font-weight: 600;":""),u(at,`${e(gt)?"‚≠ê ":""}${e(Ce),t(()=>e(Ce).materia)??""}`),st!==(st=(e(Ce),t(()=>e(Ce).materia)))&&(ut.value=(ut.__value=(e(Ce),t(()=>e(Ce).materia)))??"")}),g(He,ut)}),A(()=>{P.disabled=e(N),s(P,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),u(be,e(N)?"Cargando...":"Seleccione materia")}),ct(P,()=>e(b).materia,He=>(Se(b,e(b).materia=He),Ye(()=>{e(U),e(d),e(F),e(N),e(r),e(y),e(B),e(re)}))),g(k,P)};te(Gr,k=>{e(T)?k(Or):k(Ur,!1)})}var Vr=a(nt,2),Nr=o(Vr),Be=o(Nr),it=a(Be,2),mt=o(it);mt.value=mt.__value="";var Ut=a(mt);Ut.value=Ut.__value="0";var qt=a(Ut);he(qt,0,()=>[1,2,3,4],ke,(k,P)=>{var x=Ms(),be=o(x),Re={};A(He=>{u(be,`${P??""} ${P===1?"Hora":"Horas"}`),Re!==(Re=He)&&(x.value=(x.__value=He)??"")},[()=>t(()=>P.toString())]),g(k,x)});var Yr=a(Nr,2),ye=o(Yr),Pe=a(ye,2),dt=o(Pe),Ft=o(dt);dt.value=dt.__value="";var Rt=a(dt);he(Rt,1,()=>e(re),ke,(k,P)=>{var x=Ts(),be=o(x),Re={};A(He=>{u(be,He),Re!==(Re=e(P))&&(x.value=(x.__value=e(P))??"")},[()=>(e(P),t(()=>e(P).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),g(k,x)});var nr=a(Vr,2);{var Wr=k=>{var P=Gs(),x=o(P),be=o(x),Re=a(x,2),He=o(Re);he(He,1,()=>e(ze),ut=>ut.nombre,(ut,at)=>{const st=Ot(()=>(e(ne),e(at),t(()=>e(ne).filter(yt=>yt.nombre===e(at).nombre)))),Yt=Ot(()=>(Ne(e(st)),t(()=>e(st).length>0))),yr=Ot(()=>(Ne(e(st)),t(()=>e(st).some(yt=>{const xt=ee.find(pt=>pt.value===yt.motivo);return xt&&xt.obligaHoras}))));var bt=Ps(),Bt=Wt(bt);let kr;var $t=o(Bt),br=o($t),ir=o(br),sr=a(br,2);he(sr,5,()=>e(st),ke,(yt,xt)=>{const pt=Ot(()=>(e(xt),t(()=>ee.find(to=>to.value===e(xt).motivo))));var Cr=uo(),oo=Wt(Cr);{var eo=to=>{var yo=Os(),Io=o(yo),Vo=o(Io),Bo=a(Io),Yo=a(Bo);A(()=>{Kt(yo,1,(Ne(e(pt)),t(()=>`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold border ${e(pt).bgColor} ${e(pt).textColor} ${e(pt).borderColor} ${e(pt).darkBgColor} ${e(pt).darkTextColor} ${e(pt).darkBorderColor}`)),"svelte-gsxx31"),u(Vo,(Ne(e(pt)),t(()=>e(pt).icon))),u(Bo,` ${Ne(e(pt)),t(()=>e(pt).label)??""} `)}),G("click",Yo,()=>j(e(at).nombre,e(xt).motivo)),g(to,yo)};te(oo,to=>{e(pt)&&to(eo)})}g(yt,Cr)});var zr=a($t,2),wr=o(zr);let tr;var Jt=o(wr),dr=o(Jt);dr.value=dr.__value="";var Mr=a(dr);Mr.value=Mr.__value="0";var er=a(Mr);he(er,0,()=>[1,2,3,4],ke,(yt,xt)=>{var pt=Ns(),Cr=o(pt),oo={};A(eo=>{u(Cr,xt),oo!==(oo=eo)&&(pt.value=(pt.__value=eo)??"")},[()=>t(()=>xt.toString())]),g(yt,pt)});var Ct;Ko(Jt);var It=a(Jt,2),cr=a(wr,2),$r=o(cr),co=o($r);co.value=co.__value="";var vo=a(co);vo.value=vo.__value="Ignorar";var Ro=a(vo);he(Ro,1,()=>ee,ke,(yt,xt)=>{const pt=Ot(()=>(Ne(e(st)),e(xt),t(()=>e(st).some(to=>to.motivo===e(xt).value))));var Cr=js(),oo=o(Cr),eo={};A(()=>{Cr.disabled=e(pt),u(oo,`${e(xt),t(()=>e(xt).icon)??""} ${e(xt),t(()=>e(xt).label)??""} ${e(pt)?"‚úì":""}`),eo!==(eo=(e(xt),t(()=>e(xt).value)))&&(Cr.value=(Cr.__value=(e(xt),t(()=>e(xt).value)))??"")}),g(yt,Cr)}),$r.value=$r.__value="";var Lo=a($r,2),Po=a(zr,2);{var Ho=yt=>{var xt=Rs(),pt=o(xt);A(()=>s(pt,`color: ${Ne(e(st)),e(d),t(()=>e(st)[0]?.observaciones?"rgb(var(--text-primary))":e(d).icon)??""};`)),G("click",pt,()=>xe(e(at).nombre)),g(yt,xt)};te(Po,yt=>{e(Yt)&&yt(Ho)})}var Go=a(Bt,2);{var Uo=yt=>{var xt=Ls(),pt=o(xt);A(()=>{Qo(pt,(Ne(e(st)),t(()=>e(st)[0]?.observaciones||""))),s(pt,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`)}),G("input",pt,Cr=>me(e(at).nombre,Cr.currentTarget.value)),g(yt,xt)};te(Go,yt=>{Ne(e(Yt)),e(qe),e(at),Ne(e(st)),t(()=>e(Yt)&&(e(qe)[e(at).nombre]||e(st)[0]?.observaciones))&&yt(Uo)})}A(yt=>{kr=Kt(Bt,1,"flex flex-col sm:flex-row sm:items-center justify-between p-4 border rounded-xl transition-all duration-200 gap-4 svelte-gsxx31",null,kr,{"ring-2":e(Yt),"ring-indigo-500":e(Yt)}),s(Bt,`background-color: ${e(d),t(()=>e(d).bg)??""}; border-color: ${Ne(e(Yt)),e(d),t(()=>e(Yt)?"transparent":e(d).border)??""};`),s(br,`color: ${e(d),t(()=>e(d).text)??""};`),u(ir,(e(at),t(()=>e(at).nombre))),tr=Kt(wr,1,"relative w-full sm:w-32 transition-opacity duration-200 svelte-gsxx31",null,tr,{"opacity-40":!e(yr)}),Jt.disabled=!e(yr),s(Jt,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),Ct!==(Ct=yt)&&(Jt.value=(Jt.__value=yt)??"",Zo(Jt,yt)),s(It,`color: ${e(d),t(()=>e(d).icon)??""};`),s($r,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),s(Lo,`color: ${e(d),t(()=>e(d).icon)??""};`)},[()=>(Ne(e(st)),e(we),e(at),e(b),t(()=>e(st).find(yt=>{const xt=ee.find(pt=>pt.value===yt.motivo);return xt&&xt.obligaHoras})?.horas||e(we)[e(at).nombre]||e(b).horas))]),G("change",Jt,yt=>Qe(e(at).nombre,yt.currentTarget.value)),G("change",$r,yt=>{ae(e(at).nombre,yt.currentTarget.value),yt.currentTarget.value=""}),g(ut,bt)});var Ce=a(He,2);{var gt=ut=>{var at=Hs();A(()=>s(at,`color: ${e(d),t(()=>e(d).text)??""};`)),g(ut,at)};te(Ce,ut=>{e(ze),t(()=>e(ze).length===0)&&ut(gt)})}A(()=>{s(x,`color: ${e(d),t(()=>e(d).label)??""};`),u(be,`Estudiantes del Grado ${e(b),t(()=>e(b).grado)??""}`),s(Re,`border-color: ${e(d),t(()=>e(d).border)??""};`)}),g(k,P)};te(nr,k=>{e(b),t(()=>e(b).grado&&e(b).horas!=="")&&k(Wr)})}var jr=a(nr,2),Rr=o(jr),qr=o(Rr),Ir=a(qr,2),Lr=a(Rr,2),fe=o(Lr),Xt=a(fe,2),ar=a(jr,2),pr=o(ar),Pr=a(o(pr)),ur=o(Pr),_=a(Gt,2),M=o(_);{var ve=k=>{var P=Us();g(k,P)},$e=k=>{var P=Vs();g(k,P)};te(M,k=>{e(rt)?k(ve):k($e,!1)})}var je=a(M,2);{var lt=k=>{var P=Ys(),x=o(P);A(()=>u(x,(e(ne),t(()=>e(ne).length)))),g(k,P)};te(je,k=>{e(rt),e(ne),t(()=>!e(rt)&&e(ne).length>0)&&k(lt)})}var _t=a(L,2);{var Vt=k=>{Za(k,{onClose:Ge,get selectedDocente(){return e(b),t(()=>e(b).docente)}})};te(_t,k=>{e(vt)&&k(Vt)})}var ft=a(_t,2);{var _r=k=>{ks(k,{onClose:ie,get initialDocente(){return e(b),t(()=>e(b).docente)}})};te(ft,k=>{e(se)&&k(_r)})}var Br=a(ft,2);{var Fr=k=>{jo(k,{onClose:oe,get initialDocente(){return e(b),t(()=>e(b).docente)}})};te(Br,k=>{e(h)&&k(Fr)})}A(()=>{s(L,`background-color: ${e(d),t(()=>e(d).bg)??""};`),s(q,`background-color: ${e(d),t(()=>e(d).cardBg)??""}; border-color: ${e(d),t(()=>e(d).cardBorder)??""};`),wt(n,"src",ro),s(m,`color: ${e(d),t(()=>e(d).text)??""};`),s(z,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),s(De,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),s(_e,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),s(Mt,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),s(Nt,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),s(Qt,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),s(Ze,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),u(Et,c()),s(lr,`background-color: ${e(d),t(()=>e(d).cardBg)??""}; border-color: ${e(d),t(()=>e(d).cardBorder)??""};`),s(Ht,`color: ${e(d),t(()=>e(d).label)??""};`),gr.disabled=e(U),s(gr,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),u(Dr,e(U)?"Cargando...":"Seleccione docente"),s(Er,`color: ${e(d),t(()=>e(d).label)??""};`),s(Be,`color: ${e(d),t(()=>e(d).label)??""};`),s(it,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),s(ye,`color: ${e(d),t(()=>e(d).label)??""};`),Pe.disabled=e(B),s(Pe,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),u(Ft,e(B)?"Cargando...":"Seleccione grado"),s(qr,`color: ${e(d),t(()=>e(d).label)??""};`),s(Ir,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),s(fe,`color: ${e(d),t(()=>e(d).label)??""};`),s(Xt,`background-color: ${e(d),t(()=>e(d).inputBg)??""}; border-color: ${e(d),t(()=>e(d).border)??""}; color: ${e(d),t(()=>e(d).text)??""};`),s(ar,`border-color: ${e(d),t(()=>e(d).border)??""};`),s(pr,`color: ${e(d),t(()=>e(d).label)??""};`),u(ur,(e(ne),t(()=>e(ne).length))),_.disabled=(e(rt),e(ne),e(b),e(T),e(Le),t(()=>e(rt)||e(ne).length===0||!e(b).docente||(e(T)?e(Le).length===0:!e(b).materia)))}),G("click",z,E),G("click",De,le),G("click",_e,Ee),G("click",Mt,Y),G("click",Nt,H),G("click",Qt,function(...k){R()?.apply(this,k)}),G("click",Ze,Te),ct(gr,()=>e(b).docente,k=>(Se(b,e(b).docente=k),Ye(()=>{e(U),e(d),e(F),e(N),e(r),e(y),e(B),e(re)}))),ct(it,()=>e(b).horas,k=>(Se(b,e(b).horas=k),Ye(()=>{e(U),e(d),e(F),e(N),e(r),e(y),e(B),e(re)}))),ct(Pe,()=>e(b).grado,k=>(Se(b,e(b).grado=k),Ye(()=>{e(U),e(d),e(F),e(N),e(r),e(y),e(B),e(re)}))),fr(Ir,()=>e(b).fecha,k=>(Se(b,e(b).fecha=k),Ye(()=>{e(U),e(d),e(F),e(N),e(r),e(y),e(B),e(re)}))),fr(Xt,()=>e(b).observaciones,k=>(Se(b,e(b).observaciones=k),Ye(()=>{e(U),e(d),e(F),e(N),e(r),e(y),e(B),e(re)}))),G("submit",We,Xe),G("click",_,Xe),g(V,de),hr(),v()}var Js=w('<div class="flex-1 flex items-center justify-center"><div class="text-center"><div class="animate-spin w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full mx-auto mb-4"></div> <p>Cargando datos...</p></div></div>'),Ks=w('<span class="ml-2 px-2 py-1 text-xs bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full">Activos</span>'),Zs=w("<option> </option>"),Qs=w("<option> </option>"),Xs=w('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">Este docente no tiene registros de materias</p>'),el=w("<option> </option>"),tl=w('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">No hay grados para los filtros seleccionados</p>'),rl=w('<div class="flex-1 flex items-center justify-center"><div class="text-center py-12 px-4"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm sm:text-base">No se encontraron registros con los filtros seleccionados</p></div></div>'),ol=w('<tr class="border-b transition-colors hover:bg-black/5 dark:hover:bg-white/5 text-xs"><td class="p-2"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 text-center"> </td><td class="p-2 text-center"> </td><td class="p-2"><div class="flex items-center gap-2 max-w-[300px]"><span><span> </span></span> <span class="truncate"> </span></div></td><td class="p-2"><span class="truncate block max-w-xs text-xs"> </span></td></tr>'),al=w('<div><p class="text-xs font-medium mb-1">Observaci√≥n:</p> <p class="text-xs"> </p></div>'),sl=w('<div class="border rounded-lg p-3 transition-colors hover:bg-black/5 dark:hover:bg-white/5"><div class="flex justify-between items-center mb-2"><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><span><span> </span></span> <p class="text-xs opacity-75"> </p></div></div></div> <div class="flex gap-2 text-[10px] mb-2"><div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="truncate"> </span></div> <div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <span class="truncate"> </span></div></div> <div class="mb-2"><p class="text-xs font-medium mb-1">Anotaci√≥n:</p> <p class="text-xs"> </p></div> <!></div>'),ll=w('<div class="hidden lg:flex flex-1 flex-col overflow-hidden min-h-0"><div class="flex-1 overflow-auto min-w-full border rounded-lg"><table class="w-full border-collapse text-sm min-w-[900px]"><thead class="sticky top-0 z-10 border-b"><tr><th class="text-left p-2 font-semibold whitespace-nowrap">Fecha</th><th class="text-left p-2 font-semibold whitespace-nowrap">Docente</th><th class="text-left p-2 font-semibold whitespace-nowrap">Materia</th><th class="text-center p-2 font-semibold whitespace-nowrap">Grado</th><th class="text-center p-2 font-semibold whitespace-nowrap">Horas</th><th class="text-left p-2 font-semibold whitespace-nowrap">Anotaci√≥n</th><th class="text-left p-2 font-semibold whitespace-nowrap">Observaci√≥n</th></tr></thead><tbody></tbody></table></div></div> <div class="flex-1 overflow-y-auto lg:hidden px-1"><div class="space-y-2"></div></div>',1),nl=w('<div class="p-3 sm:p-4 border-b"><div class="flex items-center justify-between mb-2 sm:mb-3"><h3 class="text-lg font-semibold">Filtros <!></h3> <button class="text-sm px-3 py-1 rounded-lg border transition-colors hover:bg-black/5 dark:hover:bg-white/5">Limpiar filtros</button></div> <div class="mb-3 p-1.5 sm:p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg"><p class="text-[10px] sm:text-xs font-medium mb-1.5">R√°pido: Fechas</p> <div class="flex items-center mb-2"><input id="checkFiltrarFecha" type="checkbox" class="w-4 h-4 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 dark:bg-zinc-700"/> <label for="checkFiltrarFecha" class="ml-2 text-xs font-medium">Activar filtro por fechas</label></div> <div class="flex flex-wrap gap-1 sm:gap-2"><button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Hoy</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 7 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 30 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Mes actual</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimo trimestre</button></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"><div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroDocente" class="block text-xs sm:text-sm font-medium">Docente</label> <select id="filtroDocente" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option>Todos los docentes</option><!></select></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroMateria" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroMateria" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroGrado" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroGrado" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroAnotacion" class="block text-xs sm:text-sm font-medium">B√∫squeda en anotaci√≥n</label> <input id="filtroAnotacion" type="text" placeholder="Buscar en anotaciones..." class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"/></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaInicio" class="block text-xs sm:text-sm font-medium">Fecha desde</label> <input id="filtroFechaInicio" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaFin" class="block text-xs sm:text-sm font-medium">Fecha hasta</label> <input id="filtroFechaFin" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div></div></div></div> <div class="flex-1 flex flex-col p-2 sm:p-4 min-h-0"><div class="mb-4 px-0 sm:px-3"><p class="text-sm">Se encontraron <span class="font-bold text-indigo-500"> </span> registros</p></div> <!></div>',1),il=w('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4" role="button" tabindex="0" aria-label="Cerrar ventana"><div class="w-full max-w-7xl max-h-[95vh] bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl overflow-hidden flex flex-col"><div class="flex items-center justify-between p-3 sm:p-4 border-b"><div class="flex items-center gap-3"><img alt="EIE Logo" class="h-8 w-auto hidden sm:block"/> <div><h2 class="text-lg sm:text-xl font-bold">Anotaciones de Clase</h2> <p class="text-xs hidden sm:block">Filtra y consulta los registros</p></div></div> <div class="flex items-center gap-3"><button class="inline-flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Exportar CSV</button> <button class="p-2 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5" aria-label="Cerrar"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div> <div class="flex-1 overflow-hidden flex flex-col min-h-0"><!></div></div></div>');function dl(V,$){xr($,!1);const c=f(),Ae=f(),v=f(),T=f(),r=f();let d=St($,"onClose",8),ze=St($,"selectedDocente",8,""),I=f([]),re=[],X=[],J=[],O=f(!1),R=f(!1),F=f([]),l=f({docente:ze()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",anotacion:""});const D=()=>{const y=new Date,p=new Date(y.getFullYear(),y.getMonth()-1,y.getDate()),C=E=>{const H=E.getFullYear(),K=String(E.getMonth()+1).padStart(2,"0"),ee=String(E.getDate()).padStart(2,"0");return`${H}-${K}-${ee}`};Se(l,e(l).fechaInicio=C(p)),Ye(()=>{e(r),e(b),e(c),e(v)}),Se(l,e(l).fechaFin=C(y)),Ye(()=>{e(r),e(b),e(c),e(v)})},U=y=>{const p=new Date;let C;switch(y){case"hoy":C=new Date(p);break;case"semana":C=new Date(p),C.setDate(p.getDate()-7);break;case"mes":C=new Date(p),C.setDate(p.getDate()-30);break;case"mes_actual":C=new Date(p.getFullYear(),p.getMonth(),1);break;case"trimestre":C=new Date(p),C.setDate(p.getDate()-90);break;default:D();return}const E=H=>{const K=H.getFullYear(),ee=String(H.getMonth()+1).padStart(2,"0"),Te=String(H.getDate()).padStart(2,"0");return`${K}-${ee}-${Te}`};Se(l,e(l).fechaInicio=E(C)),Ye(()=>{e(r),e(b),e(c),e(v)}),Se(l,e(l).fechaFin=E(p)),Ye(()=>{e(r),e(b),e(c),e(v)}),i(R,!0)},N=[{value:"Estrategias de Ense√±anza-Aprendizaje",icon:"üìö",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},{value:"Evaluaci√≥n y Verificaci√≥n de Saberes",icon:"üìù",color:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200"},{value:"Enfoque STEM+ y Contexto Rural",icon:"üî¨",color:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200"},{value:"Pr√°cticas de Laboratorio y Mantenimiento",icon:"üîß",color:"bg-rose-100 text-rose-800 dark:bg-rose-900 dark:text-rose-200"},{value:"Ciudadan√≠a Digital y √âtica",icon:"üíª",color:"bg-violet-100 text-violet-800 dark:bg-violet-900 dark:text-violet-200"},{value:"Pensamiento Computacional y Programaci√≥n",icon:"üíª",color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"},{value:"Recursos Anal√≥gicos y Contingencias",icon:"üìã",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},{value:"Ofim√°tica y Competencias Productivas",icon:"üñ•Ô∏è",color:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200"},{value:"Gesti√≥n Administrativa y Proyectos Transversales",icon:"üìä",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}],B=y=>{for(const p of N)if(y.includes(p.value))return p;return{icon:"üìù",color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};let b=f([]),ne=f([]),we=f([]),qe=f([]);const rt=async()=>{i(O,!0);try{const[y,p,C,E]=await Promise.all([No({spreadsheetId:xo,worksheetTitle:Do}),Kr(),Zr(),Qr()]),H=Z=>{if(!Z?.records||!Array.isArray(Z.records))return[];const j=Z.records[0]?.values||[];return Z.records.slice(1).map(me=>{const xe=me.values||[];return{timestamp:xe[0]||"",fecha:xe[1]||"",docente:xe[2]||"",materia:xe[3]||"",grado:xe[4]||"",horas:xe[5]||"",anotacion:xe[6]||"",observacion:xe[7]||""}}).filter(me=>me.docente&&me.fecha)},K=Z=>Array.isArray(Z)?Z:Z?.data&&Array.isArray(Z.data)?Z.data:Z?.rows&&Array.isArray(Z.rows)?Z.rows:Z?.values&&Array.isArray(Z.values)?Z.values:Z?.anotaciones&&Array.isArray(Z.anotaciones)?Z.anotaciones:[];i(I,H(y)),re=K(p),X=K(C),J=K(E),i(b,e(I).length>0?[...new Set(e(I).map(Z=>Z.docente).filter(Boolean))].sort():[]),i(ne,e(I).length>0?[...new Set(e(I).map(Z=>Z.materia).filter(Boolean))].sort():[]);const ee=[...new Set(J.map(Z=>(typeof Z=="string"?Z:Z.grado||"").toString()).filter(Boolean))],Te=e(I).length>0?e(I).map(Z=>Z.grado).filter(Boolean):[];i(we,[...new Set([...ee,...Te])].sort((Z,j)=>{const ae=parseInt(Z),me=parseInt(j);return!isNaN(ae)&&!isNaN(me)?ae-me:Z.localeCompare(j)})),i(qe,e(I).length>0?[...new Set(e(I).map(Z=>Z.anotacion).filter(Boolean))].sort():[]),D(),console.log("Datos cargados:",{anotaciones:e(I).length,docentes:re.length,docentesUnicos:e(b).length,materiasUnicas:e(ne).length,gradosUnicos:e(we).length,anotacionesUnicas:e(qe).length})}catch(y){console.error("Error cargando datos:",y),await zt.fire({icon:"error",title:"Error",text:"No se pudieron cargar los datos de anotaciones",confirmButtonColor:"#ef4444"})}finally{i(O,!1)}},Le=()=>{i(l,{docente:ze()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",anotacion:""}),D(),i(R,!1)},vt=()=>{if(e(F).length===0){zt.fire({icon:"warning",title:"Sin datos",text:"No hay datos para exportar",confirmButtonColor:"#f59e0b"});return}const p=[["Fecha","Docente","Materia","Grado","Horas","Anotaci√≥n","Observaci√≥n"].join(","),...e(F).map(K=>[K.fecha,`"${K.docente}"`,`"${K.materia}"`,K.grado,K.horas,`"${K.anotacion}"`,`"${K.observacion}"`].join(","))].join(`
`),C=new Blob([p],{type:"text/csv;charset=utf-8;"}),E=document.createElement("a"),H=URL.createObjectURL(C);E.setAttribute("href",H),E.setAttribute("download",`anotaciones_${new Date().toISOString().split("T")[0]}.csv`),E.style.visibility="hidden",document.body.appendChild(E),E.click(),document.body.removeChild(E)},se=y=>{try{const[p,C,E]=y.split("-");return p&&C&&E?`${E}/${C}/${p}`:y}catch{return y}},h=(y,p=50)=>y.length<=p?y:y.substring(0,p)+"...";vr(()=>{rt()}),Fe(()=>(e(l),e(I),e(ne)),()=>{i(c,e(l).docente?[...new Set(e(I).filter(y=>y.docente===e(l).docente).map(y=>y.materia).filter(Boolean))].sort():e(ne))}),Fe(()=>(e(l),e(I),e(we)),()=>{i(Ae,e(l).docente?[...new Set(e(I).filter(y=>y.docente===e(l).docente).map(y=>y.grado).filter(Boolean))].sort((y,p)=>{const C=parseInt(y),E=parseInt(p);return!isNaN(C)&&!isNaN(E)?C-E:y.localeCompare(p)}):e(we))}),Fe(()=>(e(l),e(I),e(Ae)),()=>{i(v,e(l).materia?[...new Set(e(I).filter(y=>y.materia===e(l).materia).map(y=>y.grado).filter(Boolean))].sort((y,p)=>{const C=parseInt(y),E=parseInt(p);return!isNaN(C)&&!isNaN(E)?C-E:y.localeCompare(p)}):e(Ae))}),Fe(()=>(e(l),e(I),e(qe)),()=>{i(T,e(l).docente||e(l).materia||e(l).grado?[...new Set(e(I).filter(y=>!(e(l).docente&&y.docente!==e(l).docente||e(l).materia&&y.materia!==e(l).materia||e(l).grado&&y.grado!==e(l).grado)).map(y=>y.anotacion).filter(Boolean))].sort():e(qe))}),Fe(()=>{},()=>{i(r,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Fe(()=>(e(I),e(l),e(R)),()=>{i(F,e(I).filter(y=>{if(e(l).docente&&y.docente!==e(l).docente||e(l).materia&&y.materia!==e(l).materia||e(l).grado&&y.grado!==e(l).grado||e(l).anotacion&&!y.anotacion.toLowerCase().includes(e(l).anotacion.toLowerCase()))return!1;if(e(R)){const p=y.fecha;if(e(l).fechaInicio&&p<e(l).fechaInicio||e(l).fechaFin&&p>e(l).fechaFin)return!1}return!0}))}),Fe(()=>(e(R),e(l)),()=>{e(R)&&(!e(l).fechaInicio||!e(l).fechaFin)&&D()}),Sr(),Ar();var le=il(),Ge=o(le),Ee=o(Ge),ie=o(Ee),Y=o(ie),oe=a(Y,2),Q=o(oe),Ue=a(Q,2),Me=a(ie,2),ge=o(Me),pe=a(ge,2),Ie=a(Ee,2),ot=o(Ie);{var Ve=y=>{var p=Js(),C=o(p),E=a(o(C),2);A(()=>s(E,`color: ${e(r),t(()=>e(r).text)??""};`)),g(y,p)},Je=y=>{var p=nl(),C=Wt(p),E=o(C),H=o(E),K=a(o(H));{var ee=Be=>{var it=Ks();g(Be,it)};te(K,Be=>{e(l),t(()=>e(l).docente||e(l).materia||e(l).grado||e(l).anotacion||e(l).fechaInicio||e(l).fechaFin)&&Be(ee)})}var Te=a(H,2),Z=a(E,2),j=o(Z),ae=a(j,2),me=o(ae),xe=a(me,2),Qe=a(ae,2),Xe=o(Qe),de=a(Xe,2),L=a(de,2),q=a(L,2),ue=a(q,2),Oe=a(Z,2),n=o(Oe),m=o(n),S=o(m),z=a(S,2),De=o(z);De.value=De.__value="";var Ke=a(De);he(Ke,1,()=>e(b),ke,(Be,it)=>{var mt=Zs(),Ut=o(mt),qt={};A(()=>{u(Ut,e(it)),qt!==(qt=e(it))&&(mt.value=(mt.__value=e(it))??"")}),g(Be,mt)});var et=a(m,2),_e=o(et),Lt=o(_e),Zt=a(_e,2),Mt=o(Zt),Nt=o(Mt);Mt.value=Mt.__value="";var Qt=a(Mt);he(Qt,1,()=>e(c),ke,(Be,it)=>{var mt=Qs(),Ut=o(mt),qt={};A(()=>{u(Ut,e(it)),qt!==(qt=e(it))&&(mt.value=(mt.__value=e(it))??"")}),g(Be,mt)});var Pt=a(Zt,2);{var Ze=Be=>{var it=Xs();g(Be,it)};te(Pt,Be=>{e(l),e(c),t(()=>e(l).docente&&e(c).length===0)&&Be(Ze)})}var tt=a(n,2),At=o(tt),Tt=o(At),jt=o(Tt),Dt=a(Tt,2),Et=o(Dt),Gt=o(Et);Et.value=Et.__value="";var lr=a(Et);he(lr,1,()=>e(v),ke,(Be,it)=>{var mt=el(),Ut=o(mt),qt={};A(()=>{u(Ut,e(it)),qt!==(qt=e(it))&&(mt.value=(mt.__value=e(it))??"")}),g(Be,mt)});var rr=a(Dt,2);{var or=Be=>{var it=tl();g(Be,it)};te(rr,Be=>{e(l),e(v),t(()=>(e(l).docente||e(l).materia)&&e(v).length===0)&&Be(or)})}var W=a(At,2),ce=o(W),We=a(ce,2),nt=a(tt,2),ht=o(nt),Ht=o(ht),gr=a(Ht,2),mr=a(ht,2),Dr=o(mr),Hr=a(Dr,2),Xr=a(C,2),Tr=o(Xr),Er=o(Tr),Gr=a(o(Er)),Or=o(Gr),Ur=a(Tr,2);{var Vr=Be=>{var it=rl(),mt=o(it),Ut=o(mt),qt=a(Ut,2);A(()=>{s(Ut,`color: ${e(r),t(()=>e(r).icon)??""};`),s(qt,`color: ${e(r),t(()=>e(r).text)??""};`)}),g(Be,it)},Nr=Be=>{var it=ll(),mt=Wt(it),Ut=o(mt),qt=o(Ut),Yr=o(qt),ye=o(Yr),Pe=o(ye),dt=a(Pe),Ft=a(dt),Rt=a(Ft),nr=a(Rt),Wr=a(nr),jr=a(Wr),Rr=a(Yr);he(Rr,5,()=>e(F),ke,(Lr,fe)=>{const Xt=Ot(()=>(e(fe),t(()=>B(e(fe).anotacion))));var ar=ol(),pr=o(ar),Pr=o(pr),ur=a(pr),_=o(ur),M=a(ur),ve=o(M),$e=a(M),je=o($e),lt=a($e),_t=o(lt),Vt=a(lt),ft=o(Vt),_r=o(ft),Br=o(_r),Fr=o(Br),k=a(_r,2),P=o(k),x=a(Vt),be=o(x),Re=o(be);A((He,Ce)=>{s(ar,`border-color: ${e(r),t(()=>e(r).border)??""};`),s(pr,`color: ${e(r),t(()=>e(r).text)??""};`),u(Pr,He),s(ur,`color: ${e(r),t(()=>e(r).text)??""};`),wt(ur,"title",(e(fe),t(()=>e(fe).docente))),u(_,(e(fe),t(()=>e(fe).docente))),s(M,`color: ${e(r),t(()=>e(r).text)??""};`),wt(M,"title",(e(fe),t(()=>e(fe).materia))),u(ve,(e(fe),t(()=>e(fe).materia))),s($e,`color: ${e(r),t(()=>e(r).text)??""};`),u(je,(e(fe),t(()=>e(fe).grado))),s(lt,`color: ${e(r),t(()=>e(r).text)??""};`),u(_t,(e(fe),t(()=>e(fe).horas))),s(Vt,`color: ${e(r),t(()=>e(r).text)??""};`),Kt(_r,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Ne(e(Xt)),t(()=>e(Xt).color)??""} flex-shrink-0`),u(Fr,(Ne(e(Xt)),t(()=>e(Xt).icon))),wt(k,"title",(e(fe),t(()=>e(fe).anotacion))),u(P,Ce),s(x,`color: ${e(r),t(()=>e(r).text)??""};`),u(Re,(e(fe),t(()=>e(fe).observacion||"-")))},[()=>(e(fe),t(()=>se(e(fe).fecha))),()=>(e(fe),t(()=>h(e(fe).anotacion,100)))]),g(Lr,ar)});var qr=a(mt,2),Ir=o(qr);he(Ir,5,()=>e(F),ke,(Lr,fe)=>{const Xt=Ot(()=>(e(fe),t(()=>B(e(fe).anotacion))));var ar=sl(),pr=o(ar),Pr=o(pr),ur=o(Pr),_=o(ur),M=o(_),ve=o(M),$e=a(_,2),je=o($e),lt=a(pr,2),_t=o(lt),Vt=a(o(_t),2),ft=o(Vt),_r=a(_t,2),Br=a(o(_r),2),Fr=o(Br),k=a(lt,2),P=o(k),x=a(P,2),be=o(x),Re=a(k,2);{var He=Ce=>{var gt=al(),ut=o(gt),at=a(ut,2),st=o(at);A(Yt=>{s(ut,`color: ${e(r),t(()=>e(r).label)??""};`),s(at,`color: ${e(r),t(()=>e(r).text)??""};`),wt(at,"title",(e(fe),t(()=>e(fe).observacion))),u(st,Yt)},[()=>(e(fe),t(()=>h(e(fe).observacion,150)))]),g(Ce,gt)};te(Re,Ce=>{e(fe),t(()=>e(fe).observacion)&&Ce(He)})}A((Ce,gt)=>{s(ar,`border-color: ${e(r),t(()=>e(r).cardBorder)??""}; background-color: ${e(r),t(()=>e(r).cardBg)??""};`),Kt(_,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium ${Ne(e(Xt)),t(()=>e(Xt).color)??""} flex-shrink-0`),u(ve,(Ne(e(Xt)),t(()=>e(Xt).icon))),s($e,`color: ${e(r),t(()=>e(r).label)??""};`),u(je,`${e(fe),t(()=>e(fe).grado)??""} ‚Ä¢ ${Ce??""} ‚Ä¢ ${e(fe),t(()=>e(fe).horas)??""}h`),s(lt,`color: ${e(r),t(()=>e(r).text)??""};`),u(ft,(e(fe),t(()=>e(fe).docente))),wt(Br,"title",(e(fe),t(()=>e(fe).materia))),u(Fr,(e(fe),t(()=>e(fe).materia))),s(P,`color: ${e(r),t(()=>e(r).label)??""};`),s(x,`color: ${e(r),t(()=>e(r).text)??""};`),wt(x,"title",(e(fe),t(()=>e(fe).anotacion))),u(be,gt)},[()=>(e(fe),t(()=>se(e(fe).fecha))),()=>(e(fe),t(()=>h(e(fe).anotacion,150)))]),g(Lr,ar)}),A(()=>{s(Ut,`border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),s(Yr,`background-color: ${e(r),t(()=>e(r).cardBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""};`),s(Pe,`color: ${e(r),t(()=>e(r).text)??""};`),s(dt,`color: ${e(r),t(()=>e(r).text)??""};`),s(Ft,`color: ${e(r),t(()=>e(r).text)??""};`),s(Rt,`color: ${e(r),t(()=>e(r).text)??""};`),s(nr,`color: ${e(r),t(()=>e(r).text)??""};`),s(Wr,`color: ${e(r),t(()=>e(r).text)??""};`),s(jr,`color: ${e(r),t(()=>e(r).text)??""};`)}),g(Be,it)};te(Ur,Be=>{e(F),t(()=>e(F).length===0)?Be(Vr):Be(Nr,!1)})}A(()=>{s(C,`border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),s(H,`color: ${e(r),t(()=>e(r).text)??""};`),s(Te,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(j,`color: ${e(r),t(()=>e(r).text)??""};`),s(xe,`color: ${e(r),t(()=>e(r).text)??""};`),s(Xe,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(de,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(L,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(q,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(ue,`border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(S,`color: ${e(r),t(()=>e(r).label)??""};`),s(z,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(_e,`color: ${e(r),t(()=>e(r).label)??""};`),u(Lt,`Materia ${e(l),t(()=>e(l).docente?"(del docente)":"")??""}`),s(Zt,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),u(Nt,(e(l),t(()=>e(l).docente?"Todas las materias del docente":"Todas las materias"))),s(Tt,`color: ${e(r),t(()=>e(r).label)??""};`),u(jt,`Grado ${e(l),t(()=>e(l).docente||e(l).materia?"(filtrado)":"")??""}`),s(Dt,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),u(Gt,(e(l),t(()=>e(l).docente||e(l).materia?"Todos los grados filtrados":"Todos los grados"))),s(ce,`color: ${e(r),t(()=>e(r).label)??""};`),s(We,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(Ht,`color: ${e(r),t(()=>e(r).label)??""};`),gr.disabled=!e(R),s(gr,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(Dr,`color: ${e(r),t(()=>e(r).label)??""};`),Hr.disabled=!e(R),s(Hr,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(Er,`color: ${e(r),t(()=>e(r).label)??""};`),u(Or,(e(F),t(()=>e(F).length)))}),G("click",Te,Le),Ao(me,()=>e(R),Be=>i(R,Be)),G("click",Xe,()=>U("hoy")),G("click",de,()=>U("semana")),G("click",L,()=>U("mes")),G("click",q,()=>U("mes_actual")),G("click",ue,()=>U("trimestre")),ct(z,()=>e(l).docente,Be=>(Se(l,e(l).docente=Be),Ye(()=>{e(r),e(b),e(c),e(v)}))),ct(Zt,()=>e(l).materia,Be=>(Se(l,e(l).materia=Be),Ye(()=>{e(r),e(b),e(c),e(v)}))),ct(Dt,()=>e(l).grado,Be=>(Se(l,e(l).grado=Be),Ye(()=>{e(r),e(b),e(c),e(v)}))),fr(We,()=>e(l).anotacion,Be=>(Se(l,e(l).anotacion=Be),Ye(()=>{e(r),e(b),e(c),e(v)}))),fr(gr,()=>e(l).fechaInicio,Be=>(Se(l,e(l).fechaInicio=Be),Ye(()=>{e(r),e(b),e(c),e(v)}))),fr(Hr,()=>e(l).fechaFin,Be=>(Se(l,e(l).fechaFin=Be),Ye(()=>{e(r),e(b),e(c),e(v)}))),g(y,p)};te(ot,y=>{e(O)?y(Ve):y(Je,!1)})}A(()=>{s(Ge,`background-color: ${e(r),t(()=>e(r).cardBg)??""};`),s(Ee,`border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),wt(Y,"src",ro),s(Q,`color: ${e(r),t(()=>e(r).text)??""};`),s(Ue,`color: ${e(r),t(()=>e(r).label)??""};`),ge.disabled=(e(F),t(()=>e(F).length===0)),s(pe,`color: ${e(r),t(()=>e(r).text)??""};`)}),G("click",ge,vt),G("click",pe,function(...y){d()?.apply(this,y)}),G("click",le,lo(function(...y){d()?.apply(this,y)})),G("keydown",le,y=>{(y.key==="Enter"||y.key===" ")&&d()()}),g(V,le),hr()}var cl=w("<option> </option>"),vl=w("<option> </option>"),gl=w("<option> </option>"),pl=kt('<svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Cargando...',1),ul=kt('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> Aplicar Filtros',1),bl=w('<div class="text-sm opacity-75"> </div>'),fl=w('<div class="flex items-center justify-center py-12"><!></div>'),xl=w('<div class="text-center py-12"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v2a2 2 0 002 2h6a2 2 0 002-2v-2M9 17H5a2 2 0 01-2-2v-6a2 2 0 012-2h4M9 7V5a2 2 0 012-2h6a2 2 0 012 2v2M9 7h10a2 2 0 012 2v6a2 2 0 01-2 2H9M9 7V17m0 0h10"></path></svg> <p class="text-lg font-medium mb-2">No hay datos disponibles</p> <p class="text-sm"> </p></div>'),hl=w('<tr class="border-t transition-colors hover:bg-gray-50 dark:hover:bg-gray-800"><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"><div class="truncate"> </div></td><td class="px-4 py-3 text-sm"><div class="truncate"> </div></td></tr>'),ml=w('<tr class="border-t-2 font-bold bg-gray-100 dark:bg-gray-800"><td class="px-4 py-3 text-sm font-bold">TOTAL</td><td class="px-4 py-3 text-sm font-bold text-center"> </td><td class="px-4 py-3 text-sm font-bold text-center"></td><td class="px-4 py-3 text-sm font-bold text-center"> </td></tr>'),_l=w('<div class="overflow-x-auto rounded-lg border"><table class="w-full"><thead><tr><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Fecha</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Horas</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Asignatura</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Anotaci√≥n</th></tr></thead><tbody><!><!></tbody></table></div>'),yl=w('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-2xl" role="document"><div class="flex items-center justify-between p-6 border-b"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v2a2 2 0 002 2h6a2 2 0 002-2v-2M9 17H5a2 2 0 01-2-2v-6a2 2 0 012-2h4M9 7V5a2 2 0 012-2h6a2 2 0 012 2v2M9 7h10a2 2 0 012 2v6a2 2 0 01-2 2H9M9 7V17m0 0h10"></path></svg></div> <div><h2 id="modal-title" class="text-xl font-bold">Generador de Reportes PDF</h2> <p class="text-sm opacity-75">Filtre y genere reportes de anotaciones</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar ventana de reportes" title="Cerrar"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 140px);"><div class="mb-6 p-4 rounded-xl border"><h3 class="text-lg font-semibold mb-4">Filtros</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="space-y-2"><label for="docente-filter" class="block text-sm font-medium">Docente</label> <select id="docente-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los docentes</option><!></select></div> <div class="space-y-2"><label for="materia-filter" class="block text-sm font-medium">Asignatura</label> <select id="materia-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todas las asignaturas</option><!></select></div> <div class="space-y-2"><label for="grado-filter" class="block text-sm font-medium">Grado</label> <select id="grado-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los grados</option><!></select></div></div> <div class="flex gap-3 mt-4"><button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2"><!></button> <button class="px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> Limpiar</button> <button class="ml-auto px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Generar PDF</button></div></div> <div class="mb-4"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold"> </h3> <!></div></div> <!></div></div></div>');function kl(V,$){xr($,!1);const c=f(),Ae=f(),v=f();let T=null,r=null,d=St($,"onClose",8),ze=St($,"initialDocente",8,""),I=f([]),re=f([]),X=f([]),J=[],O=f([]),R=f(!1);const F=async()=>{if(!T||!r){const[n,m]=await Promise.all([so(()=>import("./pdf-CBBHH09D.js").then(S=>S.j),[]),so(()=>import("./pdf-CBBHH09D.js").then(S=>S.b),[])]);T=n.default,r=m.default}};let l=f(JSON.parse(localStorage.getItem("docenteMaterias")||"{}")),D=f(""),U=f(""),N=f("");vr(()=>{ze()&&i(D,ze())}),vr(async()=>{console.log("üöÄ ReportGenerator montado"),await B()});const B=async()=>{try{const[n,m,S]=await Promise.all([Kr(),Zr(),Qr()]);i(I,n),i(re,m),i(X,S),i(l,JSON.parse(localStorage.getItem("docenteMaterias")||"{}"))}catch(n){console.error("Error cargando datos iniciales:",n)}},b=async()=>{i(R,!0);try{const n={spreadsheetId:xo,worksheetTitle:Do};e(D)&&(n.docente=e(D)),e(U)&&(n.materia=e(U)),e(N)&&(n.grado=e(N)),console.log("üîç Enviando payload a getAnotador:",n);const m=await No(n);console.log("üìä Respuesta de getAnotador:",m);let S=m;if(m&&typeof m=="object"&&(m.data?S=m.data:m.records?S=m.records:Array.isArray(m)&&(S=m)),J=Array.isArray(S)?S:[],console.log("‚úÖ Datos procesados:",J.length,"registros"),console.log("üîç Keys del primer registro:",J[0]?Object.keys(J[0]):"No hay registros"),J.length>0&&J[0].values){console.log("üîÑ Transformando datos desde formato .values");const z=["Marca Temporal","Fecha","Docente","Asignatura","Grado","Horas","Anotaci√≥n"];J=J.map(De=>{const Ke={"Marca Temporal":"",Fecha:"",Docente:"",Asignatura:"",Grado:"",Horas:"",Anotaci√≥n:""};return z.forEach((et,_e)=>{Ke[et]=De.values?.[_e]||""}),Ke}),console.log("üìä Datos transformados:",J.length,"registros")}ne()}catch(n){if(console.error("‚ùå Error cargando datos del anotador:",n),n instanceof Error&&console.error("üìã Error details:",n.message),n&&typeof n=="object"&&"response"in n){const m=n.response;m&&(console.error("üåê Response status:",m.status),console.error("üåê Response data:",m.data))}J=[],i(O,[])}finally{i(R,!1)}},ne=()=>{if(console.log("üîç Aplicando filtros locales:",{totalRegistros:J.length,isArray:Array.isArray(J),docente:e(D),materia:e(U),grado:e(N)}),!Array.isArray(J)){console.error("‚ùå anotadorData no es un array:",typeof J,J),i(O,[]);return}i(O,J.filter(n=>{if(!n||typeof n!="object")return console.log("‚ö†Ô∏è Registro inv√°lido:",n),!1;const m=!e(D)||n.Docente===e(D),S=!e(U)||n.Asignatura===e(U),z=!e(N)||n.Grado===e(N);return!m&&e(D)&&console.log("‚ùå No coincide docente:",{expected:e(D),actual:n.Docente}),!S&&e(U)&&console.log("‚ùå No coincide materia:",{expected:e(U),actual:n.Asignatura}),!z&&e(N)&&console.log("‚ùå No coincide grado:",{expected:e(N),actual:n.Grado}),m&&S&&z})),console.log("‚úÖ Registros filtrados:",e(O).length)},we=()=>{b()},qe=()=>{i(D,""),i(U,""),i(N,""),J=[],i(O,[])},rt=async()=>{if(await F(),e(O).length===0){alert("No hay datos para generar el PDF");return}const n=new T({format:"letter"}),m="Anotador de Clases",S=[];e(D)&&S.push(`Docente: ${e(D)}`),e(U)&&S.push(`Asignatura: ${e(U)}`),e(N)&&S.push(`Grado: ${e(N)}`);let z=20;try{console.log("üñºÔ∏è Intentando agregar logo EIE al PDF..."),n.setTextColor(99,102,241),n.setFontSize(28),n.setFont("helvetica","bold"),n.text("EIE",n.internal.pageSize.getWidth()/2,z,{align:"center"}),z+=15,console.log("‚úÖ Logo EIE (texto) agregado correctamente")}catch(_e){console.log("‚ùå Error con logo EIE, usando fallback:",_e),n.setTextColor(99,102,241),n.setFontSize(24),n.text("EIE",n.internal.pageSize.getWidth()/2,z,{align:"center"}),z+=15}n.setTextColor(0,0,0),n.setFontSize(18),n.setFont("helvetica","bold"),n.text(m,n.internal.pageSize.getWidth()/2,z,{align:"center"}),z+=12,n.setTextColor(0,0,0),n.setFontSize(12),n.setFont("helvetica","normal"),n.text("Instituci√≥n Educativa Instituto Gu√°tica",n.internal.pageSize.getWidth()/2,z,{align:"center"}),z+=10,n.setTextColor(60,60,60),n.setFontSize(10),n.setFont("helvetica","normal"),n.text(`Fecha de generaci√≥n: ${new Date().toLocaleDateString()}`,n.internal.pageSize.getWidth()/2,z,{align:"center"}),z+=15,n.setDrawColor(200,200,200),n.setLineWidth(1),n.line(20,z,n.internal.pageSize.getWidth()-20,z),z+=15,S.length>0&&(n.setTextColor(80,80,80),n.setFontSize(9),n.setFont("helvetica","normal"),S.forEach(_e=>{n.text(_e,20,z,{align:"left"}),z+=6}),z+=10);const De=e(O).map(_e=>[_e.Fecha||"",_e.Horas||"",_e.Asignatura||"",_e.Anotaci√≥n||""]),Ke=["TOTAL",e(c).toFixed(1),"",""];De.push(Ke),console.log("üìä Generando PDF con:",{totalHoras:e(c),registros:e(O).length,filasTabla:De.length}),r(n,{head:[["Fecha","Horas","Asignatura","Anotaci√≥n"]],body:De,startY:z,styles:{fontSize:8,cellPadding:2,cellWidth:"wrap",valign:"top",overflow:"linebreak"},headStyles:{fillColor:[99,102,241],textColor:255,fontSize:9,fontStyle:"bold",halign:"center"},bodyStyles:{fillColor:[255,255,255],textColor:[0,0,0]},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:{0:{cellWidth:30,minCellHeight:8,halign:"center"},1:{cellWidth:20,minCellHeight:8,halign:"center"},2:{cellWidth:45,minCellHeight:8},3:{cellWidth:"auto",minCellHeight:12}},margin:{top:15,right:15,bottom:15,left:15},tableWidth:"auto",didParseCell:_e=>{_e.row.index===De.length-1&&(_e.cell.styles.fillColor=[240,240,240],_e.cell.styles.fontStyle="bold",_e.cell.styles.textColor=[0,0,0],_e.column.index===0&&(_e.cell.styles.halign="center",_e.cell.styles.fillColor=[230,230,230]),_e.column.index===1&&(_e.cell.styles.halign="center",_e.cell.styles.fillColor=[220,220,220]),_e.column.index===2&&(_e.cell.styles.halign="center",_e.cell.styles.fillColor=[220,220,220]),_e.column.index===3&&(_e.cell.styles.halign="center",_e.cell.styles.fillColor=[220,220,220]))}});const et=`reporte_anotaciones_${e(D)||"todos"}_${e(U)||"todas"}_${e(N)||"todos"}_${new Date().toISOString().split("T")[0]}.pdf`;n.save(et),console.log("üíæ PDF guardado exitosamente:",et)};Fe(()=>e(O),()=>{i(c,e(O).reduce((n,m)=>{const S=parseFloat(m.Horas||"0");return n+(isNaN(S)?0:S)},0))}),Fe(()=>(e(D),e(re),e(l)),()=>{i(Ae,e(D)?[...e(re)].sort((n,m)=>{const S=e(l)[e(D)]?.includes(n.materia),z=e(l)[e(D)]?.includes(m.materia);return S&&!z?-1:!S&&z?1:n.materia.localeCompare(m.materia)}):e(re))}),Fe(()=>{},()=>{i(v,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Sr(),Ar();var Le=yl(),vt=o(Le),se=o(vt),h=a(o(se),2),le=a(se,2),Ge=o(le),Ee=a(o(Ge),2),ie=o(Ee),Y=o(ie),oe=a(Y,2),Q=o(oe);Q.value=Q.__value="";var Ue=a(Q);he(Ue,1,()=>e(I),ke,(n,m)=>{var S=cl(),z=o(S),De={};A(()=>{u(z,e(m)),De!==(De=e(m))&&(S.value=(S.__value=e(m))??"")}),g(n,S)});var Me=a(ie,2),ge=o(Me),pe=a(ge,2),Ie=o(pe);Ie.value=Ie.__value="";var ot=a(Ie);he(ot,1,()=>e(Ae),ke,(n,m)=>{const S=Ot(()=>(e(D),e(l),e(m),t(()=>e(D)&&e(l)[e(D)]?.includes(e(m).materia))));var z=vl(),De=o(z),Ke={};A(()=>{s(z,e(S)?"color: #6366f1; font-weight: 600;":""),u(De,`${e(S)?"‚≠ê ":""}${e(m),t(()=>e(m).materia)??""}`),Ke!==(Ke=(e(m),t(()=>e(m).materia)))&&(z.value=(z.__value=(e(m),t(()=>e(m).materia)))??"")}),g(n,z)});var Ve=a(Me,2),Je=o(Ve),y=a(Je,2),p=o(y);p.value=p.__value="";var C=a(p);he(C,1,()=>(e(X),t(()=>[...new Set(e(X).map(n=>n.grado.toString()))])),ke,(n,m)=>{var S=gl(),z=o(S),De={};A(Ke=>{u(z,Ke),De!==(De=e(m))&&(S.value=(S.__value=e(m))??"")},[()=>(e(m),t(()=>e(m).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),g(n,S)});var E=a(Ee,2),H=o(E),K=o(H);{var ee=n=>{var m=pl();g(n,m)},Te=n=>{var m=ul();g(n,m)};te(K,n=>{e(R)?n(ee):n(Te,!1)})}var Z=a(H,2),j=a(Z,2),ae=a(Ge,2),me=o(ae),xe=o(me),Qe=o(xe),Xe=a(xe,2);{var de=n=>{var m=bl(),S=o(m);A(()=>u(S,`${(e(D)&&`Docente: ${e(D)}`)??""}
              ${(e(U)&&` | Asignatura: ${e(U)}`)??""}
              ${(e(N)&&` | Grado: ${e(N)}`)??""}`)),g(n,m)};te(Xe,n=>{e(O),t(()=>e(O).length>0)&&n(de)})}var L=a(ae,2);{var q=n=>{var m=fl(),S=o(m);io(S,{message:"Cargando datos del anotador..."}),g(n,m)},ue=n=>{var m=xl(),S=a(o(m),4),z=o(S);A(()=>{s(m,`color: ${e(v),t(()=>e(v).placeholder)??""};`),u(z,e(D)||e(U)||e(N)?"No se encontraron registros con los filtros seleccionados. Intente con otros criterios.":"Seleccione filtros y haga clic en 'Aplicar Filtros' para cargar los datos.")}),g(n,m)},Oe=n=>{var m=_l(),S=o(m),z=o(S),De=o(z),Ke=o(De),et=a(Ke),_e=a(et),Lt=a(_e),Zt=a(z),Mt=o(Zt);he(Mt,1,()=>e(O),ke,(Pt,Ze)=>{var tt=hl(),At=o(tt),Tt=o(At),jt=a(At),Dt=o(jt),Et=a(jt),Gt=o(Et),lr=o(Gt),rr=a(Et),or=o(rr),W=o(or);A(()=>{s(tt,`border-color: ${e(v),t(()=>e(v).border)??""};`),u(Tt,(e(Ze),t(()=>e(Ze).Fecha||"-"))),u(Dt,(e(Ze),t(()=>e(Ze).Horas||"-"))),wt(Gt,"title",(e(Ze),t(()=>e(Ze).Asignatura))),u(lr,(e(Ze),t(()=>e(Ze).Asignatura||"-"))),wt(or,"title",(e(Ze),t(()=>e(Ze).Anotaci√≥n))),u(W,(e(Ze),t(()=>e(Ze).Anotaci√≥n||"-")))}),g(Pt,tt)});var Nt=a(Mt);{var Qt=Pt=>{var Ze=ml(),tt=a(o(Ze)),At=o(tt),Tt=a(tt,2),jt=o(Tt);A(Dt=>{s(Ze,`border-color: ${e(v),t(()=>e(v).border)??""}; border-top-width: 2px;`),u(At,Dt),u(jt,`${e(O),t(()=>e(O).length)??""} registros`)},[()=>(e(c),t(()=>e(c).toFixed(1)))]),g(Pt,Ze)};te(Nt,Pt=>{e(O),t(()=>e(O).length>0)&&Pt(Qt)})}A(()=>{s(m,`border-color: ${e(v),t(()=>e(v).border)??""};`),s(z,`background-color: ${e(v),t(()=>e(v).inputBg)??""};`),s(Ke,`color: ${e(v),t(()=>e(v).label)??""};`),s(et,`color: ${e(v),t(()=>e(v).label)??""};`),s(_e,`color: ${e(v),t(()=>e(v).label)??""};`),s(Lt,`color: ${e(v),t(()=>e(v).label)??""};`)}),g(n,m)};te(L,n=>{e(R)?n(q):(e(O),t(()=>e(O).length===0)?n(ue,1):n(Oe,!1))})}A(()=>{s(vt,`background-color: ${e(v),t(()=>e(v).cardBg)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(se,`border-color: ${e(v),t(()=>e(v).cardBorder)??""};`),s(Ge,`background-color: ${e(v),t(()=>e(v).inputBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""};`),s(Y,`color: ${e(v),t(()=>e(v).label)??""};`),s(oe,`background-color: ${e(v),t(()=>e(v).cardBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(ge,`color: ${e(v),t(()=>e(v).label)??""};`),s(pe,`background-color: ${e(v),t(()=>e(v).cardBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(Je,`color: ${e(v),t(()=>e(v).label)??""};`),s(y,`background-color: ${e(v),t(()=>e(v).cardBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""}; color: ${e(v),t(()=>e(v).text)??""};`),H.disabled=e(R),s(Z,`color: ${e(v),t(()=>e(v).text)??""};`),j.disabled=(e(O),t(()=>e(O).length===0)),u(Qe,`Resultados (${e(O),t(()=>e(O).length)??""} registros)`)}),G("click",h,function(...n){d()?.apply(this,n)}),ct(oe,()=>e(D),n=>i(D,n)),ct(pe,()=>e(U),n=>i(U,n)),ct(y,()=>e(N),n=>i(N,n)),G("click",H,we),G("click",Z,qe),G("click",j,rt),G("click",Le,lo(function(...n){d()?.apply(this,n)})),G("keydown",Le,n=>n.key==="Escape"&&d()()),g(V,Le),hr()}var wl=w('<div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping svelte-1p7gzb0"></div> <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full svelte-1p7gzb0"></div>',1),$l=kt('<svg class="w-5 h-5 text-indigo-500 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1p7gzb0"></path></svg>'),Cl=kt('<svg class="w-5 h-5 text-amber-500 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="svelte-1p7gzb0"></path></svg>'),Sl=kt('<svg class="w-5 h-5 text-indigo-400 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1p7gzb0"></path></svg>'),Al=w('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-1p7gzb0"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0 svelte-1p7gzb0"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-1p7gzb0"></path></svg></div> <div class="flex-1 pr-6 pt-0.5 svelte-1p7gzb0"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100 svelte-1p7gzb0">Informaci√≥n</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200 svelte-1p7gzb0"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors svelte-1p7gzb0" aria-label="Cerrar alerta"><svg class="w-4 h-4 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-1p7gzb0"></path></svg></button></div>'),Dl=w('<option class="svelte-1p7gzb0"> </option>'),El=w('<option class="svelte-1p7gzb0"> </option>'),Il=w('<option class="svelte-1p7gzb0"> </option>'),Bl=w('<option class="svelte-1p7gzb0"> </option>'),Fl=w('<button class="absolute right-4 top-1/2 transform -translate-y-1/2 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors svelte-1p7gzb0" title="Limpiar b√∫squeda"><svg class="w-4 h-4 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-1p7gzb0"></path></svg></button>'),zl=w('<div class="text-center py-8 svelte-1p7gzb0"><svg class="w-12 h-12 mx-auto mb-4 opacity-50 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" class="svelte-1p7gzb0"></path></svg> <p class="text-sm svelte-1p7gzb0"> </p></div>'),Ml=w('<div class="flex items-center justify-center py-12 svelte-1p7gzb0"><!></div>'),Tl=w('<span class="ml-2 inline-block animate-bounce svelte-1p7gzb0">‚ú®</span>'),Ol=w('<span class="text-xs font-medium svelte-1p7gzb0"> </span>'),Nl=w('<div class="h-px flex-1 transition-all duration-300 group-hover:opacity-50 svelte-1p7gzb0"></div>'),jl=kt('<svg class="w-3 h-3 text-white svelte-1p7gzb0" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" class="svelte-1p7gzb0"></path></svg>'),Rl=w('<div class="relative group flex flex-col p-0 rounded-2xl border transition-all duration-200 shadow-sm hover:shadow-md svelte-1p7gzb0"><div class="flex items-start gap-1 p-4 svelte-1p7gzb0"><label class="flex-shrink-0 cursor-pointer p-1 mt-1 svelte-1p7gzb0"><input type="checkbox" class="hidden svelte-1p7gzb0"/> <div class="w-5 h-5 rounded border flex items-center justify-center transition-colors cursor-pointer svelte-1p7gzb0"><!></div></label> <textarea rows="8" class="w-full bg-transparent border-none focus:ring-0 text-base font-medium leading-relaxed resize-none p-1 transition-colors min-h-[180px] pb-6 svelte-1p7gzb0" placeholder="Escriba aqu√≠..."></textarea></div></div>'),Ll=w('<div class="grid grid-cols-1 md:grid-cols-2 gap-4 svelte-1p7gzb0"></div>'),Pl=w('<div class="space-y-4 svelte-1p7gzb0"><button type="button" class="flex items-center gap-3 w-full text-left cursor-pointer group focus:outline-none svelte-1p7gzb0"><div class="flex items-center gap-3 flex-1 svelte-1p7gzb0"><h3> <!></h3> <!></div> <!> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" class="svelte-1p7gzb0"></path></svg></button> <!></div>'),Hl=kt('<svg class="animate-spin h-7 w-7 text-white svelte-1p7gzb0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25 svelte-1p7gzb0" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75 svelte-1p7gzb0" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Gl=kt('<svg class="w-8 h-8 transform rotate-90 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" class="svelte-1p7gzb0"></path></svg>'),Ul=w('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200 svelte-1p7gzb0"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40 svelte-1p7gzb0"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8 svelte-1p7gzb0"><div class="flex items-center gap-4 lg:flex-col svelte-1p7gzb0"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto svelte-1p7gzb0"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center svelte-1p7gzb0">Anotador de Clase</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full svelte-1p7gzb0"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Abrir hoja de c√°lculo"><svg class="w-5 h-5 svelte-1p7gzb0" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Hoja de C√°lculo</span></button> <button id="filter-button-target" class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Abrir filtros de anotaciones"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Filtros</span> <!></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Generar reportes PDF"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Reportes PDF</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Volver al Dashboard"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Dashboard</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full svelte-1p7gzb0" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize svelte-1p7gzb0"> </span></button></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto pb-32 svelte-1p7gzb0"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border svelte-1p7gzb0"><!> <!> <form class="space-y-6 svelte-1p7gzb0"><div class="grid grid-cols-1 md:grid-cols-3 gap-6 svelte-1p7gzb0"><div class="space-y-2 svelte-1p7gzb0"><label for="fecha" class="block text-sm font-medium svelte-1p7gzb0">Fecha</label> <input type="date" id="fecha" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none svelte-1p7gzb0"/></div> <div class="space-y-2 svelte-1p7gzb0"><label for="docente" class="block text-sm font-medium svelte-1p7gzb0">Docente</label> <select id="docente" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-1p7gzb0"><option class="svelte-1p7gzb0"> </option><!></select></div> <div class="space-y-2 svelte-1p7gzb0"><label for="materia" class="block text-sm font-medium svelte-1p7gzb0">Asignatura</label> <select id="materia" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-1p7gzb0"><option class="svelte-1p7gzb0"> </option><!></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-1p7gzb0"><div class="space-y-2 svelte-1p7gzb0"><label for="grado" class="block text-sm font-medium svelte-1p7gzb0">Grado</label> <select id="grado" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-1p7gzb0"><option class="svelte-1p7gzb0"> </option><!></select></div> <div class="space-y-2 svelte-1p7gzb0"><label for="horas" class="block text-sm font-medium svelte-1p7gzb0">Horas</label> <select id="horas" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer svelte-1p7gzb0"><option class="svelte-1p7gzb0">Seleccione horas</option><!></select></div></div> <div class="space-y-2 svelte-1p7gzb0"><label for="search" class="block text-sm font-medium svelte-1p7gzb0">Buscar anotaciones</label> <div class="relative svelte-1p7gzb0"><input type="text" id="search" placeholder="Buscar por palabra clave o categor√≠a..." class="w-full px-4 py-3 pl-12 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none svelte-1p7gzb0"/> <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" class="svelte-1p7gzb0"></path></svg> <!></div> <!></div> <div class="space-y-8 svelte-1p7gzb0"><!></div> <div class="space-y-2 svelte-1p7gzb0"><label for="observacion" class="block text-sm font-medium svelte-1p7gzb0">Observaci√≥n</label> <textarea id="observacion" rows="3" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none resize-none svelte-1p7gzb0" placeholder="Observaciones adicionales (opcional)..."></textarea></div> <div class="fixed bottom-8 right-8 z-50 svelte-1p7gzb0"><button type="submit" class="w-16 h-16 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-400 dark:disabled:bg-slate-700 disabled:cursor-not-allowed disabled:scale-100 text-white rounded-full shadow-2xl transition-all duration-300 transform hover:scale-110 active:scale-95 backdrop-blur-sm bg-opacity-95 flex items-center justify-center overflow-hidden border border-white/20 svelte-1p7gzb0" aria-label="Guardar Anotaci√≥n"><!></button></div></form></div></main></div> <!> <!>',1);function Vl(V,$){xr($,!1);const c=()=>mo(Jr,"$theme",Ae),[Ae,v]=ho(),T=f(),r=f(),d=f(),ze=f();let I=St($,"onBack",8),re=f([]),X=f([]),J=f([]),O=f(!1),R=f(!1),F=f(!1),l=f(!1),D=f({}),U=f({}),N=f(""),B=f({}),b=f([]),ne=f(""),we=f("");const qe=_=>{Se(U,e(U)[_]=!e(U)[_]),i(U,e(U))},rt=(_,M)=>{const ve=e(D)[_].indexOf(M);if(ve!==-1){const $e={...M,selected:!M.selected},je=[...e(D)[_].slice(0,ve),$e,...e(D)[_].slice(ve+1)];i(D,{...e(D),[_]:je}),console.log("üîÑ Anotaci√≥n toggle:",{categoria:_,index:ve,texto:$e.text,nuevoEstado:$e.selected,totalSeleccionadas:Object.values(e(D)).flat().filter(lt=>lt.selected).length})}},Le=_=>({"C√ÅTEDRA DE LA PAZ":"#8b5cf6","CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL":"#10b981","CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y":"#f59e0b","DIRECCI√ìN DE GRUPO":"#3b82f6","EDUCACI√ìN ART√çSTICA":"#f43f5e","EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES":"#ef4444","EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS":"#8b5cf6",EMPRENDIMIENTO:"#f97316",ESTAD√çSTICA:"#06b6d4","FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS":"#6366f1",F√çSICA:"#3b82f6",INGL√âS:"#14b8a6","LENGUA CASTELLANA":"#10b981",MATEM√ÅTICAS:"#3b82f6","PROYECTO Y EMPRENDIMIENTO":"#f97316",QU√çMICA:"#06b6d4","TECNOLOG√çA E INFORM√ÅTICA":"#6366f1","√âTICA PROFESIONAL":"#8b5cf6","Estrategias de Ense√±anza-Aprendizaje":"#6366f1","Evaluaci√≥n y Verificaci√≥n de Saberes":"#10b981","Enfoque STEM+ y Contexto Rural":"#f59e0b","Pr√°cticas de Laboratorio y Mantenimiento":"#f43f5e","Ciudadan√≠a Digital y √âtica":"#8b5cf6","Pensamiento Computacional y Programaci√≥n":"#06b6d4","Recursos Anal√≥gicos y Contingencias":"#f97316","Ofim√°tica y Competencias Productivas":"#14b8a6","Gesti√≥n Administrativa y Proyectos Transversales":"#3b82f6"})[_]||"#6366f1",vt={MATEM√ÅTICAS:"MATEM√ÅTICAS","LENGUA CASTELLANA":"LENGUA CASTELLANA",INGL√âS:"INGL√âS","CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL":"CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL","CIENCIAS NATURALES":"CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL","CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y":"CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y","CIENCIAS SOCIALES":"CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y",F√çSICA:"F√çSICA",QU√çMICA:"QU√çMICA","EDUCACI√ìN ART√çSTICA":"EDUCACI√ìN ART√çSTICA","EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES":"EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES","EDUCACI√ìN F√çSICA":"EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES","TECNOLOG√çA E INFORM√ÅTICA":"TECNOLOG√çA E INFORM√ÅTICA",TECNOLOG√çA:"TECNOLOG√çA E INFORM√ÅTICA",INFORM√ÅTICA:"TECNOLOG√çA E INFORM√ÅTICA",EMPRENDIMIENTO:"EMPRENDIMIENTO","FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS":"FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS",FILOSOF√çA:"FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS",ESTAD√çSTICA:"ESTAD√çSTICA","EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS":"EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS",√âTICA:"EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS","DIRECCI√ìN DE GRUPO":"DIRECCI√ìN DE GRUPO","PROYECTO Y EMPRENDIMIENTO":"PROYECTO Y EMPRENDIMIENTO",PROYECTO:"PROYECTO Y EMPRENDIMIENTO","C√ÅTEDRA DE LA PAZ":"C√ÅTEDRA DE LA PAZ","√âTICA PROFESIONAL":"√âTICA PROFESIONAL"},se=_=>{if(!e(h).materia)return _;let M=vt[e(h).materia.toUpperCase()]||vt[e(h).materia]||"";if(!M){const ve=e(h).materia.toUpperCase();for(const[$e,je]of Object.entries(vt))if($e.includes(ve)||ve.includes($e)){M=je;break}}return console.log("Materia seleccionada:",e(h).materia,"‚Üí Categor√≠a:",M),_.sort(([ve],[$e])=>ve===M&&$e!==M?-1:$e===M&&ve!==M?1:ve.localeCompare($e))};let h=f({fecha:new Date().toISOString().split("T")[0],docente:localStorage.getItem("lastDocente")||"",materia:"",horas:"",grado:"",anotacion:"",observacion:""}),le=f(JSON.parse(localStorage.getItem("docenteMaterias")||"{}"));const Ge=(_,M)=>{!_||!M||(e(le)[_]||Se(le,e(le)[_]=[]),e(le)[_].includes(M)||(Se(le,e(le)[_]=[...e(le)[_],M]),localStorage.setItem("docenteMaterias",JSON.stringify(e(le)))))};let Ee=f(localStorage.getItem("dismissedInfoAnotadorContent")!==wo);const ie=()=>{i(Ee,!1),localStorage.setItem("dismissedInfoAnotadorContent",wo)};let Y=f(!1),oe=f(!1),Q=f(!1);const Ue=()=>{i(oe,!0)},Me=()=>{i(oe,!1)},ge=()=>{i(Q,!0)},pe=()=>{i(Q,!1)};let Ie=f(!0);const ot="¬°Nueva funci√≥n de filtrado avanzado disponible!";function Ve(){return!0}const Je=()=>{localStorage.setItem("dismissedFeatureAlertAnotador",new Date().toISOString()),i(Ie,!1)},y=()=>{localStorage.setItem("dismissedFeatureAlertAnotador",new Date().toISOString()),Ue()},p=()=>`https://docs.google.com/spreadsheets/d/${xo}`,C=()=>{window.open(p(),"_blank")},E=()=>{Jr.update(_=>_==="light"?"dim":_==="dim"?"dark":"light")},H=async()=>{i(O,!0),i(R,!0),i(F,!0),i(l,!0);try{const[_,M,ve,$e]=await Promise.all([Kr(),Zr(),Qr(),Aa()]);i(re,_),i(X,M),i(J,ve);const je={},lt={};for(const[_t,Vt]of Object.entries($e))je[_t]=Vt.map(ft=>({text:ft,selected:!1})),lt[_t]=!1;i(D,je),i(U,lt)}catch(_){console.error("Error cargando datos iniciales:",_)}finally{i(O,!1),i(R,!1),i(F,!1),i(l,!1)}},K=async _=>{if(_.preventDefault(),e(Y))return;const M=Object.values(e(D)).flat().filter(je=>je.selected).map(je=>je.text),ve=M.join(" | ");if((await zt.fire({title:"¬øConfirmar Registro?",html:`
        <div class="text-left space-y-2 p-2 rounded-xl bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10" style="font-size: 0.9rem; line-height: 1.4;">
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Fecha:</strong> ${e(h).fecha}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Docente:</strong> ${e(h).docente}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Asignatura:</strong> ${e(h).materia}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Grado:</strong> ${e(h).grado}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Horas:</strong> ${e(h).horas}</div>
          <div style="margin-top: 12px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 8px;">
            <strong style="color: #6366f1;">Anotaciones:</strong>
            <ul style="list-style-type: disc; padding-left: 20px; margin-top: 4px; font-size: 0.8rem; opacity: 0.8;">
              ${M.map(je=>`<li>${je}</li>`).join("")}
            </ul>
          </div>
          ${e(h).observacion?`<div style="margin-top: 12px;"><strong style="color: #6366f1;">Observaci√≥n:</strong> <span style="font-size: 0.8rem;">${e(h).observacion}</span></div>`:""}
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonText:"Si, de acuerdo",cancelButtonText:"No",confirmButtonColor:"#4f46e5",cancelButtonColor:"#64748b",reverseButtons:!0,background:c()==="light"?"#fff":"#1e293b",color:c()==="light"?"#1e293b":"#f1f5f9"})).isConfirmed){i(Y,!0);try{const lt=[[new Date().toLocaleString(),e(h).fecha,e(h).docente,e(h).materia,e(h).grado,e(h).horas,ve,e(h).observacion]];await Da({spreadsheetId:xo,worksheetTitle:Do,datos:lt}),Ge(e(h).docente,e(h).materia),await zt.fire({icon:"success",title:"¬°√âxito!",text:"Anotaci√≥n registrada exitosamente",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),i(h,{fecha:new Date().toISOString().split("T")[0],docente:e(h).docente,materia:e(h).materia,grado:e(h).grado,horas:"",anotacion:"",observacion:""});for(const _t in e(D))Se(D,e(D)[_t]=e(D)[_t].map(Vt=>({...Vt,selected:!1})));i(D,{...e(D)})}catch(je){console.error("Error enviando:",je),await zt.fire({icon:"error",title:"Error",text:"Error al registrar la anotaci√≥n",confirmButtonColor:"#ef4444"})}finally{i(Y,!1)}}};vr(()=>{H(),i(Ie,Ve())}),Fe(()=>(e(h),e(we)),()=>{if(e(h).materia&&e(h).materia!==e(we)){i(we,e(h).materia);let _=vt[e(h).materia.toUpperCase()]||vt[e(h).materia]||"";if(!_){const M=e(h).materia.toUpperCase();for(const[ve,$e]of Object.entries(vt))if(ve.includes(M)||M.includes(ve)){_=$e;break}}_&&(i(ne,_),console.log("‚ú® Categoria destacada:",_),setTimeout(()=>{i(ne,"")},3e3))}}),Fe(()=>(e(D),e(N)),()=>{i(B,Object.entries(e(D)).reduce((_,[M,ve])=>{if(!e(N).trim())return _[M]=ve,_;const $e=e(N).toLowerCase().trim(),je=ve.filter(lt=>lt.text.toLowerCase().includes($e));return je.length>0&&(_[M]=je),_},{}))}),Fe(()=>(e(X),e(h),e(D),e(B),e(b)),()=>{console.log("üîÑ Reactividad actualizada"),console.log("üìö Materias disponibles:",e(X).map(_=>_.materia)),console.log("‚úçÔ∏è Materia seleccionada:",e(h).materia),console.log("üìä Categor√≠as disponibles:",Object.keys(e(D))),console.log("üîç Categor√≠as filtradas:",Object.keys(e(B))),i(b,se(Object.entries(e(B)))),console.log("üìã Entradas ordenadas:",e(b).map(([_])=>_))}),Fe(()=>e(h),()=>{e(h).docente&&localStorage.setItem("lastDocente",e(h).docente)}),Fe(()=>(e(h),e(X),e(le)),()=>{i(T,e(h).docente?[...e(X)].sort((_,M)=>{const ve=e(le)[e(h).docente]?.includes(_.materia),$e=e(le)[e(h).docente]?.includes(M.materia);return ve&&!$e?-1:!ve&&$e?1:_.materia.localeCompare(M.materia)}):e(X))}),Fe(()=>{},()=>{i(r,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Fe(()=>e(D),()=>{i(d,Object.values(e(D)).flat().some(_=>_.selected))}),Fe(()=>(e(h),e(d)),()=>{i(ze,e(h).fecha&&e(h).docente&&e(h).materia&&e(h).grado&&e(h).horas&&e(d))}),Fe(()=>(e(h),e(d),e(ze),e(D)),()=>{console.log("üîç Validaci√≥n formulario:",{fecha:e(h).fecha,docente:e(h).docente,materia:e(h).materia,grado:e(h).grado,horas:e(h).horas,hasSelectedAnotacion:e(d),isFormValid:e(ze),totalAnotaciones:Object.values(e(D)).flat().length,selectedCount:Object.values(e(D)).flat().filter(_=>_.selected).length})}),Sr(),Ar();var ee=Ul(),Te=Wt(ee),Z=o(Te),j=o(Z),ae=o(j),me=o(ae),xe=a(me,2),Qe=a(ae,2),Xe=o(Qe),de=a(Xe,2),L=a(o(de),4);{var q=_=>{var M=wl();g(_,M)};te(L,_=>{e(Ie)&&_(q)})}var ue=a(de,2),Oe=a(ue,2),n=a(Oe,2),m=o(n);{var S=_=>{var M=$l();g(_,M)},z=_=>{var M=Cl();g(_,M)},De=_=>{var M=Sl();g(_,M)};te(m,_=>{c()==="dark"?_(S):c()==="light"?_(z,1):_(De,!1)})}var Ke=a(m,2),et=o(Ke),_e=a(Z,2),Lt=o(_e),Zt=o(Lt);{var Mt=_=>{var M=Al(),ve=a(o(M),2),$e=a(o(ve),2),je=o($e),lt=a(ve,2);A(()=>u(je,wo)),G("click",lt,ie),g(_,M)};te(Zt,_=>{e(Ee)&&_(Mt)})}var Nt=a(Zt,2);fo(Nt,{featureMessage:ot,description:"Ahora puedes filtrar tus anotaciones de forma avanzada. ¬°Pru√©balo!",onTryNow:y,onDismiss:Je,targetSelector:"#filter-button-target",showPopup:!1,colorTheme:"purple"});var Qt=a(Nt,2),Pt=o(Qt),Ze=o(Pt),tt=o(Ze),At=a(tt,2),Tt=a(Ze,2),jt=o(Tt),Dt=a(jt,2),Et=o(Dt),Gt=o(Et);Et.value=Et.__value="";var lr=a(Et);he(lr,1,()=>e(re),ke,(_,M)=>{var ve=Dl(),$e=o(ve),je={};A(()=>{u($e,e(M)),je!==(je=e(M))&&(ve.value=(ve.__value=e(M))??"")}),g(_,ve)});var rr=a(Tt,2),or=o(rr),W=a(or,2),ce=o(W),We=o(ce);ce.value=ce.__value="";var nt=a(ce);he(nt,1,()=>e(T),ke,(_,M)=>{const ve=Ot(()=>(e(le),e(h),e(M),t(()=>e(le)[e(h).docente]?.includes(e(M).materia))));var $e=El(),je=o($e),lt={};A(()=>{s($e,e(ve)?"color: #6366f1; font-weight: 600;":""),u(je,`${e(ve)?"‚≠ê ":""}${e(M),t(()=>e(M).materia)??""}`),lt!==(lt=(e(M),t(()=>e(M).materia)))&&($e.value=($e.__value=(e(M),t(()=>e(M).materia)))??"")}),g(_,$e)});var ht=a(Pt,2),Ht=o(ht),gr=o(Ht),mr=a(gr,2),Dr=o(mr),Hr=o(Dr);Dr.value=Dr.__value="";var Xr=a(Dr);he(Xr,1,()=>(e(J),t(()=>[...new Set(e(J).map(_=>_.grado.toString()))])),ke,(_,M)=>{var ve=Il(),$e=o(ve),je={};A(lt=>{u($e,lt),je!==(je=e(M))&&(ve.value=(ve.__value=e(M))??"")},[()=>(e(M),t(()=>e(M).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),g(_,ve)});var Tr=a(Ht,2),Er=o(Tr),Gr=a(Er,2),Or=o(Gr);Or.value=Or.__value="";var Ur=a(Or);he(Ur,0,()=>[1,2,3,4],ke,(_,M)=>{var ve=Bl(),$e=o(ve),je={};A(lt=>{u($e,`${M??""} ${M===1?"Hora":"Horas"}`),je!==(je=lt)&&(ve.value=(ve.__value=lt)??"")},[()=>t(()=>M.toString())]),g(_,ve)});var Vr=a(ht,2),Nr=o(Vr),Be=a(Nr,2),it=o(Be),mt=a(it,2),Ut=a(mt,2);{var qt=_=>{var M=Fl();A(()=>s(M,`color: ${e(r),t(()=>e(r).placeholder)??""};`)),G("click",M,()=>i(N,"")),g(_,M)};te(Ut,_=>{e(N)&&_(qt)})}var Yr=a(Be,2);{var ye=_=>{var M=zl(),ve=a(o(M),2),$e=o(ve);A(()=>{s(M,`color: ${e(r),t(()=>e(r).placeholder)??""};`),u($e,`No se encontraron anotaciones para "${e(N)??""}"`)}),g(_,M)},Pe=Co(()=>(e(N),e(B),t(()=>e(N)&&Object.keys(e(B)).length===0)));te(Yr,_=>{e(Pe)&&_(ye)})}var dt=a(Vr,2),Ft=o(dt);{var Rt=_=>{var M=Ml(),ve=o(M);io(ve,{message:"Cargando opciones de anotaci√≥n..."}),g(_,M)},nr=_=>{var M=uo(),ve=Wt(M);he(ve,1,()=>e(b),ke,($e,je)=>{var lt=Co(()=>To(e(je),2));let _t=()=>e(lt)[0],Vt=()=>e(lt)[1];const ft=Ot(()=>(_t(),t(()=>Le(_t())))),_r=Ot(()=>(Vt(),t(()=>Vt().length)));var Br=Pl(),Fr=o(Br),k=o(Fr),P=o(k),x=o(P),be=a(x);{var Re=bt=>{var Bt=Tl();g(bt,Bt)};te(be,bt=>{_t()===e(ne)&&bt(Re)})}var He=a(P,2);{var Ce=bt=>{var Bt=Ol(),kr=o(Bt);A(()=>{s(Bt,`color: ${e(ft)??""};`),u(kr,`(${e(_r)??""} resultado${e(_r)!==1?"s":""})`)}),g(bt,Bt)};te(He,bt=>{e(N)&&bt(Ce)})}var gt=a(k,2);{var ut=bt=>{var Bt=Nl();A(()=>s(Bt,`background-color: ${e(ft)??""}; opacity: 0.2;`)),g(bt,Bt)};te(gt,bt=>{e(N)||bt(ut)})}var at=a(gt,2);let st;var Yt=a(Fr,2);{var yr=bt=>{var Bt=Ll();he(Bt,5,Vt,ke,(kr,$t,br)=>{const ir=Ot(()=>(e(N),e($t),t(()=>e(N)&&e($t).text.toLowerCase().includes(e(N).toLowerCase()))));var sr=Rl(),zr=o(sr),wr=o(zr),tr=o(wr),Jt=a(tr,2),dr=o(Jt);{var Mr=Ct=>{var It=jl();g(Ct,It)};te(dr,Ct=>{e($t),t(()=>e($t).selected)&&Ct(Mr)})}var er=a(wr,2);A(()=>{s(sr,`
                          background-color: ${e($t),Ne(e(ft)),Ne(e(ir)),e(r),t(()=>e($t).selected?`${e(ft)}10`:e(ir)?`${e(ft)}05`:e(r).inputBg)??""};
                          border-color: ${e($t),Ne(e(ft)),Ne(e(ir)),e(r),t(()=>e($t).selected?e(ft):e(ir)?e(ft):e(r).border)??""};
                        `),Xo(tr,(e($t),t(()=>e($t).selected))),s(Jt,`
                              border-color: ${e($t),Ne(e(ft)),e(r),t(()=>e($t).selected?e(ft):e(r).border)??""};
                              background-color: ${e($t),Ne(e(ft)),t(()=>e($t).selected?e(ft):"transparent")??""};
                            `),s(er,`color: ${e(r),t(()=>e(r).text)??""};`)}),G("change",tr,()=>rt(_t(),e($t))),fr(er,()=>e($t).text,Ct=>(e($t).text=Ct,Ye(()=>(Vt(),e(b))))),g(kr,sr)}),go(3,Bt,()=>Mo),g(bt,Bt)};te(Yt,bt=>{e(U),_t(),t(()=>e(U)[_t()])&&bt(yr)})}A(()=>{Kt(P,1,`text-xs font-black uppercase tracking-widest px-3 py-1 rounded-full text-white flex-shrink-0 transition-all duration-300 group-hover:shadow-md ${_t()===e(ne)?"animate-glow ring-4 ring-opacity-50":""}`,"svelte-1p7gzb0"),s(P,`background-color: ${e(ft)??""}; ${_t()===e(ne)?`box-shadow: 0 0 25px ${e(ft)}60, 0 0 50px ${e(ft)}30; ring-color: ${e(ft)}; border: 2px solid ${e(ft)};`:""}`),u(x,`${_t()??""} `),st=Kt(at,0,"w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0 svelte-1p7gzb0",null,st,{"rotate-180":e(U)[_t()]})}),G("click",Fr,()=>qe(_t())),g($e,Br)}),g(_,M)};te(Ft,_=>{e(l)?_(Rt):_(nr,!1)})}var Wr=a(dt,2),jr=o(Wr),Rr=a(jr,2),qr=a(Wr,2),Ir=o(qr),Lr=o(Ir);{var fe=_=>{var M=Hl();g(_,M)},Xt=_=>{var M=Gl();g(_,M)};te(Lr,_=>{e(Y)?_(fe):_(Xt,!1)})}var ar=a(Te,2);{var pr=_=>{dl(_,{onClose:Me,get selectedDocente(){return e(h),t(()=>e(h).docente)}})};te(ar,_=>{e(oe)&&_(pr)})}var Pr=a(ar,2);{var ur=_=>{kl(_,{onClose:pe,get initialDocente(){return e(h),t(()=>e(h).docente)}})};te(Pr,_=>{e(Q)&&_(ur)})}A(()=>{s(Te,`background-color: ${e(r),t(()=>e(r).bg)??""};`),s(Z,`background-color: ${e(r),t(()=>e(r).cardBg)??""}; border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),wt(me,"src",ro),s(xe,`color: ${e(r),t(()=>e(r).text)??""};`),s(Xe,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(de,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(ue,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(Oe,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(n,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),u(et,c()),s(Lt,`background-color: ${e(r),t(()=>e(r).cardBg)??""}; border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),s(tt,`color: ${e(r),t(()=>e(r).label)??""};`),s(At,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""}; color-scheme: ${c()==="light"?"light":"dark"};`),s(jt,`color: ${e(r),t(()=>e(r).label)??""};`),s(Dt,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),u(Gt,e(O)?"Cargando...":"Seleccione docente"),s(or,`color: ${e(r),t(()=>e(r).label)??""};`),s(W,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),u(We,e(R)?"Cargando...":"Seleccione asignatura"),s(gr,`color: ${e(r),t(()=>e(r).label)??""};`),s(mr,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),u(Hr,e(F)?"Cargando...":"Seleccione grado"),s(Er,`color: ${e(r),t(()=>e(r).label)??""};`),s(Gr,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(Nr,`color: ${e(r),t(()=>e(r).label)??""};`),s(it,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(mt,`color: ${e(r),t(()=>e(r).placeholder)??""};`),s(jr,`color: ${e(r),t(()=>e(r).label)??""};`),s(Rr,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),Ir.disabled=e(Y)||!e(ze),wt(Ir,"title",e(ze)?"Guardar Anotaci√≥n":"Complete todos los campos requeridos y al menos una anotaci√≥n")}),G("click",Xe,C),G("click",de,Ue),G("click",ue,ge),G("click",Oe,function(..._){I()?.apply(this,_)}),G("click",n,E),fr(At,()=>e(h).fecha,_=>(Se(h,e(h).fecha=_),Ye(()=>{e(r),e(O),e(re),e(R),e(T),e(le),e(F),e(J)}))),ct(Dt,()=>e(h).docente,_=>(Se(h,e(h).docente=_),Ye(()=>{e(r),e(O),e(re),e(R),e(T),e(le),e(F),e(J)}))),ct(W,()=>e(h).materia,_=>(Se(h,e(h).materia=_),Ye(()=>{e(r),e(O),e(re),e(R),e(T),e(le),e(F),e(J)}))),ct(mr,()=>e(h).grado,_=>(Se(h,e(h).grado=_),Ye(()=>{e(r),e(O),e(re),e(R),e(T),e(le),e(F),e(J)}))),ct(Gr,()=>e(h).horas,_=>(Se(h,e(h).horas=_),Ye(()=>{e(r),e(O),e(re),e(R),e(T),e(le),e(F),e(J)}))),fr(it,()=>e(N),_=>i(N,_)),fr(Rr,()=>e(h).observacion,_=>(Se(h,e(h).observacion=_),Ye(()=>{e(r),e(O),e(re),e(R),e(T),e(le),e(F),e(J)}))),G("submit",Qt,K),g(V,ee),hr(),v()}var Yl=w('<div class="flex items-center justify-center py-12"><!></div>'),Wl=kt('<svg class="w-3 h-3 text-white" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),ql=w('<div class="relative group flex flex-col p-0 rounded-2xl border transition-all duration-200 shadow-sm hover:shadow-md"><div class="flex flex-col p-4 gap-3"><div class="flex items-start justify-between gap-2"><div class="flex items-center gap-2"><label class="flex-shrink-0 cursor-pointer"><input type="checkbox" class="hidden"/> <div class="w-5 h-5 rounded border flex items-center justify-center transition-colors"><!></div></label> <span class="font-bold text-sm leading-tight"> </span></div> <div class="flex gap-1.5 flex-shrink-0"><span class="text-[10px] font-bold px-1.5 py-0.5 rounded bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 opacity-60"> </span> <span class="text-[10px] font-bold px-1.5 py-0.5 rounded bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 opacity-60"> </span></div></div> <textarea rows="4" class="w-full bg-transparent border-none focus:ring-0 text-sm font-medium leading-relaxed resize-none p-0 transition-colors opacity-80" placeholder="Escriba aqu√≠..."></textarea></div></div>'),Jl=w('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>'),Kl=w('<div class="space-y-4"><button type="button" class="flex items-center gap-3 w-full text-left cursor-pointer group focus:outline-none"><h3 class="text-xs font-black uppercase tracking-widest px-3 py-1 rounded-full text-white flex-shrink-0 transition-all duration-300 group-hover:shadow-md"> </h3> <div class="h-px flex-1 transition-all duration-300 group-hover:opacity-50"></div> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>'),Zl=w('<div class="space-y-8"><!></div>');function Ql(V,$){xr($,!1);const c=f();let Ae=St($,"selectedDiarioAnots",28,()=>[]),v=f({}),T=f({}),r=f(!1);const d=ea(),ze=F=>{if(e(T)[F])Se(T,e(T)[F]=!1);else{for(const l in e(T))Se(T,e(T)[l]=!1);Se(T,e(T)[F]=!0)}i(T,e(T))},I=F=>({Administrativo:"#6366f1",Emergencia:"#ef4444",Acad√©mico:"#f59e0b",Convivencia:"#22c55e",Infraestructura:"#0ea5e9",Salud:"#ec4899",Tecnol√≥gico:"#8b5cf6",Comunicaci√≥n:"#3b82f6",Disciplinario:"#64748b",Normalidad:"#10b981"})[F]||"#6366f1",re=async()=>{i(r,!0);try{const l=(await $a()).situaciones||{},D={},U={};Object.entries(l).forEach(([N,B])=>{B.length>0&&(U[N]=!1,D[N]=B.map(b=>({id:b.id,text:b.descripcion,selected:!1,originalTitulo:b.titulo,categoria:b.categoria,impacto:b.impacto,tiempo_estimado:b.tiempo_estimado})))}),i(v,D),i(T,U)}catch(F){console.error("Error cargando opciones de diario:",F)}finally{i(r,!1)}};vr(()=>{re()}),Fe(()=>(e(v),Ne(Ae())),()=>{const F=Object.values(e(v)).flat().filter(l=>l.selected&&l.text.trim()!=="").map(l=>`[${l.categoria}] ${l.originalTitulo}: ${l.text}`);JSON.stringify(F)!==JSON.stringify(Ae())&&(Ae(F),d("change",Ae()))}),Fe(()=>{},()=>{i(c,{text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",inputBg:"rgb(var(--bg-secondary))"})}),Sr(),Ar();var X=Zl(),J=o(X);{var O=F=>{var l=Yl(),D=o(l);io(D,{message:"Cargando opciones de diario..."}),g(F,l)},R=F=>{var l=uo(),D=Wt(l);he(D,1,()=>(e(v),t(()=>Object.entries(e(v)))),ke,(U,N)=>{var B=Co(()=>To(e(N),2));let b=()=>e(B)[0],ne=()=>e(B)[1];const we=Ot(()=>(b(),t(()=>I(b()))));var qe=Kl(),rt=o(qe),Le=o(rt),vt=o(Le),se=a(Le,2),h=a(se,2);let le;var Ge=a(rt,2);{var Ee=ie=>{var Y=Jl();he(Y,5,ne,oe=>oe.id,(oe,Q,Ue)=>{var Me=ql(),ge=o(Me),pe=o(ge),Ie=o(pe),ot=o(Ie),Ve=o(ot),Je=a(Ve,2),y=o(Je);{var p=ae=>{var me=Wl();g(ae,me)};te(y,ae=>{e(Q),t(()=>e(Q).selected)&&ae(p)})}var C=a(ot,2),E=o(C),H=a(Ie,2),K=o(H),ee=o(K),Te=a(K,2),Z=o(Te),j=a(pe,2);A(()=>{s(Me,`
                  background-color: ${e(Q),Ne(e(we)),e(c),t(()=>e(Q).selected?`${e(we)}10`:e(c).inputBg)??""};
                  border-color: ${e(Q),Ne(e(we)),e(c),t(()=>e(Q).selected?e(we):e(c).border)??""};
                `),s(Je,`
                            border-color: ${e(Q),Ne(e(we)),e(c),t(()=>e(Q).selected?e(we):e(c).border)??""};
                            background-color: ${e(Q),Ne(e(we)),t(()=>e(Q).selected?e(we):"transparent")??""};
                          `),s(C,`color: ${e(c),t(()=>e(c).text)??""};`),u(E,(e(Q),t(()=>e(Q).originalTitulo))),s(K,`color: ${e(c),t(()=>e(c).text)??""};`),u(ee,`IMP: ${e(Q),t(()=>e(Q).impacto)??""}`),s(Te,`color: ${e(c),t(()=>e(c).text)??""};`),u(Z,`${e(Q),t(()=>e(Q).tiempo_estimado)??""} MIN`),s(j,`color: ${e(c),t(()=>e(c).text)??""};`)}),Ao(Ve,()=>e(Q).selected,ae=>(e(Q).selected=ae,Ye(()=>(ne(),e(v))))),G("change",Ve,()=>{i(v,e(v))}),fr(j,()=>e(Q).text,ae=>(e(Q).text=ae,Ye(()=>(ne(),e(v))))),G("input",j,()=>{i(v,e(v))}),g(oe,Me)}),go(3,Y,()=>Mo),g(ie,Y)};te(Ge,ie=>{e(T),b(),t(()=>e(T)[b()])&&ie(Ee)})}A(()=>{s(Le,`background-color: ${e(we)??""};`),u(vt,b()),s(se,`background-color: ${e(we)??""}; opacity: 0.2;`),le=Kt(h,0,"w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0",null,le,{"rotate-180":e(T)[b()]})}),G("click",rt,()=>ze(b())),g(U,qe)}),g(F,l)};te(J,F=>{e(r)?F(O):F(R,!1)})}g(V,X),hr()}var Xl=w("<option> </option>"),en=w("<option> </option>"),tn=w("<option> </option>"),rn=kt('<svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Cargando...',1),on=kt('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> Aplicar Filtros',1),an=w('<div class="text-sm opacity-75"> </div>'),sn=w('<div class="flex items-center justify-center py-12"><!></div>'),ln=w('<div class="text-center py-12"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-lg font-medium mb-2">No hay datos disponibles</p> <p class="text-sm"> </p></div>'),nn=w('<tr class="border-t transition-colors hover:bg-gray-50 dark:hover:bg-gray-800"><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"><div class="truncate"> </div></td></tr>'),dn=w('<tr class="border-t-2 font-bold bg-gray-100 dark:bg-gray-800"><td class="px-4 py-3 text-sm font-bold">TOTAL</td><td class="px-4 py-3 text-sm font-bold text-center"> </td><td class="px-4 py-3 text-sm"></td><td class="px-4 py-3 text-sm"></td><td class="px-4 py-3 text-sm font-bold text-center"> </td></tr>'),cn=w('<div class="overflow-x-auto rounded-lg border"><table class="w-full"><thead><tr><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Fecha</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Horas</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Asignatura</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Grado</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Diario de Campo</th></tr></thead><tbody><!><!></tbody></table></div>'),vn=w('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-2xl" role="document"><div class="flex items-center justify-between p-6 border-b"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h2 id="modal-title" class="text-xl font-bold">Generador de Reportes PDF</h2> <p class="text-sm opacity-75">Filtre y genere reportes del Diario de Campo</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar ventana"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 140px);"><div class="mb-6 p-4 rounded-xl border"><h3 class="text-lg font-semibold mb-4">Filtros</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="space-y-2"><label for="docente-filter" class="block text-sm font-medium">Docente</label> <select id="docente-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los docentes</option><!></select></div> <div class="space-y-2"><label for="materia-filter" class="block text-sm font-medium">Asignatura</label> <select id="materia-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todas las asignaturas</option><!></select></div> <div class="space-y-2"><label for="grado-filter" class="block text-sm font-medium">Grado</label> <select id="grado-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los grados</option><!></select></div></div> <div class="flex gap-3 mt-4"><button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2"><!></button> <button class="px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> Limpiar</button> <button class="ml-auto px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Generar PDF</button></div></div> <div class="mb-4"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold"> </h3> <!></div></div> <!></div></div></div>');function gn(V,$){xr($,!1);const c=f(),Ae=f(),v=f();let T=null,r=null,d=St($,"onClose",8),ze=St($,"initialDocente",8,""),I=f([]),re=f([]),X=f([]),J=[],O=f([]),R=f(!1);const F=async()=>{if(!T||!r){const[n,m]=await Promise.all([so(()=>import("./pdf-CBBHH09D.js").then(S=>S.j),[]),so(()=>import("./pdf-CBBHH09D.js").then(S=>S.b),[])]);T=n.default,r=m.default}};let l=f(JSON.parse(localStorage.getItem("docenteMateriasDiario")||"{}")),D=f(""),U=f(""),N=f("");vr(()=>{ze()&&i(D,ze())}),vr(async()=>{await B()});const B=async()=>{try{const[n,m,S]=await Promise.all([Kr(),Zr(),Qr()]);i(I,n),i(re,m),i(X,S),i(l,JSON.parse(localStorage.getItem("docenteMateriasDiario")||"{}"))}catch(n){console.error("Error cargando datos iniciales:",n)}},b=async()=>{i(R,!0);try{const n={spreadsheetId:So,worksheetTitle:Oo};e(D)&&(n.docente=e(D)),e(U)&&(n.materia=e(U)),e(N)&&(n.grado=e(N));const m=await Ca(n);let S=m;if(m&&typeof m=="object"&&(m.data?S=m.data:m.records?S=m.records:Array.isArray(m)&&(S=m)),J=Array.isArray(S)?S:[],J.length>0&&J[0].values){const z=["Marca Temporal","Fecha","Horas","Docente","Asignatura","Grado","Diario de Campo"];J=J.map(De=>{const Ke={"Marca Temporal":"",Fecha:"",Horas:"",Docente:"",Asignatura:"",Grado:"","Diario de Campo":""};return z.forEach((et,_e)=>{Ke[et]=De.values?.[_e]||""}),Ke})}ne()}catch(n){console.error("Error cargando datos del diario:",n),J=[],i(O,[])}finally{i(R,!1)}},ne=()=>{if(!Array.isArray(J)){i(O,[]);return}i(O,J.filter(n=>{if(!n||typeof n!="object")return!1;const m=!e(D)||n.Docente===e(D),S=!e(U)||n.Asignatura===e(U),z=!e(N)||n.Grado===e(N);return m&&S&&z}))},we=()=>{b()},qe=()=>{i(D,""),i(U,""),i(N,""),J=[],i(O,[])},rt=async()=>{if(await F(),e(O).length===0){alert("No hay datos para generar el PDF");return}const n=new T({format:"letter"}),m="Diario de Campo",S=[];e(D)&&S.push(`Docente: ${e(D)}`),e(U)&&S.push(`Asignatura: ${e(U)}`),e(N)&&S.push(`Grado: ${e(N)}`);let z=20;n.setTextColor(99,102,241),n.setFontSize(28),n.setFont("helvetica","bold"),n.text("EIE",n.internal.pageSize.getWidth()/2,z,{align:"center"}),z+=15,n.setTextColor(0,0,0),n.setFontSize(18),n.setFont("helvetica","bold"),n.text(m,n.internal.pageSize.getWidth()/2,z,{align:"center"}),z+=12,n.setTextColor(0,0,0),n.setFontSize(12),n.setFont("helvetica","normal"),n.text("Instituci√≥n Educativa Instituto Gu√°tica",n.internal.pageSize.getWidth()/2,z,{align:"center"}),z+=10,n.setTextColor(60,60,60),n.setFontSize(10),n.setFont("helvetica","normal"),n.text(`Fecha de generaci√≥n: ${new Date().toLocaleDateString()}`,n.internal.pageSize.getWidth()/2,z,{align:"center"}),z+=15,n.setDrawColor(200,200,200),n.setLineWidth(1),n.line(20,z,n.internal.pageSize.getWidth()-20,z),z+=15,S.length>0&&(n.setTextColor(80,80,80),n.setFontSize(9),n.setFont("helvetica","normal"),S.forEach(et=>{n.text(et,20,z,{align:"left"}),z+=6}),z+=10);const De=e(O).map(et=>[et.Fecha||"",et.Horas||"",et.Asignatura||"",et.Grado||"",et["Diario de Campo"]||""]);De.push(["TOTAL",e(c).toFixed(1),"","",`${e(O).length} registros`]),r(n,{head:[["Fecha","Horas","Asignatura","Grado","Diario de Campo"]],body:De,startY:z,styles:{fontSize:8,cellPadding:2,cellWidth:"wrap",valign:"top",overflow:"linebreak"},headStyles:{fillColor:[99,102,241],textColor:255,fontSize:9,fontStyle:"bold",halign:"center"},bodyStyles:{fillColor:[255,255,255],textColor:[0,0,0]},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:{0:{cellWidth:25,minCellHeight:8,halign:"center"},1:{cellWidth:15,minCellHeight:8,halign:"center"},2:{cellWidth:35,minCellHeight:8},3:{cellWidth:20,minCellHeight:8,halign:"center"},4:{cellWidth:"auto",minCellHeight:12}},margin:{top:15,right:15,bottom:15,left:15},tableWidth:"auto",didParseCell:et=>{et.row.index===De.length-1&&(et.cell.styles.fillColor=[240,240,240],et.cell.styles.fontStyle="bold",et.cell.styles.textColor=[0,0,0])}});const Ke=`reporte_diario_${e(D)||"todos"}_${e(U)||"todas"}_${e(N)||"todos"}_${new Date().toISOString().split("T")[0]}.pdf`;n.save(Ke)};Fe(()=>e(O),()=>{i(c,e(O).reduce((n,m)=>{const S=parseFloat(m.Horas||"0");return n+(isNaN(S)?0:S)},0))}),Fe(()=>(e(D),e(re),e(l)),()=>{i(Ae,e(D)?[...e(re)].sort((n,m)=>{const S=e(l)[e(D)]?.includes(n.materia),z=e(l)[e(D)]?.includes(m.materia);return S&&!z?-1:!S&&z?1:n.materia.localeCompare(m.materia)}):e(re))}),Fe(()=>{},()=>{i(v,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Sr(),Ar();var Le=vn(),vt=o(Le),se=o(vt),h=a(o(se),2),le=a(se,2),Ge=o(le),Ee=a(o(Ge),2),ie=o(Ee),Y=o(ie),oe=a(Y,2),Q=o(oe);Q.value=Q.__value="";var Ue=a(Q);he(Ue,1,()=>e(I),ke,(n,m)=>{var S=Xl(),z=o(S),De={};A(()=>{u(z,e(m)),De!==(De=e(m))&&(S.value=(S.__value=e(m))??"")}),g(n,S)});var Me=a(ie,2),ge=o(Me),pe=a(ge,2),Ie=o(pe);Ie.value=Ie.__value="";var ot=a(Ie);he(ot,1,()=>e(Ae),ke,(n,m)=>{const S=Ot(()=>(e(D),e(l),e(m),t(()=>e(D)&&e(l)[e(D)]?.includes(e(m).materia))));var z=en(),De=o(z),Ke={};A(()=>{s(z,e(S)?"color: #6366f1; font-weight: 600;":""),u(De,`${e(S)?"‚≠ê ":""}${e(m),t(()=>e(m).materia)??""}`),Ke!==(Ke=(e(m),t(()=>e(m).materia)))&&(z.value=(z.__value=(e(m),t(()=>e(m).materia)))??"")}),g(n,z)});var Ve=a(Me,2),Je=o(Ve),y=a(Je,2),p=o(y);p.value=p.__value="";var C=a(p);he(C,1,()=>(e(X),t(()=>[...new Set(e(X).map(n=>n.grado.toString()))])),ke,(n,m)=>{var S=tn(),z=o(S),De={};A(Ke=>{u(z,Ke),De!==(De=e(m))&&(S.value=(S.__value=e(m))??"")},[()=>(e(m),t(()=>e(m).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),g(n,S)});var E=a(Ee,2),H=o(E),K=o(H);{var ee=n=>{var m=rn();g(n,m)},Te=n=>{var m=on();g(n,m)};te(K,n=>{e(R)?n(ee):n(Te,!1)})}var Z=a(H,2),j=a(Z,2),ae=a(Ge,2),me=o(ae),xe=o(me),Qe=o(xe),Xe=a(xe,2);{var de=n=>{var m=an(),S=o(m);A(()=>u(S,`${(e(D)&&`Docente: ${e(D)}`)??""}
              ${(e(U)&&` | Asignatura: ${e(U)}`)??""}
              ${(e(N)&&` | Grado: ${e(N)}`)??""}`)),g(n,m)};te(Xe,n=>{e(O),t(()=>e(O).length>0)&&n(de)})}var L=a(ae,2);{var q=n=>{var m=sn(),S=o(m);io(S,{message:"Cargando datos del diario..."}),g(n,m)},ue=n=>{var m=ln(),S=a(o(m),4),z=o(S);A(()=>{s(m,`color: ${e(v),t(()=>e(v).placeholder)??""};`),u(z,e(D)||e(U)||e(N)?"No se encontraron registros con los filtros seleccionados.":"Seleccione filtros y haga clic en 'Aplicar Filtros'.")}),g(n,m)},Oe=n=>{var m=cn(),S=o(m),z=o(S),De=o(z),Ke=o(De),et=a(Ke),_e=a(et),Lt=a(_e),Zt=a(Lt),Mt=a(z),Nt=o(Mt);he(Nt,1,()=>e(O),ke,(Ze,tt)=>{var At=nn(),Tt=o(At),jt=o(Tt),Dt=a(Tt),Et=o(Dt),Gt=a(Dt),lr=o(Gt),rr=a(Gt),or=o(rr),W=a(rr),ce=o(W),We=o(ce);A(()=>{s(At,`border-color: ${e(v),t(()=>e(v).border)??""};`),u(jt,(e(tt),t(()=>e(tt).Fecha||"-"))),u(Et,(e(tt),t(()=>e(tt).Horas||"-"))),u(lr,(e(tt),t(()=>e(tt).Asignatura||"-"))),u(or,(e(tt),t(()=>e(tt).Grado||"-"))),wt(ce,"title",(e(tt),t(()=>e(tt)["Diario de Campo"]))),u(We,(e(tt),t(()=>e(tt)["Diario de Campo"]||"-")))}),g(Ze,At)});var Qt=a(Nt);{var Pt=Ze=>{var tt=dn(),At=a(o(tt)),Tt=o(At),jt=a(At,3),Dt=o(jt);A(Et=>{s(tt,`border-color: ${e(v),t(()=>e(v).border)??""}; border-top-width: 2px;`),u(Tt,Et),u(Dt,`${e(O),t(()=>e(O).length)??""} registros`)},[()=>(e(c),t(()=>e(c).toFixed(1)))]),g(Ze,tt)};te(Qt,Ze=>{e(O),t(()=>e(O).length>0)&&Ze(Pt)})}A(()=>{s(m,`border-color: ${e(v),t(()=>e(v).border)??""};`),s(z,`background-color: ${e(v),t(()=>e(v).inputBg)??""};`),s(Ke,`color: ${e(v),t(()=>e(v).label)??""};`),s(et,`color: ${e(v),t(()=>e(v).label)??""};`),s(_e,`color: ${e(v),t(()=>e(v).label)??""};`),s(Lt,`color: ${e(v),t(()=>e(v).label)??""};`),s(Zt,`color: ${e(v),t(()=>e(v).label)??""};`)}),g(n,m)};te(L,n=>{e(R)?n(q):(e(O),t(()=>e(O).length===0)?n(ue,1):n(Oe,!1))})}A(()=>{s(vt,`background-color: ${e(v),t(()=>e(v).cardBg)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(se,`border-color: ${e(v),t(()=>e(v).cardBorder)??""};`),s(Ge,`background-color: ${e(v),t(()=>e(v).inputBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""};`),s(Y,`color: ${e(v),t(()=>e(v).label)??""};`),s(oe,`background-color: ${e(v),t(()=>e(v).cardBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(ge,`color: ${e(v),t(()=>e(v).label)??""};`),s(pe,`background-color: ${e(v),t(()=>e(v).cardBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(Je,`color: ${e(v),t(()=>e(v).label)??""};`),s(y,`background-color: ${e(v),t(()=>e(v).cardBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""}; color: ${e(v),t(()=>e(v).text)??""};`),H.disabled=e(R),s(Z,`color: ${e(v),t(()=>e(v).text)??""};`),j.disabled=(e(O),t(()=>e(O).length===0)),u(Qe,`Resultados (${e(O),t(()=>e(O).length)??""} registros)`)}),G("click",h,function(...n){d()?.apply(this,n)}),ct(oe,()=>e(D),n=>i(D,n)),ct(pe,()=>e(U),n=>i(U,n)),ct(y,()=>e(N),n=>i(N,n)),G("click",H,we),G("click",Z,qe),G("click",j,rt),G("click",Le,lo(function(...n){d()?.apply(this,n)})),G("keydown",Le,n=>n.key==="Escape"&&d()()),g(V,Le),hr()}var pn=kt('<svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>'),un=kt('<svg class="w-5 h-5 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>'),bn=kt('<svg class="w-5 h-5 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>'),fn=w('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-qemcko"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <div class="flex-1 pr-6 pt-0.5"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100">Informaci√≥n</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors" aria-label="Cerrar alerta"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),xn=w("<option> </option>"),hn=w("<option> </option>"),mn=w("<option> </option>"),_n=w("<option> </option>"),yn=kt('<svg class="animate-spin h-7 w-7 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),kn=kt('<svg class="w-8 h-8 transform rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>'),wn=w('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8"><div class="flex items-center gap-4 lg:flex-col"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center">Diario de Campo</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Abrir hoja de c√°lculo"><svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Hoja de C√°lculo</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Generar reportes PDF"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Reportes PDF</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Volver al Dashboard"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Dashboard</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize"> </span></button></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto pb-32"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border"><!> <form class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="space-y-2"><label for="fecha" class="block text-sm font-medium">Fecha</label> <input type="date" id="fecha" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"/></div> <div class="space-y-2"><label for="docente" class="block text-sm font-medium">Docente</label> <select id="docente" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50"><option> </option><!></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="space-y-2"><label for="materia" class="block text-sm font-medium">Asignatura</label> <select id="materia" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50"><option> </option><!></select></div> <div class="space-y-2"><label for="grado" class="block text-sm font-medium">Grado</label> <select id="grado" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50"><option> </option><!></select></div></div> <div class="space-y-2"><label for="horas" class="block text-sm font-medium">Horas</label> <select id="horas" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer"><option>Seleccione horas</option><!></select></div> <div class="space-y-2"><!></div> <div class="fixed bottom-8 right-8 z-50"><button type="submit" class="w-16 h-16 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-400 dark:disabled:bg-slate-700 disabled:cursor-not-allowed disabled:scale-100 text-white rounded-full shadow-2xl transition-all duration-300 transform hover:scale-110 active:scale-95 backdrop-blur-sm bg-opacity-95 flex items-center justify-center overflow-hidden border border-white/20" aria-label="Guardar Diario de Campo"><!></button></div></form></div></main></div> <!>',1);function $n(V,$){xr($,!1);const c=()=>mo(Jr,"$theme",Ae),[Ae,v]=ho(),T=f(),r=f(),d=f();let ze=St($,"onBack",8),I=f([]),re=f([]),X=f([]),J=f(!1),O=f(!1),R=f(!1),F=f(!1),l=f(!1);const D=()=>{i(l,!0)},U=()=>{i(l,!1)};let N=f([]),B=f({fecha:new Date().toISOString().split("T")[0],docente:localStorage.getItem("lastDocenteDiario")||"",materia:"",grado:"",horas:""}),b=f(JSON.parse(localStorage.getItem("docenteMateriasDiario")||"{}"));const ne=(W,ce)=>{!W||!ce||(e(b)[W]||Se(b,e(b)[W]=[]),e(b)[W].includes(ce)||(Se(b,e(b)[W]=[...e(b)[W],ce]),localStorage.setItem("docenteMateriasDiario",JSON.stringify(e(b)))))};let we=f(localStorage.getItem("dismissedInfoDiarioContent")!==$o);const qe=()=>{i(we,!1),localStorage.setItem("dismissedInfoDiarioContent",$o)},rt=()=>`https://docs.google.com/spreadsheets/d/${So}`,Le=()=>{window.open(rt(),"_blank")},vt=()=>{Jr.update(W=>W==="light"?"dim":W==="dim"?"dark":"light")},se=async()=>{i(J,!0),i(O,!0),i(R,!0);try{const[W,ce,We]=await Promise.all([Kr(),Zr(),Qr()]);i(I,W),i(re,ce),i(X,We)}catch(W){console.error("Error cargando datos iniciales:",W)}finally{i(J,!1),i(O,!1),i(R,!1)}},h=async W=>{if(W.preventDefault(),e(F))return;const ce=e(N).join(" | ");if((await zt.fire({title:"¬øConfirmar Registro?",html:`
        <div class="text-left space-y-2 p-2 rounded-xl bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10" style="font-size: 0.9rem; line-height: 1.4;">
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Fecha:</strong> ${e(B).fecha}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Docente:</strong> ${e(B).docente}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Asignatura:</strong> ${e(B).materia}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Grado:</strong> ${e(B).grado}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Horas:</strong> ${e(B).horas}</div>
          <div style="margin-top: 12px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 8px;">
            <strong style="color: #6366f1;">Diario de Campo:</strong>
            <ul style="list-style-type: disc; padding-left: 20px; margin-top: 4px; font-size: 0.8rem; opacity: 0.8;">
              ${e(N).map(nt=>`<li>${nt}</li>`).join("")}
            </ul>
          </div>
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonText:"Si, de acuerdo",cancelButtonText:"No",confirmButtonColor:"#4f46e5",cancelButtonColor:"#64748b",reverseButtons:!0,background:c()==="light"?"#fff":"#1e293b",color:c()==="light"?"#1e293b":"#f1f5f9"})).isConfirmed){i(F,!0);try{const ht=[[new Date().toLocaleString(),e(B).fecha,e(B).horas,e(B).docente,e(B).materia,e(B).grado,ce]];await Ea({spreadsheetId:So,worksheetTitle:Oo,datos:ht}),ne(e(B).docente,e(B).materia),await zt.fire({icon:"success",title:"¬°√âxito!",text:"Diario de Campo registrado exitosamente",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),i(B,{fecha:new Date().toISOString().split("T")[0],docente:e(B).docente,materia:e(B).materia,grado:e(B).grado,horas:""}),i(N,[])}catch(nt){console.error("Error enviando:",nt),await zt.fire({icon:"error",title:"Error",text:"Error al registrar el Diario de Campo",confirmButtonColor:"#ef4444"})}finally{i(F,!1)}}};vr(()=>{se()}),Fe(()=>e(B),()=>{e(B).docente&&localStorage.setItem("lastDocenteDiario",e(B).docente)}),Fe(()=>(e(B),e(re),e(b)),()=>{i(T,e(B).docente?[...e(re)].sort((W,ce)=>{const We=e(b)[e(B).docente]?.includes(W.materia),nt=e(b)[e(B).docente]?.includes(ce.materia);return We&&!nt?-1:!We&&nt?1:W.materia.localeCompare(ce.materia)}):e(re))}),Fe(()=>{},()=>{i(r,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Fe(()=>(e(B),e(N)),()=>{i(d,e(B).fecha&&e(B).docente&&e(B).materia&&e(B).grado&&e(B).horas&&e(N).length>0)}),Sr(),Ar();var le=wn(),Ge=Wt(le),Ee=o(Ge),ie=o(Ee),Y=o(ie),oe=o(Y),Q=a(oe,2),Ue=a(Y,2),Me=o(Ue),ge=a(Me,2),pe=a(ge,2),Ie=a(pe,2),ot=o(Ie);{var Ve=W=>{var ce=pn();g(W,ce)},Je=W=>{var ce=un();g(W,ce)},y=W=>{var ce=bn();g(W,ce)};te(ot,W=>{c()==="dark"?W(Ve):c()==="light"?W(Je,1):W(y,!1)})}var p=a(ot,2),C=o(p),E=a(Ee,2),H=o(E),K=o(H);{var ee=W=>{var ce=fn(),We=a(o(ce),2),nt=a(o(We),2),ht=o(nt),Ht=a(We,2);A(()=>u(ht,$o)),G("click",Ht,qe),g(W,ce)};te(K,W=>{e(we)&&W(ee)})}var Te=a(K,2),Z=o(Te),j=o(Z),ae=o(j),me=a(ae,2),xe=a(j,2),Qe=o(xe),Xe=a(Qe,2),de=o(Xe),L=o(de);de.value=de.__value="";var q=a(de);he(q,1,()=>e(I),ke,(W,ce)=>{var We=xn(),nt=o(We),ht={};A(()=>{u(nt,e(ce)),ht!==(ht=e(ce))&&(We.value=(We.__value=e(ce))??"")}),g(W,We)});var ue=a(Z,2),Oe=o(ue),n=o(Oe),m=a(n,2),S=o(m),z=o(S);S.value=S.__value="";var De=a(S);he(De,1,()=>e(T),ke,(W,ce)=>{const We=Ot(()=>(e(b),e(B),e(ce),t(()=>e(b)[e(B).docente]?.includes(e(ce).materia))));var nt=hn(),ht=o(nt),Ht={};A(()=>{s(nt,e(We)?"color: #6366f1; font-weight: 600;":""),u(ht,`${e(We)?"‚≠ê ":""}${e(ce),t(()=>e(ce).materia)??""}`),Ht!==(Ht=(e(ce),t(()=>e(ce).materia)))&&(nt.value=(nt.__value=(e(ce),t(()=>e(ce).materia)))??"")}),g(W,nt)});var Ke=a(Oe,2),et=o(Ke),_e=a(et,2),Lt=o(_e),Zt=o(Lt);Lt.value=Lt.__value="";var Mt=a(Lt);he(Mt,1,()=>(e(X),t(()=>[...new Set(e(X).map(W=>W.grado.toString()))])),ke,(W,ce)=>{var We=mn(),nt=o(We),ht={};A(Ht=>{u(nt,Ht),ht!==(ht=e(ce))&&(We.value=(We.__value=e(ce))??"")},[()=>(e(ce),t(()=>e(ce).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),g(W,We)});var Nt=a(ue,2),Qt=o(Nt),Pt=a(Qt,2),Ze=o(Pt);Ze.value=Ze.__value="";var tt=a(Ze);he(tt,0,()=>[1,2,3,4],ke,(W,ce)=>{var We=_n(),nt=o(We),ht={};A(Ht=>{u(nt,`${ce??""} ${ce===1?"Hora":"Horas"}`),ht!==(ht=Ht)&&(We.value=(We.__value=Ht)??"")},[()=>t(()=>ce.toString())]),g(W,We)});var At=a(Nt,2),Tt=o(At);Ql(Tt,{get selectedDiarioAnots(){return e(N)},set selectedDiarioAnots(W){i(N,W)},$$legacy:!0});var jt=a(At,2),Dt=o(jt),Et=o(Dt);{var Gt=W=>{var ce=yn();g(W,ce)},lr=W=>{var ce=kn();g(W,ce)};te(Et,W=>{e(F)?W(Gt):W(lr,!1)})}var rr=a(Ge,2);{var or=W=>{gn(W,{onClose:U,get initialDocente(){return e(B),t(()=>e(B).docente)}})};te(rr,W=>{e(l)&&W(or)})}A(()=>{s(Ge,`background-color: ${e(r),t(()=>e(r).bg)??""};`),s(Ee,`background-color: ${e(r),t(()=>e(r).cardBg)??""}; border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),wt(oe,"src",ro),s(Q,`color: ${e(r),t(()=>e(r).text)??""};`),s(Me,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(ge,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(pe,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),s(Ie,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),u(C,c()),s(H,`background-color: ${e(r),t(()=>e(r).cardBg)??""}; border-color: ${e(r),t(()=>e(r).cardBorder)??""};`),s(ae,`color: ${e(r),t(()=>e(r).label)??""};`),s(me,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""}; color-scheme: ${c()==="light"?"light":"dark"};`),s(Qe,`color: ${e(r),t(()=>e(r).label)??""};`),s(Xe,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),u(L,e(J)?"Cargando...":"Seleccione docente"),s(n,`color: ${e(r),t(()=>e(r).label)??""};`),s(m,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),u(z,e(O)?"Cargando...":"Seleccione asignatura"),s(et,`color: ${e(r),t(()=>e(r).label)??""};`),s(_e,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),u(Zt,e(R)?"Cargando...":"Seleccione grado"),s(Qt,`color: ${e(r),t(()=>e(r).label)??""};`),s(Pt,`background-color: ${e(r),t(()=>e(r).inputBg)??""}; border-color: ${e(r),t(()=>e(r).border)??""}; color: ${e(r),t(()=>e(r).text)??""};`),Dt.disabled=e(F)||!e(d),wt(Dt,"title",e(d)?"Guardar Diario de Campo":"Complete todos los campos requeridos")}),G("click",Me,Le),G("click",ge,D),G("click",pe,function(...W){ze()?.apply(this,W)}),G("click",Ie,vt),fr(me,()=>e(B).fecha,W=>(Se(B,e(B).fecha=W),Ye(()=>{e(r),e(J),e(I),e(O),e(T),e(b),e(R),e(X)}))),ct(Xe,()=>e(B).docente,W=>(Se(B,e(B).docente=W),Ye(()=>{e(r),e(J),e(I),e(O),e(T),e(b),e(R),e(X)}))),ct(m,()=>e(B).materia,W=>(Se(B,e(B).materia=W),Ye(()=>{e(r),e(J),e(I),e(O),e(T),e(b),e(R),e(X)}))),ct(_e,()=>e(B).grado,W=>(Se(B,e(B).grado=W),Ye(()=>{e(r),e(J),e(I),e(O),e(T),e(b),e(R),e(X)}))),ct(Pt,()=>e(B).horas,W=>(Se(B,e(B).horas=W),Ye(()=>{e(r),e(J),e(I),e(O),e(T),e(b),e(R),e(X)}))),G("submit",Te,h),g(V,le),hr(),v()}var Cn=w('<div class="w-full h-screen flex flex-col bg-[rgb(var(--bg-primary))]"><div class="h-16 flex items-center justify-between px-6 border-b transition-colors duration-200" style="background-color: rgb(var(--card-bg)); border-color: rgb(var(--card-border));"><button class="flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 font-medium" style="color: rgb(var(--text-primary));"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> Volver al Dashboard</button> <h2 class="text-lg font-bold" style="color: rgb(var(--text-primary));">Horas Laborables</h2> <div class="w-10"></div></div> <iframe src="https://ceslep.github.io/horas_laborables" title="Horas Laborables" class="flex-1 w-full border-none"></iframe></div>'),Sn=w('<main class="w-full min-h-screen"><!></main>');function An(V){let $=f("dashboard");const c=X=>{i($,X)},Ae=()=>{i($,"dashboard")};var v=Sn(),T=o(v);{var r=X=>{ua(X,{onSelect:c})},d=X=>{qs(X,{onBack:Ae})},ze=X=>{Vl(X,{onBack:Ae})},I=X=>{$n(X,{onBack:Ae})},re=X=>{var J=Cn(),O=o(J),R=o(O);G("click",R,Ae),g(X,J)};te(T,X=>{e($)==="dashboard"?X(r):e($)==="inasistencia"?X(d,1):e($)==="anotador"?X(ze,2):e($)==="diario"?X(I,3):e($)==="horas_laborables"&&X(re,4)})}g(V,v)}ta(An,{target:document.getElementById("app")});
