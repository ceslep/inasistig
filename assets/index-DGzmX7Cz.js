const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/utils-Dc41pFlL.js","assets/excel-G1qE2FwJ.js"])))=>i.map(i=>d[i]);
import{w as Po,p as wr,a as $t,o as kr,l as Fe,b as Ar,i as Er,c as no,f as Vt,d as X,e as v,g as $r,s as a,t as E,h as R,j as i,k as m,m as o,n as x,q as Ie,r as Ut,u as e,v as r,x as l,y as b,z as fo,A as me,B as so,C as xo,D as _t,E as Bo,F as Ce,G as Ho,H as ht,I as he,J as Oe,K as So,L as nt,M as dr,N as Mt,O as zo,P as io,Q as Go,R as Uo,S as Vo,T as Co,U as Yo,V as Mo,W as To,X as qo,Y as Jo}from"./svelte-Cuf3vpgr.js";import{S as Dt}from"./ui-CHfsb5jC.js";import{_ as po}from"./pdf-CBBHH09D.js";(function(){const w=document.createElement("link").relList;if(w&&w.supports&&w.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))we(f);new MutationObserver(f=>{for(const z of f)if(z.type==="childList")for(const t of z.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&we(t)}).observe(document,{childList:!0,subtree:!0});function n(f){const z={};return f.integrity&&(z.integrity=f.integrity),f.referrerPolicy&&(z.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?z.credentials="include":f.crossOrigin==="anonymous"?z.credentials="omit":z.credentials="same-origin",z}function we(f){if(f.ep)return;f.ep=!0;const z=n(f);fetch(f.href,z)}})();const Wo="/inasistig/assets/asistencia_hero-DmIvUlDZ.png",Ko="/inasistig/assets/anotador_hero-DBB4ReZf.png",Zo="/inasistig/assets/diario_hero-B7a5kf5J.png",ro="/inasistig/assets/eie-DMab_WyA.png",Qo=()=>{if(typeof window<"u"){const P=localStorage.getItem("theme");if(P&&["light","dim","dark"].includes(P))return P}return"dark"},Jr=Po(Qo());typeof window<"u"&&Jr.subscribe(P=>{localStorage.setItem("theme",P);const w=document.documentElement;w.classList.remove("light","dim","dark"),w.classList.add(P)});var Xo=m('<div class="relative svelte-dtuciw"><div style="top: -8px; left: 50%; transform: translateX(-50%);"></div></div>'),ea=m('<div class="fixed inset-0 bg-black/30 z-40 svelte-dtuciw" style="pointer-events: none;"></div> <div class="fixed z-50 animate-bounce-in svelte-dtuciw"><!> <div><div class="flex items-center gap-2 mb-3 svelte-dtuciw"><div class="p-1.5 bg-white/20 rounded-lg svelte-dtuciw"><svg class="w-5 h-5 svelte-dtuciw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="svelte-dtuciw"></path></svg></div> <span class="inline-block px-2 py-0.5 text-xs font-bold rounded-full bg-white/25 animate-pulse svelte-dtuciw">¬°NUEVO!</span></div> <h3 class="font-bold text-base mb-2 svelte-dtuciw"> </h3> <p> </p> <div class="flex gap-2 svelte-dtuciw"><button>Probar ahora</button> <button class="px-3 py-2 rounded-lg text-sm hover:bg-white/20 transition-colors svelte-dtuciw" aria-label="Cerrar popup">M√°s tarde</button></div> <button class="absolute top-2 right-2 p-1 rounded-lg hover:bg-white/20 transition-colors svelte-dtuciw" aria-label="Cerrar notificaci√≥n"><svg class="w-4 h-4 svelte-dtuciw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-dtuciw"></path></svg></button></div></div>',1);function uo(P,w){wr(w,!1);const n=x();let we=$t(w,"featureMessage",8),f=$t(w,"description",8),z=$t(w,"onTryNow",8),t=$t(w,"onDismiss",8),_e=$t(w,"targetSelector",8,void 0),Me=$t(w,"showPopup",8),D=$t(w,"colorTheme",8,"blue"),le=x({top:0,left:0});function V(){if(typeof window<"u"&&_e()){const C=document.querySelector(_e());if(C){const s=C.getBoundingClientRect();i(le,{top:s.bottom+10,left:s.left+s.width/2})}}else i(le,{top:window.innerHeight/2-100,left:window.innerWidth/2})}kr(()=>(V(),window.addEventListener("resize",V),()=>{window.removeEventListener("resize",V)})),Fe(()=>{},()=>{i(n,{arrowBorder:{blue:"border-t-blue-600 dark:border-t-blue-400",green:"border-t-green-600 dark:border-t-green-400",purple:"border-t-purple-600 dark:border-t-purple-400",emerald:"border-t-emerald-600 dark:border-t-emerald-400"},bgGradientFrom:{blue:"from-blue-600 dark:from-blue-700",green:"from-green-600 dark:from-green-700",purple:"from-purple-600 dark:from-purple-700",emerald:"from-emerald-600 dark:from-emerald-700"},bgGradientTo:{blue:"to-indigo-600 dark:to-indigo-700",green:"to-emerald-600 dark:to-emerald-700",purple:"to-fuchsia-600 dark:to-fuchsia-700",emerald:"to-teal-600 dark:to-teal-700"},borderColor:{blue:"border-blue-400 dark:border-blue-500",green:"border-green-400 dark:border-green-500",purple:"border-purple-400 dark:border-purple-500",emerald:"border-emerald-400 dark:border-emerald-500"},buttonTextColor:{blue:"text-blue-600",green:"text-green-600",purple:"text-purple-600",emerald:"text-emerald-600"},buttonHoverBg:{blue:"hover:bg-blue-50",green:"hover:bg-green-50",purple:"hover:bg-purple-50",emerald:"hover:bg-emerald-50"},descriptionColor:{blue:"text-blue-100",green:"text-green-100",purple:"text-purple-100",emerald:"text-emerald-100"}})}),Fe(()=>Ie(Me()),()=>{Me()&&V()}),Ar(),Er();var q=no(),L=Vt(q);{var B=C=>{var s=ea(),c=a(Vt(s),2),k=o(c);{var Z=p=>{var re=Xo(),Ge=o(re);E(()=>Ut(Ge,1,`absolute w-0 h-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent ${e(n),Ie(D()),r(()=>e(n).arrowBorder[D()])??""}`,"svelte-dtuciw")),v(p,re)};X(k,p=>{_e()&&p(Z)})}var ye=a(k,2),U=a(o(ye),2),Ne=o(U),Se=a(U,2),We=o(Se),pt=a(Se,2),ot=o(pt),at=a(ot,2),te=a(pt,2);E(()=>{l(c,`top: ${e(le),r(()=>e(le).top)??""}px; left: ${e(le),r(()=>e(le).left)??""}px; transform: translateX(-50%);`),Ut(ye,1,`bg-gradient-to-r ${e(n),Ie(D()),r(()=>e(n).bgGradientFrom[D()])??""} ${e(n),Ie(D()),r(()=>e(n).bgGradientTo[D()])??""} text-white p-4 rounded-xl shadow-2xl border ${e(n),Ie(D()),r(()=>e(n).borderColor[D()])??""} min-w-[280px] max-w-[calc(100vw-20px)] md:max-w-[320px]`,"svelte-dtuciw"),b(Ne,we()),Ut(Se,1,`text-sm ${e(n),Ie(D()),r(()=>e(n).descriptionColor[D()])??""} mb-3`,"svelte-dtuciw"),b(We,f()),Ut(ot,1,`px-3 py-2 rounded-lg text-sm bg-white ${e(n),Ie(D()),r(()=>e(n).buttonTextColor[D()])??""} font-semibold ${e(n),Ie(D()),r(()=>e(n).buttonHoverBg[D()])??""} transition-colors`,"svelte-dtuciw")}),R("click",ot,function(...p){z()?.apply(this,p)}),R("click",at,function(...p){t()?.apply(this,p)}),R("click",te,function(...p){t()?.apply(this,p)}),v(C,s)};X(L,C=>{Me()&&C(B)})}v(P,q),$r()}var ta=ht('<svg class="w-6 h-6 text-amber-500 svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707M16.95 16.95l.707.707M7.636 7.636l.707.707M12 8a4 4 0 100 8 4 4 0 000-8z" class="svelte-1y1a8hs"></path></svg>'),ra=ht('<svg class="w-6 h-6 text-indigo-400 svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1y1a8hs"></path></svg>'),oa=ht('<svg class="w-6 h-6 text-indigo-500 svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707M16.95 16.95l.707.707M7.636 7.636l.707.707M12 8a4 4 0 100 8 4 4 0 000-8z" class="svelte-1y1a8hs"></path></svg>'),aa=m('<button class="group relative flex flex-col justify-between overflow-hidden rounded-[2.5rem] border border-[rgb(var(--card-border))] bg-[rgb(var(--card-bg))] backdrop-blur-xl transition-all duration-500 hover:border-[rgb(var(--accent-primary))]/30 hover:bg-[rgb(var(--bg-secondary))] p-1 svelte-1y1a8hs"><div class="absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent svelte-1y1a8hs"></div> <div class="relative p-8 flex flex-col h-full svelte-1y1a8hs"><div class="flex justify-between items-start mb-12 svelte-1y1a8hs"><div class="flex flex-col gap-1 svelte-1y1a8hs"><span class="text-[10px] font-bold uppercase tracking-[0.2em] text-[rgb(var(--accent-primary))] svelte-1y1a8hs"> </span> <h2 class="text-2xl font-bold tracking-tight text-[rgb(var(--text-primary))] group-hover:text-[rgb(var(--accent-primary))] transition-colors duration-300 svelte-1y1a8hs"> </h2></div> <span class="px-3 py-1 rounded-full text-[10px] font-bold bg-[rgb(var(--bg-tertiary))] border border-[rgb(var(--border-primary))] text-[rgb(var(--text-muted))] uppercase tracking-wider svelte-1y1a8hs"> </span></div> <div class="flex flex-col gap-6 mt-auto svelte-1y1a8hs"><div class="relative w-full aspect-video rounded-3xl overflow-hidden bg-black/20 border border-white/5 svelte-1y1a8hs"><div></div> <img class="w-3/4 h-3/4 mx-auto object-cover grayscale-[0.5] group-hover:grayscale-0 group-hover:scale-110 transition-all duration-700 ease-in-out opacity-60 group-hover:opacity-100 svelte-1y1a8hs"/> <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-500 z-20 svelte-1y1a8hs"><div class="p-3 rounded-full bg-white/10 backdrop-blur-md border border-white/20 svelte-1y1a8hs"><svg class="w-6 h-6 text-white svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" class="svelte-1y1a8hs"></path></svg></div></div></div> <p class="text-sm font-medium leading-relaxed text-[rgb(var(--text-muted))] line-clamp-2 svelte-1y1a8hs"> </p></div> <div class="mt-8 flex items-center justify-between svelte-1y1a8hs"><div class="flex -space-x-2 svelte-1y1a8hs"><div class="w-6 h-6 rounded-full border border-black bg-indigo-500/20 svelte-1y1a8hs"></div> <div class="w-6 h-6 rounded-full border border-black bg-purple-500/20 svelte-1y1a8hs"></div></div> <div class="text-[10px] font-bold text-[rgb(var(--text-muted))] tracking-[0.1em] group-hover:text-[rgb(var(--accent-primary))] transition-colors uppercase svelte-1y1a8hs">Explorar &rarr;</div></div></div> <div></div></button>'),sa=m(`<header class="max-w-7xl w-full mb-6 lg:mb-8 text-center relative svelte-1y1a8hs"><div class="absolute right-0 top-0 svelte-1y1a8hs"><button class="p-3 rounded-2xl bg-[rgb(var(--bg-secondary))] border border-[rgb(var(--border-primary))] hover:border-[rgb(var(--accent-primary))] transition-all duration-300 group svelte-1y1a8hs" aria-label="Toggle Theme"><!></button></div> <div class="inline-block mb-4 relative svelte-1y1a8hs"><div class="absolute inset-0 bg-indigo-500/20 blur-2xl rounded-full svelte-1y1a8hs"></div> <img alt="EIE Logo" class="relative h-12 md:h-16 object-contain hover:scale-110 transition-transform duration-700 ease-out cursor-none svelte-1y1a8hs"/></div> <div class="space-y-1 svelte-1y1a8hs"><h1 class="text-3xl md:text-5xl font-black tracking-tight svelte-1y1a8hs"><span class="bg-gradient-to-b from-[rgb(var(--text-primary))] to-[rgb(var(--text-secondary))] bg-clip-text text-transparent svelte-1y1a8hs">Ecosistema Digital</span> <span class="text-[rgb(var(--accent-primary))] svelte-1y1a8hs">Instituto Gu√°tica</span></h1> <p class="text-base md:text-lg text-[rgb(var(--text-muted))] max-w-xl mx-auto font-medium svelte-1y1a8hs">Potenciando la excelencia pedag√≥gica a trav√©s de herramientas
          inteligentes y dise√±o centrado en el docente.</p></div></header> <div class="max-w-7xl w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8 svelte-1y1a8hs"></div> <footer class="mt-20 flex flex-col md:flex-row items-center gap-8 text-[rgb(var(--text-muted))] text-xs font-bold tracking-widest uppercase svelte-1y1a8hs"><div class="flex items-center gap-4 px-6 py-3 rounded-full bg-[rgb(var(--bg-secondary))] border border-[rgb(var(--border-primary))] backdrop-blur-sm svelte-1y1a8hs"><span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse svelte-1y1a8hs"></span> SISTEMA OPERATIVO</div> <div class="hidden md:block w-px h-4 bg-[rgb(var(--border-primary))] svelte-1y1a8hs"></div> <div class="svelte-1y1a8hs">v2.0.4 PLATINUM</div> <div class="hidden md:block w-px h-4 bg-[rgb(var(--border-primary))] svelte-1y1a8hs"></div> <div class="svelte-1y1a8hs">2026 EIE DIGITAL</div></footer>`,1),la=m(`<div class="min-h-screen w-full flex flex-col items-center p-6 lg:p-12 transition-colors duration-700 bg-[rgb(var(--bg-primary))] text-[rgb(var(--text-primary))] svelte-1y1a8hs"><div class="fixed inset-0 overflow-hidden pointer-events-none -z-10 svelte-1y1a8hs"><div class="absolute -top-[20%] -left-[10%] w-[60%] h-[60%] bg-indigo-500/5 blur-[120px] rounded-full animate-pulse svelte-1y1a8hs"></div> <div class="absolute -bottom-[20%] -right-[10%] w-[60%] h-[60%] bg-purple-500/5 blur-[120px] rounded-full animate-pulse svelte-1y1a8hs" style="animation-delay: 2s"></div> <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-[0.02] mix-blend-overlay svelte-1y1a8hs"></div></div> <!></div> <!>`,1);function na(P,w){wr(w,!1);const n=()=>xo(Jr,"$theme",we),[we,f]=fo();let z=$t(w,"onSelect",8),t=x(!1);const _e="¬°Nueva forma de anotar el Diario de Campo!",Me="Ahora el Diario de Campo permite seleccionar y personalizar anotaciones predefinidas. ¬°Expl√≥ralo!";function D(){const Z=localStorage.getItem("dismissedFeatureAlertDashboardDiario");if(!Z)return!0;const ye=new Date(Z);return(new Date().getTime()-ye.getTime())/(1e3*60*60*24)>5}const le=()=>{localStorage.setItem("dismissedFeatureAlertDashboardDiario",new Date().toISOString())},V=()=>{localStorage.setItem("dismissedFeatureAlertDashboardDiario",new Date().toISOString()),z()("diario")};kr(()=>{i(t,!0),D()});const q=()=>{Jr.update(Z=>Z==="light"?"dim":Z==="dim"?"dark":"light")},L=[{id:"inasistencia",title:"Registro Diario",subtitle:"Gesti√≥n de Asistencia",description:"Control preciso de inasistencias y novedades diarias del aula.",image:Wo,color:"from-blue-600/20 to-indigo-600/20",accent:"blue",tag:"Operativo"},{id:"anotador",title:"Anotador de Clase",subtitle:"Seguimiento √Ågil",description:"Registro din√°mico de incidencias y avances pedag√≥gicos por sesi√≥n.",image:Ko,color:"from-purple-600/20 to-pink-600/20",accent:"purple",tag:"Acad√©mico"},{id:"diario",title:"Diario de Campo",subtitle:"Reflexi√≥n Docente",description:"Espacio para la reflexi√≥n profunda y documentaci√≥n pedag√≥gica.",image:Zo,color:"from-emerald-600/20 to-teal-600/20",accent:"emerald",tag:"Estrat√©gico"},{id:"horas_laborables",title:"Horas Laborables",subtitle:"Gesti√≥n de Tiempo",description:"Calculadora especializada para el seguimiento de jornadas y horas docentes.",image:ro,color:"from-orange-600/20 to-amber-600/20",accent:"orange",tag:"Herramienta",url:"https://ceslep.github.io/horas_laborables"}];Er();var B=la(),C=Vt(B),s=a(o(C),2);{var c=Z=>{var ye=sa(),U=Vt(ye),Ne=o(U),Se=o(Ne),We=o(Se);{var pt=Ae=>{var oe=ta();v(Ae,oe)},ot=Ae=>{var oe=ra();v(Ae,oe)},at=Ae=>{var oe=oa();v(Ae,oe)};X(We,Ae=>{n()==="light"?Ae(pt):n()==="dim"?Ae(ot,1):Ae(at,!1)})}var te=a(Ne,2),p=a(o(te),2),re=a(U,2);me(re,5,()=>L,Ce,(Ae,oe,N)=>{var Q=aa(),J=a(o(Q),2),He=o(J),je=o(He),pe=o(je),K=o(pe),ze=a(pe,2),Ze=o(ze),Re=a(je,2),Ue=o(Re),_=a(He,2),d=o(_),y=o(d),$=a(y,2),O=a(d,2),G=o(O),ee=a(J,2);E(()=>{_t(Q,"id",(e(oe),r(()=>e(oe).id==="diario"?"diario-module-target":""))),b(K,(e(oe),r(()=>e(oe).subtitle))),b(Ze,(e(oe),r(()=>e(oe).title))),b(Ue,(e(oe),r(()=>e(oe).tag))),Ut(y,1,`absolute inset-0 bg-gradient-to-br ${e(oe),r(()=>e(oe).color)??""} mix-blend-overlay z-10`,"svelte-1y1a8hs"),_t($,"src",(e(oe),r(()=>e(oe).image))),_t($,"alt",(e(oe),r(()=>e(oe).title))),b(G,(e(oe),r(()=>e(oe).description))),Ut(ee,1,`absolute inset-0 bg-gradient-to-br ${e(oe),r(()=>e(oe).color)??""} opacity-0 group-hover:opacity-[0.03] transition-opacity duration-500 pointer-events-none`,"svelte-1y1a8hs")}),R("click",Q,()=>z()(e(oe).id)),so(1,Q,()=>Bo,()=>({y:40,duration:800,delay:200+N*150})),v(Ae,Q)});var Ge=a(re,2);E(()=>_t(p,"src",ro)),R("click",Se,q),so(1,U,()=>Bo,()=>({y:-20,duration:800,delay:100})),so(1,Ge,()=>Ho,()=>({duration:1e3,delay:800})),v(Z,ye)};X(s,Z=>{e(t)&&Z(c)})}var k=a(C,2);uo(k,{featureMessage:_e,description:Me,onTryNow:V,onDismiss:le,targetSelector:"#diario-module-target",showPopup:!1,colorTheme:"emerald"}),v(P,B),$r(),f()}const lo="1wN7lp7lOGyxKYIUJ9TU89N9knnJjX2Z_TfsOUg48QpQ",co="https://app.iedeoccidente.com/gs",vo="https://app.iedeoccidente.com/ig",ia=`${vo}/getprofes.php`,ca=`${vo}/getMaterias.php`,da=`${vo}/getEstudiantes.php`,va=`${co}/save_inasistencias.php`,ga=`${co}/save_anotador.php`,pa=`${vo}/getOpcionesAnotador3.php`,ua=`${vo}/adiario.php`,ba=`${co}/save_diario.php`,ho="Inasistencias",Ao="Datos",bo="1Q6EcSvccB7BoJiw9PD2s5J4PB8AJmr-6v-yKhiE4E8k",Fo="10pBVNYnS-ctmBYP9Y8KL3h32GZKsyi0bwoyil-kEGaE",fa="diario",ko="Selecciona un grado y una asignatura para comenzar a registrar inasistencias. Ahora puedes marcar motivos individuales y observaciones espec√≠ficas por estudiante.Tambien pueden ver el filtro de datos en Locker Studio",wo="Completa los datos de la clase y selecciona las observaciones que correspondan. Puedes editar el texto de cada observaci√≥n si es necesario.Recuerda hacer check en el cuadro de selecci√≥n para guardar esa anotaci√≥n.",$o="Completa los datos de la clase y selecciona las observaciones que correspondan. Puedes editar el texto de cada observaci√≥n si es necesario.Recuerda hacer check en el cuadro de selecci√≥n para guardar esa anotaci√≥n.",xa="https://lookerstudio.google.com/reporting/be2efb22-dc5f-4f21-9dfc-0253e763e19f",ao=[{nombre:"UNO",fecha_inicio:new Date("2026-01-26"),fecha_fin:new Date("2026-03-27")},{nombre:"DOS",fecha_inicio:new Date("2026-03-30"),fecha_fin:new Date("2026-06-12")},{nombre:"TRES",fecha_inicio:new Date("2026-07-07"),fecha_fin:new Date("2026-09-11")},{nombre:"CUATRO",fecha_inicio:new Date("2026-09-14"),fecha_fin:new Date("2026-11-20")}],ha=async()=>{try{const P=await fetch(`${ua}`);if(!P.ok)throw new Error(`Error: ${P.status}`);return await P.json()}catch(P){throw console.error("Error fetching diario options:",P),P}},Eo=async(P={})=>{try{const w=await fetch(`${co}/get_inasistencias.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});if(!w.ok)throw new Error(`Error: ${w.status}`);return await w.json()}catch(w){throw console.error("Error fetching inasistencias:",w),w}},Oo=async(P={})=>{try{const w=await fetch(`${co}/get_anotador.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});if(!w.ok)throw new Error(`Error: ${w.status}`);return await w.json()}catch(w){throw console.error("Error fetching inasistencias:",w),w}},ma=async P=>{try{const w=await fetch(`${va}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});if(!w.ok)throw new Error(`Error: ${w.status}`);return await w.json()}catch(w){throw console.error("Error saving inasistencias:",w),w}},Kr=async()=>{try{const P=await fetch(`${ia}`);if(!P.ok)throw new Error(`Error: ${P.status}`);return await P.json()}catch(P){throw console.error("Error fetching docentes:",P),P}},Zr=async()=>{try{const P=await fetch(`${ca}`);if(!P.ok)throw new Error(`Error: ${P.status}`);return await P.json()}catch(P){throw console.error("Error fetching materias:",P),P}},Qr=async()=>{try{const P=await fetch(`${da}`);if(!P.ok)throw new Error(`Error: ${P.status}`);return await P.json()}catch(P){throw console.error("Error fetching estudiantes:",P),P}},_a=async()=>{try{const P=await fetch(`${pa}`);if(!P.ok)throw new Error(`Error: ${P.status}`);return await P.json()}catch(P){throw console.error("Error fetching opciones anotador3:",P),P}},ya=async P=>{try{const w=await fetch(`${ga}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});if(!w.ok)throw new Error(`Error: ${w.status}`);return await w.json()}catch(w){throw console.error("Error saving inasistencias:",w),w}},ka=async P=>{try{const w=await fetch(`${ba}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});if(!w.ok)throw new Error(`Error: ${w.status}`);return await w.json()}catch(w){throw console.error("Error saving inasistencias:",w),w}};var wa=m('<div class="flex-1 flex items-center justify-center"><div class="text-center"><div class="animate-spin w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full mx-auto mb-4"></div> <p>Cargando datos...</p></div></div>'),$a=m('<span class="ml-2 px-2 py-1 text-xs bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full">Activos</span>'),Ca=m("<option> </option>"),Sa=m("<option> </option>"),Aa=m('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">Este docente no tiene registros de materias</p>'),Ea=m("<option> </option>"),Ia=m('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">No hay grados para los filtros seleccionados</p>'),Da=m("<option> </option>"),Ba=m('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">No hay motivos para los filtros seleccionados</p>'),za=m('<div class="flex-1 flex items-center justify-center"><div class="text-center py-12 px-4"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm sm:text-base">No se encontraron registros con los filtros seleccionados</p></div></div>'),Fa=m('<button class="text-indigo-600 dark:text-indigo-400 hover:underline font-medium text-left truncate w-full"> </button>'),Ma=m('<tr class="border-b transition-colors hover:bg-black/5 dark:hover:bg-white/5 text-xs"><td class="p-2"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 text-center"> </td><td class="p-2 truncate max-w-[150px]"><!></td><td class="p-2 text-center"><span><span> </span> </span></td><td class="p-2 text-center"> </td><td class="p-2"><span class="truncate block max-w-xs text-xs"> </span></td></tr>'),Ta=m('<button class="text-indigo-600 dark:text-indigo-400 hover:underline font-medium text-left truncate w-full"> </button>'),Oa=m('<tr class="border-b transition-colors hover:bg-black/5 dark:hover:bg-white/5 text-xs"><td class="p-2 whitespace-nowrap"> </td><td class="p-2"><span class="truncate block max-w-[120px]"> </span></td><td class="p-2 truncate max-w-[120px]"> </td><td class="p-2"><span class="truncate block max-w-[100px]"><!></span></td><td class="p-2 text-center"><span><span> </span> </span></td><td class="p-2 whitespace-nowrap text-center"> </td><td class="p-2 whitespace-nowrap text-center"> </td></tr>'),Na=m('<button class="font-semibold text-xs text-indigo-600 dark:text-indigo-400 truncate hover:underline text-left w-full"> </button>'),ja=m('<p class="font-semibold text-xs text-indigo-600 dark:text-indigo-400 truncate"> </p>'),Ra=m('<div class="text-[10px] p-1.5 rounded"><div class="flex items-start"><svg class="w-3 h-3 mr-1 mt-0.5 flex-shrink-0 opacity-60" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="line-clamp-1"> </span></div></div>'),La=m('<div class="border rounded-lg p-2 transition-colors hover:bg-black/5 dark:hover:bg-white/5"><div class="flex justify-between items-center mb-1.5"><div class="flex-1 min-w-0"><!> <p class="text-[10px] opacity-75"> </p></div> <div class="flex flex-col items-end ml-2 flex-shrink-0"><span><span> </span> </span> <span class="text-[10px] font-semibold"> </span></div></div> <div class="flex gap-3 text-[10px] mb-1.5"><div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="truncate"> </span></div> <div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <span class="truncate"> </span></div></div> <!></div>'),Pa=m('<div class="hidden lg:flex flex-1 flex-col overflow-hidden min-h-0"><div class="flex-1 overflow-auto min-w-full border rounded-lg"><table class="w-full border-collapse text-sm min-w-[800px]"><thead class="sticky top-0 z-10 border-b"><tr><th class="text-left p-2 font-semibold whitespace-nowrap">Fecha</th><th class="text-left p-2 font-semibold whitespace-nowrap">Docente</th><th class="text-left p-2 font-semibold whitespace-nowrap">Materia</th><th class="text-center p-2 font-semibold whitespace-nowrap">Grado</th><th class="text-left p-2 font-semibold whitespace-nowrap">Estudiante</th><th class="text-center p-2 font-semibold whitespace-nowrap">Motivo</th><th class="text-center p-2 font-semibold whitespace-nowrap">Horas</th><th class="text-left p-2 font-semibold whitespace-nowrap">Observaciones</th></tr></thead><tbody></tbody></table></div></div> <div class="hidden md:flex lg:hidden flex-1 overflow-auto"><div class="min-w-full border rounded-lg"><table class="w-full border-collapse text-xs"><thead class="sticky top-0 z-10 border-b"><tr><th class="text-left p-2 font-semibold whitespace-nowrap">Fecha</th><th class="text-left p-2 font-semibold whitespace-nowrap">Docente</th><th class="text-left p-2 font-semibold whitespace-nowrap">Materia</th><th class="text-left p-2 font-semibold whitespace-nowrap">Estudiante</th><th class="text-center p-2 font-semibold whitespace-nowrap">Motivo</th><th class="text-center p-2 font-semibold whitespace-nowrap">Horas</th><th class="text-center p-2 font-semibold whitespace-nowrap">Grado</th></tr></thead><tbody></tbody></table></div></div> <div class="flex-1 overflow-y-auto md:hidden px-1"><div class="space-y-2"></div></div>',1),Ha=m('<div class="p-3 sm:p-4 border-b"><div class="flex items-center justify-between mb-2 sm:mb-3"><h3 class="text-lg font-semibold">Filtros <!></h3> <button class="text-sm px-3 py-1 rounded-lg border transition-colors hover:bg-black/5 dark:hover:bg-white/5">Limpiar filtros</button></div> <div class="mb-3 p-1.5 sm:p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg"><p class="text-[10px] sm:text-xs font-medium mb-1.5">R√°pido: Fechas</p> <div class="flex items-center mb-2"><input id="checkFiltrarFecha" type="checkbox" class="w-4 h-4 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 dark:bg-zinc-700"/> <label for="checkFiltrarFecha" class="ml-2 text-xs font-medium">Activar filtro por fechas</label></div> <div class="flex flex-wrap gap-1 sm:gap-2"><button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Hoy</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 7 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 30 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Mes actual</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimo trimestre</button></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"><div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroDocente" class="block text-xs sm:text-sm font-medium">Docente</label> <select id="filtroDocente" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option>Todos los docentes</option><!></select></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroMateria" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroMateria" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroGrado" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroGrado" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroMotivo" class="block text-xs sm:text-sm font-medium">Motivo</label> <select id="filtroMotivo" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaInicio" class="block text-xs sm:text-sm font-medium">Fecha desde</label> <input id="filtroFechaInicio" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaFin" class="block text-xs sm:text-sm font-medium">Fecha hasta</label> <input id="filtroFechaFin" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div></div></div></div> <div class="flex-1 flex flex-col p-2 sm:p-4 min-h-0"><div class="mb-4 px-0 sm:px-3"><p class="text-sm">Se encontraron <span class="font-bold text-indigo-500"> </span> registros</p></div> <!></div>',1),Ga=m('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4" role="button" tabindex="0" aria-label="Cerrar ventana"><div class="w-full max-w-7xl max-h-[95vh] bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl overflow-hidden flex flex-col"><div class="flex items-center justify-between p-3 sm:p-4 border-b"><div class="flex items-center gap-3"><img alt="EIE Logo" class="h-8 w-auto hidden sm:block"/> <div><h2 class="text-lg sm:text-xl font-bold">Inasistencias</h2> <p class="text-xs hidden sm:block">Filtra y consulta los registros</p></div></div> <div class="flex items-center gap-3"><button class="inline-flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Exportar CSV</button> <button class="p-2 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5" aria-label="Cerrar"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div> <div class="flex-1 overflow-hidden flex flex-col min-h-0"><!></div></div></div>');function Ua(P,w){wr(w,!1);const n=x(),we=x(),f=x(),z=x(),t=x();let _e=$t(w,"onClose",8),Me=$t(w,"selectedDocente",8,""),D=x([]),le=[],V=[],q=[],L=x(!1),B=x(!1),C=x([]),s=x({docente:Me()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",motivo:""});const c=()=>{const d=new Date,y=new Date(d.getFullYear(),d.getMonth()-1,d.getDate()),$=O=>{const G=O.getFullYear(),ee=String(O.getMonth()+1).padStart(2,"0"),De=String(O.getDate()).padStart(2,"0");return`${G}-${ee}-${De}`};he(s,e(s).fechaInicio=$(y)),Oe(()=>{e(t),e(U),e(n),e(f),e(z)}),he(s,e(s).fechaFin=$(d)),Oe(()=>{e(t),e(U),e(n),e(f),e(z)})},k=d=>{const y=new Date;let $;switch(d){case"hoy":$=new Date(y);break;case"semana":$=new Date(y),$.setDate(y.getDate()-7);break;case"mes":$=new Date(y),$.setDate(y.getDate()-30);break;case"mes_actual":$=new Date(y.getFullYear(),y.getMonth(),1);break;case"trimestre":$=new Date(y),$.setDate(y.getDate()-90);break;default:c();return}const O=G=>{const ee=G.getFullYear(),De=String(G.getMonth()+1).padStart(2,"0"),Y=String(G.getDate()).padStart(2,"0");return`${ee}-${De}-${Y}`};he(s,e(s).fechaInicio=O($)),Oe(()=>{e(t),e(U),e(n),e(f),e(z)}),he(s,e(s).fechaFin=O(y)),Oe(()=>{e(t),e(U),e(n),e(f),e(z)}),i(B,!0),console.log("‚úÖ setFechaPreset ejecutado:",{preset:d,fechaInicio:e(s).fechaInicio,fechaFin:e(s).fechaFin,filtrarPorFecha:e(B)})},Z=[{value:"Sin excusa",icon:"üö´",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},{value:"Excusa",icon:"üìÑ",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},{value:"LLegada Tarde",icon:"‚è∞",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},{value:"Transporte Escolar",icon:"üöå",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},{value:"Permiso",icon:"‚úÖ",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},{value:"No portar/sin uniforme",icon:"üëö",color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"},{value:"Pacto de Aula",icon:"ü§ù",color:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"},{value:"Uso del celular",icon:"üì±",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},{value:"Desorden en Clase",icon:"üîä",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"},{value:"Fuga",icon:"üèÉ‚Äç‚ôÇÔ∏è",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},{value:"No realizaci√≥n de Aseo",icon:"üßπ",color:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200"},{value:"Licencia por salud",icon:"üè•",color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"},{value:"Incapacidad",icon:"ü©∫",color:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200"},{value:"Reuni√≥n interna",icon:"üë•",color:"bg-zinc-100 text-zinc-800 dark:bg-zinc-900 dark:text-zinc-200"},{value:"Psicoorientaci√≥n",icon:"üß†",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}],ye=d=>Z.find(y=>y.value===d)||{icon:"‚ùì",color:"bg-gray-100 text-gray-800"};let U=x([]),Ne=x([]),Se=x([]),We=x([]);const pt=d=>{if(!d)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(d))return d;const y=d.split("/");if(y.length===3){const O=y[0].padStart(2,"0"),G=y[1].padStart(2,"0");return`${y[2].length===2?`20${y[2]}`:y[2]}-${G}-${O}`}const $=new Date(d);if(!isNaN($.getTime())){const O=$.getFullYear(),G=String($.getMonth()+1).padStart(2,"0"),ee=String($.getDate()).padStart(2,"0");return`${O}-${G}-${ee}`}return d},ot=async()=>{i(L,!0);try{const[d,y,$,O]=await Promise.all([Eo({spreadsheetId:lo,worksheetTitle:ho}),Kr(),Zr(),Qr()]);console.log("Respuesta cruda de inasistencias:",d),console.log("Tipo de dato:",typeof d),console.log("Es array:",Array.isArray(d)),d&&typeof d=="object"&&console.log("Keys:",Object.keys(d));const G=F=>{if(!F?.records||!Array.isArray(F.records))return[];const W=F.records[0]?.values||[];return F.records.slice(1).map(xe=>{const Ve=xe.values||[];return{timestamp:Ve[0]||"",docente:Ve[1]||"",fecha:Ve[2]||"",horas:Ve[3]||"",materia:Ve[4]||"",motivo:Ve[5]||"",grado:Ve[6]||"",nombre:Ve[7]||"",observaciones:Ve[8]||""}}).filter(xe=>xe.docente&&xe.fecha)},ee=F=>Array.isArray(F)?F:F?.data&&Array.isArray(F.data)?F.data:F?.rows&&Array.isArray(F.rows)?F.rows:F?.values&&Array.isArray(F.values)?F.values:F?.inasistencias&&Array.isArray(F.inasistencias)?F.inasistencias:[];i(D,G(d)),le=ee(y),V=ee($),q=ee(O),i(U,e(D).length>0?[...new Set(e(D).map(F=>F.docente).filter(Boolean))].sort():[]),i(Ne,e(D).length>0?[...new Set(e(D).map(F=>F.materia).filter(Boolean))].sort():[]);const De=[...new Set(q.map(F=>(typeof F=="string"?F:F.grado||"").toString()).filter(Boolean))],Y=e(D).length>0?e(D).map(F=>F.grado).filter(Boolean):[];i(Se,[...new Set([...De,...Y])].sort((F,W)=>{const ue=parseInt(F),xe=parseInt(W);return!isNaN(ue)&&!isNaN(xe)?ue-xe:F.localeCompare(W)})),i(We,e(D).length>0?[...new Set(e(D).map(F=>F.motivo).filter(Boolean))].sort():[]),c(),console.log("Datos cargados:",{inasistencias:e(D).length,docentes:le.length,docentesUnicos:e(U).length,materiasUnicas:e(Ne).length,gradosUnicos:e(Se).length,motivosUnicos:e(We).length})}catch(d){console.error("Error cargando datos:",d),await Dt.fire({icon:"error",title:"Error",text:"No se pudieron cargar los datos de inasistencias",confirmButtonColor:"#ef4444"})}finally{i(L,!1)}},at=()=>{i(s,{docente:Me()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",motivo:""}),c(),i(B,!1)},te=()=>{if(e(C).length===0){Dt.fire({icon:"warning",title:"Sin datos",text:"No hay datos para exportar",confirmButtonColor:"#f59e0b"});return}const y=[["Fecha","Docente","Materia","Grado","Estudiante","Motivo","Horas","Observaciones"].join(","),...e(C).map(ee=>[ee.fecha,`"${ee.docente}"`,`"${ee.materia}"`,ee.grado,`"${ee.nombre}"`,`"${ee.motivo}"`,ee.horas,`"${ee.observaciones}"`].join(","))].join(`
`),$=new Blob([y],{type:"text/csv;charset=utf-8;"}),O=document.createElement("a"),G=URL.createObjectURL($);O.setAttribute("href",G),O.setAttribute("download",`inasistencias_${new Date().toISOString().split("T")[0]}.csv`),O.style.visibility="hidden",document.body.appendChild(O),O.click(),document.body.removeChild(O)},p=d=>{try{const[y,$,O]=d.split("-");return y&&$&&O?`${O}/${$}/${y}`:d}catch{return d}},re=d=>{if(!e(s).docente||!e(s).materia||!e(s).grado)return;const $=e(D).filter(G=>{if(G.nombre!==d||G.docente!==e(s).docente||G.materia!==e(s).materia||G.grado!==e(s).grado)return!1;if(e(B)){const ee=pt(G.fecha);if(e(s).fechaInicio&&ee<e(s).fechaInicio||e(s).fechaFin&&ee>e(s).fechaFin)return!1}return!0}).reduce((G,ee)=>{const De=parseInt(ee.horas)||0;return G+De},0);let O="";e(B)&&e(s).fechaInicio&&e(s).fechaFin?O=`entre ${p(e(s).fechaInicio)} y ${p(e(s).fechaFin)}`:O="en total (hist√≥rico)",Dt.fire({icon:"info",title:d,html:`
        <div class="text-left space-y-2">
          <p><strong>Materia:</strong> ${e(s).materia}</p>
          <p><strong>Total inasistencias:</strong> ${$} horas</p>
          <p class="text-sm text-gray-500 text-center mt-4">(${O})</p>
        </div>
      `,confirmButtonColor:"#4f46e5"})};kr(()=>{ot()}),Fe(()=>(e(s),e(D),e(Ne)),()=>{i(n,e(s).docente?[...new Set(e(D).filter(d=>d.docente===e(s).docente).map(d=>d.materia).filter(Boolean))].sort():e(Ne))}),Fe(()=>(e(s),e(D),e(Se)),()=>{i(we,e(s).docente?[...new Set(e(D).filter(d=>d.docente===e(s).docente).map(d=>d.grado).filter(Boolean))].sort((d,y)=>{const $=parseInt(d),O=parseInt(y);return!isNaN($)&&!isNaN(O)?$-O:d.localeCompare(y)}):e(Se))}),Fe(()=>(e(s),e(D),e(we)),()=>{i(f,e(s).materia?[...new Set(e(D).filter(d=>d.materia===e(s).materia).map(d=>d.grado).filter(Boolean))].sort((d,y)=>{const $=parseInt(d),O=parseInt(y);return!isNaN($)&&!isNaN(O)?$-O:d.localeCompare(y)}):e(we))}),Fe(()=>(e(s),e(D),e(We)),()=>{i(z,e(s).docente||e(s).materia||e(s).grado?[...new Set(e(D).filter(d=>!(e(s).docente&&d.docente!==e(s).docente||e(s).materia&&d.materia!==e(s).materia||e(s).grado&&d.grado!==e(s).grado)).map(d=>d.motivo).filter(Boolean))].sort():e(We))}),Fe(()=>{},()=>{i(t,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Fe(()=>(e(D),e(B),e(s),e(C)),()=>{console.log("üîÑ Filtro reactivo ejecut√°ndose:",{totalInasistencias:e(D).length,filtrarPorFecha:e(B),fechaInicio:e(s).fechaInicio,fechaFin:e(s).fechaFin}),i(C,e(D).filter(d=>{if(e(s).docente&&d.docente!==e(s).docente||e(s).materia&&d.materia!==e(s).materia||e(s).grado&&d.grado!==e(s).grado||e(s).motivo&&d.motivo!==e(s).motivo)return!1;if(e(B)){const y=pt(d.fecha);if(e(s).fechaInicio&&y<e(s).fechaInicio||e(s).fechaFin&&y>e(s).fechaFin)return!1}return!0})),console.log(`üìä Resultados filtrados: ${e(C).length} de ${e(D).length}`)}),Fe(()=>(e(B),e(s)),()=>{e(B)&&(!e(s).fechaInicio||!e(s).fechaFin)&&c()}),Ar(),Er();var Ge=Ga(),Ae=o(Ge),oe=o(Ae),N=o(oe),Q=o(N),J=a(Q,2),He=o(J),je=a(He,2),pe=a(N,2),K=o(pe),ze=a(K,2),Ze=a(oe,2),Re=o(Ze);{var Ue=d=>{var y=wa(),$=o(y),O=a(o($),2);E(()=>l(O,`color: ${e(t),r(()=>e(t).text)??""};`)),v(d,y)},_=d=>{var y=Ha(),$=Vt(y),O=o($),G=o(O),ee=a(o(G));{var De=be=>{var Pe=$a();v(be,Pe)};X(ee,be=>{e(s),r(()=>e(s).docente||e(s).materia||e(s).grado||e(s).motivo||e(s).fechaInicio||e(s).fechaFin)&&be(De)})}var Y=a(G,2),F=a(O,2),W=o(F),ue=a(W,2),xe=o(ue),Ve=a(xe,2),Ke=a(ue,2),ve=o(Ke),M=a(ve,2),j=a(M,2),ie=a(j,2),Te=a(ie,2),g=a(F,2),T=o(g),ae=o(T),ce=o(ae),Qe=a(ce,2),xt=o(Qe);xt.value=xt.__value="";var zt=a(xt);me(zt,1,()=>e(U),Ce,(be,Pe)=>{var tt=Ca(),yt=o(tt),At={};E(()=>{b(yt,e(Pe)),At!==(At=e(Pe))&&(tt.value=(tt.__value=e(Pe))??"")}),v(be,tt)});var Le=a(ae,2),Lt=o(Le),Tt=o(Lt),Yt=a(Lt,2),Zt=o(Yt),Qt=o(Zt);Zt.value=Zt.__value="";var Ct=a(Zt);me(Ct,1,()=>e(n),Ce,(be,Pe)=>{var tt=Sa(),yt=o(tt),At={};E(()=>{b(yt,e(Pe)),At!==(At=e(Pe))&&(tt.value=(tt.__value=e(Pe))??"")}),v(be,tt)});var Ot=a(Yt,2);{var qt=be=>{var Pe=Aa();v(be,Pe)};X(Ot,be=>{e(s),e(n),r(()=>e(s).docente&&e(n).length===0)&&be(qt)})}var Jt=a(T,2),Nt=o(Jt),H=o(Nt),se=o(H),ke=a(H,2),Ye=o(ke),St=o(Ye);Ye.value=Ye.__value="";var Pt=a(Ye);me(Pt,1,()=>e(f),Ce,(be,Pe)=>{var tt=Ea(),yt=o(tt),At={};E(()=>{b(yt,e(Pe)),At!==(At=e(Pe))&&(tt.value=(tt.__value=e(Pe))??"")}),v(be,tt)});var Pr=a(ke,2);{var vr=be=>{var Pe=Ia();v(be,Pe)};X(Pr,be=>{e(s),e(f),r(()=>(e(s).docente||e(s).materia)&&e(f).length===0)&&be(vr)})}var tr=a(Nt,2),Hr=o(tr),Ir=a(Hr,2),gr=o(Ir),Dr=o(gr);gr.value=gr.__value="";var Br=a(gr);me(Br,1,()=>e(z),Ce,(be,Pe)=>{const tt=Mt(()=>(e(Pe),r(()=>ye(e(Pe)))));var yt=Da(),At=o(yt),or={};E(()=>{b(At,`${Ie(e(tt)),r(()=>e(tt).icon)??""}
                      ${e(Pe)??""}`),or!==(or=e(Pe))&&(yt.value=(yt.__value=e(Pe))??"")}),v(be,yt)});var pr=a(Ir,2);{var rr=be=>{var Pe=Ba();v(be,Pe)};X(pr,be=>{e(s),e(z),r(()=>(e(s).docente||e(s).materia||e(s).grado)&&e(z).length===0)&&be(rr)})}var Gr=a(Jt,2),Wr=o(Gr),zr=o(Wr),ur=a(zr,2),Fr=a(Wr,2),br=o(Fr),Cr=a(br,2),Mr=a($,2),Ur=o(Mr),$e=o(Ur),Xe=a(o($e)),it=o(Xe),Ft=a(Ur,2);{var Ht=be=>{var Pe=za(),tt=o(Pe),yt=o(tt),At=a(yt,2);E(()=>{l(yt,`color: ${e(t),r(()=>e(t).icon)??""};`),l(At,`color: ${e(t),r(()=>e(t).text)??""};`)}),v(be,Pe)},Vr=be=>{var Pe=Pa(),tt=Vt(Pe),yt=o(tt),At=o(yt),or=o(At),Yr=o(or),Tr=o(Yr),Or=a(Tr),qr=a(Or),Sr=a(qr),Nr=a(Sr),ge=a(Nr),Gt=a(ge),er=a(Gt),fr=a(or);me(fr,5,()=>e(C),Ce,(ct,A)=>{const lt=Mt(()=>(e(A),r(()=>ye(e(A).motivo))));var Je=Ma(),et=o(Je),wt=o(et),Et=a(et),ar=o(Et),jt=a(Et),Wt=o(jt),sr=a(jt),cr=o(sr),dt=a(sr),Bt=o(dt);{var xr=ft=>{var mt=Fa(),nr=o(mt);E(()=>b(nr,(e(A),r(()=>e(A).nombre)))),R("click",mt,()=>re(e(A).nombre)),v(ft,mt)},bt=ft=>{var mt=zo();E(()=>b(mt,(e(A),r(()=>e(A).nombre)))),v(ft,mt)};X(Bt,ft=>{e(s),r(()=>e(s).docente&&e(s).materia&&e(s).grado)?ft(xr):ft(bt,!1)})}var hr=a(dt),It=o(hr),Kt=o(It),mr=o(Kt),Rr=a(Kt),Xt=a(hr),Lr=o(Xt),_r=a(Xt),lr=o(_r),Rt=o(lr);E(ft=>{l(Je,`border-color: ${e(t),r(()=>e(t).border)??""};`),l(et,`color: ${e(t),r(()=>e(t).text)??""};`),b(wt,ft),l(Et,`color: ${e(t),r(()=>e(t).text)??""};`),_t(Et,"title",(e(A),r(()=>e(A).docente))),b(ar,(e(A),r(()=>e(A).docente))),l(jt,`color: ${e(t),r(()=>e(t).text)??""};`),_t(jt,"title",(e(A),r(()=>e(A).materia))),b(Wt,(e(A),r(()=>e(A).materia))),l(sr,`color: ${e(t),r(()=>e(t).text)??""};`),b(cr,(e(A),r(()=>e(A).grado))),l(dt,`color: ${e(t),r(()=>e(t).text)??""};`),_t(dt,"title",(e(A),r(()=>e(A).nombre))),Ut(It,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Ie(e(lt)),r(()=>e(lt).color)??""}`),b(mr,(Ie(e(lt)),r(()=>e(lt).icon))),b(Rr,` ${e(A),r(()=>e(A).motivo)??""}`),l(Xt,`color: ${e(t),r(()=>e(t).text)??""};`),b(Lr,(e(A),r(()=>e(A).horas))),l(_r,`color: ${e(t),r(()=>e(t).text)??""};`),b(Rt,(e(A),r(()=>e(A).observaciones||"-")))},[()=>(e(A),r(()=>p(e(A).fecha)))]),v(ct,Je)});var jr=a(tt,2),ir=o(jr),u=o(ir),I=o(u),ne=o(I),fe=o(ne),Be=a(fe),qe=a(Be),ut=a(qe),h=a(ut),S=a(h),de=a(S),Ee=a(I);me(Ee,5,()=>e(C),Ce,(ct,A)=>{const lt=Mt(()=>(e(A),r(()=>ye(e(A).motivo))));var Je=Oa(),et=o(Je),wt=o(et),Et=a(et),ar=o(Et),jt=o(ar),Wt=a(Et),sr=o(Wt),cr=a(Wt),dt=o(cr),Bt=o(dt);{var xr=Rt=>{var ft=Ta(),mt=o(ft);E(()=>b(mt,(e(A),r(()=>e(A).nombre)))),R("click",ft,()=>re(e(A).nombre)),v(Rt,ft)},bt=Rt=>{var ft=zo();E(()=>b(ft,(e(A),r(()=>e(A).nombre)))),v(Rt,ft)};X(Bt,Rt=>{e(s),r(()=>e(s).docente&&e(s).materia&&e(s).grado)?Rt(xr):Rt(bt,!1)})}var hr=a(cr),It=o(hr),Kt=o(It),mr=o(Kt),Rr=a(Kt),Xt=a(hr),Lr=o(Xt),_r=a(Xt),lr=o(_r);E(Rt=>{l(Je,`border-color: ${e(t),r(()=>e(t).border)??""};`),l(et,`color: ${e(t),r(()=>e(t).text)??""};`),b(wt,Rt),l(Et,`color: ${e(t),r(()=>e(t).text)??""};`),_t(ar,"title",(e(A),r(()=>e(A).docente))),b(jt,(e(A),r(()=>e(A).docente))),l(Wt,`color: ${e(t),r(()=>e(t).text)??""};`),_t(Wt,"title",(e(A),r(()=>e(A).materia))),b(sr,(e(A),r(()=>e(A).materia))),l(cr,`color: ${e(t),r(()=>e(t).text)??""};`),_t(dt,"title",(e(A),r(()=>e(A).nombre))),Ut(It,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Ie(e(lt)),r(()=>e(lt).color)??""}`),b(mr,(Ie(e(lt)),r(()=>e(lt).icon))),b(Rr,` ${e(A),r(()=>e(A).motivo)??""}`),l(Xt,`color: ${e(t),r(()=>e(t).text)??""};`),b(Lr,(e(A),r(()=>e(A).horas))),l(_r,`color: ${e(t),r(()=>e(t).text)??""};`),b(lr,(e(A),r(()=>e(A).grado)))},[()=>(e(A),r(()=>p(e(A).fecha)))]),v(ct,Je)});var st=a(jr,2),kt=o(st);me(kt,5,()=>e(C),Ce,(ct,A)=>{const lt=Mt(()=>(e(A),r(()=>ye(e(A).motivo))));var Je=La(),et=o(Je),wt=o(et),Et=o(wt);{var ar=mt=>{var nr=Na(),Xr=o(nr);E(()=>b(Xr,(e(A),r(()=>e(A).nombre)))),R("click",nr,()=>re(e(A).nombre)),v(mt,nr)},jt=mt=>{var nr=ja(),Xr=o(nr);E(()=>b(Xr,(e(A),r(()=>e(A).nombre)))),v(mt,nr)};X(Et,mt=>{e(s),r(()=>e(s).docente&&e(s).materia&&e(s).grado)?mt(ar):mt(jt,!1)})}var Wt=a(Et,2),sr=o(Wt),cr=a(wt,2),dt=o(cr),Bt=o(dt),xr=o(Bt),bt=a(Bt),hr=a(dt,2),It=o(hr),Kt=a(et,2),mr=o(Kt),Rr=a(o(mr),2),Xt=o(Rr),Lr=a(mr,2),_r=a(o(Lr),2),lr=o(_r),Rt=a(Kt,2);{var ft=mt=>{var nr=Ra(),Xr=o(nr),mo=a(o(Xr),2),_o=o(mo);E(()=>{l(nr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; color: ${e(t),r(()=>e(t).label)??""};`),b(_o,(e(A),r(()=>e(A).observaciones)))}),v(mt,nr)};X(Rt,mt=>{e(A),r(()=>e(A).observaciones)&&mt(ft)})}E(mt=>{l(Je,`border-color: ${e(t),r(()=>e(t).cardBorder)??""}; background-color: ${e(t),r(()=>e(t).cardBg)??""};`),l(Wt,`color: ${e(t),r(()=>e(t).label)??""};`),b(sr,`${e(A),r(()=>e(A).grado)??""} ‚Ä¢ ${mt??""}`),Ut(dt,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium ${Ie(e(lt)),r(()=>e(lt).color)??""} mb-0.5`),b(xr,(Ie(e(lt)),r(()=>e(lt).icon))),b(bt,` ${e(A),r(()=>e(A).motivo)??""}`),l(hr,`color: ${e(t),r(()=>e(t).text)??""};`),b(It,`${e(A),r(()=>e(A).horas)??""}h`),l(Kt,`color: ${e(t),r(()=>e(t).text)??""};`),b(Xt,(e(A),r(()=>e(A).docente))),_t(_r,"title",(e(A),r(()=>e(A).materia))),b(lr,(e(A),r(()=>e(A).materia)))},[()=>(e(A),r(()=>p(e(A).fecha)))]),v(ct,Je)}),E(()=>{l(yt,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),l(or,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""};`),l(Tr,`color: ${e(t),r(()=>e(t).text)??""};`),l(Or,`color: ${e(t),r(()=>e(t).text)??""};`),l(qr,`color: ${e(t),r(()=>e(t).text)??""};`),l(Sr,`color: ${e(t),r(()=>e(t).text)??""};`),l(Nr,`color: ${e(t),r(()=>e(t).text)??""};`),l(ge,`color: ${e(t),r(()=>e(t).text)??""};`),l(Gt,`color: ${e(t),r(()=>e(t).text)??""};`),l(er,`color: ${e(t),r(()=>e(t).text)??""};`),l(ir,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),l(I,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""};`),l(fe,`color: ${e(t),r(()=>e(t).text)??""};`),l(Be,`color: ${e(t),r(()=>e(t).text)??""};`),l(qe,`color: ${e(t),r(()=>e(t).text)??""};`),l(ut,`color: ${e(t),r(()=>e(t).text)??""};`),l(h,`color: ${e(t),r(()=>e(t).text)??""};`),l(S,`color: ${e(t),r(()=>e(t).text)??""};`),l(de,`color: ${e(t),r(()=>e(t).text)??""};`)}),v(be,Pe)};X(Ft,be=>{e(C),r(()=>e(C).length===0)?be(Ht):be(Vr,!1)})}E(()=>{l($,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),l(G,`color: ${e(t),r(()=>e(t).text)??""};`),l(Y,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(W,`color: ${e(t),r(()=>e(t).text)??""};`),l(Ve,`color: ${e(t),r(()=>e(t).text)??""};`),l(ve,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(M,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(j,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(ie,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(Te,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(ce,`color: ${e(t),r(()=>e(t).label)??""};`),l(Qe,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(Lt,`color: ${e(t),r(()=>e(t).label)??""};`),b(Tt,`Materia ${e(s),r(()=>e(s).docente?"(del docente)":"")??""}`),l(Yt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),b(Qt,(e(s),r(()=>e(s).docente?"Todas las materias del docente":"Todas las materias"))),l(H,`color: ${e(t),r(()=>e(t).label)??""};`),b(se,`Grado ${e(s),r(()=>e(s).docente||e(s).materia?"(filtrado)":"")??""}`),l(ke,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),b(St,(e(s),r(()=>e(s).docente||e(s).materia?"Todos los grados filtrados":"Todos los grados"))),l(Hr,`color: ${e(t),r(()=>e(t).label)??""};`),l(Ir,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),b(Dr,(e(s),r(()=>e(s).docente||e(s).materia||e(s).grado?"Todos los motivos filtrados":"Todos los motivos"))),l(zr,`color: ${e(t),r(()=>e(t).label)??""};`),ur.disabled=!e(B),l(ur,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(br,`color: ${e(t),r(()=>e(t).label)??""};`),Cr.disabled=!e(B),l(Cr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l($e,`color: ${e(t),r(()=>e(t).label)??""};`),b(it,(e(C),r(()=>e(C).length)))}),R("click",Y,at),So(xe,()=>e(B),be=>i(B,be)),R("click",ve,()=>k("hoy")),R("click",M,()=>k("semana")),R("click",j,()=>k("mes")),R("click",ie,()=>k("mes_actual")),R("click",Te,()=>k("trimestre")),nt(Qe,()=>e(s).docente,be=>(he(s,e(s).docente=be),Oe(()=>{e(t),e(U),e(n),e(f),e(z)}))),nt(Yt,()=>e(s).materia,be=>(he(s,e(s).materia=be),Oe(()=>{e(t),e(U),e(n),e(f),e(z)}))),nt(ke,()=>e(s).grado,be=>(he(s,e(s).grado=be),Oe(()=>{e(t),e(U),e(n),e(f),e(z)}))),nt(Ir,()=>e(s).motivo,be=>(he(s,e(s).motivo=be),Oe(()=>{e(t),e(U),e(n),e(f),e(z)}))),dr(ur,()=>e(s).fechaInicio,be=>(he(s,e(s).fechaInicio=be),Oe(()=>{e(t),e(U),e(n),e(f),e(z)}))),dr(Cr,()=>e(s).fechaFin,be=>(he(s,e(s).fechaFin=be),Oe(()=>{e(t),e(U),e(n),e(f),e(z)}))),v(d,y)};X(Re,d=>{e(L)?d(Ue):d(_,!1)})}E(()=>{l(Ae,`background-color: ${e(t),r(()=>e(t).cardBg)??""};`),l(oe,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),_t(Q,"src",ro),l(He,`color: ${e(t),r(()=>e(t).text)??""};`),l(je,`color: ${e(t),r(()=>e(t).label)??""};`),K.disabled=(e(C),r(()=>e(C).length===0)),l(ze,`color: ${e(t),r(()=>e(t).text)??""};`)}),R("click",K,te),R("click",ze,function(...d){_e()?.apply(this,d)}),R("click",Ge,io(function(...d){_e()?.apply(this,d)})),R("keydown",Ge,d=>{(d.key==="Enter"||d.key===" ")&&_e()()}),v(P,Ge),$r()}var Va=m('<p class="text-sm font-medium tracking-wide animate-pulse" style="color: rgb(var(--text-secondary));"> </p>'),Ya=m('<div class="flex flex-col items-center justify-center gap-4 p-8 animate-in fade-in duration-500"><div><div class="absolute inset-0 bg-indigo-500/20 blur-xl rounded-full animate-pulse"></div> <div class="absolute inset-0 rounded-full border-2 border-indigo-500/20 border-t-indigo-500 animate-spin"></div> <div class="absolute inset-2 rounded-full border-2 border-violet-500/20 border-b-violet-500 animate-[spin_1.5s_linear_infinite_reverse]"></div> <div class="absolute inset-[35%] bg-gradient-to-tr from-indigo-600 to-violet-600 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)] animate-pulse"></div></div> <!></div>');function go(P,w){wr(w,!1);const n=x();let we=$t(w,"size",8,"medium"),f=$t(w,"message",8,"");const z={small:"w-8 h-8",medium:"w-16 h-16",large:"w-24 h-24"};Fe(()=>Ie(we()),()=>{i(n,z[we()]||z.medium)}),Ar();var t=Ya(),_e=o(t),Me=a(_e,2);{var D=le=>{var V=Va(),q=o(V);E(()=>b(q,f())),v(le,V)};X(Me,le=>{f()&&le(D)})}E(()=>Ut(_e,1,`relative ${e(n)??""}`)),v(P,t),$r()}var qa=m('<div class="flex justify-center py-12"><!></div>'),Ja=m("<option> </option>"),Wa=m("<option> </option>"),Ka=m("<option> </option>"),Za=m("<option> </option>"),Qa=ht('<svg class="animate-spin h-5 w-5" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Generando...',1),Xa=ht('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg> Ver Reporte',1),es=m('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="space-y-2"><label for="view-docente" class="block text-sm font-medium">Docente</label> <select id="view-docente" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione docente</option><!></select></div> <div class="space-y-2"><label for="view-materia" class="block text-sm font-medium">Materia</label> <select id="view-materia" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione materia</option><!></select></div> <div class="space-y-2"><label for="view-grado" class="block text-sm font-medium">Grado</label> <select id="view-grado" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione grado</option><!></select></div> <div class="space-y-2"><label for="view-periodo" class="block text-sm font-medium">Periodo</label> <select id="view-periodo" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"></select></div></div> <div class="pt-4 flex gap-3"><button class="flex-1 px-6 py-3 border rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors font-medium">Cancelar</button> <button class="flex-[2] px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"><!></button></div>',1),ts=m('<th class="p-2 border text-white font-bold text-center sticky top-0 z-20" style="background-color: #4472C4; min-width: 60px;"> </th>'),rs=m('<td class="p-2 border text-center font-medium bg-white cell-hover svelte-14neep5"> </td>'),os=m('<tr class="hover-row svelte-14neep5"><td class="p-2 border font-medium sticky left-0 z-10 bg-[#F2F2F2] svelte-14neep5" style="background-color: #F2F2F2;"> </td><!><td class="p-2 border text-center font-bold bg-white cell-hover svelte-14neep5"> </td></tr>'),as=m('<div class="space-y-4 min-w-0"><div class="text-center p-4 rounded-lg flex-shrink-0" style="background-color: #2E75B6; color: white;"><h3 class="text-lg font-bold whitespace-nowrap"> </h3></div> <div class="p-3 rounded-lg text-sm flex-shrink-0" style="background-color: #5B9BD5; color: white;"><p class="font-medium whitespace-nowrap"> </p></div> <div class="overflow-auto border rounded-lg flex-1 min-h-[200px] max-h-[50vh]"><table class="w-full border-collapse text-xs md:text-sm"><thead class="sticky top-0 z-30 shadow-sm"><tr><th class="p-2 border text-white font-bold sticky left-0 z-40" style="background-color: #4472C4; width: 200px;">Estudiantes</th><!><th class="p-2 border text-white font-bold text-center sticky top-0 z-20" style="background-color: #FF6B6B; width: 80px;">Total Horas</th></tr></thead><tbody class="bg-white"></tbody></table></div> <div class="pt-4 flex gap-3 flex-shrink-0"><button class="flex-1 px-6 py-3 border rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors font-medium">Nueva Consulta</button> <button class="flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-xl transition-colors font-medium">Cerrar</button></div></div>'),ss=m('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-2 md:p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-[95vw] max-h-[90vh] overflow-hidden shadow-2xl border flex flex-col"><div class="flex items-center justify-between p-4 md:p-6 border-b flex-shrink-0"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h2 id="modal-title" class="text-lg md:text-xl font-bold">Vista de Reporte</h2> <p class="text-sm opacity-75">Inasistencias por materia y grado</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-4 md:p-6 space-y-4 overflow-y-auto flex-1"><!></div></div></div>');function No(P,w){wr(w,!1);const n=x();let we=$t(w,"onClose",8),f=$t(w,"initialDocente",8,""),z=x([]),t=x([]),_e=x([]),Me=x(f()||""),D=x(""),le=x(""),V=x(ao[0].nombre),q=x(!1),L=x(!1),B=x(null);const C=te=>te?te.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g," ").trim().toLowerCase():"",s=te=>{if(!te)return"";const p=te.split("/");if(p.length===3){const re=p[0].padStart(2,"0"),Ge=p[1].padStart(2,"0");return`${p[2]}-${Ge}-${re}`}return te},c=te=>{const p=[],re=new Date(te.fecha_inicio),Ge=new Date(te.fecha_fin);for(;re<=Ge;){const Ae=re.getUTCDay();Ae>=1&&Ae<=6&&p.push(new Date(re)),re.setUTCDate(re.getUTCDate()+1)}return p},k=te=>{const p=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return`${te.getUTCDate()}/${p[te.getUTCMonth()]}/${te.getUTCFullYear().toString().substr(2)}`};kr(async()=>{i(q,!0);try{const[te,p,re]=await Promise.all([Kr(),Zr(),Qr()]);i(z,te),i(t,p),i(_e,re)}catch(te){console.error("Error cargando datos iniciales:",te)}finally{i(q,!1)}});const Z=async()=>{if(!e(Me)||!e(D)||!e(le)){Dt.fire({icon:"warning",title:"Campos incompletos",text:"Por favor seleccione Docente, Materia y Grado."});return}const te=ao.find(p=>p.nombre===e(V));if(!te){Dt.fire({icon:"error",title:"Error",text:"Periodo no encontrado"});return}i(L,!0);try{const p=await Eo({spreadsheetId:lo,worksheetTitle:ho});if(!p?.records||!Array.isArray(p.records))throw new Error("No se pudieron obtener los registros de inasistencias");const re=p.records.slice(1),Ge=C(e(Me)),Ae=C(e(D)),oe=e(le).toString().trim(),N=re.map(pe=>{const K=pe.values||[];return{fecha:K[2]||"",docente:K[1]||"",materia:K[4]||"",grado:(K[6]||"").toString().trim(),nombre:K[7]||"",motivo:K[5]||"",horas:K[3]||"0"}}).filter(pe=>{const K=C(pe.docente),ze=C(pe.materia),Ze=pe.grado,Re=K.includes(Ge)||Ge.includes(K),Ue=ze.includes(Ae)||Ae.includes(ze),_=Ze===oe||Ze.startsWith(oe)||oe.startsWith(Ze),d=s(pe.fecha),y=new Date(d),$=new Date(te.fecha_inicio),O=new Date(te.fecha_fin);$.setHours(0,0,0,0),O.setHours(23,59,59,999);const G=y>=$&&y<=O;return Re&&Ue&&_&&G}),Q=e(_e).filter(pe=>pe.grado.toString()===e(le)).map(pe=>pe.nombre).sort();if(Q.length===0)throw new Error("No hay estudiantes registrados para el grado seleccionado");const He=c(te).filter(pe=>{const K=pe.toISOString().split("T")[0];return N.some(ze=>s(ze.fecha)===K)});if(He.length===0){Dt.fire({icon:"info",title:"Sin datos",text:"No se encontraron inasistencias para los filtros seleccionados en este periodo."});return}const je=Q.map(pe=>{const K=[];let ze=0;return He.forEach(Ze=>{const Re=Ze.toISOString().split("T")[0],Ue=N.filter(_=>C(_.nombre)===C(pe)&&s(_.fecha)===Re);if(Ue.length>0){const _=Ue[0],d=parseFloat(_.horas)||0,y=_.motivo||"";d>0?(K.push({valor:d.toString(),horas:d}),ze+=d):y?K.push({valor:y,horas:0}):K.push({valor:"X",horas:0})}else K.push({valor:"‚úì",horas:0})}),{nombre:pe,registros:K,totalHoras:ze}});i(B,{docente:e(Me),materia:e(D),grado:e(le),periodo:te.nombre,fechaInicio:k(te.fecha_inicio),fechaFin:k(te.fecha_fin),fechas:He.map(pe=>k(pe)),estudiantes:je})}catch(p){console.error("Error generando reporte:",p);const re=p instanceof Error?p.message:"Error desconocido";Dt.fire({icon:"error",title:"Error",text:re})}finally{i(L,!1)}};Fe(()=>{},()=>{i(n,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Ar(),Er();var ye=ss(),U=o(ye),Ne=o(U),Se=a(o(Ne),2),We=a(Ne,2),pt=o(We);{var ot=te=>{var p=qa(),re=o(p);go(re,{message:"Cargando datos..."}),v(te,p)},at=te=>{var p=no(),re=Vt(p);{var Ge=oe=>{var N=es(),Q=Vt(N),J=o(Q),He=o(J),je=a(He,2),pe=o(je);pe.value=pe.__value="";var K=a(pe);me(K,1,()=>e(z),Ce,(ve,M)=>{var j=Ja(),ie=o(j),Te={};E(()=>{b(ie,e(M)),Te!==(Te=e(M))&&(j.value=(j.__value=e(M))??"")}),v(ve,j)});var ze=a(J,2),Ze=o(ze),Re=a(Ze,2),Ue=o(Re);Ue.value=Ue.__value="";var _=a(Ue);me(_,1,()=>e(t),Ce,(ve,M)=>{var j=Wa(),ie=o(j),Te={};E(()=>{b(ie,(e(M),r(()=>e(M).materia))),Te!==(Te=(e(M),r(()=>e(M).materia)))&&(j.value=(j.__value=(e(M),r(()=>e(M).materia)))??"")}),v(ve,j)});var d=a(ze,2),y=o(d),$=a(y,2),O=o($);O.value=O.__value="";var G=a(O);me(G,1,()=>(e(_e),r(()=>[...new Set(e(_e).map(ve=>ve.grado.toString()))])),Ce,(ve,M)=>{var j=Ka(),ie=o(j),Te={};E(g=>{b(ie,g),Te!==(Te=e(M))&&(j.value=(j.__value=e(M))??"")},[()=>(e(M),r(()=>e(M).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),v(ve,j)});var ee=a(d,2),De=o(ee),Y=a(De,2);me(Y,5,()=>ao,Ce,(ve,M)=>{var j=Za(),ie=o(j),Te={};E(()=>{b(ie,`Periodo ${e(M),r(()=>e(M).nombre)??""}`),Te!==(Te=(e(M),r(()=>e(M).nombre)))&&(j.value=(j.__value=(e(M),r(()=>e(M).nombre)))??"")}),v(ve,j)});var F=a(Q,2),W=o(F),ue=a(W,2),xe=o(ue);{var Ve=ve=>{var M=Qa();v(ve,M)},Ke=ve=>{var M=Xa();v(ve,M)};X(xe,ve=>{e(L)?ve(Ve):ve(Ke,!1)})}E(()=>{l(He,`color: ${e(n),r(()=>e(n).label)??""};`),l(je,`background-color: ${e(n),r(()=>e(n).inputBg)??""}; border-color: ${e(n),r(()=>e(n).border)??""}; color: ${e(n),r(()=>e(n).text)??""};`),l(Ze,`color: ${e(n),r(()=>e(n).label)??""};`),l(Re,`background-color: ${e(n),r(()=>e(n).inputBg)??""}; border-color: ${e(n),r(()=>e(n).border)??""}; color: ${e(n),r(()=>e(n).text)??""};`),l(y,`color: ${e(n),r(()=>e(n).label)??""};`),l($,`background-color: ${e(n),r(()=>e(n).inputBg)??""}; border-color: ${e(n),r(()=>e(n).border)??""}; color: ${e(n),r(()=>e(n).text)??""};`),l(De,`color: ${e(n),r(()=>e(n).label)??""};`),l(Y,`background-color: ${e(n),r(()=>e(n).inputBg)??""}; border-color: ${e(n),r(()=>e(n).border)??""}; color: ${e(n),r(()=>e(n).text)??""};`),l(W,`border-color: ${e(n),r(()=>e(n).border)??""};`),ue.disabled=e(L)||!e(Me)||!e(D)||!e(le)}),nt(je,()=>e(Me),ve=>i(Me,ve)),nt(Re,()=>e(D),ve=>i(D,ve)),nt($,()=>e(le),ve=>i(le,ve)),nt(Y,()=>e(V),ve=>i(V,ve)),R("click",W,function(...ve){we()?.apply(this,ve)}),R("click",ue,Z),v(oe,N)},Ae=oe=>{var N=as(),Q=o(N),J=o(Q),He=o(J),je=a(Q,2),pe=o(je),K=o(pe),ze=a(je,2),Ze=o(ze),Re=o(Ze),Ue=o(Re),_=a(o(Ue));me(_,1,()=>(e(B),r(()=>e(B).fechas)),Ce,(G,ee)=>{var De=ts(),Y=o(De);E(()=>b(Y,e(ee))),v(G,De)});var d=a(Re);me(d,5,()=>(e(B),r(()=>e(B).estudiantes)),Ce,(G,ee)=>{var De=os(),Y=o(De),F=o(Y),W=a(Y);me(W,1,()=>(e(ee),r(()=>e(ee).registros)),Ce,(Ve,Ke)=>{const ve=Mt(()=>(e(Ke),r(()=>e(Ke).valor==="‚úì")));var M=rs(),j=o(M);E(()=>{l(M,e(ve)?"color: #00AA00;":"color: #FF0000; background-color: #FFE6E6;"),b(j,(e(Ke),r(()=>e(Ke).valor)))}),v(Ve,M)});var ue=a(W),xe=o(ue);E(()=>{b(F,(e(ee),r(()=>e(ee).nombre))),l(ue,(e(ee),r(()=>e(ee).totalHoras>0?"color: #FF0000; background-color: #FFE6E6;":"color: #00AA00; background-color: #E6FFE6;"))),b(xe,(e(ee),r(()=>e(ee).totalHoras)))}),v(G,De)});var y=a(ze,2),$=o(y),O=a($,2);E(()=>{b(He,`REPORTE DE INASISTENCIAS - ${e(B),r(()=>e(B).materia)??""} - GRADO ${e(B),r(()=>e(B).grado)??""}`),b(K,`Docente: ${e(B),r(()=>e(B).docente)??""} | Periodo: ${e(B),r(()=>e(B).periodo)??""} (${e(B),r(()=>e(B).fechaInicio)??""} - ${e(B),r(()=>e(B).fechaFin)??""})`),l($,`border-color: ${e(n),r(()=>e(n).border)??""};`)}),R("click",$,()=>i(B,null)),R("click",O,function(...G){we()?.apply(this,G)}),v(oe,N)};X(re,oe=>{e(B)?oe(Ae,!1):oe(Ge)})}v(te,p)};X(pt,te=>{e(q)?te(ot):te(at,!1)})}E(()=>{l(U,`background-color: ${e(n),r(()=>e(n).cardBg)??""}; border-color: ${e(n),r(()=>e(n).cardBorder)??""}; color: ${e(n),r(()=>e(n).text)??""};`),l(Ne,`border-color: ${e(n),r(()=>e(n).cardBorder)??""};`)}),R("click",Se,function(...te){we()?.apply(this,te)}),R("click",ye,io(function(...te){we()?.apply(this,te)})),R("keydown",ye,te=>te.key==="Escape"&&we()()),v(P,ye),$r()}var ls=m('<div class="flex justify-center py-12"><!></div>'),ns=m("<option> </option>"),is=m("<option> </option>"),cs=m("<option> </option>"),ds=m("<option> </option>"),vs=ht('<svg class="animate-spin h-5 w-5 text-white" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Generando...',1),gs=ht('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg> Descargar Excel',1),ps=m('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="space-y-2"><label for="rep-docente" class="block text-sm font-medium">Docente</label> <select id="rep-docente" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione docente</option><!></select></div> <div class="space-y-2"><label for="rep-materia" class="block text-sm font-medium">Materia</label> <select id="rep-materia" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione materia</option><!></select></div> <div class="space-y-2"><label for="rep-grado" class="block text-sm font-medium">Grado</label> <select id="rep-grado" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione grado</option><!></select></div> <div class="space-y-2"><label for="rep-periodo" class="block text-sm font-medium">Periodo</label> <select id="rep-periodo" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"></select></div></div> <div class="pt-4 flex gap-3"><button class="flex-1 px-6 py-3 border rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors font-medium">Cancelar</button> <button class="flex-1 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg hover:shadow-green-500/20"><!></button></div>',1),us=m('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-2xl overflow-hidden shadow-2xl border"><div class="flex items-center justify-between p-6 border-b"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h2 id="modal-title" class="text-xl font-bold">Generador de Reporte Excel</h2> <p class="text-sm opacity-75">Inasistencias por materia y grado</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar modal"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 space-y-6"><!></div></div></div> <!>',1);function bs(P,w){wr(w,!1);const n=x();let we=null,f=null,z=$t(w,"onClose",8),t=$t(w,"initialDocente",8,""),_e=x([]),Me=x([]),D=x([]),le=x(t()||""),V=x(""),q=x(""),L=x(ao[0].nombre),B=x(!1),C=x(!1),s=x(!1);const c=async()=>{if(!we||!f){const[N,Q]=await Promise.all([po(()=>import("./excel-G1qE2FwJ.js").then(J=>J.e),[]),po(()=>import("./utils-Dc41pFlL.js").then(J=>J.F),__vite__mapDeps([0,1]))]);we=N.default,f=Q.default}},k=N=>N?N.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g," ").trim().toLowerCase():"",Z=N=>{if(!N)return"";const Q=N.split("/");if(Q.length===3){const J=Q[0].padStart(2,"0"),He=Q[1].padStart(2,"0");return`${Q[2]}-${He}-${J}`}return N},ye=N=>{const Q=[],J=new Date(N.fecha_inicio),He=new Date(N.fecha_fin);for(;J<=He;){const je=J.getUTCDay();je>=1&&je<=6&&Q.push(new Date(J)),J.setUTCDate(J.getUTCDate()+1)}return Q},U=N=>{const Q=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return`${N.getUTCDate()}/${Q[N.getUTCMonth()]}/${N.getUTCFullYear().toString().substr(2)}`};kr(async()=>{i(B,!0);try{const[N,Q,J]=await Promise.all([Kr(),Zr(),Qr()]);i(_e,N),i(Me,Q),i(D,J)}catch(N){console.error("Error cargando datos iniciales:",N)}finally{i(B,!1)}});const Ne=async()=>{if(await c(),!e(le)||!e(V)||!e(q)){Dt.fire({icon:"warning",title:"Campos incompletos",text:"Por favor seleccione Docente, Materia y Grado."});return}const N=ao.find(Q=>Q.nombre===e(L));if(!N){Dt.fire({icon:"error",title:"Error",text:"Periodo no encontrado"});return}i(C,!0);try{const Q=await Eo({spreadsheetId:lo,worksheetTitle:ho});if(!Q?.records||!Array.isArray(Q.records))throw new Error("No se pudieron obtener los registros de inasistencias");const J=Q.records.slice(1),He=k(e(le)),je=k(e(V)),pe=e(q).toString().trim(),K=J.map(F=>{const W=F.values||[];return{fecha:W[2]||"",docente:W[1]||"",materia:W[4]||"",grado:(W[6]||"").toString().trim(),nombre:W[7]||"",motivo:W[5]||"",horas:W[3]||"0"}}).filter(F=>{const W=k(F.docente),ue=k(F.materia),xe=F.grado,Ve=W.includes(He)||He.includes(W),Ke=ue.includes(je)||je.includes(ue),ve=xe===pe||xe.startsWith(pe)||pe.startsWith(xe),M=Z(F.fecha),j=new Date(M),ie=new Date(N.fecha_inicio),Te=new Date(N.fecha_fin);ie.setHours(0,0,0,0),Te.setHours(23,59,59,999);const g=j>=ie&&j<=Te;return Ve&&Ke&&ve&&g}),ze=e(D).filter(F=>F.grado.toString()===e(q)).map(F=>F.nombre).sort();if(ze.length===0)throw new Error("No hay estudiantes registrados para el grado seleccionado");const Re=ye(N).filter(F=>{const W=F.toISOString().split("T")[0];return K.some(ue=>Z(ue.fecha)===W)});if(Re.length===0){Dt.fire({icon:"info",title:"Sin datos",text:"No se encontraron inasistencias para los filtros seleccionados en este periodo."}),i(C,!1);return}const Ue=new we.Workbook,_=Ue.addWorksheet("Reporte de Inasistencias"),d=Re.length+2,y=_.addRow([`REPORTE DE INASISTENCIAS - ${e(V)} - GRADO ${e(q)}`]);y.height=30,y.font={bold:!0,size:16,color:{argb:"FFFFFF"}},y.fill={type:"pattern",pattern:"solid",fgColor:{argb:"2E75B6"}},y.alignment={vertical:"middle",horizontal:"center"},_.mergeCells(1,1,1,d);const $=_.addRow([`Docente: ${e(le)} | Periodo: ${N.nombre} (${U(N.fecha_inicio)} - ${U(N.fecha_fin)})`]);$.height=20,$.font={bold:!0,size:10,color:{argb:"FFFFFF"}},$.fill={type:"pattern",pattern:"solid",fgColor:{argb:"5B9BD5"}},$.alignment={vertical:"middle",horizontal:"left"},_.mergeCells(2,1,2,d);const O=["Estudiantes",...Re.map(F=>U(F)),"Total Horas"],G=_.addRow(O);G.height=25,G.font={bold:!0,size:11,color:{argb:"FFFFFF"}},G.alignment={vertical:"middle",horizontal:"center"},_.getColumn(1).width=35,Re.forEach((F,W)=>{_.getColumn(W+2).width=22}),_.getColumn(d).width=15,G.eachCell((F,W)=>{F.fill={type:"pattern",pattern:"solid",fgColor:{argb:W===d?"FF6B6B":"4472C4"}},F.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}),ze.forEach(F=>{const W=[F];let ue=0;Re.forEach(Ke=>{const ve=Ke.toISOString().split("T")[0],M=K.filter(j=>k(j.nombre)===k(F)&&Z(j.fecha)===ve);if(M.length>0){const j=M[0],ie=parseFloat(j.horas)||0,Te=j.motivo||"";ie>0?(W.push(ie.toString()),ue+=ie):Te?W.push(Te):W.push("X")}else W.push("‚úì")}),W.push(ue.toString());const xe=_.addRow(W);xe.height=30,xe.getCell(1).font={bold:!0},xe.getCell(1).fill={type:"pattern",pattern:"solid",fgColor:{argb:"F2F2F2"}},Re.forEach((Ke,ve)=>{const M=xe.getCell(ve+2);M.alignment={horizontal:"center",vertical:"middle",wrapText:!0};const j=M.value?.toString()||"",ie=parseFloat(j)||0;j==="‚úì"?M.font={color:{argb:"00AA00"}}:ie>0||isNaN(ie)?(M.font={color:{argb:"FF0000"},bold:!0},M.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE6E6"}}):(M.font={color:{argb:"FF0000"},bold:!0},M.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE6E6"}})});const Ve=xe.getCell(d);Ve.font={bold:!0,color:{argb:ue>0?"FF0000":"00AA00"}},Ve.alignment={horizontal:"center"},Ve.fill={type:"pattern",pattern:"solid",fgColor:{argb:ue>0?"FFE6E6":"E6FFE6"}},xe.eachCell(Ke=>{Ke.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})});const ee=await Ue.xlsx.writeBuffer(),De=new Blob([ee],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Y=`Reporte_Inasistencias_${e(q)}_${e(V).replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.xlsx`;f(De,Y),Dt.fire({icon:"success",title:"Reporte generado",text:`Se ha generado el reporte con ${ze.length} estudiantes.`,timer:2e3,showConfirmButton:!1})}catch(Q){console.error("Error generando Excel:",Q);const J=Q instanceof Error?Q.message:"Error desconocido";Dt.fire({icon:"error",title:"Error",text:J})}finally{i(C,!1)}};Fe(()=>{},()=>{i(n,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Ar(),Er();var Se=us(),We=Vt(Se),pt=o(We),ot=o(pt),at=a(o(ot),2),te=a(ot,2),p=o(te);{var re=N=>{var Q=ls(),J=o(Q);go(J,{message:"Cargando datos..."}),v(N,Q)},Ge=N=>{var Q=ps(),J=Vt(Q),He=o(J),je=o(He),pe=a(je,2),K=o(pe);K.value=K.__value="";var ze=a(K);me(ze,1,()=>e(_e),Ce,(M,j)=>{var ie=ns(),Te=o(ie),g={};E(()=>{b(Te,e(j)),g!==(g=e(j))&&(ie.value=(ie.__value=e(j))??"")}),v(M,ie)});var Ze=a(He,2),Re=o(Ze),Ue=a(Re,2),_=o(Ue);_.value=_.__value="";var d=a(_);me(d,1,()=>e(Me),Ce,(M,j)=>{var ie=is(),Te=o(ie),g={};E(()=>{b(Te,(e(j),r(()=>e(j).materia))),g!==(g=(e(j),r(()=>e(j).materia)))&&(ie.value=(ie.__value=(e(j),r(()=>e(j).materia)))??"")}),v(M,ie)});var y=a(Ze,2),$=o(y),O=a($,2),G=o(O);G.value=G.__value="";var ee=a(G);me(ee,1,()=>(e(D),r(()=>[...new Set(e(D).map(M=>M.grado.toString()))])),Ce,(M,j)=>{var ie=cs(),Te=o(ie),g={};E(T=>{b(Te,T),g!==(g=e(j))&&(ie.value=(ie.__value=e(j))??"")},[()=>(e(j),r(()=>e(j).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),v(M,ie)});var De=a(y,2),Y=o(De),F=a(Y,2);me(F,5,()=>ao,Ce,(M,j)=>{var ie=ds(),Te=o(ie),g={};E(()=>{b(Te,`Periodo ${e(j),r(()=>e(j).nombre)??""}`),g!==(g=(e(j),r(()=>e(j).nombre)))&&(ie.value=(ie.__value=(e(j),r(()=>e(j).nombre)))??"")}),v(M,ie)});var W=a(J,2),ue=o(W),xe=a(ue,2),Ve=o(xe);{var Ke=M=>{var j=vs();v(M,j)},ve=M=>{var j=gs();v(M,j)};X(Ve,M=>{e(C)?M(Ke):M(ve,!1)})}E(()=>{l(je,`color: ${e(n),r(()=>e(n).label)??""};`),l(pe,`background-color: ${e(n),r(()=>e(n).inputBg)??""}; border-color: ${e(n),r(()=>e(n).border)??""}; color: ${e(n),r(()=>e(n).text)??""};`),l(Re,`color: ${e(n),r(()=>e(n).label)??""};`),l(Ue,`background-color: ${e(n),r(()=>e(n).inputBg)??""}; border-color: ${e(n),r(()=>e(n).border)??""}; color: ${e(n),r(()=>e(n).text)??""};`),l($,`color: ${e(n),r(()=>e(n).label)??""};`),l(O,`background-color: ${e(n),r(()=>e(n).inputBg)??""}; border-color: ${e(n),r(()=>e(n).border)??""}; color: ${e(n),r(()=>e(n).text)??""};`),l(Y,`color: ${e(n),r(()=>e(n).label)??""};`),l(F,`background-color: ${e(n),r(()=>e(n).inputBg)??""}; border-color: ${e(n),r(()=>e(n).border)??""}; color: ${e(n),r(()=>e(n).text)??""};`),l(ue,`border-color: ${e(n),r(()=>e(n).border)??""};`),xe.disabled=e(C)||!e(le)||!e(V)||!e(q)}),nt(pe,()=>e(le),M=>i(le,M)),nt(Ue,()=>e(V),M=>i(V,M)),nt(O,()=>e(q),M=>i(q,M)),nt(F,()=>e(L),M=>i(L,M)),R("click",ue,function(...M){z()?.apply(this,M)}),R("click",xe,Ne),v(N,Q)};X(p,N=>{e(B)?N(re):N(Ge,!1)})}var Ae=a(We,2);{var oe=N=>{No(N,{onClose:()=>i(s,!1),get initialDocente(){return e(le)}})};X(Ae,N=>{e(s)&&N(oe)})}E(()=>{l(pt,`background-color: ${e(n),r(()=>e(n).cardBg)??""}; border-color: ${e(n),r(()=>e(n).cardBorder)??""}; color: ${e(n),r(()=>e(n).text)??""};`),l(ot,`border-color: ${e(n),r(()=>e(n).cardBorder)??""};`)}),R("click",at,function(...N){z()?.apply(this,N)}),R("click",We,io(function(...N){z()?.apply(this,N)})),R("keydown",We,N=>N.key==="Escape"&&z()()),v(P,Se),$r()}var fs=m('<div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping svelte-gsxx31"></div> <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full svelte-gsxx31"></div>',1),xs=m('<div class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-ping svelte-gsxx31"></div> <div class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full svelte-gsxx31"></div>',1),hs=ht('<svg class="w-5 h-5 text-indigo-500 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-gsxx31"></path></svg>'),ms=ht('<svg class="w-5 h-5 text-amber-500 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="svelte-gsxx31"></path></svg>'),_s=ht('<svg class="w-5 h-5 text-indigo-400 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-gsxx31"></path></svg>'),ys=m('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-gsxx31"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0 svelte-gsxx31"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-gsxx31"></path></svg></div> <div class="flex-1 pr-6 pt-0.5 svelte-gsxx31"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100 svelte-gsxx31">Informaci√≥n</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200 svelte-gsxx31"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors svelte-gsxx31" aria-label="Cerrar alerta"><svg class="w-4 h-4 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-gsxx31"></path></svg></button></div>'),ks=m('<option class="svelte-gsxx31"> </option>'),ws=m('<option class="svelte-gsxx31"> </option>'),$s=m('<option class="svelte-gsxx31"> </option>'),Cs=m('<option class="svelte-gsxx31"> </option>'),Ss=m('<span><span class="mr-1.5 svelte-gsxx31"> </span> <button type="button" class="ml-1.5 hover:opacity-70 transition-opacity svelte-gsxx31" aria-label="Eliminar motivo"><svg class="w-3 h-3 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12" class="svelte-gsxx31"></path></svg></button></span>'),As=m('<option class="svelte-gsxx31"> </option>'),Es=m('<option class="svelte-gsxx31"> </option>'),Is=m('<div class="flex items-center gap-2 svelte-gsxx31"><button type="button" class="p-2 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Agregar observaci√≥n"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" class="svelte-gsxx31"></path></svg></button></div>'),Ds=m('<div class="px-4 pb-4 animate-fade-in svelte-gsxx31"><textarea placeholder="Escribe una observaci√≥n espec√≠fica para este estudiante..." rows="2" class="w-full px-4 py-2 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none resize-none text-sm svelte-gsxx31"></textarea></div>'),Bs=m('<div><div class="flex-1 min-w-0 svelte-gsxx31"><span class="text-base font-medium block svelte-gsxx31"> </span> <div class="flex flex-wrap gap-2 mt-2 svelte-gsxx31"></div></div> <div class="flex flex-col sm:flex-row items-center gap-2 w-full sm:w-auto svelte-gsxx31"><div><select class="w-full appearance-none border rounded-lg px-4 py-2 pr-10 text-sm focus:ring-2 focus:ring-indigo-500 cursor-pointer transition-all outline-none svelte-gsxx31"><option class="svelte-gsxx31">Hora...</option><option class="svelte-gsxx31">0 (Sin hora)</option><!></select> <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 svelte-gsxx31"><svg class="w-4 h-4 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-gsxx31"></path></svg></div></div> <div class="relative w-full sm:w-56 svelte-gsxx31"><select class="w-full appearance-none border rounded-lg px-4 py-2 pr-10 text-sm focus:ring-2 focus:ring-indigo-500 cursor-pointer transition-all outline-none svelte-gsxx31"><option class="svelte-gsxx31">A√±adir motivo...</option><option class="svelte-gsxx31">üö´ Limpiar todo</option><!></select> <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 svelte-gsxx31"><svg class="w-4 h-4 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" class="svelte-gsxx31"></path></svg></div></div></div> <!></div> <!>',1),zs=m('<div class="text-center py-12 opacity-60 svelte-gsxx31">No hay estudiantes en este grado.</div>'),Fs=m('<div class="space-y-3 animate-fade-in svelte-gsxx31"><label class="block text-sm font-semibold uppercase tracking-wider svelte-gsxx31"> </label> <div class="space-y-2 max-h-[700px] overflow-y-auto border rounded-2xl p-4 bg-zinc-50/50 dark:bg-zinc-900/50 backdrop-blur-sm scrollbar-thin scrollbar-thumb-zinc-300 dark:scrollbar-thumb-zinc-600 svelte-gsxx31"><!> <!></div></div>'),Ms=ht('<svg class="animate-spin h-6 w-6 lg:h-7 lg:w-7 svelte-gsxx31" fill="none" viewBox="0 0 24 24"><circle class="opacity-25 svelte-gsxx31" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75 svelte-gsxx31" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Ts=ht('<svg class="h-6 w-6 lg:h-7 lg:w-7 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" class="svelte-gsxx31"></path></svg>'),Os=m('<span class="absolute -top-1 -right-1 lg:-top-2 lg:-right-2 bg-red-500 text-white text-[10px] lg:text-xs font-bold rounded-full h-5 w-5 lg:h-6 lg:w-6 flex items-center justify-center ring-2 ring-white dark:ring-zinc-950 animate-bounce svelte-gsxx31"> </span>'),Ns=m('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200 svelte-gsxx31"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40 svelte-gsxx31"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8 svelte-gsxx31"><div class="flex items-center gap-4 lg:flex-col svelte-gsxx31"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto svelte-gsxx31"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center svelte-gsxx31">Registrar Inasistencias</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full svelte-gsxx31"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Abrir hoja de c√°lculo"><svg class="w-5 h-5 svelte-gsxx31" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Hoja de C√°lculo</span></button> <button id="filter-button-target" class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 relative svelte-gsxx31" title="Abrir Looker Studio"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Filtros</span> <!></button> <button id="report-button-target" class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 relative svelte-gsxx31" title="Generar reportes Excel"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Reporte Excel</span> <!></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Ver reporte online"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" class="svelte-gsxx31"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Ver Online</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Abrir Looker Studio"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Looker Studio</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Volver al Dashboard"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Dashboard</span></button> <div class="relative svelte-gsxx31"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full svelte-gsxx31" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize svelte-gsxx31"> </span></button></div></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto svelte-gsxx31"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border svelte-gsxx31"><!> <!> <!> <form class="space-y-6 svelte-gsxx31"><div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-gsxx31"><div class="space-y-2 svelte-gsxx31"><label for="docente" class="block text-sm font-medium svelte-gsxx31">Docente</label> <select id="docente" name="docente" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-gsxx31"><option class="svelte-gsxx31"> </option><!></select></div> <div class="space-y-2 svelte-gsxx31"><div class="flex items-center justify-between svelte-gsxx31"><label for="materia" class="block text-sm font-medium svelte-gsxx31">Materia</label></div> <select id="materia" name="materia" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-gsxx31"><option class="svelte-gsxx31"> </option><!></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-gsxx31"><div class="space-y-2 svelte-gsxx31"><label for="horas" class="block text-sm font-medium svelte-gsxx31">Cantidad de Horas</label> <select id="horas" name="horas" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer svelte-gsxx31"><option class="svelte-gsxx31">Seleccione horas</option><option class="svelte-gsxx31">Sin hora espec√≠fica</option><!></select></div> <div class="space-y-2 svelte-gsxx31"><label for="grado" class="block text-sm font-medium svelte-gsxx31">Grado</label> <select id="grado" name="grado" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-gsxx31"><option class="svelte-gsxx31"> </option><!></select></div></div> <!> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-gsxx31"><div class="space-y-2 svelte-gsxx31"><label for="fecha" class="block text-sm font-medium svelte-gsxx31">Fecha</label> <input type="date" id="fecha" name="fecha" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none svelte-gsxx31"/></div> <div class="space-y-2 svelte-gsxx31"><label for="observaciones" class="block text-sm font-medium svelte-gsxx31">Observaciones</label> <textarea id="observaciones" name="observaciones" rows="3" placeholder="Opcional..." class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none resize-none svelte-gsxx31"></textarea></div></div> <div class="flex items-center justify-between pt-6 border-t svelte-gsxx31"><div class="text-sm font-medium svelte-gsxx31">Inasistencias marcadas: <span class="text-indigo-500 font-bold ml-1 svelte-gsxx31"> </span></div></div></form></div></main> <button class="fixed bottom-6 right-6 lg:bottom-10 lg:right-10 bg-green-600 hover:bg-green-700 text-white p-4 lg:p-5 rounded-full shadow-2xl hover:shadow-green-500/20 transform transition-all duration-300 hover:scale-110 active:scale-95 disabled:opacity-50 disabled:grayscale disabled:cursor-not-allowed z-50 group svelte-gsxx31" title="Guardar inasistencias"><!> <!></button></div> <!> <!> <!>',1);function js(P,w){wr(w,!1);const n=()=>xo(Jr,"$theme",we),[we,f]=fo(),z=x(),t=x(),_e=x(),Me="¬°Nueva funci√≥n de filtrado avanzado disponible!",D="¬°Nueva funci√≥n de reporte en Excel disponible!";let le=$t(w,"onBack",8),V=x([]),q=x([]),L=x([]),B=x(!1),C=x(!1),s=x(!1),c=x({docente:localStorage.getItem("lastDocente")||"",materia:"",horas:"",grado:"",fecha:new Date().toISOString().split("T")[0],observaciones:""}),k=x([]),Z=x({}),ye=x({}),U=x(!1),Ne=x(!1),Se=x(!1),We=x(!1);const pt=()=>{i(Ne,!0)},ot=()=>{i(Ne,!1)},at=()=>{i(Se,!0)},te=()=>{i(Se,!1)},p=()=>{i(We,!0)},re=()=>{i(We,!1)};let Ge=x(localStorage.getItem("dismissedInfoInasistenciaContent")!==ko),Ae=x(!0),oe=x(!0);function N(h){return!0}const Q=()=>{localStorage.setItem("dismissedInfoInasistenciaContent",ko),i(Ge,!1)},J=()=>{localStorage.setItem("dismissedFeatureAlertFilters",new Date().toISOString()),i(Ae,!1)},He=()=>{localStorage.setItem("dismissedFeatureAlertFilters",new Date().toISOString()),pt()},je=()=>{localStorage.setItem("dismissedFeatureAlertReport",new Date().toISOString()),i(oe,!1)},pe=()=>{localStorage.setItem("dismissedFeatureAlertReport",new Date().toISOString()),at(),i(oe,!1)};let K=x(JSON.parse(localStorage.getItem("docenteMaterias")||"{}"));const ze=(h,S)=>{!h||!S||(e(K)[h]||he(K,e(K)[h]=[]),e(K)[h].includes(S)||(he(K,e(K)[h]=[...e(K)[h],S]),localStorage.setItem("docenteMaterias",JSON.stringify(e(K)))))},Ze=()=>`https://docs.google.com/spreadsheets/d/${lo}`,Re=()=>{window.open(Ze(),"_blank")},Ue=()=>{window.open(xa,"_blank")},_=[{value:"Sin excusa",label:"Sin excusa",icon:"üö´",bgColor:"bg-red-50",borderColor:"border-red-300",textColor:"text-red-700",darkBgColor:"dark:bg-red-950",darkBorderColor:"dark:border-red-800",darkTextColor:"dark:text-red-300",obligaHoras:!0},{value:"Excusa",label:"Excusa",icon:"üìÑ",bgColor:"bg-blue-50",borderColor:"border-blue-300",textColor:"text-blue-700",darkBgColor:"dark:bg-blue-950",darkBorderColor:"dark:border-blue-800",darkTextColor:"dark:text-blue-300",obligaHoras:!0},{value:"LLegada Tarde",label:"Llegada Tarde",icon:"‚è∞",bgColor:"bg-indigo-50",borderColor:"border-indigo-300",textColor:"text-indigo-700",darkBgColor:"dark:bg-indigo-950",darkBorderColor:"dark:border-indigo-800",darkTextColor:"dark:text-indigo-300",obligaHoras:!1},{value:"Transporte Escolar",label:"Transporte Escolar",icon:"üöå",bgColor:"bg-red-50",borderColor:"border-red-300",textColor:"text-red-700",darkBgColor:"dark:bg-red-950",darkBorderColor:"dark:border-red-800",darkTextColor:"dark:text-red-300",obligaHoras:!0},{value:"Permiso",label:"Permiso",icon:"‚úÖ",bgColor:"bg-green-50",borderColor:"border-green-300",textColor:"text-green-700",darkBgColor:"dark:bg-green-950",darkBorderColor:"dark:border-green-800",darkTextColor:"dark:text-green-300",obligaHoras:!0},{value:"No portar/sin uniforme",label:"No portar/sin uniforme",icon:"üëö",bgColor:"bg-cyan-50",borderColor:"border-cyan-300",textColor:"text-cyan-700",darkBgColor:"dark:bg-cyan-950",darkBorderColor:"dark:border-cyan-800",darkTextColor:"dark:text-cyan-300",obligaHoras:!1},{value:"Pacto de Aula",label:"Pacto de Aula",icon:"ü§ù",bgColor:"bg-purple-50",borderColor:"border-purple-300",textColor:"text-purple-700",darkBgColor:"dark:bg-purple-950",darkBorderColor:"dark:border-purple-800",darkTextColor:"dark:text-purple-300",obligaHoras:!1},{value:"Uso del celular",label:"Uso del celular",icon:"üì±",bgColor:"bg-orange-50",borderColor:"border-orange-300",textColor:"text-orange-700",darkBgColor:"dark:bg-orange-950",darkBorderColor:"dark:border-orange-800",darkTextColor:"dark:text-orange-300",obligaHoras:!1},{value:"Desorden en Clase",label:"Desorden en Clase",icon:"üîä",bgColor:"bg-yellow-50",borderColor:"border-yellow-300",textColor:"text-yellow-700",darkBgColor:"dark:bg-yellow-950",darkBorderColor:"dark:border-yellow-800",darkTextColor:"dark:text-yellow-300",obligaHoras:!1},{value:"Fuga",label:"Fuga",icon:"üèÉ‚Äç‚ôÇÔ∏è",bgColor:"bg-red-100",borderColor:"border-red-400",textColor:"text-red-800",darkBgColor:"dark:bg-red-950",darkBorderColor:"dark:border-red-800",darkTextColor:"dark:text-red-300",obligaHoras:!0},{value:"No realizaci√≥n de Aseo",label:"No realizaci√≥n de Aseo",icon:"üßπ",bgColor:"bg-teal-50",borderColor:"border-teal-300",textColor:"text-teal-700",darkBgColor:"dark:bg-teal-950",darkBorderColor:"dark:border-teal-800",darkTextColor:"dark:text-teal-300",obligaHoras:!1},{value:"Licencia por salud",label:"Licencia por salud",icon:"üè•",bgColor:"bg-cyan-50",borderColor:"border-cyan-300",textColor:"text-cyan-700",darkBgColor:"dark:bg-cyan-950",darkBorderColor:"dark:border-cyan-800",darkTextColor:"dark:text-cyan-300",obligaHoras:!0},{value:"Incapacidad",label:"Incapacidad",icon:"ü©∫",bgColor:"bg-pink-50",borderColor:"border-pink-300",textColor:"text-pink-700",darkBgColor:"dark:bg-pink-950",darkBorderColor:"dark:border-pink-800",darkTextColor:"dark:text-pink-300",obligaHoras:!0},{value:"Reuni√≥n interna",label:"Reuni√≥n interna",icon:"üë•",bgColor:"bg-zinc-50",borderColor:"border-zinc-300",textColor:"text-zinc-700",darkBgColor:"dark:bg-zinc-950",darkBorderColor:"dark:border-zinc-800",darkTextColor:"dark:text-zinc-300",obligaHoras:!1},{value:"Ignorar",label:"Ignorar",icon:"üö´",bgColor:"bg-zinc-50",borderColor:"border-zinc-300",textColor:"text-zinc-700",darkBgColor:"dark:bg-zinc-950",darkBorderColor:"dark:border-zinc-800",darkTextColor:"dark:text-zinc-300",obligaHoras:!1},{value:"Psicoorientaci√≥n",label:"Psicoorientaci√≥n",icon:"üß†",bgColor:"bg-green-50",borderColor:"border-green-300",textColor:"text-green-700",darkBgColor:"dark:bg-green-950",darkBorderColor:"dark:border-green-800",darkTextColor:"dark:text-green-300",obligaHoras:!1},{value:"Retirado por el acudiente",label:"Retirado por el acudiente",icon:"üë®",bgColor:"bg-green-50",borderColor:"border-green-300",textColor:"text-green-700",darkBgColor:"dark:bg-green-950",darkBorderColor:"dark:border-green-800",darkTextColor:"dark:text-green-300",obligaHoras:!1}],d=()=>{Jr.update(h=>h==="light"?"dim":h==="dim"?"dark":"light")},y=async()=>{i(B,!0),i(C,!0),i(s,!0);try{const[h,S,de]=await Promise.all([Kr(),Zr(),Qr()]);i(V,h),i(q,S),i(L,de)}catch(h){console.error("Error cargando datos iniciales:",h)}finally{i(B,!1),i(C,!1),i(s,!1)}},$=(h,S)=>{i(k,e(k).filter(de=>!(de.nombre===h&&de.motivo===S)))},O=(h,S,de)=>{if(S===""||S==="Ignorar"){i(k,e(k).filter(ct=>ct.nombre!==h));return}const Ee=_.find(ct=>ct.value===S);if(!Ee)return;let st=e(Z)[h]||e(c).horas;if(Ee.obligaHoras||(st="0"),Ee.obligaHoras&&i(k,e(k).filter(ct=>{if(ct.nombre!==h)return!0;const A=_.find(lt=>lt.value===ct.motivo);return A&&!A.obligaHoras})),!e(k).some(ct=>ct.nombre===h&&ct.motivo===S)){const ct=e(k).find(A=>A.nombre===h)?.observaciones||"";i(k,[...e(k),{nombre:h,motivo:S,horas:st,observaciones:ct}])}},G=(h,S)=>{i(k,e(k).map(de=>de.nombre===h?{...de,observaciones:S}:de))},ee=h=>{he(ye,e(ye)[h]=!e(ye)[h])},De=(h,S)=>{he(Z,e(Z)[h]=S),i(k,e(k).map(de=>{if(de.nombre===h){const Ee=_.find(st=>st.value===de.motivo);if(Ee&&Ee.obligaHoras)return{...de,horas:S}}return de}))},Y=async h=>{if(h.preventDefault(),!(e(U)||e(k).length===0)){i(U,!0);try{const S=new Date().toISOString(),de=e(k).filter(Ee=>Ee.motivo&&Ee.motivo!=="Ignorar").map(Ee=>[S,e(c).docente,e(c).fecha,Ee.horas,e(c).materia,Ee.motivo,e(c).grado,Ee.nombre,Ee.observaciones||e(c).observaciones]);await ma({spreadsheetId:lo,worksheetTitle:ho,inasistencias:de}),ze(e(c).docente,e(c).materia),await Dt.fire({icon:"success",title:"¬°√âxito!",text:`${e(k).length} inasistencia(s) registrada(s) exitosamente`,timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),i(c,{...e(c),grado:"",fecha:new Date().toISOString().split("T")[0],observaciones:"",horas:""}),i(k,[]),i(Z,{}),i(ye,{})}catch(S){console.error("Error enviando:",S),await Dt.fire({icon:"error",title:"Error",text:"Error al registrar la inasistencia",confirmButtonColor:"#ef4444"})}finally{i(U,!1)}}};kr(()=>{y(),i(Ae,N()),i(oe,N())}),Fe(()=>e(c),()=>{e(c).docente&&localStorage.setItem("lastDocente",e(c).docente)}),Fe(()=>(e(c),e(q),e(K)),()=>{i(z,e(c).docente?[...e(q)].sort((h,S)=>{const de=e(K)[e(c).docente]?.includes(h.materia),Ee=e(K)[e(c).docente]?.includes(S.materia);return de&&!Ee?-1:!de&&Ee?1:h.materia.localeCompare(S.materia)}):e(q))}),Fe(()=>{},()=>{i(t,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Fe(()=>(e(c),e(L)),()=>{i(_e,e(c).grado?e(L).filter(h=>h.grado.toString()===e(c).grado):[])}),Ar(),Er();var F=Ns(),W=Vt(F),ue=o(W),xe=o(ue),Ve=o(xe),Ke=o(Ve),ve=a(Ke,2),M=a(Ve,2),j=o(M),ie=a(j,2),Te=a(o(ie),4);{var g=h=>{var S=fs();v(h,S)};X(Te,h=>{e(Ae)&&h(g)})}var T=a(ie,2),ae=a(o(T),4);{var ce=h=>{var S=xs();v(h,S)};X(ae,h=>{e(oe)&&h(ce)})}var Qe=a(T,2),xt=a(Qe,2),zt=a(xt,2),Le=a(zt,2),Lt=o(Le),Tt=o(Lt);{var Yt=h=>{var S=hs();v(h,S)},Zt=h=>{var S=ms();v(h,S)},Qt=h=>{var S=_s();v(h,S)};X(Tt,h=>{n()==="dark"?h(Yt):n()==="light"?h(Zt,1):h(Qt,!1)})}var Ct=a(Tt,2),Ot=o(Ct),qt=a(ue,2),Jt=o(qt),Nt=o(Jt);{var H=h=>{var S=ys(),de=a(o(S),2),Ee=a(o(de),2),st=o(Ee),kt=a(de,2);E(()=>b(st,ko)),R("click",kt,Q),v(h,S)};X(Nt,h=>{e(Ge)&&h(H)})}var se=a(Nt,2);uo(se,{featureMessage:Me,description:"Ahora puedes filtrar tus datos de forma avanzada. ¬°Pru√©balo!",onTryNow:He,onDismiss:J,targetSelector:"#filter-button-target",showPopup:!1,colorTheme:"blue"});var ke=a(se,2);uo(ke,{featureMessage:D,description:"Ahora puedes generar reportes de inasistencias en formato Excel. ¬°Descarga y analiza tus datos!",onTryNow:pe,onDismiss:je,targetSelector:"#report-button-target",showPopup:!1,colorTheme:"green"});var Ye=a(ke,2),St=o(Ye),Pt=o(St),Pr=o(Pt),vr=a(Pr,2),tr=o(vr),Hr=o(tr);tr.value=tr.__value="";var Ir=a(tr);me(Ir,1,()=>e(V),Ce,(h,S)=>{var de=ks(),Ee=o(de),st={};E(()=>{b(Ee,e(S)),st!==(st=e(S))&&(de.value=(de.__value=e(S))??"")}),v(h,de)});var gr=a(Pt,2),Dr=o(gr),Br=o(Dr),pr=a(Dr,2),rr=o(pr),Gr=o(rr);rr.value=rr.__value="";var Wr=a(rr);me(Wr,1,()=>e(z),Ce,(h,S)=>{const de=Mt(()=>(e(K),e(c),e(S),r(()=>e(K)[e(c).docente]?.includes(e(S).materia))));var Ee=ws(),st=o(Ee),kt={};E(()=>{l(Ee,e(de)?"color: #6366f1; font-weight: 600;":""),b(st,`${e(de)?"‚≠ê ":""}${e(S),r(()=>e(S).materia)??""}`),kt!==(kt=(e(S),r(()=>e(S).materia)))&&(Ee.value=(Ee.__value=(e(S),r(()=>e(S).materia)))??"")}),v(h,Ee)});var zr=a(St,2),ur=o(zr),Fr=o(ur),br=a(Fr,2),Cr=o(br);Cr.value=Cr.__value="";var Mr=a(Cr);Mr.value=Mr.__value="0";var Ur=a(Mr);me(Ur,0,()=>[1,2,3,4],Ce,(h,S)=>{var de=$s(),Ee=o(de),st={};E(kt=>{b(Ee,`${S??""} ${S===1?"Hora":"Horas"}`),st!==(st=kt)&&(de.value=(de.__value=kt)??"")},[()=>r(()=>S.toString())]),v(h,de)});var $e=a(ur,2),Xe=o($e),it=a(Xe,2),Ft=o(it),Ht=o(Ft);Ft.value=Ft.__value="";var Vr=a(Ft);me(Vr,1,()=>(e(L),r(()=>[...new Set(e(L).map(h=>h.grado.toString()))])),Ce,(h,S)=>{var de=Cs(),Ee=o(de),st={};E(kt=>{b(Ee,kt),st!==(st=e(S))&&(de.value=(de.__value=e(S))??"")},[()=>(e(S),r(()=>e(S).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),v(h,de)});var be=a(zr,2);{var Pe=h=>{var S=Fs(),de=o(S),Ee=o(de),st=a(de,2),kt=o(st);me(kt,1,()=>e(_e),lt=>lt.nombre,(lt,Je)=>{const et=Mt(()=>(e(k),e(Je),r(()=>e(k).filter(gt=>gt.nombre===e(Je).nombre)))),wt=Mt(()=>(Ie(e(et)),r(()=>e(et).length>0))),Et=Mt(()=>(Ie(e(et)),r(()=>e(et).some(gt=>{const vt=_.find(rt=>rt.value===gt.motivo);return vt&&vt.obligaHoras}))));var ar=Bs(),jt=Vt(ar);let Wt;var sr=o(jt),cr=o(sr),dt=o(cr),Bt=a(cr,2);me(Bt,5,()=>e(et),Ce,(gt,vt)=>{const rt=Mt(()=>(e(vt),r(()=>_.find(to=>to.value===e(vt).motivo))));var yr=no(),oo=Vt(yr);{var eo=to=>{var yo=Ss(),Io=o(yo),Ro=o(Io),Do=a(Io),Lo=a(Do);E(()=>{Ut(yo,1,(Ie(e(rt)),r(()=>`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold border ${e(rt).bgColor} ${e(rt).textColor} ${e(rt).borderColor} ${e(rt).darkBgColor} ${e(rt).darkTextColor} ${e(rt).darkBorderColor}`)),"svelte-gsxx31"),b(Ro,(Ie(e(rt)),r(()=>e(rt).icon))),b(Do,` ${Ie(e(rt)),r(()=>e(rt).label)??""} `)}),R("click",Lo,()=>$(e(Je).nombre,e(vt).motivo)),v(to,yo)};X(oo,to=>{e(rt)&&to(eo)})}v(gt,yr)});var xr=a(sr,2),bt=o(xr);let hr;var It=o(bt),Kt=o(It);Kt.value=Kt.__value="";var mr=a(Kt);mr.value=mr.__value="0";var Rr=a(mr);me(Rr,0,()=>[1,2,3,4],Ce,(gt,vt)=>{var rt=As(),yr=o(rt),oo={};E(eo=>{b(yr,vt),oo!==(oo=eo)&&(rt.value=(rt.__value=eo)??"")},[()=>r(()=>vt.toString())]),v(gt,rt)});var Xt;Go(It);var Lr=a(It,2),_r=a(bt,2),lr=o(_r),Rt=o(lr);Rt.value=Rt.__value="";var ft=a(Rt);ft.value=ft.__value="Ignorar";var mt=a(ft);me(mt,1,()=>_,Ce,(gt,vt)=>{const rt=Mt(()=>(Ie(e(et)),e(vt),r(()=>e(et).some(to=>to.motivo===e(vt).value))));var yr=Es(),oo=o(yr),eo={};E(()=>{yr.disabled=e(rt),b(oo,`${e(vt),r(()=>e(vt).icon)??""} ${e(vt),r(()=>e(vt).label)??""} ${e(rt)?"‚úì":""}`),eo!==(eo=(e(vt),r(()=>e(vt).value)))&&(yr.value=(yr.__value=(e(vt),r(()=>e(vt).value)))??"")}),v(gt,yr)}),lr.value=lr.__value="";var nr=a(lr,2),Xr=a(xr,2);{var mo=gt=>{var vt=Is(),rt=o(vt);E(()=>l(rt,`color: ${Ie(e(et)),e(t),r(()=>e(et)[0]?.observaciones?"rgb(var(--text-primary))":e(t).icon)??""};`)),R("click",rt,()=>ee(e(Je).nombre)),v(gt,vt)};X(Xr,gt=>{e(wt)&&gt(mo)})}var _o=a(jt,2);{var jo=gt=>{var vt=Ds(),rt=o(vt);E(()=>{Vo(rt,(Ie(e(et)),r(()=>e(et)[0]?.observaciones||""))),l(rt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`)}),R("input",rt,yr=>G(e(Je).nombre,yr.currentTarget.value)),v(gt,vt)};X(_o,gt=>{Ie(e(wt)),e(ye),e(Je),Ie(e(et)),r(()=>e(wt)&&(e(ye)[e(Je).nombre]||e(et)[0]?.observaciones))&&gt(jo)})}E(gt=>{Wt=Ut(jt,1,"flex flex-col sm:flex-row sm:items-center justify-between p-4 border rounded-xl transition-all duration-200 gap-4 svelte-gsxx31",null,Wt,{"ring-2":e(wt),"ring-indigo-500":e(wt)}),l(jt,`background-color: ${e(t),r(()=>e(t).bg)??""}; border-color: ${Ie(e(wt)),e(t),r(()=>e(wt)?"transparent":e(t).border)??""};`),l(cr,`color: ${e(t),r(()=>e(t).text)??""};`),b(dt,(e(Je),r(()=>e(Je).nombre))),hr=Ut(bt,1,"relative w-full sm:w-32 transition-opacity duration-200 svelte-gsxx31",null,hr,{"opacity-40":!e(Et)}),It.disabled=!e(Et),l(It,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),Xt!==(Xt=gt)&&(It.value=(It.__value=gt)??"",Uo(It,gt)),l(Lr,`color: ${e(t),r(()=>e(t).icon)??""};`),l(lr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(nr,`color: ${e(t),r(()=>e(t).icon)??""};`)},[()=>(Ie(e(et)),e(Z),e(Je),e(c),r(()=>e(et).find(gt=>{const vt=_.find(rt=>rt.value===gt.motivo);return vt&&vt.obligaHoras})?.horas||e(Z)[e(Je).nombre]||e(c).horas))]),R("change",It,gt=>De(e(Je).nombre,gt.currentTarget.value)),R("change",lr,gt=>{O(e(Je).nombre,gt.currentTarget.value),gt.currentTarget.value=""}),v(lt,ar)});var ct=a(kt,2);{var A=lt=>{var Je=zs();E(()=>l(Je,`color: ${e(t),r(()=>e(t).text)??""};`)),v(lt,Je)};X(ct,lt=>{e(_e),r(()=>e(_e).length===0)&&lt(A)})}E(()=>{l(de,`color: ${e(t),r(()=>e(t).label)??""};`),b(Ee,`Estudiantes del Grado ${e(c),r(()=>e(c).grado)??""}`),l(st,`border-color: ${e(t),r(()=>e(t).border)??""};`)}),v(h,S)};X(be,h=>{e(c),r(()=>e(c).grado&&e(c).horas!=="")&&h(Pe)})}var tt=a(be,2),yt=o(tt),At=o(yt),or=a(At,2),Yr=a(yt,2),Tr=o(Yr),Or=a(Tr,2),qr=a(tt,2),Sr=o(qr),Nr=a(o(Sr)),ge=o(Nr),Gt=a(qt,2),er=o(Gt);{var fr=h=>{var S=Ms();v(h,S)},jr=h=>{var S=Ts();v(h,S)};X(er,h=>{e(U)?h(fr):h(jr,!1)})}var ir=a(er,2);{var u=h=>{var S=Os(),de=o(S);E(()=>b(de,(e(k),r(()=>e(k).length)))),v(h,S)};X(ir,h=>{e(U),e(k),r(()=>!e(U)&&e(k).length>0)&&h(u)})}var I=a(W,2);{var ne=h=>{Ua(h,{onClose:ot,get selectedDocente(){return e(c),r(()=>e(c).docente)}})};X(I,h=>{e(Ne)&&h(ne)})}var fe=a(I,2);{var Be=h=>{bs(h,{onClose:te,get initialDocente(){return e(c),r(()=>e(c).docente)}})};X(fe,h=>{e(Se)&&h(Be)})}var qe=a(fe,2);{var ut=h=>{No(h,{onClose:re,get initialDocente(){return e(c),r(()=>e(c).docente)}})};X(qe,h=>{e(We)&&h(ut)})}E(()=>{l(W,`background-color: ${e(t),r(()=>e(t).bg)??""};`),l(ue,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),_t(Ke,"src",ro),l(ve,`color: ${e(t),r(()=>e(t).text)??""};`),l(j,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(ie,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(T,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(Qe,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(xt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(zt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(Lt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),b(Ot,n()),l(Jt,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),l(Pr,`color: ${e(t),r(()=>e(t).label)??""};`),vr.disabled=e(B),l(vr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),b(Hr,e(B)?"Cargando...":"Seleccione docente"),l(Br,`color: ${e(t),r(()=>e(t).label)??""};`),pr.disabled=e(C),l(pr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),b(Gr,e(C)?"Cargando...":"Seleccione materia"),l(Fr,`color: ${e(t),r(()=>e(t).label)??""};`),l(br,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(Xe,`color: ${e(t),r(()=>e(t).label)??""};`),it.disabled=e(s),l(it,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),b(Ht,e(s)?"Cargando...":"Seleccione grado"),l(At,`color: ${e(t),r(()=>e(t).label)??""};`),l(or,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(Tr,`color: ${e(t),r(()=>e(t).label)??""};`),l(Or,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(qr,`border-color: ${e(t),r(()=>e(t).border)??""};`),l(Sr,`color: ${e(t),r(()=>e(t).label)??""};`),b(ge,(e(k),r(()=>e(k).length))),Gt.disabled=(e(U),e(k),e(c),r(()=>e(U)||e(k).length===0||!e(c).docente||!e(c).materia))}),R("click",j,Re),R("click",ie,pt),R("click",T,at),R("click",Qe,p),R("click",xt,Ue),R("click",zt,function(...h){le()?.apply(this,h)}),R("click",Lt,d),nt(vr,()=>e(c).docente,h=>(he(c,e(c).docente=h),Oe(()=>{e(B),e(t),e(V),e(C),e(z),e(K),e(s),e(L)}))),nt(pr,()=>e(c).materia,h=>(he(c,e(c).materia=h),Oe(()=>{e(B),e(t),e(V),e(C),e(z),e(K),e(s),e(L)}))),nt(br,()=>e(c).horas,h=>(he(c,e(c).horas=h),Oe(()=>{e(B),e(t),e(V),e(C),e(z),e(K),e(s),e(L)}))),nt(it,()=>e(c).grado,h=>(he(c,e(c).grado=h),Oe(()=>{e(B),e(t),e(V),e(C),e(z),e(K),e(s),e(L)}))),dr(or,()=>e(c).fecha,h=>(he(c,e(c).fecha=h),Oe(()=>{e(B),e(t),e(V),e(C),e(z),e(K),e(s),e(L)}))),dr(Or,()=>e(c).observaciones,h=>(he(c,e(c).observaciones=h),Oe(()=>{e(B),e(t),e(V),e(C),e(z),e(K),e(s),e(L)}))),R("submit",Ye,Y),R("click",Gt,Y),v(P,F),$r(),f()}var Rs=m('<div class="flex-1 flex items-center justify-center"><div class="text-center"><div class="animate-spin w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full mx-auto mb-4"></div> <p>Cargando datos...</p></div></div>'),Ls=m('<span class="ml-2 px-2 py-1 text-xs bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full">Activos</span>'),Ps=m("<option> </option>"),Hs=m("<option> </option>"),Gs=m('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">Este docente no tiene registros de materias</p>'),Us=m("<option> </option>"),Vs=m('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">No hay grados para los filtros seleccionados</p>'),Ys=m('<div class="flex-1 flex items-center justify-center"><div class="text-center py-12 px-4"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm sm:text-base">No se encontraron registros con los filtros seleccionados</p></div></div>'),qs=m('<tr class="border-b transition-colors hover:bg-black/5 dark:hover:bg-white/5 text-xs"><td class="p-2"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 text-center"> </td><td class="p-2 text-center"> </td><td class="p-2"><div class="flex items-center gap-2 max-w-[300px]"><span><span> </span></span> <span class="truncate"> </span></div></td><td class="p-2"><span class="truncate block max-w-xs text-xs"> </span></td></tr>'),Js=m('<div><p class="text-xs font-medium mb-1">Observaci√≥n:</p> <p class="text-xs"> </p></div>'),Ws=m('<div class="border rounded-lg p-3 transition-colors hover:bg-black/5 dark:hover:bg-white/5"><div class="flex justify-between items-center mb-2"><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><span><span> </span></span> <p class="text-xs opacity-75"> </p></div></div></div> <div class="flex gap-2 text-[10px] mb-2"><div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="truncate"> </span></div> <div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <span class="truncate"> </span></div></div> <div class="mb-2"><p class="text-xs font-medium mb-1">Anotaci√≥n:</p> <p class="text-xs"> </p></div> <!></div>'),Ks=m('<div class="hidden lg:flex flex-1 flex-col overflow-hidden min-h-0"><div class="flex-1 overflow-auto min-w-full border rounded-lg"><table class="w-full border-collapse text-sm min-w-[900px]"><thead class="sticky top-0 z-10 border-b"><tr><th class="text-left p-2 font-semibold whitespace-nowrap">Fecha</th><th class="text-left p-2 font-semibold whitespace-nowrap">Docente</th><th class="text-left p-2 font-semibold whitespace-nowrap">Materia</th><th class="text-center p-2 font-semibold whitespace-nowrap">Grado</th><th class="text-center p-2 font-semibold whitespace-nowrap">Horas</th><th class="text-left p-2 font-semibold whitespace-nowrap">Anotaci√≥n</th><th class="text-left p-2 font-semibold whitespace-nowrap">Observaci√≥n</th></tr></thead><tbody></tbody></table></div></div> <div class="flex-1 overflow-y-auto lg:hidden px-1"><div class="space-y-2"></div></div>',1),Zs=m('<div class="p-3 sm:p-4 border-b"><div class="flex items-center justify-between mb-2 sm:mb-3"><h3 class="text-lg font-semibold">Filtros <!></h3> <button class="text-sm px-3 py-1 rounded-lg border transition-colors hover:bg-black/5 dark:hover:bg-white/5">Limpiar filtros</button></div> <div class="mb-3 p-1.5 sm:p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg"><p class="text-[10px] sm:text-xs font-medium mb-1.5">R√°pido: Fechas</p> <div class="flex items-center mb-2"><input id="checkFiltrarFecha" type="checkbox" class="w-4 h-4 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 dark:bg-zinc-700"/> <label for="checkFiltrarFecha" class="ml-2 text-xs font-medium">Activar filtro por fechas</label></div> <div class="flex flex-wrap gap-1 sm:gap-2"><button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Hoy</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 7 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 30 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Mes actual</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimo trimestre</button></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"><div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroDocente" class="block text-xs sm:text-sm font-medium">Docente</label> <select id="filtroDocente" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option>Todos los docentes</option><!></select></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroMateria" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroMateria" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroGrado" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroGrado" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroAnotacion" class="block text-xs sm:text-sm font-medium">B√∫squeda en anotaci√≥n</label> <input id="filtroAnotacion" type="text" placeholder="Buscar en anotaciones..." class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"/></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaInicio" class="block text-xs sm:text-sm font-medium">Fecha desde</label> <input id="filtroFechaInicio" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaFin" class="block text-xs sm:text-sm font-medium">Fecha hasta</label> <input id="filtroFechaFin" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div></div></div></div> <div class="flex-1 flex flex-col p-2 sm:p-4 min-h-0"><div class="mb-4 px-0 sm:px-3"><p class="text-sm">Se encontraron <span class="font-bold text-indigo-500"> </span> registros</p></div> <!></div>',1),Qs=m('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4" role="button" tabindex="0" aria-label="Cerrar ventana"><div class="w-full max-w-7xl max-h-[95vh] bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl overflow-hidden flex flex-col"><div class="flex items-center justify-between p-3 sm:p-4 border-b"><div class="flex items-center gap-3"><img alt="EIE Logo" class="h-8 w-auto hidden sm:block"/> <div><h2 class="text-lg sm:text-xl font-bold">Anotaciones de Clase</h2> <p class="text-xs hidden sm:block">Filtra y consulta los registros</p></div></div> <div class="flex items-center gap-3"><button class="inline-flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Exportar CSV</button> <button class="p-2 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5" aria-label="Cerrar"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div> <div class="flex-1 overflow-hidden flex flex-col min-h-0"><!></div></div></div>');function Xs(P,w){wr(w,!1);const n=x(),we=x(),f=x(),z=x(),t=x();let _e=$t(w,"onClose",8),Me=$t(w,"selectedDocente",8,""),D=x([]),le=[],V=[],q=[],L=x(!1),B=x(!1),C=x([]),s=x({docente:Me()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",anotacion:""});const c=()=>{const _=new Date,d=new Date(_.getFullYear(),_.getMonth()-1,_.getDate()),y=$=>{const O=$.getFullYear(),G=String($.getMonth()+1).padStart(2,"0"),ee=String($.getDate()).padStart(2,"0");return`${O}-${G}-${ee}`};he(s,e(s).fechaInicio=y(d)),Oe(()=>{e(t),e(U),e(n),e(f)}),he(s,e(s).fechaFin=y(_)),Oe(()=>{e(t),e(U),e(n),e(f)})},k=_=>{const d=new Date;let y;switch(_){case"hoy":y=new Date(d);break;case"semana":y=new Date(d),y.setDate(d.getDate()-7);break;case"mes":y=new Date(d),y.setDate(d.getDate()-30);break;case"mes_actual":y=new Date(d.getFullYear(),d.getMonth(),1);break;case"trimestre":y=new Date(d),y.setDate(d.getDate()-90);break;default:c();return}const $=O=>{const G=O.getFullYear(),ee=String(O.getMonth()+1).padStart(2,"0"),De=String(O.getDate()).padStart(2,"0");return`${G}-${ee}-${De}`};he(s,e(s).fechaInicio=$(y)),Oe(()=>{e(t),e(U),e(n),e(f)}),he(s,e(s).fechaFin=$(d)),Oe(()=>{e(t),e(U),e(n),e(f)}),i(B,!0)},Z=[{value:"Estrategias de Ense√±anza-Aprendizaje",icon:"üìö",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},{value:"Evaluaci√≥n y Verificaci√≥n de Saberes",icon:"üìù",color:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200"},{value:"Enfoque STEM+ y Contexto Rural",icon:"üî¨",color:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200"},{value:"Pr√°cticas de Laboratorio y Mantenimiento",icon:"üîß",color:"bg-rose-100 text-rose-800 dark:bg-rose-900 dark:text-rose-200"},{value:"Ciudadan√≠a Digital y √âtica",icon:"üíª",color:"bg-violet-100 text-violet-800 dark:bg-violet-900 dark:text-violet-200"},{value:"Pensamiento Computacional y Programaci√≥n",icon:"üíª",color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"},{value:"Recursos Anal√≥gicos y Contingencias",icon:"üìã",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},{value:"Ofim√°tica y Competencias Productivas",icon:"üñ•Ô∏è",color:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200"},{value:"Gesti√≥n Administrativa y Proyectos Transversales",icon:"üìä",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}],ye=_=>{for(const d of Z)if(_.includes(d.value))return d;return{icon:"üìù",color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};let U=x([]),Ne=x([]),Se=x([]),We=x([]);const pt=async()=>{i(L,!0);try{const[_,d,y,$]=await Promise.all([Oo({spreadsheetId:bo,worksheetTitle:Ao}),Kr(),Zr(),Qr()]),O=Y=>{if(!Y?.records||!Array.isArray(Y.records))return[];const F=Y.records[0]?.values||[];return Y.records.slice(1).map(ue=>{const xe=ue.values||[];return{timestamp:xe[0]||"",fecha:xe[1]||"",docente:xe[2]||"",materia:xe[3]||"",grado:xe[4]||"",horas:xe[5]||"",anotacion:xe[6]||"",observacion:xe[7]||""}}).filter(ue=>ue.docente&&ue.fecha)},G=Y=>Array.isArray(Y)?Y:Y?.data&&Array.isArray(Y.data)?Y.data:Y?.rows&&Array.isArray(Y.rows)?Y.rows:Y?.values&&Array.isArray(Y.values)?Y.values:Y?.anotaciones&&Array.isArray(Y.anotaciones)?Y.anotaciones:[];i(D,O(_)),le=G(d),V=G(y),q=G($),i(U,e(D).length>0?[...new Set(e(D).map(Y=>Y.docente).filter(Boolean))].sort():[]),i(Ne,e(D).length>0?[...new Set(e(D).map(Y=>Y.materia).filter(Boolean))].sort():[]);const ee=[...new Set(q.map(Y=>(typeof Y=="string"?Y:Y.grado||"").toString()).filter(Boolean))],De=e(D).length>0?e(D).map(Y=>Y.grado).filter(Boolean):[];i(Se,[...new Set([...ee,...De])].sort((Y,F)=>{const W=parseInt(Y),ue=parseInt(F);return!isNaN(W)&&!isNaN(ue)?W-ue:Y.localeCompare(F)})),i(We,e(D).length>0?[...new Set(e(D).map(Y=>Y.anotacion).filter(Boolean))].sort():[]),c(),console.log("Datos cargados:",{anotaciones:e(D).length,docentes:le.length,docentesUnicos:e(U).length,materiasUnicas:e(Ne).length,gradosUnicos:e(Se).length,anotacionesUnicas:e(We).length})}catch(_){console.error("Error cargando datos:",_),await Dt.fire({icon:"error",title:"Error",text:"No se pudieron cargar los datos de anotaciones",confirmButtonColor:"#ef4444"})}finally{i(L,!1)}},ot=()=>{i(s,{docente:Me()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",anotacion:""}),c(),i(B,!1)},at=()=>{if(e(C).length===0){Dt.fire({icon:"warning",title:"Sin datos",text:"No hay datos para exportar",confirmButtonColor:"#f59e0b"});return}const d=[["Fecha","Docente","Materia","Grado","Horas","Anotaci√≥n","Observaci√≥n"].join(","),...e(C).map(G=>[G.fecha,`"${G.docente}"`,`"${G.materia}"`,G.grado,G.horas,`"${G.anotacion}"`,`"${G.observacion}"`].join(","))].join(`
`),y=new Blob([d],{type:"text/csv;charset=utf-8;"}),$=document.createElement("a"),O=URL.createObjectURL(y);$.setAttribute("href",O),$.setAttribute("download",`anotaciones_${new Date().toISOString().split("T")[0]}.csv`),$.style.visibility="hidden",document.body.appendChild($),$.click(),document.body.removeChild($)},te=_=>{try{const[d,y,$]=_.split("-");return d&&y&&$?`${$}/${y}/${d}`:_}catch{return _}},p=(_,d=50)=>_.length<=d?_:_.substring(0,d)+"...";kr(()=>{pt()}),Fe(()=>(e(s),e(D),e(Ne)),()=>{i(n,e(s).docente?[...new Set(e(D).filter(_=>_.docente===e(s).docente).map(_=>_.materia).filter(Boolean))].sort():e(Ne))}),Fe(()=>(e(s),e(D),e(Se)),()=>{i(we,e(s).docente?[...new Set(e(D).filter(_=>_.docente===e(s).docente).map(_=>_.grado).filter(Boolean))].sort((_,d)=>{const y=parseInt(_),$=parseInt(d);return!isNaN(y)&&!isNaN($)?y-$:_.localeCompare(d)}):e(Se))}),Fe(()=>(e(s),e(D),e(we)),()=>{i(f,e(s).materia?[...new Set(e(D).filter(_=>_.materia===e(s).materia).map(_=>_.grado).filter(Boolean))].sort((_,d)=>{const y=parseInt(_),$=parseInt(d);return!isNaN(y)&&!isNaN($)?y-$:_.localeCompare(d)}):e(we))}),Fe(()=>(e(s),e(D),e(We)),()=>{i(z,e(s).docente||e(s).materia||e(s).grado?[...new Set(e(D).filter(_=>!(e(s).docente&&_.docente!==e(s).docente||e(s).materia&&_.materia!==e(s).materia||e(s).grado&&_.grado!==e(s).grado)).map(_=>_.anotacion).filter(Boolean))].sort():e(We))}),Fe(()=>{},()=>{i(t,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Fe(()=>(e(D),e(s),e(B)),()=>{i(C,e(D).filter(_=>{if(e(s).docente&&_.docente!==e(s).docente||e(s).materia&&_.materia!==e(s).materia||e(s).grado&&_.grado!==e(s).grado||e(s).anotacion&&!_.anotacion.toLowerCase().includes(e(s).anotacion.toLowerCase()))return!1;if(e(B)){const d=_.fecha;if(e(s).fechaInicio&&d<e(s).fechaInicio||e(s).fechaFin&&d>e(s).fechaFin)return!1}return!0}))}),Fe(()=>(e(B),e(s)),()=>{e(B)&&(!e(s).fechaInicio||!e(s).fechaFin)&&c()}),Ar(),Er();var re=Qs(),Ge=o(re),Ae=o(Ge),oe=o(Ae),N=o(oe),Q=a(N,2),J=o(Q),He=a(J,2),je=a(oe,2),pe=o(je),K=a(pe,2),ze=a(Ae,2),Ze=o(ze);{var Re=_=>{var d=Rs(),y=o(d),$=a(o(y),2);E(()=>l($,`color: ${e(t),r(()=>e(t).text)??""};`)),v(_,d)},Ue=_=>{var d=Zs(),y=Vt(d),$=o(y),O=o($),G=a(o(O));{var ee=$e=>{var Xe=Ls();v($e,Xe)};X(G,$e=>{e(s),r(()=>e(s).docente||e(s).materia||e(s).grado||e(s).anotacion||e(s).fechaInicio||e(s).fechaFin)&&$e(ee)})}var De=a(O,2),Y=a($,2),F=o(Y),W=a(F,2),ue=o(W),xe=a(ue,2),Ve=a(W,2),Ke=o(Ve),ve=a(Ke,2),M=a(ve,2),j=a(M,2),ie=a(j,2),Te=a(Y,2),g=o(Te),T=o(g),ae=o(T),ce=a(ae,2),Qe=o(ce);Qe.value=Qe.__value="";var xt=a(Qe);me(xt,1,()=>e(U),Ce,($e,Xe)=>{var it=Ps(),Ft=o(it),Ht={};E(()=>{b(Ft,e(Xe)),Ht!==(Ht=e(Xe))&&(it.value=(it.__value=e(Xe))??"")}),v($e,it)});var zt=a(T,2),Le=o(zt),Lt=o(Le),Tt=a(Le,2),Yt=o(Tt),Zt=o(Yt);Yt.value=Yt.__value="";var Qt=a(Yt);me(Qt,1,()=>e(n),Ce,($e,Xe)=>{var it=Hs(),Ft=o(it),Ht={};E(()=>{b(Ft,e(Xe)),Ht!==(Ht=e(Xe))&&(it.value=(it.__value=e(Xe))??"")}),v($e,it)});var Ct=a(Tt,2);{var Ot=$e=>{var Xe=Gs();v($e,Xe)};X(Ct,$e=>{e(s),e(n),r(()=>e(s).docente&&e(n).length===0)&&$e(Ot)})}var qt=a(g,2),Jt=o(qt),Nt=o(Jt),H=o(Nt),se=a(Nt,2),ke=o(se),Ye=o(ke);ke.value=ke.__value="";var St=a(ke);me(St,1,()=>e(f),Ce,($e,Xe)=>{var it=Us(),Ft=o(it),Ht={};E(()=>{b(Ft,e(Xe)),Ht!==(Ht=e(Xe))&&(it.value=(it.__value=e(Xe))??"")}),v($e,it)});var Pt=a(se,2);{var Pr=$e=>{var Xe=Vs();v($e,Xe)};X(Pt,$e=>{e(s),e(f),r(()=>(e(s).docente||e(s).materia)&&e(f).length===0)&&$e(Pr)})}var vr=a(Jt,2),tr=o(vr),Hr=a(tr,2),Ir=a(qt,2),gr=o(Ir),Dr=o(gr),Br=a(Dr,2),pr=a(gr,2),rr=o(pr),Gr=a(rr,2),Wr=a(y,2),zr=o(Wr),ur=o(zr),Fr=a(o(ur)),br=o(Fr),Cr=a(zr,2);{var Mr=$e=>{var Xe=Ys(),it=o(Xe),Ft=o(it),Ht=a(Ft,2);E(()=>{l(Ft,`color: ${e(t),r(()=>e(t).icon)??""};`),l(Ht,`color: ${e(t),r(()=>e(t).text)??""};`)}),v($e,Xe)},Ur=$e=>{var Xe=Ks(),it=Vt(Xe),Ft=o(it),Ht=o(Ft),Vr=o(Ht),be=o(Vr),Pe=o(be),tt=a(Pe),yt=a(tt),At=a(yt),or=a(At),Yr=a(or),Tr=a(Yr),Or=a(Vr);me(Or,5,()=>e(C),Ce,(Nr,ge)=>{const Gt=Mt(()=>(e(ge),r(()=>ye(e(ge).anotacion))));var er=qs(),fr=o(er),jr=o(fr),ir=a(fr),u=o(ir),I=a(ir),ne=o(I),fe=a(I),Be=o(fe),qe=a(fe),ut=o(qe),h=a(qe),S=o(h),de=o(S),Ee=o(de),st=o(Ee),kt=a(de,2),ct=o(kt),A=a(h),lt=o(A),Je=o(lt);E((et,wt)=>{l(er,`border-color: ${e(t),r(()=>e(t).border)??""};`),l(fr,`color: ${e(t),r(()=>e(t).text)??""};`),b(jr,et),l(ir,`color: ${e(t),r(()=>e(t).text)??""};`),_t(ir,"title",(e(ge),r(()=>e(ge).docente))),b(u,(e(ge),r(()=>e(ge).docente))),l(I,`color: ${e(t),r(()=>e(t).text)??""};`),_t(I,"title",(e(ge),r(()=>e(ge).materia))),b(ne,(e(ge),r(()=>e(ge).materia))),l(fe,`color: ${e(t),r(()=>e(t).text)??""};`),b(Be,(e(ge),r(()=>e(ge).grado))),l(qe,`color: ${e(t),r(()=>e(t).text)??""};`),b(ut,(e(ge),r(()=>e(ge).horas))),l(h,`color: ${e(t),r(()=>e(t).text)??""};`),Ut(de,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Ie(e(Gt)),r(()=>e(Gt).color)??""} flex-shrink-0`),b(st,(Ie(e(Gt)),r(()=>e(Gt).icon))),_t(kt,"title",(e(ge),r(()=>e(ge).anotacion))),b(ct,wt),l(A,`color: ${e(t),r(()=>e(t).text)??""};`),b(Je,(e(ge),r(()=>e(ge).observacion||"-")))},[()=>(e(ge),r(()=>te(e(ge).fecha))),()=>(e(ge),r(()=>p(e(ge).anotacion,100)))]),v(Nr,er)});var qr=a(it,2),Sr=o(qr);me(Sr,5,()=>e(C),Ce,(Nr,ge)=>{const Gt=Mt(()=>(e(ge),r(()=>ye(e(ge).anotacion))));var er=Ws(),fr=o(er),jr=o(fr),ir=o(jr),u=o(ir),I=o(u),ne=o(I),fe=a(u,2),Be=o(fe),qe=a(fr,2),ut=o(qe),h=a(o(ut),2),S=o(h),de=a(ut,2),Ee=a(o(de),2),st=o(Ee),kt=a(qe,2),ct=o(kt),A=a(ct,2),lt=o(A),Je=a(kt,2);{var et=wt=>{var Et=Js(),ar=o(Et),jt=a(ar,2),Wt=o(jt);E(sr=>{l(ar,`color: ${e(t),r(()=>e(t).label)??""};`),l(jt,`color: ${e(t),r(()=>e(t).text)??""};`),_t(jt,"title",(e(ge),r(()=>e(ge).observacion))),b(Wt,sr)},[()=>(e(ge),r(()=>p(e(ge).observacion,150)))]),v(wt,Et)};X(Je,wt=>{e(ge),r(()=>e(ge).observacion)&&wt(et)})}E((wt,Et)=>{l(er,`border-color: ${e(t),r(()=>e(t).cardBorder)??""}; background-color: ${e(t),r(()=>e(t).cardBg)??""};`),Ut(u,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium ${Ie(e(Gt)),r(()=>e(Gt).color)??""} flex-shrink-0`),b(ne,(Ie(e(Gt)),r(()=>e(Gt).icon))),l(fe,`color: ${e(t),r(()=>e(t).label)??""};`),b(Be,`${e(ge),r(()=>e(ge).grado)??""} ‚Ä¢ ${wt??""} ‚Ä¢ ${e(ge),r(()=>e(ge).horas)??""}h`),l(qe,`color: ${e(t),r(()=>e(t).text)??""};`),b(S,(e(ge),r(()=>e(ge).docente))),_t(Ee,"title",(e(ge),r(()=>e(ge).materia))),b(st,(e(ge),r(()=>e(ge).materia))),l(ct,`color: ${e(t),r(()=>e(t).label)??""};`),l(A,`color: ${e(t),r(()=>e(t).text)??""};`),_t(A,"title",(e(ge),r(()=>e(ge).anotacion))),b(lt,Et)},[()=>(e(ge),r(()=>te(e(ge).fecha))),()=>(e(ge),r(()=>p(e(ge).anotacion,150)))]),v(Nr,er)}),E(()=>{l(Ft,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),l(Vr,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""};`),l(Pe,`color: ${e(t),r(()=>e(t).text)??""};`),l(tt,`color: ${e(t),r(()=>e(t).text)??""};`),l(yt,`color: ${e(t),r(()=>e(t).text)??""};`),l(At,`color: ${e(t),r(()=>e(t).text)??""};`),l(or,`color: ${e(t),r(()=>e(t).text)??""};`),l(Yr,`color: ${e(t),r(()=>e(t).text)??""};`),l(Tr,`color: ${e(t),r(()=>e(t).text)??""};`)}),v($e,Xe)};X(Cr,$e=>{e(C),r(()=>e(C).length===0)?$e(Mr):$e(Ur,!1)})}E(()=>{l(y,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),l(O,`color: ${e(t),r(()=>e(t).text)??""};`),l(De,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(F,`color: ${e(t),r(()=>e(t).text)??""};`),l(xe,`color: ${e(t),r(()=>e(t).text)??""};`),l(Ke,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(ve,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(M,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(j,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(ie,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(ae,`color: ${e(t),r(()=>e(t).label)??""};`),l(ce,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(Le,`color: ${e(t),r(()=>e(t).label)??""};`),b(Lt,`Materia ${e(s),r(()=>e(s).docente?"(del docente)":"")??""}`),l(Tt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),b(Zt,(e(s),r(()=>e(s).docente?"Todas las materias del docente":"Todas las materias"))),l(Nt,`color: ${e(t),r(()=>e(t).label)??""};`),b(H,`Grado ${e(s),r(()=>e(s).docente||e(s).materia?"(filtrado)":"")??""}`),l(se,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),b(Ye,(e(s),r(()=>e(s).docente||e(s).materia?"Todos los grados filtrados":"Todos los grados"))),l(tr,`color: ${e(t),r(()=>e(t).label)??""};`),l(Hr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(Dr,`color: ${e(t),r(()=>e(t).label)??""};`),Br.disabled=!e(B),l(Br,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(rr,`color: ${e(t),r(()=>e(t).label)??""};`),Gr.disabled=!e(B),l(Gr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(ur,`color: ${e(t),r(()=>e(t).label)??""};`),b(br,(e(C),r(()=>e(C).length)))}),R("click",De,ot),So(ue,()=>e(B),$e=>i(B,$e)),R("click",Ke,()=>k("hoy")),R("click",ve,()=>k("semana")),R("click",M,()=>k("mes")),R("click",j,()=>k("mes_actual")),R("click",ie,()=>k("trimestre")),nt(ce,()=>e(s).docente,$e=>(he(s,e(s).docente=$e),Oe(()=>{e(t),e(U),e(n),e(f)}))),nt(Tt,()=>e(s).materia,$e=>(he(s,e(s).materia=$e),Oe(()=>{e(t),e(U),e(n),e(f)}))),nt(se,()=>e(s).grado,$e=>(he(s,e(s).grado=$e),Oe(()=>{e(t),e(U),e(n),e(f)}))),dr(Hr,()=>e(s).anotacion,$e=>(he(s,e(s).anotacion=$e),Oe(()=>{e(t),e(U),e(n),e(f)}))),dr(Br,()=>e(s).fechaInicio,$e=>(he(s,e(s).fechaInicio=$e),Oe(()=>{e(t),e(U),e(n),e(f)}))),dr(Gr,()=>e(s).fechaFin,$e=>(he(s,e(s).fechaFin=$e),Oe(()=>{e(t),e(U),e(n),e(f)}))),v(_,d)};X(Ze,_=>{e(L)?_(Re):_(Ue,!1)})}E(()=>{l(Ge,`background-color: ${e(t),r(()=>e(t).cardBg)??""};`),l(Ae,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),_t(N,"src",ro),l(J,`color: ${e(t),r(()=>e(t).text)??""};`),l(He,`color: ${e(t),r(()=>e(t).label)??""};`),pe.disabled=(e(C),r(()=>e(C).length===0)),l(K,`color: ${e(t),r(()=>e(t).text)??""};`)}),R("click",pe,at),R("click",K,function(..._){_e()?.apply(this,_)}),R("click",re,io(function(..._){_e()?.apply(this,_)})),R("keydown",re,_=>{(_.key==="Enter"||_.key===" ")&&_e()()}),v(P,re),$r()}var el=m("<option> </option>"),tl=m("<option> </option>"),rl=m("<option> </option>"),ol=ht('<svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Cargando...',1),al=ht('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> Aplicar Filtros',1),sl=m('<div class="text-sm opacity-75"> </div>'),ll=m('<div class="flex items-center justify-center py-12"><!></div>'),nl=m('<div class="text-center py-12"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v2a2 2 0 002 2h6a2 2 0 002-2v-2M9 17H5a2 2 0 01-2-2v-6a2 2 0 012-2h4M9 7V5a2 2 0 012-2h6a2 2 0 012 2v2M9 7h10a2 2 0 012 2v6a2 2 0 01-2 2H9M9 7V17m0 0h10"></path></svg> <p class="text-lg font-medium mb-2">No hay datos disponibles</p> <p class="text-sm"> </p></div>'),il=m('<tr class="border-t transition-colors hover:bg-gray-50 dark:hover:bg-gray-800"><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"><div class="truncate"> </div></td></tr>'),cl=m('<tr class="border-t-2 font-bold bg-gray-100 dark:bg-gray-800"><td class="px-4 py-3 text-sm font-bold">TOTAL</td><td class="px-4 py-3 text-sm font-bold text-center"> </td><td class="px-4 py-3 text-sm font-bold text-center"> </td></tr>'),dl=m('<div class="overflow-x-auto rounded-lg border"><table class="w-full"><thead><tr><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Fecha</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Horas</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Anotaci√≥n</th></tr></thead><tbody><!><!></tbody></table></div>'),vl=m('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-2xl" role="document"><div class="flex items-center justify-between p-6 border-b"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v2a2 2 0 002 2h6a2 2 0 002-2v-2M9 17H5a2 2 0 01-2-2v-6a2 2 0 012-2h4M9 7V5a2 2 0 012-2h6a2 2 0 012 2v2M9 7h10a2 2 0 012 2v6a2 2 0 01-2 2H9M9 7V17m0 0h10"></path></svg></div> <div><h2 id="modal-title" class="text-xl font-bold">Generador de Reportes PDF</h2> <p class="text-sm opacity-75">Filtre y genere reportes de anotaciones</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar ventana de reportes" title="Cerrar"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 140px);"><div class="mb-6 p-4 rounded-xl border"><h3 class="text-lg font-semibold mb-4">Filtros</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="space-y-2"><label for="docente-filter" class="block text-sm font-medium">Docente</label> <select id="docente-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los docentes</option><!></select></div> <div class="space-y-2"><label for="materia-filter" class="block text-sm font-medium">Asignatura</label> <select id="materia-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todas las asignaturas</option><!></select></div> <div class="space-y-2"><label for="grado-filter" class="block text-sm font-medium">Grado</label> <select id="grado-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los grados</option><!></select></div></div> <div class="flex gap-3 mt-4"><button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2"><!></button> <button class="px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> Limpiar</button> <button class="ml-auto px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Generar PDF</button></div></div> <div class="mb-4"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold"> </h3> <!></div></div> <!></div></div></div>');function gl(P,w){wr(w,!1);const n=x(),we=x(),f=x();let z=null,t=null,_e=$t(w,"onClose",8),Me=$t(w,"initialDocente",8,""),D=x([]),le=x([]),V=x([]),q=[],L=x([]),B=x(!1);const C=async()=>{if(!z||!t){const[g,T]=await Promise.all([po(()=>import("./pdf-CBBHH09D.js").then(ae=>ae.j),[]),po(()=>import("./pdf-CBBHH09D.js").then(ae=>ae.b),[])]);z=g.default,t=T.default}};let s=x(JSON.parse(localStorage.getItem("docenteMaterias")||"{}")),c=x(""),k=x(""),Z=x("");kr(()=>{Me()&&i(c,Me())}),kr(async()=>{console.log("üöÄ ReportGenerator montado"),await ye()});const ye=async()=>{try{const[g,T,ae]=await Promise.all([Kr(),Zr(),Qr()]);i(D,g),i(le,T),i(V,ae),i(s,JSON.parse(localStorage.getItem("docenteMaterias")||"{}"))}catch(g){console.error("Error cargando datos iniciales:",g)}},U=async()=>{i(B,!0);try{const g={spreadsheetId:bo,worksheetTitle:Ao};e(c)&&(g.docente=e(c)),e(k)&&(g.materia=e(k)),e(Z)&&(g.grado=e(Z)),console.log("üîç Enviando payload a getAnotador:",g);const T=await Oo(g);console.log("üìä Respuesta de getAnotador:",T);let ae=T;if(T&&typeof T=="object"&&(T.data?ae=T.data:T.records?ae=T.records:Array.isArray(T)&&(ae=T)),q=Array.isArray(ae)?ae:[],console.log("‚úÖ Datos procesados:",q.length,"registros"),console.log("üîç Keys del primer registro:",q[0]?Object.keys(q[0]):"No hay registros"),q.length>0&&q[0].values){console.log("üîÑ Transformando datos desde formato .values");const ce=["Marca Temporal","Fecha","Docente","Asignatura","Grado","Horas","Anotaci√≥n"];q=q.map(Qe=>{const xt={"Marca Temporal":"",Fecha:"",Docente:"",Asignatura:"",Grado:"",Horas:"",Anotaci√≥n:""};return ce.forEach((zt,Le)=>{xt[zt]=Qe.values?.[Le]||""}),xt}),console.log("üìä Datos transformados:",q.length,"registros")}Ne()}catch(g){if(console.error("‚ùå Error cargando datos del anotador:",g),g instanceof Error&&console.error("üìã Error details:",g.message),g&&typeof g=="object"&&"response"in g){const T=g.response;T&&(console.error("üåê Response status:",T.status),console.error("üåê Response data:",T.data))}q=[],i(L,[])}finally{i(B,!1)}},Ne=()=>{if(console.log("üîç Aplicando filtros locales:",{totalRegistros:q.length,isArray:Array.isArray(q),docente:e(c),materia:e(k),grado:e(Z)}),!Array.isArray(q)){console.error("‚ùå anotadorData no es un array:",typeof q,q),i(L,[]);return}i(L,q.filter(g=>{if(!g||typeof g!="object")return console.log("‚ö†Ô∏è Registro inv√°lido:",g),!1;const T=!e(c)||g.Docente===e(c),ae=!e(k)||g.Asignatura===e(k),ce=!e(Z)||g.Grado===e(Z);return!T&&e(c)&&console.log("‚ùå No coincide docente:",{expected:e(c),actual:g.Docente}),!ae&&e(k)&&console.log("‚ùå No coincide materia:",{expected:e(k),actual:g.Asignatura}),!ce&&e(Z)&&console.log("‚ùå No coincide grado:",{expected:e(Z),actual:g.Grado}),T&&ae&&ce})),console.log("‚úÖ Registros filtrados:",e(L).length)},Se=()=>{U()},We=()=>{i(c,""),i(k,""),i(Z,""),q=[],i(L,[])},pt=async()=>{if(await C(),e(L).length===0){alert("No hay datos para generar el PDF");return}const g=new z({format:"letter"}),T="Anotador de Clases",ae=[];e(c)&&ae.push(`Docente: ${e(c)}`),e(k)&&ae.push(`Asignatura: ${e(k)}`),e(Z)&&ae.push(`Grado: ${e(Z)}`);let ce=20;try{console.log("üñºÔ∏è Intentando agregar logo EIE al PDF..."),g.setTextColor(99,102,241),g.setFontSize(28),g.setFont("helvetica","bold"),g.text("EIE",g.internal.pageSize.getWidth()/2,ce,{align:"center"}),ce+=15,console.log("‚úÖ Logo EIE (texto) agregado correctamente")}catch(Le){console.log("‚ùå Error con logo EIE, usando fallback:",Le),g.setTextColor(99,102,241),g.setFontSize(24),g.text("EIE",g.internal.pageSize.getWidth()/2,ce,{align:"center"}),ce+=15}g.setTextColor(0,0,0),g.setFontSize(18),g.setFont("helvetica","bold"),g.text(T,g.internal.pageSize.getWidth()/2,ce,{align:"center"}),ce+=12,g.setTextColor(0,0,0),g.setFontSize(12),g.setFont("helvetica","normal"),g.text("Instituci√≥n Educativa Instituto Gu√°tica",g.internal.pageSize.getWidth()/2,ce,{align:"center"}),ce+=10,g.setTextColor(60,60,60),g.setFontSize(10),g.setFont("helvetica","normal"),g.text(`Fecha de generaci√≥n: ${new Date().toLocaleDateString()}`,g.internal.pageSize.getWidth()/2,ce,{align:"center"}),ce+=15,g.setDrawColor(200,200,200),g.setLineWidth(1),g.line(20,ce,g.internal.pageSize.getWidth()-20,ce),ce+=15,ae.length>0&&(g.setTextColor(80,80,80),g.setFontSize(9),g.setFont("helvetica","normal"),ae.forEach(Le=>{g.text(Le,20,ce,{align:"left"}),ce+=6}),ce+=10);const Qe=e(L).map(Le=>[Le.Fecha||"",Le.Horas||"",Le.Anotaci√≥n||""]),xt=["TOTAL",e(n).toFixed(1),""];Qe.push(xt),console.log("üìä Generando PDF con:",{totalHoras:e(n),registros:e(L).length,filasTabla:Qe.length}),t(g,{head:[["Fecha","Horas","Anotaci√≥n"]],body:Qe,startY:ce,styles:{fontSize:8,cellPadding:2,cellWidth:"wrap",valign:"top",overflow:"linebreak"},headStyles:{fillColor:[99,102,241],textColor:255,fontSize:9,fontStyle:"bold",halign:"center"},bodyStyles:{fillColor:[255,255,255],textColor:[0,0,0]},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:{0:{cellWidth:60,minCellHeight:8,halign:"center"},1:{cellWidth:30,minCellHeight:8,halign:"center"},2:{cellWidth:"auto",minCellHeight:12}},margin:{top:15,right:15,bottom:15,left:15},tableWidth:"auto",didParseCell:Le=>{Le.row.index===Qe.length-1&&(Le.cell.styles.fillColor=[240,240,240],Le.cell.styles.fontStyle="bold",Le.cell.styles.textColor=[0,0,0],Le.column.index===0&&(Le.cell.styles.halign="center",Le.cell.styles.fillColor=[230,230,230]),Le.column.index===1&&(Le.cell.styles.halign="center",Le.cell.styles.fillColor=[220,220,220]),Le.column.index===2&&(Le.cell.styles.halign="center",Le.cell.styles.fillColor=[220,220,220]))}});const zt=`reporte_anotaciones_${e(c)||"todos"}_${e(k)||"todas"}_${e(Z)||"todos"}_${new Date().toISOString().split("T")[0]}.pdf`;g.save(zt),console.log("üíæ PDF guardado exitosamente:",zt)};Fe(()=>e(L),()=>{i(n,e(L).reduce((g,T)=>{const ae=parseFloat(T.Horas||"0");return g+(isNaN(ae)?0:ae)},0))}),Fe(()=>(e(c),e(le),e(s)),()=>{i(we,e(c)?[...e(le)].sort((g,T)=>{const ae=e(s)[e(c)]?.includes(g.materia),ce=e(s)[e(c)]?.includes(T.materia);return ae&&!ce?-1:!ae&&ce?1:g.materia.localeCompare(T.materia)}):e(le))}),Fe(()=>{},()=>{i(f,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Ar(),Er();var ot=vl(),at=o(ot),te=o(at),p=a(o(te),2),re=a(te,2),Ge=o(re),Ae=a(o(Ge),2),oe=o(Ae),N=o(oe),Q=a(N,2),J=o(Q);J.value=J.__value="";var He=a(J);me(He,1,()=>e(D),Ce,(g,T)=>{var ae=el(),ce=o(ae),Qe={};E(()=>{b(ce,e(T)),Qe!==(Qe=e(T))&&(ae.value=(ae.__value=e(T))??"")}),v(g,ae)});var je=a(oe,2),pe=o(je),K=a(pe,2),ze=o(K);ze.value=ze.__value="";var Ze=a(ze);me(Ze,1,()=>e(we),Ce,(g,T)=>{const ae=Mt(()=>(e(c),e(s),e(T),r(()=>e(c)&&e(s)[e(c)]?.includes(e(T).materia))));var ce=tl(),Qe=o(ce),xt={};E(()=>{l(ce,e(ae)?"color: #6366f1; font-weight: 600;":""),b(Qe,`${e(ae)?"‚≠ê ":""}${e(T),r(()=>e(T).materia)??""}`),xt!==(xt=(e(T),r(()=>e(T).materia)))&&(ce.value=(ce.__value=(e(T),r(()=>e(T).materia)))??"")}),v(g,ce)});var Re=a(je,2),Ue=o(Re),_=a(Ue,2),d=o(_);d.value=d.__value="";var y=a(d);me(y,1,()=>(e(V),r(()=>[...new Set(e(V).map(g=>g.grado.toString()))])),Ce,(g,T)=>{var ae=rl(),ce=o(ae),Qe={};E(xt=>{b(ce,xt),Qe!==(Qe=e(T))&&(ae.value=(ae.__value=e(T))??"")},[()=>(e(T),r(()=>e(T).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),v(g,ae)});var $=a(Ae,2),O=o($),G=o(O);{var ee=g=>{var T=ol();v(g,T)},De=g=>{var T=al();v(g,T)};X(G,g=>{e(B)?g(ee):g(De,!1)})}var Y=a(O,2),F=a(Y,2),W=a(Ge,2),ue=o(W),xe=o(ue),Ve=o(xe),Ke=a(xe,2);{var ve=g=>{var T=sl(),ae=o(T);E(()=>b(ae,`${(e(c)&&`Docente: ${e(c)}`)??""}
              ${(e(k)&&` | Asignatura: ${e(k)}`)??""}
              ${(e(Z)&&` | Grado: ${e(Z)}`)??""}`)),v(g,T)};X(Ke,g=>{e(L),r(()=>e(L).length>0)&&g(ve)})}var M=a(W,2);{var j=g=>{var T=ll(),ae=o(T);go(ae,{message:"Cargando datos del anotador..."}),v(g,T)},ie=g=>{var T=nl(),ae=a(o(T),4),ce=o(ae);E(()=>{l(T,`color: ${e(f),r(()=>e(f).placeholder)??""};`),b(ce,e(c)||e(k)||e(Z)?"No se encontraron registros con los filtros seleccionados. Intente con otros criterios.":"Seleccione filtros y haga clic en 'Aplicar Filtros' para cargar los datos.")}),v(g,T)},Te=g=>{var T=dl(),ae=o(T),ce=o(ae),Qe=o(ce),xt=o(Qe),zt=a(xt),Le=a(zt),Lt=a(ce),Tt=o(Lt);me(Tt,1,()=>e(L),Ce,(Qt,Ct)=>{var Ot=il(),qt=o(Ot),Jt=o(qt),Nt=a(qt),H=o(Nt),se=a(Nt),ke=o(se),Ye=o(ke);E(()=>{l(Ot,`border-color: ${e(f),r(()=>e(f).border)??""};`),b(Jt,(e(Ct),r(()=>e(Ct).Fecha||"-"))),b(H,(e(Ct),r(()=>e(Ct).Horas||"-"))),_t(ke,"title",(e(Ct),r(()=>e(Ct).Anotaci√≥n))),b(Ye,(e(Ct),r(()=>e(Ct).Anotaci√≥n||"-")))}),v(Qt,Ot)});var Yt=a(Tt);{var Zt=Qt=>{var Ct=cl(),Ot=a(o(Ct)),qt=o(Ot),Jt=a(Ot),Nt=o(Jt);E(H=>{l(Ct,`border-color: ${e(f),r(()=>e(f).border)??""}; border-top-width: 2px;`),b(qt,H),b(Nt,`${e(L),r(()=>e(L).length)??""} registros`)},[()=>(e(n),r(()=>e(n).toFixed(1)))]),v(Qt,Ct)};X(Yt,Qt=>{e(L),r(()=>e(L).length>0)&&Qt(Zt)})}E(()=>{l(T,`border-color: ${e(f),r(()=>e(f).border)??""};`),l(ce,`background-color: ${e(f),r(()=>e(f).inputBg)??""};`),l(xt,`color: ${e(f),r(()=>e(f).label)??""};`),l(zt,`color: ${e(f),r(()=>e(f).label)??""};`),l(Le,`color: ${e(f),r(()=>e(f).label)??""};`)}),v(g,T)};X(M,g=>{e(B)?g(j):(e(L),r(()=>e(L).length===0)?g(ie,1):g(Te,!1))})}E(()=>{l(at,`background-color: ${e(f),r(()=>e(f).cardBg)??""}; color: ${e(f),r(()=>e(f).text)??""};`),l(te,`border-color: ${e(f),r(()=>e(f).cardBorder)??""};`),l(Ge,`background-color: ${e(f),r(()=>e(f).inputBg)??""}; border-color: ${e(f),r(()=>e(f).border)??""};`),l(N,`color: ${e(f),r(()=>e(f).label)??""};`),l(Q,`background-color: ${e(f),r(()=>e(f).cardBg)??""}; border-color: ${e(f),r(()=>e(f).border)??""}; color: ${e(f),r(()=>e(f).text)??""};`),l(pe,`color: ${e(f),r(()=>e(f).label)??""};`),l(K,`background-color: ${e(f),r(()=>e(f).cardBg)??""}; border-color: ${e(f),r(()=>e(f).border)??""}; color: ${e(f),r(()=>e(f).text)??""};`),l(Ue,`color: ${e(f),r(()=>e(f).label)??""};`),l(_,`background-color: ${e(f),r(()=>e(f).cardBg)??""}; border-color: ${e(f),r(()=>e(f).border)??""}; color: ${e(f),r(()=>e(f).text)??""};`),O.disabled=e(B),l(Y,`color: ${e(f),r(()=>e(f).text)??""};`),F.disabled=(e(L),r(()=>e(L).length===0)),b(Ve,`Resultados (${e(L),r(()=>e(L).length)??""} registros)`)}),R("click",p,function(...g){_e()?.apply(this,g)}),nt(Q,()=>e(c),g=>i(c,g)),nt(K,()=>e(k),g=>i(k,g)),nt(_,()=>e(Z),g=>i(Z,g)),R("click",O,Se),R("click",Y,We),R("click",F,pt),R("click",ot,io(function(...g){_e()?.apply(this,g)})),R("keydown",ot,g=>g.key==="Escape"&&_e()()),v(P,ot),$r()}var pl=m('<div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping svelte-1p7gzb0"></div> <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full svelte-1p7gzb0"></div>',1),ul=ht('<svg class="w-5 h-5 text-indigo-500 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1p7gzb0"></path></svg>'),bl=ht('<svg class="w-5 h-5 text-amber-500 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="svelte-1p7gzb0"></path></svg>'),fl=ht('<svg class="w-5 h-5 text-indigo-400 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1p7gzb0"></path></svg>'),xl=m('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-1p7gzb0"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0 svelte-1p7gzb0"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-1p7gzb0"></path></svg></div> <div class="flex-1 pr-6 pt-0.5 svelte-1p7gzb0"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100 svelte-1p7gzb0">Informaci√≥n</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200 svelte-1p7gzb0"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors svelte-1p7gzb0" aria-label="Cerrar alerta"><svg class="w-4 h-4 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-1p7gzb0"></path></svg></button></div>'),hl=m('<option class="svelte-1p7gzb0"> </option>'),ml=m('<option class="svelte-1p7gzb0"> </option>'),_l=m('<option class="svelte-1p7gzb0"> </option>'),yl=m('<option class="svelte-1p7gzb0"> </option>'),kl=m('<button class="absolute right-4 top-1/2 transform -translate-y-1/2 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors svelte-1p7gzb0" title="Limpiar b√∫squeda"><svg class="w-4 h-4 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-1p7gzb0"></path></svg></button>'),wl=m('<div class="text-center py-8 svelte-1p7gzb0"><svg class="w-12 h-12 mx-auto mb-4 opacity-50 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" class="svelte-1p7gzb0"></path></svg> <p class="text-sm svelte-1p7gzb0"> </p></div>'),$l=m('<div class="flex items-center justify-center py-12 svelte-1p7gzb0"><!></div>'),Cl=m('<span class="ml-2 inline-block animate-bounce svelte-1p7gzb0">‚ú®</span>'),Sl=m('<span class="text-xs font-medium svelte-1p7gzb0"> </span>'),Al=m('<div class="h-px flex-1 transition-all duration-300 group-hover:opacity-50 svelte-1p7gzb0"></div>'),El=ht('<svg class="w-3 h-3 text-white svelte-1p7gzb0" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" class="svelte-1p7gzb0"></path></svg>'),Il=m('<div class="relative group flex flex-col p-0 rounded-2xl border transition-all duration-200 shadow-sm hover:shadow-md svelte-1p7gzb0"><div class="flex items-start gap-1 p-4 svelte-1p7gzb0"><label class="flex-shrink-0 cursor-pointer p-1 mt-1 svelte-1p7gzb0"><input type="checkbox" class="hidden svelte-1p7gzb0"/> <div class="w-5 h-5 rounded border flex items-center justify-center transition-colors cursor-pointer svelte-1p7gzb0"><!></div></label> <textarea rows="8" class="w-full bg-transparent border-none focus:ring-0 text-base font-medium leading-relaxed resize-none p-1 transition-colors min-h-[180px] pb-6 svelte-1p7gzb0" placeholder="Escriba aqu√≠..."></textarea></div></div>'),Dl=m('<div class="grid grid-cols-1 md:grid-cols-2 gap-4 svelte-1p7gzb0"></div>'),Bl=m('<div class="space-y-4 svelte-1p7gzb0"><button type="button" class="flex items-center gap-3 w-full text-left cursor-pointer group focus:outline-none svelte-1p7gzb0"><div class="flex items-center gap-3 flex-1 svelte-1p7gzb0"><h3> <!></h3> <!></div> <!> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" class="svelte-1p7gzb0"></path></svg></button> <!></div>'),zl=ht('<svg class="animate-spin h-7 w-7 text-white svelte-1p7gzb0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25 svelte-1p7gzb0" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75 svelte-1p7gzb0" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Fl=ht('<svg class="w-8 h-8 transform rotate-90 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" class="svelte-1p7gzb0"></path></svg>'),Ml=m('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200 svelte-1p7gzb0"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40 svelte-1p7gzb0"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8 svelte-1p7gzb0"><div class="flex items-center gap-4 lg:flex-col svelte-1p7gzb0"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto svelte-1p7gzb0"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center svelte-1p7gzb0">Anotador de Clase</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full svelte-1p7gzb0"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Abrir hoja de c√°lculo"><svg class="w-5 h-5 svelte-1p7gzb0" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Hoja de C√°lculo</span></button> <button id="filter-button-target" class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Abrir filtros de anotaciones"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Filtros</span> <!></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Generar reportes PDF"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Reportes PDF</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Volver al Dashboard"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Dashboard</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full svelte-1p7gzb0" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize svelte-1p7gzb0"> </span></button></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto pb-32 svelte-1p7gzb0"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border svelte-1p7gzb0"><!> <!> <form class="space-y-6 svelte-1p7gzb0"><div class="grid grid-cols-1 md:grid-cols-3 gap-6 svelte-1p7gzb0"><div class="space-y-2 svelte-1p7gzb0"><label for="fecha" class="block text-sm font-medium svelte-1p7gzb0">Fecha</label> <input type="date" id="fecha" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none svelte-1p7gzb0"/></div> <div class="space-y-2 svelte-1p7gzb0"><label for="docente" class="block text-sm font-medium svelte-1p7gzb0">Docente</label> <select id="docente" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-1p7gzb0"><option class="svelte-1p7gzb0"> </option><!></select></div> <div class="space-y-2 svelte-1p7gzb0"><label for="materia" class="block text-sm font-medium svelte-1p7gzb0">Asignatura</label> <select id="materia" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-1p7gzb0"><option class="svelte-1p7gzb0"> </option><!></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-1p7gzb0"><div class="space-y-2 svelte-1p7gzb0"><label for="grado" class="block text-sm font-medium svelte-1p7gzb0">Grado</label> <select id="grado" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-1p7gzb0"><option class="svelte-1p7gzb0"> </option><!></select></div> <div class="space-y-2 svelte-1p7gzb0"><label for="horas" class="block text-sm font-medium svelte-1p7gzb0">Horas</label> <select id="horas" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer svelte-1p7gzb0"><option class="svelte-1p7gzb0">Seleccione horas</option><!></select></div></div> <div class="space-y-2 svelte-1p7gzb0"><label for="search" class="block text-sm font-medium svelte-1p7gzb0">Buscar anotaciones</label> <div class="relative svelte-1p7gzb0"><input type="text" id="search" placeholder="Buscar por palabra clave o categor√≠a..." class="w-full px-4 py-3 pl-12 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none svelte-1p7gzb0"/> <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" class="svelte-1p7gzb0"></path></svg> <!></div> <!></div> <div class="space-y-8 svelte-1p7gzb0"><!></div> <div class="space-y-2 svelte-1p7gzb0"><label for="observacion" class="block text-sm font-medium svelte-1p7gzb0">Observaci√≥n</label> <textarea id="observacion" rows="3" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none resize-none svelte-1p7gzb0" placeholder="Observaciones adicionales (opcional)..."></textarea></div> <div class="fixed bottom-8 right-8 z-50 svelte-1p7gzb0"><button type="submit" class="w-16 h-16 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-400 dark:disabled:bg-slate-700 disabled:cursor-not-allowed disabled:scale-100 text-white rounded-full shadow-2xl transition-all duration-300 transform hover:scale-110 active:scale-95 backdrop-blur-sm bg-opacity-95 flex items-center justify-center overflow-hidden border border-white/20 svelte-1p7gzb0" aria-label="Guardar Anotaci√≥n"><!></button></div></form></div></main></div> <!> <!>',1);function Tl(P,w){wr(w,!1);const n=()=>xo(Jr,"$theme",we),[we,f]=fo(),z=x(),t=x(),_e=x(),Me=x();let D=$t(w,"onBack",8),le=x([]),V=x([]),q=x([]),L=x(!1),B=x(!1),C=x(!1),s=x(!1),c=x({}),k=x({}),Z=x(""),ye=x({}),U=x([]),Ne=x(""),Se=x("");const We=u=>{he(k,e(k)[u]=!e(k)[u]),i(k,e(k))},pt=(u,I)=>{const ne=e(c)[u].indexOf(I);if(ne!==-1){const fe={...I,selected:!I.selected},Be=[...e(c)[u].slice(0,ne),fe,...e(c)[u].slice(ne+1)];i(c,{...e(c),[u]:Be}),console.log("üîÑ Anotaci√≥n toggle:",{categoria:u,index:ne,texto:fe.text,nuevoEstado:fe.selected,totalSeleccionadas:Object.values(e(c)).flat().filter(qe=>qe.selected).length})}},ot=u=>({"C√ÅTEDRA DE LA PAZ":"#8b5cf6","CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL":"#10b981","CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y":"#f59e0b","DIRECCI√ìN DE GRUPO":"#3b82f6","EDUCACI√ìN ART√çSTICA":"#f43f5e","EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES":"#ef4444","EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS":"#8b5cf6",EMPRENDIMIENTO:"#f97316",ESTAD√çSTICA:"#06b6d4","FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS":"#6366f1",F√çSICA:"#3b82f6",INGL√âS:"#14b8a6","LENGUA CASTELLANA":"#10b981",MATEM√ÅTICAS:"#3b82f6","PROYECTO Y EMPRENDIMIENTO":"#f97316",QU√çMICA:"#06b6d4","TECNOLOG√çA E INFORM√ÅTICA":"#6366f1","√âTICA PROFESIONAL":"#8b5cf6","Estrategias de Ense√±anza-Aprendizaje":"#6366f1","Evaluaci√≥n y Verificaci√≥n de Saberes":"#10b981","Enfoque STEM+ y Contexto Rural":"#f59e0b","Pr√°cticas de Laboratorio y Mantenimiento":"#f43f5e","Ciudadan√≠a Digital y √âtica":"#8b5cf6","Pensamiento Computacional y Programaci√≥n":"#06b6d4","Recursos Anal√≥gicos y Contingencias":"#f97316","Ofim√°tica y Competencias Productivas":"#14b8a6","Gesti√≥n Administrativa y Proyectos Transversales":"#3b82f6"})[u]||"#6366f1",at={MATEM√ÅTICAS:"MATEM√ÅTICAS","LENGUA CASTELLANA":"LENGUA CASTELLANA",INGL√âS:"INGL√âS","CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL":"CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL","CIENCIAS NATURALES":"CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL","CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y":"CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y","CIENCIAS SOCIALES":"CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y",F√çSICA:"F√çSICA",QU√çMICA:"QU√çMICA","EDUCACI√ìN ART√çSTICA":"EDUCACI√ìN ART√çSTICA","EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES":"EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES","EDUCACI√ìN F√çSICA":"EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES","TECNOLOG√çA E INFORM√ÅTICA":"TECNOLOG√çA E INFORM√ÅTICA",TECNOLOG√çA:"TECNOLOG√çA E INFORM√ÅTICA",INFORM√ÅTICA:"TECNOLOG√çA E INFORM√ÅTICA",EMPRENDIMIENTO:"EMPRENDIMIENTO","FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS":"FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS",FILOSOF√çA:"FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS",ESTAD√çSTICA:"ESTAD√çSTICA","EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS":"EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS",√âTICA:"EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS","DIRECCI√ìN DE GRUPO":"DIRECCI√ìN DE GRUPO","PROYECTO Y EMPRENDIMIENTO":"PROYECTO Y EMPRENDIMIENTO",PROYECTO:"PROYECTO Y EMPRENDIMIENTO","C√ÅTEDRA DE LA PAZ":"C√ÅTEDRA DE LA PAZ","√âTICA PROFESIONAL":"√âTICA PROFESIONAL"},te=u=>{if(!e(p).materia)return u;let I=at[e(p).materia.toUpperCase()]||at[e(p).materia]||"";if(!I){const ne=e(p).materia.toUpperCase();for(const[fe,Be]of Object.entries(at))if(fe.includes(ne)||ne.includes(fe)){I=Be;break}}return console.log("Materia seleccionada:",e(p).materia,"‚Üí Categor√≠a:",I),u.sort(([ne],[fe])=>ne===I&&fe!==I?-1:fe===I&&ne!==I?1:ne.localeCompare(fe))};let p=x({fecha:new Date().toISOString().split("T")[0],docente:localStorage.getItem("lastDocente")||"",materia:"",horas:"",grado:"",anotacion:"",observacion:""}),re=x(JSON.parse(localStorage.getItem("docenteMaterias")||"{}"));const Ge=(u,I)=>{!u||!I||(e(re)[u]||he(re,e(re)[u]=[]),e(re)[u].includes(I)||(he(re,e(re)[u]=[...e(re)[u],I]),localStorage.setItem("docenteMaterias",JSON.stringify(e(re)))))};let Ae=x(localStorage.getItem("dismissedInfoAnotadorContent")!==wo);const oe=()=>{i(Ae,!1),localStorage.setItem("dismissedInfoAnotadorContent",wo)};let N=x(!1),Q=x(!1),J=x(!1);const He=()=>{i(Q,!0)},je=()=>{i(Q,!1)},pe=()=>{i(J,!0)},K=()=>{i(J,!1)};let ze=x(!0);const Ze="¬°Nueva funci√≥n de filtrado avanzado disponible!";function Re(){return!0}const Ue=()=>{localStorage.setItem("dismissedFeatureAlertAnotador",new Date().toISOString()),i(ze,!1)},_=()=>{localStorage.setItem("dismissedFeatureAlertAnotador",new Date().toISOString()),He()},d=()=>`https://docs.google.com/spreadsheets/d/${bo}`,y=()=>{window.open(d(),"_blank")},$=()=>{Jr.update(u=>u==="light"?"dim":u==="dim"?"dark":"light")},O=async()=>{i(L,!0),i(B,!0),i(C,!0),i(s,!0);try{const[u,I,ne,fe]=await Promise.all([Kr(),Zr(),Qr(),_a()]);i(le,u),i(V,I),i(q,ne);const Be={},qe={};for(const[ut,h]of Object.entries(fe))Be[ut]=h.map(S=>({text:S,selected:!1})),qe[ut]=!1;i(c,Be),i(k,qe)}catch(u){console.error("Error cargando datos iniciales:",u)}finally{i(L,!1),i(B,!1),i(C,!1),i(s,!1)}},G=async u=>{if(u.preventDefault(),e(N))return;const I=Object.values(e(c)).flat().filter(Be=>Be.selected).map(Be=>Be.text),ne=I.join(" | ");if((await Dt.fire({title:"¬øConfirmar Registro?",html:`
        <div class="text-left space-y-2 p-2 rounded-xl bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10" style="font-size: 0.9rem; line-height: 1.4;">
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Fecha:</strong> ${e(p).fecha}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Docente:</strong> ${e(p).docente}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Asignatura:</strong> ${e(p).materia}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Grado:</strong> ${e(p).grado}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Horas:</strong> ${e(p).horas}</div>
          <div style="margin-top: 12px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 8px;">
            <strong style="color: #6366f1;">Anotaciones:</strong>
            <ul style="list-style-type: disc; padding-left: 20px; margin-top: 4px; font-size: 0.8rem; opacity: 0.8;">
              ${I.map(Be=>`<li>${Be}</li>`).join("")}
            </ul>
          </div>
          ${e(p).observacion?`<div style="margin-top: 12px;"><strong style="color: #6366f1;">Observaci√≥n:</strong> <span style="font-size: 0.8rem;">${e(p).observacion}</span></div>`:""}
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonText:"Si, de acuerdo",cancelButtonText:"No",confirmButtonColor:"#4f46e5",cancelButtonColor:"#64748b",reverseButtons:!0,background:n()==="light"?"#fff":"#1e293b",color:n()==="light"?"#1e293b":"#f1f5f9"})).isConfirmed){i(N,!0);try{const qe=[[new Date().toLocaleString(),e(p).fecha,e(p).docente,e(p).materia,e(p).grado,e(p).horas,ne,e(p).observacion]];await ya({spreadsheetId:bo,worksheetTitle:Ao,datos:qe}),Ge(e(p).docente,e(p).materia),await Dt.fire({icon:"success",title:"¬°√âxito!",text:"Anotaci√≥n registrada exitosamente",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),i(p,{fecha:new Date().toISOString().split("T")[0],docente:e(p).docente,materia:e(p).materia,grado:e(p).grado,horas:"",anotacion:"",observacion:""});for(const ut in e(c))he(c,e(c)[ut]=e(c)[ut].map(h=>({...h,selected:!1})));i(c,{...e(c)})}catch(Be){console.error("Error enviando:",Be),await Dt.fire({icon:"error",title:"Error",text:"Error al registrar la anotaci√≥n",confirmButtonColor:"#ef4444"})}finally{i(N,!1)}}};kr(()=>{O(),i(ze,Re())}),Fe(()=>(e(p),e(Se)),()=>{if(e(p).materia&&e(p).materia!==e(Se)){i(Se,e(p).materia);let u=at[e(p).materia.toUpperCase()]||at[e(p).materia]||"";if(!u){const I=e(p).materia.toUpperCase();for(const[ne,fe]of Object.entries(at))if(ne.includes(I)||I.includes(ne)){u=fe;break}}u&&(i(Ne,u),console.log("‚ú® Categoria destacada:",u),setTimeout(()=>{i(Ne,"")},3e3))}}),Fe(()=>(e(c),e(Z)),()=>{i(ye,Object.entries(e(c)).reduce((u,[I,ne])=>{if(!e(Z).trim())return u[I]=ne,u;const fe=e(Z).toLowerCase().trim(),Be=ne.filter(qe=>qe.text.toLowerCase().includes(fe));return Be.length>0&&(u[I]=Be),u},{}))}),Fe(()=>(e(V),e(p),e(c),e(ye),e(U)),()=>{console.log("üîÑ Reactividad actualizada"),console.log("üìö Materias disponibles:",e(V).map(u=>u.materia)),console.log("‚úçÔ∏è Materia seleccionada:",e(p).materia),console.log("üìä Categor√≠as disponibles:",Object.keys(e(c))),console.log("üîç Categor√≠as filtradas:",Object.keys(e(ye))),i(U,te(Object.entries(e(ye)))),console.log("üìã Entradas ordenadas:",e(U).map(([u])=>u))}),Fe(()=>e(p),()=>{e(p).docente&&localStorage.setItem("lastDocente",e(p).docente)}),Fe(()=>(e(p),e(V),e(re)),()=>{i(z,e(p).docente?[...e(V)].sort((u,I)=>{const ne=e(re)[e(p).docente]?.includes(u.materia),fe=e(re)[e(p).docente]?.includes(I.materia);return ne&&!fe?-1:!ne&&fe?1:u.materia.localeCompare(I.materia)}):e(V))}),Fe(()=>{},()=>{i(t,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Fe(()=>e(c),()=>{i(_e,Object.values(e(c)).flat().some(u=>u.selected))}),Fe(()=>(e(p),e(_e)),()=>{i(Me,e(p).fecha&&e(p).docente&&e(p).materia&&e(p).grado&&e(p).horas&&e(_e))}),Fe(()=>(e(p),e(_e),e(Me),e(c)),()=>{console.log("üîç Validaci√≥n formulario:",{fecha:e(p).fecha,docente:e(p).docente,materia:e(p).materia,grado:e(p).grado,horas:e(p).horas,hasSelectedAnotacion:e(_e),isFormValid:e(Me),totalAnotaciones:Object.values(e(c)).flat().length,selectedCount:Object.values(e(c)).flat().filter(u=>u.selected).length})}),Ar(),Er();var ee=Ml(),De=Vt(ee),Y=o(De),F=o(Y),W=o(F),ue=o(W),xe=a(ue,2),Ve=a(W,2),Ke=o(Ve),ve=a(Ke,2),M=a(o(ve),4);{var j=u=>{var I=pl();v(u,I)};X(M,u=>{e(ze)&&u(j)})}var ie=a(ve,2),Te=a(ie,2),g=a(Te,2),T=o(g);{var ae=u=>{var I=ul();v(u,I)},ce=u=>{var I=bl();v(u,I)},Qe=u=>{var I=fl();v(u,I)};X(T,u=>{n()==="dark"?u(ae):n()==="light"?u(ce,1):u(Qe,!1)})}var xt=a(T,2),zt=o(xt),Le=a(Y,2),Lt=o(Le),Tt=o(Lt);{var Yt=u=>{var I=xl(),ne=a(o(I),2),fe=a(o(ne),2),Be=o(fe),qe=a(ne,2);E(()=>b(Be,wo)),R("click",qe,oe),v(u,I)};X(Tt,u=>{e(Ae)&&u(Yt)})}var Zt=a(Tt,2);uo(Zt,{featureMessage:Ze,description:"Ahora puedes filtrar tus anotaciones de forma avanzada. ¬°Pru√©balo!",onTryNow:_,onDismiss:Ue,targetSelector:"#filter-button-target",showPopup:!1,colorTheme:"purple"});var Qt=a(Zt,2),Ct=o(Qt),Ot=o(Ct),qt=o(Ot),Jt=a(qt,2),Nt=a(Ot,2),H=o(Nt),se=a(H,2),ke=o(se),Ye=o(ke);ke.value=ke.__value="";var St=a(ke);me(St,1,()=>e(le),Ce,(u,I)=>{var ne=hl(),fe=o(ne),Be={};E(()=>{b(fe,e(I)),Be!==(Be=e(I))&&(ne.value=(ne.__value=e(I))??"")}),v(u,ne)});var Pt=a(Nt,2),Pr=o(Pt),vr=a(Pr,2),tr=o(vr),Hr=o(tr);tr.value=tr.__value="";var Ir=a(tr);me(Ir,1,()=>e(z),Ce,(u,I)=>{const ne=Mt(()=>(e(re),e(p),e(I),r(()=>e(re)[e(p).docente]?.includes(e(I).materia))));var fe=ml(),Be=o(fe),qe={};E(()=>{l(fe,e(ne)?"color: #6366f1; font-weight: 600;":""),b(Be,`${e(ne)?"‚≠ê ":""}${e(I),r(()=>e(I).materia)??""}`),qe!==(qe=(e(I),r(()=>e(I).materia)))&&(fe.value=(fe.__value=(e(I),r(()=>e(I).materia)))??"")}),v(u,fe)});var gr=a(Ct,2),Dr=o(gr),Br=o(Dr),pr=a(Br,2),rr=o(pr),Gr=o(rr);rr.value=rr.__value="";var Wr=a(rr);me(Wr,1,()=>(e(q),r(()=>[...new Set(e(q).map(u=>u.grado.toString()))])),Ce,(u,I)=>{var ne=_l(),fe=o(ne),Be={};E(qe=>{b(fe,qe),Be!==(Be=e(I))&&(ne.value=(ne.__value=e(I))??"")},[()=>(e(I),r(()=>e(I).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),v(u,ne)});var zr=a(Dr,2),ur=o(zr),Fr=a(ur,2),br=o(Fr);br.value=br.__value="";var Cr=a(br);me(Cr,0,()=>[1,2,3,4],Ce,(u,I)=>{var ne=yl(),fe=o(ne),Be={};E(qe=>{b(fe,`${I??""} ${I===1?"Hora":"Horas"}`),Be!==(Be=qe)&&(ne.value=(ne.__value=qe)??"")},[()=>r(()=>I.toString())]),v(u,ne)});var Mr=a(gr,2),Ur=o(Mr),$e=a(Ur,2),Xe=o($e),it=a(Xe,2),Ft=a(it,2);{var Ht=u=>{var I=kl();E(()=>l(I,`color: ${e(t),r(()=>e(t).placeholder)??""};`)),R("click",I,()=>i(Z,"")),v(u,I)};X(Ft,u=>{e(Z)&&u(Ht)})}var Vr=a($e,2);{var be=u=>{var I=wl(),ne=a(o(I),2),fe=o(ne);E(()=>{l(I,`color: ${e(t),r(()=>e(t).placeholder)??""};`),b(fe,`No se encontraron anotaciones para "${e(Z)??""}"`)}),v(u,I)},Pe=Co(()=>(e(Z),e(ye),r(()=>e(Z)&&Object.keys(e(ye)).length===0)));X(Vr,u=>{e(Pe)&&u(be)})}var tt=a(Mr,2),yt=o(tt);{var At=u=>{var I=$l(),ne=o(I);go(ne,{message:"Cargando opciones de anotaci√≥n..."}),v(u,I)},or=u=>{var I=no(),ne=Vt(I);me(ne,1,()=>e(U),Ce,(fe,Be)=>{var qe=Co(()=>To(e(Be),2));let ut=()=>e(qe)[0],h=()=>e(qe)[1];const S=Mt(()=>(ut(),r(()=>ot(ut())))),de=Mt(()=>(h(),r(()=>h().length)));var Ee=Bl(),st=o(Ee),kt=o(st),ct=o(kt),A=o(ct),lt=a(A);{var Je=dt=>{var Bt=Cl();v(dt,Bt)};X(lt,dt=>{ut()===e(Ne)&&dt(Je)})}var et=a(ct,2);{var wt=dt=>{var Bt=Sl(),xr=o(Bt);E(()=>{l(Bt,`color: ${e(S)??""};`),b(xr,`(${e(de)??""} resultado${e(de)!==1?"s":""})`)}),v(dt,Bt)};X(et,dt=>{e(Z)&&dt(wt)})}var Et=a(kt,2);{var ar=dt=>{var Bt=Al();E(()=>l(Bt,`background-color: ${e(S)??""}; opacity: 0.2;`)),v(dt,Bt)};X(Et,dt=>{e(Z)||dt(ar)})}var jt=a(Et,2);let Wt;var sr=a(st,2);{var cr=dt=>{var Bt=Dl();me(Bt,5,h,Ce,(xr,bt,hr)=>{const It=Mt(()=>(e(Z),e(bt),r(()=>e(Z)&&e(bt).text.toLowerCase().includes(e(Z).toLowerCase()))));var Kt=Il(),mr=o(Kt),Rr=o(mr),Xt=o(Rr),Lr=a(Xt,2),_r=o(Lr);{var lr=ft=>{var mt=El();v(ft,mt)};X(_r,ft=>{e(bt),r(()=>e(bt).selected)&&ft(lr)})}var Rt=a(Rr,2);E(()=>{l(Kt,`
                          background-color: ${e(bt),Ie(e(S)),Ie(e(It)),e(t),r(()=>e(bt).selected?`${e(S)}10`:e(It)?`${e(S)}05`:e(t).inputBg)??""};
                          border-color: ${e(bt),Ie(e(S)),Ie(e(It)),e(t),r(()=>e(bt).selected?e(S):e(It)?e(S):e(t).border)??""};
                        `),Yo(Xt,(e(bt),r(()=>e(bt).selected))),l(Lr,`
                              border-color: ${e(bt),Ie(e(S)),e(t),r(()=>e(bt).selected?e(S):e(t).border)??""};
                              background-color: ${e(bt),Ie(e(S)),r(()=>e(bt).selected?e(S):"transparent")??""};
                            `),l(Rt,`color: ${e(t),r(()=>e(t).text)??""};`)}),R("change",Xt,()=>pt(ut(),e(bt))),dr(Rt,()=>e(bt).text,ft=>(e(bt).text=ft,Oe(()=>(h(),e(U))))),v(xr,Kt)}),so(3,Bt,()=>Mo),v(dt,Bt)};X(sr,dt=>{e(k),ut(),r(()=>e(k)[ut()])&&dt(cr)})}E(()=>{Ut(ct,1,`text-xs font-black uppercase tracking-widest px-3 py-1 rounded-full text-white flex-shrink-0 transition-all duration-300 group-hover:shadow-md ${ut()===e(Ne)?"animate-glow ring-4 ring-opacity-50":""}`,"svelte-1p7gzb0"),l(ct,`background-color: ${e(S)??""}; ${ut()===e(Ne)?`box-shadow: 0 0 25px ${e(S)}60, 0 0 50px ${e(S)}30; ring-color: ${e(S)}; border: 2px solid ${e(S)};`:""}`),b(A,`${ut()??""} `),Wt=Ut(jt,0,"w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0 svelte-1p7gzb0",null,Wt,{"rotate-180":e(k)[ut()]})}),R("click",st,()=>We(ut())),v(fe,Ee)}),v(u,I)};X(yt,u=>{e(s)?u(At):u(or,!1)})}var Yr=a(tt,2),Tr=o(Yr),Or=a(Tr,2),qr=a(Yr,2),Sr=o(qr),Nr=o(Sr);{var ge=u=>{var I=zl();v(u,I)},Gt=u=>{var I=Fl();v(u,I)};X(Nr,u=>{e(N)?u(ge):u(Gt,!1)})}var er=a(De,2);{var fr=u=>{Xs(u,{onClose:je,get selectedDocente(){return e(p),r(()=>e(p).docente)}})};X(er,u=>{e(Q)&&u(fr)})}var jr=a(er,2);{var ir=u=>{gl(u,{onClose:K,get initialDocente(){return e(p),r(()=>e(p).docente)}})};X(jr,u=>{e(J)&&u(ir)})}E(()=>{l(De,`background-color: ${e(t),r(()=>e(t).bg)??""};`),l(Y,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),_t(ue,"src",ro),l(xe,`color: ${e(t),r(()=>e(t).text)??""};`),l(Ke,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(ve,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(ie,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(Te,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(g,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),b(zt,n()),l(Lt,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),l(qt,`color: ${e(t),r(()=>e(t).label)??""};`),l(Jt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""}; color-scheme: ${n()==="light"?"light":"dark"};`),l(H,`color: ${e(t),r(()=>e(t).label)??""};`),l(se,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),b(Ye,e(L)?"Cargando...":"Seleccione docente"),l(Pr,`color: ${e(t),r(()=>e(t).label)??""};`),l(vr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),b(Hr,e(B)?"Cargando...":"Seleccione asignatura"),l(Br,`color: ${e(t),r(()=>e(t).label)??""};`),l(pr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),b(Gr,e(C)?"Cargando...":"Seleccione grado"),l(ur,`color: ${e(t),r(()=>e(t).label)??""};`),l(Fr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(Ur,`color: ${e(t),r(()=>e(t).label)??""};`),l(Xe,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(it,`color: ${e(t),r(()=>e(t).placeholder)??""};`),l(Tr,`color: ${e(t),r(()=>e(t).label)??""};`),l(Or,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),Sr.disabled=e(N)||!e(Me),_t(Sr,"title",e(Me)?"Guardar Anotaci√≥n":"Complete todos los campos requeridos y al menos una anotaci√≥n")}),R("click",Ke,y),R("click",ve,He),R("click",ie,pe),R("click",Te,function(...u){D()?.apply(this,u)}),R("click",g,$),dr(Jt,()=>e(p).fecha,u=>(he(p,e(p).fecha=u),Oe(()=>{e(t),e(L),e(le),e(B),e(z),e(re),e(C),e(q)}))),nt(se,()=>e(p).docente,u=>(he(p,e(p).docente=u),Oe(()=>{e(t),e(L),e(le),e(B),e(z),e(re),e(C),e(q)}))),nt(vr,()=>e(p).materia,u=>(he(p,e(p).materia=u),Oe(()=>{e(t),e(L),e(le),e(B),e(z),e(re),e(C),e(q)}))),nt(pr,()=>e(p).grado,u=>(he(p,e(p).grado=u),Oe(()=>{e(t),e(L),e(le),e(B),e(z),e(re),e(C),e(q)}))),nt(Fr,()=>e(p).horas,u=>(he(p,e(p).horas=u),Oe(()=>{e(t),e(L),e(le),e(B),e(z),e(re),e(C),e(q)}))),dr(Xe,()=>e(Z),u=>i(Z,u)),dr(Or,()=>e(p).observacion,u=>(he(p,e(p).observacion=u),Oe(()=>{e(t),e(L),e(le),e(B),e(z),e(re),e(C),e(q)}))),R("submit",Qt,G),v(P,ee),$r(),f()}var Ol=m('<div class="flex items-center justify-center py-12"><!></div>'),Nl=ht('<svg class="w-3 h-3 text-white" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),jl=m('<div class="relative group flex flex-col p-0 rounded-2xl border transition-all duration-200 shadow-sm hover:shadow-md"><div class="flex flex-col p-4 gap-3"><div class="flex items-start justify-between gap-2"><div class="flex items-center gap-2"><label class="flex-shrink-0 cursor-pointer"><input type="checkbox" class="hidden"/> <div class="w-5 h-5 rounded border flex items-center justify-center transition-colors"><!></div></label> <span class="font-bold text-sm leading-tight"> </span></div> <div class="flex gap-1.5 flex-shrink-0"><span class="text-[10px] font-bold px-1.5 py-0.5 rounded bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 opacity-60"> </span> <span class="text-[10px] font-bold px-1.5 py-0.5 rounded bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 opacity-60"> </span></div></div> <textarea rows="4" class="w-full bg-transparent border-none focus:ring-0 text-sm font-medium leading-relaxed resize-none p-0 transition-colors opacity-80" placeholder="Escriba aqu√≠..."></textarea></div></div>'),Rl=m('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>'),Ll=m('<div class="space-y-4"><button type="button" class="flex items-center gap-3 w-full text-left cursor-pointer group focus:outline-none"><h3 class="text-xs font-black uppercase tracking-widest px-3 py-1 rounded-full text-white flex-shrink-0 transition-all duration-300 group-hover:shadow-md"> </h3> <div class="h-px flex-1 transition-all duration-300 group-hover:opacity-50"></div> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>'),Pl=m('<div class="space-y-8"><!></div>');function Hl(P,w){wr(w,!1);const n=x();let we=$t(w,"selectedDiarioAnots",28,()=>[]),f=x({}),z=x({}),t=x(!1);const _e=qo(),Me=C=>{if(e(z)[C])he(z,e(z)[C]=!1);else{for(const s in e(z))he(z,e(z)[s]=!1);he(z,e(z)[C]=!0)}i(z,e(z))},D=C=>({Administrativo:"#6366f1",Emergencia:"#ef4444",Acad√©mico:"#f59e0b",Convivencia:"#22c55e",Infraestructura:"#0ea5e9",Salud:"#ec4899",Tecnol√≥gico:"#8b5cf6",Comunicaci√≥n:"#3b82f6",Disciplinario:"#64748b",Normalidad:"#10b981"})[C]||"#6366f1",le=async()=>{i(t,!0);try{const s=(await ha()).situaciones||{},c={},k={};Object.entries(s).forEach(([Z,ye])=>{ye.length>0&&(k[Z]=!1,c[Z]=ye.map(U=>({id:U.id,text:U.descripcion,selected:!1,originalTitulo:U.titulo,categoria:U.categoria,impacto:U.impacto,tiempo_estimado:U.tiempo_estimado})))}),i(f,c),i(z,k)}catch(C){console.error("Error cargando opciones de diario:",C)}finally{i(t,!1)}};kr(()=>{le()}),Fe(()=>(e(f),Ie(we())),()=>{const C=Object.values(e(f)).flat().filter(s=>s.selected&&s.text.trim()!=="").map(s=>`[${s.categoria}] ${s.originalTitulo}: ${s.text}`);JSON.stringify(C)!==JSON.stringify(we())&&(we(C),_e("change",we()))}),Fe(()=>{},()=>{i(n,{text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",inputBg:"rgb(var(--bg-secondary))"})}),Ar(),Er();var V=Pl(),q=o(V);{var L=C=>{var s=Ol(),c=o(s);go(c,{message:"Cargando opciones de diario..."}),v(C,s)},B=C=>{var s=no(),c=Vt(s);me(c,1,()=>(e(f),r(()=>Object.entries(e(f)))),Ce,(k,Z)=>{var ye=Co(()=>To(e(Z),2));let U=()=>e(ye)[0],Ne=()=>e(ye)[1];const Se=Mt(()=>(U(),r(()=>D(U()))));var We=Ll(),pt=o(We),ot=o(pt),at=o(ot),te=a(ot,2),p=a(te,2);let re;var Ge=a(pt,2);{var Ae=oe=>{var N=Rl();me(N,5,Ne,Q=>Q.id,(Q,J,He)=>{var je=jl(),pe=o(je),K=o(pe),ze=o(K),Ze=o(ze),Re=o(Ze),Ue=a(Re,2),_=o(Ue);{var d=W=>{var ue=Nl();v(W,ue)};X(_,W=>{e(J),r(()=>e(J).selected)&&W(d)})}var y=a(Ze,2),$=o(y),O=a(ze,2),G=o(O),ee=o(G),De=a(G,2),Y=o(De),F=a(K,2);E(()=>{l(je,`
                  background-color: ${e(J),Ie(e(Se)),e(n),r(()=>e(J).selected?`${e(Se)}10`:e(n).inputBg)??""};
                  border-color: ${e(J),Ie(e(Se)),e(n),r(()=>e(J).selected?e(Se):e(n).border)??""};
                `),l(Ue,`
                            border-color: ${e(J),Ie(e(Se)),e(n),r(()=>e(J).selected?e(Se):e(n).border)??""};
                            background-color: ${e(J),Ie(e(Se)),r(()=>e(J).selected?e(Se):"transparent")??""};
                          `),l(y,`color: ${e(n),r(()=>e(n).text)??""};`),b($,(e(J),r(()=>e(J).originalTitulo))),l(G,`color: ${e(n),r(()=>e(n).text)??""};`),b(ee,`IMP: ${e(J),r(()=>e(J).impacto)??""}`),l(De,`color: ${e(n),r(()=>e(n).text)??""};`),b(Y,`${e(J),r(()=>e(J).tiempo_estimado)??""} MIN`),l(F,`color: ${e(n),r(()=>e(n).text)??""};`)}),So(Re,()=>e(J).selected,W=>(e(J).selected=W,Oe(()=>(Ne(),e(f))))),R("change",Re,()=>{i(f,e(f))}),dr(F,()=>e(J).text,W=>(e(J).text=W,Oe(()=>(Ne(),e(f))))),R("input",F,()=>{i(f,e(f))}),v(Q,je)}),so(3,N,()=>Mo),v(oe,N)};X(Ge,oe=>{e(z),U(),r(()=>e(z)[U()])&&oe(Ae)})}E(()=>{l(ot,`background-color: ${e(Se)??""};`),b(at,U()),l(te,`background-color: ${e(Se)??""}; opacity: 0.2;`),re=Ut(p,0,"w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0",null,re,{"rotate-180":e(z)[U()]})}),R("click",pt,()=>Me(U())),v(k,We)}),v(C,s)};X(q,C=>{e(t)?C(L):C(B,!1)})}v(P,V),$r()}var Gl=ht('<svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>'),Ul=ht('<svg class="w-5 h-5 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>'),Vl=ht('<svg class="w-5 h-5 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>'),Yl=m('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-qemcko"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <div class="flex-1 pr-6 pt-0.5"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100">Informaci√≥n</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors" aria-label="Cerrar alerta"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),ql=m("<option> </option>"),Jl=m("<option> </option>"),Wl=m("<option> </option>"),Kl=m("<option> </option>"),Zl=ht('<svg class="animate-spin h-7 w-7 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Ql=ht('<svg class="w-8 h-8 transform rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>'),Xl=m('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8"><div class="flex items-center gap-4 lg:flex-col"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center">Diario de Campo</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Abrir hoja de c√°lculo"><svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Hoja de C√°lculo</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Volver al Dashboard"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Dashboard</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize"> </span></button></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto pb-32"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border"><!> <form class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="space-y-2"><label for="fecha" class="block text-sm font-medium">Fecha</label> <input type="date" id="fecha" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"/></div> <div class="space-y-2"><label for="docente" class="block text-sm font-medium">Docente</label> <select id="docente" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50"><option> </option><!></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="space-y-2"><label for="materia" class="block text-sm font-medium">Asignatura</label> <select id="materia" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50"><option> </option><!></select></div> <div class="space-y-2"><label for="grado" class="block text-sm font-medium">Grado</label> <select id="grado" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50"><option> </option><!></select></div></div> <div class="space-y-2"><label for="horas" class="block text-sm font-medium">Horas</label> <select id="horas" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer"><option>Seleccione horas</option><!></select></div> <div class="space-y-2"><!></div> <div class="fixed bottom-8 right-8 z-50"><button type="submit" class="w-16 h-16 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-400 dark:disabled:bg-slate-700 disabled:cursor-not-allowed disabled:scale-100 text-white rounded-full shadow-2xl transition-all duration-300 transform hover:scale-110 active:scale-95 backdrop-blur-sm bg-opacity-95 flex items-center justify-center overflow-hidden border border-white/20" aria-label="Guardar Diario de Campo"><!></button></div></form></div></main></div>');function en(P,w){wr(w,!1);const n=()=>xo(Jr,"$theme",we),[we,f]=fo(),z=x(),t=x(),_e=x();let Me=$t(w,"onBack",8),D=x([]),le=x([]),V=x([]),q=x(!1),L=x(!1),B=x(!1),C=x(!1),s=x([]),c=x({fecha:new Date().toISOString().split("T")[0],docente:localStorage.getItem("lastDocenteDiario")||"",materia:"",grado:"",horas:""}),k=x(JSON.parse(localStorage.getItem("docenteMateriasDiario")||"{}"));const Z=(H,se)=>{!H||!se||(e(k)[H]||he(k,e(k)[H]=[]),e(k)[H].includes(se)||(he(k,e(k)[H]=[...e(k)[H],se]),localStorage.setItem("docenteMateriasDiario",JSON.stringify(e(k)))))};let ye=x(localStorage.getItem("dismissedInfoDiarioContent")!==$o);const U=()=>{i(ye,!1),localStorage.setItem("dismissedInfoDiarioContent",$o)},Ne=()=>`https://docs.google.com/spreadsheets/d/${Fo}`,Se=()=>{window.open(Ne(),"_blank")},We=()=>{Jr.update(H=>H==="light"?"dim":H==="dim"?"dark":"light")},pt=async()=>{i(q,!0),i(L,!0),i(B,!0);try{const[H,se,ke]=await Promise.all([Kr(),Zr(),Qr()]);i(D,H),i(le,se),i(V,ke)}catch(H){console.error("Error cargando datos iniciales:",H)}finally{i(q,!1),i(L,!1),i(B,!1)}},ot=async H=>{if(H.preventDefault(),e(C))return;const se=e(s).join(" | ");if((await Dt.fire({title:"¬øConfirmar Registro?",html:`
        <div class="text-left space-y-2 p-2 rounded-xl bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10" style="font-size: 0.9rem; line-height: 1.4;">
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Fecha:</strong> ${e(c).fecha}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Docente:</strong> ${e(c).docente}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Asignatura:</strong> ${e(c).materia}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Grado:</strong> ${e(c).grado}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Horas:</strong> ${e(c).horas}</div>
          <div style="margin-top: 12px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 8px;">
            <strong style="color: #6366f1;">Diario de Campo:</strong>
            <ul style="list-style-type: disc; padding-left: 20px; margin-top: 4px; font-size: 0.8rem; opacity: 0.8;">
              ${e(s).map(Ye=>`<li>${Ye}</li>`).join("")}
            </ul>
          </div>
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonText:"Si, de acuerdo",cancelButtonText:"No",confirmButtonColor:"#4f46e5",cancelButtonColor:"#64748b",reverseButtons:!0,background:n()==="light"?"#fff":"#1e293b",color:n()==="light"?"#1e293b":"#f1f5f9"})).isConfirmed){i(C,!0);try{const St=[[new Date().toLocaleString(),e(c).fecha,e(c).horas,e(c).docente,e(c).materia,e(c).grado,se]];await ka({spreadsheetId:Fo,worksheetTitle:fa,datos:St}),Z(e(c).docente,e(c).materia),await Dt.fire({icon:"success",title:"¬°√âxito!",text:"Diario de Campo registrado exitosamente",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),i(c,{fecha:new Date().toISOString().split("T")[0],docente:e(c).docente,materia:e(c).materia,grado:e(c).grado,horas:""}),i(s,[])}catch(Ye){console.error("Error enviando:",Ye),await Dt.fire({icon:"error",title:"Error",text:"Error al registrar el Diario de Campo",confirmButtonColor:"#ef4444"})}finally{i(C,!1)}}};kr(()=>{pt()}),Fe(()=>e(c),()=>{e(c).docente&&localStorage.setItem("lastDocenteDiario",e(c).docente)}),Fe(()=>(e(c),e(le),e(k)),()=>{i(z,e(c).docente?[...e(le)].sort((H,se)=>{const ke=e(k)[e(c).docente]?.includes(H.materia),Ye=e(k)[e(c).docente]?.includes(se.materia);return ke&&!Ye?-1:!ke&&Ye?1:H.materia.localeCompare(se.materia)}):e(le))}),Fe(()=>{},()=>{i(t,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Fe(()=>(e(c),e(s)),()=>{i(_e,e(c).fecha&&e(c).docente&&e(c).materia&&e(c).grado&&e(c).horas&&e(s).length>0)}),Ar(),Er();var at=Xl(),te=o(at),p=o(te),re=o(p),Ge=o(re),Ae=a(Ge,2),oe=a(re,2),N=o(oe),Q=a(N,2),J=a(Q,2),He=o(J);{var je=H=>{var se=Gl();v(H,se)},pe=H=>{var se=Ul();v(H,se)},K=H=>{var se=Vl();v(H,se)};X(He,H=>{n()==="dark"?H(je):n()==="light"?H(pe,1):H(K,!1)})}var ze=a(He,2),Ze=o(ze),Re=a(te,2),Ue=o(Re),_=o(Ue);{var d=H=>{var se=Yl(),ke=a(o(se),2),Ye=a(o(ke),2),St=o(Ye),Pt=a(ke,2);E(()=>b(St,$o)),R("click",Pt,U),v(H,se)};X(_,H=>{e(ye)&&H(d)})}var y=a(_,2),$=o(y),O=o($),G=o(O),ee=a(G,2),De=a(O,2),Y=o(De),F=a(Y,2),W=o(F),ue=o(W);W.value=W.__value="";var xe=a(W);me(xe,1,()=>e(D),Ce,(H,se)=>{var ke=ql(),Ye=o(ke),St={};E(()=>{b(Ye,e(se)),St!==(St=e(se))&&(ke.value=(ke.__value=e(se))??"")}),v(H,ke)});var Ve=a($,2),Ke=o(Ve),ve=o(Ke),M=a(ve,2),j=o(M),ie=o(j);j.value=j.__value="";var Te=a(j);me(Te,1,()=>e(z),Ce,(H,se)=>{const ke=Mt(()=>(e(k),e(c),e(se),r(()=>e(k)[e(c).docente]?.includes(e(se).materia))));var Ye=Jl(),St=o(Ye),Pt={};E(()=>{l(Ye,e(ke)?"color: #6366f1; font-weight: 600;":""),b(St,`${e(ke)?"‚≠ê ":""}${e(se),r(()=>e(se).materia)??""}`),Pt!==(Pt=(e(se),r(()=>e(se).materia)))&&(Ye.value=(Ye.__value=(e(se),r(()=>e(se).materia)))??"")}),v(H,Ye)});var g=a(Ke,2),T=o(g),ae=a(T,2),ce=o(ae),Qe=o(ce);ce.value=ce.__value="";var xt=a(ce);me(xt,1,()=>(e(V),r(()=>[...new Set(e(V).map(H=>H.grado.toString()))])),Ce,(H,se)=>{var ke=Wl(),Ye=o(ke),St={};E(Pt=>{b(Ye,Pt),St!==(St=e(se))&&(ke.value=(ke.__value=e(se))??"")},[()=>(e(se),r(()=>e(se).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),v(H,ke)});var zt=a(Ve,2),Le=o(zt),Lt=a(Le,2),Tt=o(Lt);Tt.value=Tt.__value="";var Yt=a(Tt);me(Yt,0,()=>[1,2,3,4],Ce,(H,se)=>{var ke=Kl(),Ye=o(ke),St={};E(Pt=>{b(Ye,`${se??""} ${se===1?"Hora":"Horas"}`),St!==(St=Pt)&&(ke.value=(ke.__value=Pt)??"")},[()=>r(()=>se.toString())]),v(H,ke)});var Zt=a(zt,2),Qt=o(Zt);Hl(Qt,{get selectedDiarioAnots(){return e(s)},set selectedDiarioAnots(H){i(s,H)},$$legacy:!0});var Ct=a(Zt,2),Ot=o(Ct),qt=o(Ot);{var Jt=H=>{var se=Zl();v(H,se)},Nt=H=>{var se=Ql();v(H,se)};X(qt,H=>{e(C)?H(Jt):H(Nt,!1)})}E(()=>{l(at,`background-color: ${e(t),r(()=>e(t).bg)??""};`),l(te,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),_t(Ge,"src",ro),l(Ae,`color: ${e(t),r(()=>e(t).text)??""};`),l(N,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(Q,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(J,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),b(Ze,n()),l(Ue,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),l(G,`color: ${e(t),r(()=>e(t).label)??""};`),l(ee,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""}; color-scheme: ${n()==="light"?"light":"dark"};`),l(Y,`color: ${e(t),r(()=>e(t).label)??""};`),l(F,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),b(ue,e(q)?"Cargando...":"Seleccione docente"),l(ve,`color: ${e(t),r(()=>e(t).label)??""};`),l(M,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),b(ie,e(L)?"Cargando...":"Seleccione asignatura"),l(T,`color: ${e(t),r(()=>e(t).label)??""};`),l(ae,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),b(Qe,e(B)?"Cargando...":"Seleccione grado"),l(Le,`color: ${e(t),r(()=>e(t).label)??""};`),l(Lt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),Ot.disabled=e(C)||!e(_e),_t(Ot,"title",e(_e)?"Guardar Diario de Campo":"Complete todos los campos requeridos")}),R("click",N,Se),R("click",Q,function(...H){Me()?.apply(this,H)}),R("click",J,We),dr(ee,()=>e(c).fecha,H=>(he(c,e(c).fecha=H),Oe(()=>{e(t),e(q),e(D),e(L),e(z),e(k),e(B),e(V)}))),nt(F,()=>e(c).docente,H=>(he(c,e(c).docente=H),Oe(()=>{e(t),e(q),e(D),e(L),e(z),e(k),e(B),e(V)}))),nt(M,()=>e(c).materia,H=>(he(c,e(c).materia=H),Oe(()=>{e(t),e(q),e(D),e(L),e(z),e(k),e(B),e(V)}))),nt(ae,()=>e(c).grado,H=>(he(c,e(c).grado=H),Oe(()=>{e(t),e(q),e(D),e(L),e(z),e(k),e(B),e(V)}))),nt(Lt,()=>e(c).horas,H=>(he(c,e(c).horas=H),Oe(()=>{e(t),e(q),e(D),e(L),e(z),e(k),e(B),e(V)}))),R("submit",y,ot),v(P,at),$r(),f()}var tn=m('<div class="w-full h-screen flex flex-col bg-[rgb(var(--bg-primary))]"><div class="h-16 flex items-center justify-between px-6 border-b transition-colors duration-200" style="background-color: rgb(var(--card-bg)); border-color: rgb(var(--card-border));"><button class="flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 font-medium" style="color: rgb(var(--text-primary));"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> Volver al Dashboard</button> <h2 class="text-lg font-bold" style="color: rgb(var(--text-primary));">Horas Laborables</h2> <div class="w-10"></div></div> <iframe src="https://ceslep.github.io/horas_laborables" title="Horas Laborables" class="flex-1 w-full border-none"></iframe></div>'),rn=m('<main class="w-full min-h-screen"><!></main>');function on(P){let w=x("dashboard");const n=V=>{i(w,V)},we=()=>{i(w,"dashboard")};var f=rn(),z=o(f);{var t=V=>{na(V,{onSelect:n})},_e=V=>{js(V,{onBack:we})},Me=V=>{Tl(V,{onBack:we})},D=V=>{en(V,{onBack:we})},le=V=>{var q=tn(),L=o(q),B=o(L);R("click",B,we),v(V,q)};X(z,V=>{e(w)==="dashboard"?V(t):e(w)==="inasistencia"?V(_e,1):e(w)==="anotador"?V(Me,2):e(w)==="diario"?V(D,3):e(w)==="horas_laborables"&&V(le,4)})}v(P,f)}Jo(on,{target:document.getElementById("app")});
