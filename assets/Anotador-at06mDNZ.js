import{p as Oo,a as oo,n as x,o as xo,l as X,j as g,u as e,b as To,i as Mo,s as l,d as q,t as R,h as U,e as k,g as Bo,N as ae,O as de,m as r,f as ho,v as t,A as ue,F as fe,P as ir,Q as He,R as It,k as I,x as i,y as C,D as Ge,r as tt,q as Ue,S as Et,U as Qo,H as pt,C as cr,z as dr,Z as Wo,c as vr,V as gr,B as pr,_ as br,$ as ur}from"./svelte-DdsiqXYP.js";import{S as $t}from"./ui-CHfsb5jC.js";import{d as Zo,e as Ro,f as mo,a as Lo,b as jo,c as Po,L as Ko,h as Fo,i as fr,j as xr}from"./Loader-DE2CalLS.js";import{e as Xo,F as hr,t as qo}from"./index-CofI4gHW.js";import{_ as Jo}from"./pdf-Da-GEdgZ.js";var mr=I('<div class="flex-1 flex items-center justify-center"><div class="text-center"><div class="animate-spin w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full mx-auto mb-4"></div> <p>Cargando datos...</p></div></div>'),_r=I('<span class="ml-2 px-2 py-1 text-xs bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full">Activos</span>'),yr=I("<option> </option>"),kr=I("<option> </option>"),wr=I('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">Este docente no tiene registros de materias</p>'),Cr=I("<option> </option>"),Ar=I('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">No hay grados para los filtros seleccionados</p>'),$r=I('<div class="flex-1 flex items-center justify-center"><div class="text-center py-12 px-4"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm sm:text-base">No se encontraron registros con los filtros seleccionados</p></div></div>'),Ir=I('<tr class="border-b transition-colors hover:bg-black/5 dark:hover:bg-white/5 text-xs"><td class="p-2"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 text-center"> </td><td class="p-2 text-center"> </td><td class="p-2"><div class="flex items-center gap-2 max-w-[300px]"><span><span> </span></span> <span class="truncate"> </span></div></td><td class="p-2"><span class="truncate block max-w-xs text-xs"> </span></td></tr>'),Er=I('<div><p class="text-xs font-medium mb-1">Observaci√≥n:</p> <p class="text-xs"> </p></div>'),Sr=I('<div class="border rounded-lg p-3 transition-colors hover:bg-black/5 dark:hover:bg-white/5"><div class="flex justify-between items-center mb-2"><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><span><span> </span></span> <p class="text-xs opacity-75"> </p></div></div></div> <div class="flex gap-2 text-[10px] mb-2"><div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="truncate"> </span></div> <div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <span class="truncate"> </span></div></div> <div class="mb-2"><p class="text-xs font-medium mb-1">Anotaci√≥n:</p> <p class="text-xs"> </p></div> <!></div>'),zr=I('<div class="hidden lg:flex flex-1 flex-col overflow-hidden min-h-0"><div class="flex-1 overflow-auto min-w-full border rounded-lg"><table class="w-full border-collapse text-sm min-w-[900px]"><thead class="sticky top-0 z-10 border-b"><tr><th class="text-left p-2 font-semibold whitespace-nowrap">Fecha</th><th class="text-left p-2 font-semibold whitespace-nowrap">Docente</th><th class="text-left p-2 font-semibold whitespace-nowrap">Materia</th><th class="text-center p-2 font-semibold whitespace-nowrap">Grado</th><th class="text-center p-2 font-semibold whitespace-nowrap">Horas</th><th class="text-left p-2 font-semibold whitespace-nowrap">Anotaci√≥n</th><th class="text-left p-2 font-semibold whitespace-nowrap">Observaci√≥n</th></tr></thead><tbody></tbody></table></div></div> <div class="flex-1 overflow-y-auto lg:hidden px-1"><div class="space-y-2"></div></div>',1),Dr=I('<div class="p-3 sm:p-4 border-b"><div class="flex items-center justify-between mb-2 sm:mb-3"><h3 class="text-lg font-semibold">Filtros <!></h3> <button class="text-sm px-3 py-1 rounded-lg border transition-colors hover:bg-black/5 dark:hover:bg-white/5">Limpiar filtros</button></div> <div class="mb-3 p-1.5 sm:p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg"><p class="text-[10px] sm:text-xs font-medium mb-1.5">R√°pido: Fechas</p> <div class="flex items-center mb-2"><input id="checkFiltrarFecha" type="checkbox" class="w-4 h-4 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 dark:bg-zinc-700"/> <label for="checkFiltrarFecha" class="ml-2 text-xs font-medium">Activar filtro por fechas</label></div> <div class="flex flex-wrap gap-1 sm:gap-2"><button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Hoy</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 7 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 30 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Mes actual</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimo trimestre</button></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"><div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroDocente" class="block text-xs sm:text-sm font-medium">Docente</label> <select id="filtroDocente" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option>Todos los docentes</option><!></select></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroMateria" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroMateria" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroGrado" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroGrado" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroAnotacion" class="block text-xs sm:text-sm font-medium">B√∫squeda en anotaci√≥n</label> <input id="filtroAnotacion" type="text" placeholder="Buscar en anotaciones..." class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"/></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaInicio" class="block text-xs sm:text-sm font-medium">Fecha desde</label> <input id="filtroFechaInicio" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaFin" class="block text-xs sm:text-sm font-medium">Fecha hasta</label> <input id="filtroFechaFin" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div></div></div></div> <div class="flex-1 flex flex-col p-2 sm:p-4 min-h-0"><div class="mb-4 px-0 sm:px-3"><p class="text-sm">Se encontraron <span class="font-bold text-indigo-500"> </span> registros</p></div> <!></div>',1),Nr=I('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4" role="button" tabindex="0" aria-label="Cerrar ventana"><div class="w-full max-w-7xl max-h-[95vh] bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl overflow-hidden flex flex-col"><div class="flex items-center justify-between p-3 sm:p-4 border-b"><div class="flex items-center gap-3"><img alt="EIE Logo" class="h-8 w-auto hidden sm:block"/> <div><h2 class="text-lg sm:text-xl font-bold">Anotaciones de Clase</h2> <p class="text-xs hidden sm:block">Filtra y consulta los registros</p></div></div> <div class="flex items-center gap-3"><button class="inline-flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Exportar CSV</button> <button class="p-2 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5" aria-label="Cerrar"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div> <div class="flex-1 overflow-hidden flex flex-col min-h-0"><!></div></div></div>');function Fr(Pt,Fe){Oo(Fe,!1);const P=x(),ot=x(),p=x(),xe=x(),o=x();let ve=oo(Fe,"onClose",8),O=oo(Fe,"selectedDocente",8,""),s=x([]),me=[],Ve=[],Q=[],z=x(!1),J=x(!1),se=x([]),c=x({docente:O()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",anotacion:""});const E=()=>{const b=new Date,w=new Date(b.getFullYear(),b.getMonth()-1,b.getDate()),F=T=>{const re=T.getFullYear(),ee=String(T.getMonth()+1).padStart(2,"0"),Ee=String(T.getDate()).padStart(2,"0");return`${re}-${ee}-${Ee}`};ae(c,e(c).fechaInicio=F(w)),de(()=>{e(o),e(H),e(P),e(p)}),ae(c,e(c).fechaFin=F(b)),de(()=>{e(o),e(H),e(P),e(p)})},B=b=>{const w=new Date;let F;switch(b){case"hoy":F=new Date(w);break;case"semana":F=new Date(w),F.setDate(w.getDate()-7);break;case"mes":F=new Date(w),F.setDate(w.getDate()-30);break;case"mes_actual":F=new Date(w.getFullYear(),w.getMonth(),1);break;case"trimestre":F=new Date(w),F.setDate(w.getDate()-90);break;default:E();return}const T=re=>{const ee=re.getFullYear(),Ee=String(re.getMonth()+1).padStart(2,"0"),Be=String(re.getDate()).padStart(2,"0");return`${ee}-${Ee}-${Be}`};ae(c,e(c).fechaInicio=T(F)),de(()=>{e(o),e(H),e(P),e(p)}),ae(c,e(c).fechaFin=T(w)),de(()=>{e(o),e(H),e(P),e(p)}),g(J,!0)},Z=[{value:"Estrategias de Ense√±anza-Aprendizaje",icon:"üìö",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},{value:"Evaluaci√≥n y Verificaci√≥n de Saberes",icon:"üìù",color:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200"},{value:"Enfoque STEM+ y Contexto Rural",icon:"üî¨",color:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200"},{value:"Pr√°cticas de Laboratorio y Mantenimiento",icon:"üîß",color:"bg-rose-100 text-rose-800 dark:bg-rose-900 dark:text-rose-200"},{value:"Ciudadan√≠a Digital y √âtica",icon:"üíª",color:"bg-violet-100 text-violet-800 dark:bg-violet-900 dark:text-violet-200"},{value:"Pensamiento Computacional y Programaci√≥n",icon:"üíª",color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"},{value:"Recursos Anal√≥gicos y Contingencias",icon:"üìã",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},{value:"Ofim√°tica y Competencias Productivas",icon:"üñ•Ô∏è",color:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200"},{value:"Gesti√≥n Administrativa y Proyectos Transversales",icon:"üìä",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}],L=b=>{for(const w of Z)if(b.includes(w.value))return w;return{icon:"üìù",color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};let H=x([]),K=x([]),_e=x([]),ke=x([]);const Ye=async()=>{g(z,!0);try{const[b,w,F,T]=await Promise.all([Zo({spreadsheetId:mo,worksheetTitle:Ro}),Lo(),jo(),Po()]),re=A=>{if(!A?.records||!Array.isArray(A.records))return[];const we=A.records[0]?.values||[];return A.records.slice(1).map(ge=>{const ne=ge.values||[];return{timestamp:ne[0]||"",fecha:ne[1]||"",docente:ne[2]||"",materia:ne[3]||"",grado:ne[4]||"",horas:ne[5]||"",anotacion:ne[6]||"",observacion:ne[7]||""}}).filter(ge=>ge.docente&&ge.fecha)},ee=A=>Array.isArray(A)?A:A?.data&&Array.isArray(A.data)?A.data:A?.rows&&Array.isArray(A.rows)?A.rows:A?.values&&Array.isArray(A.values)?A.values:A?.anotaciones&&Array.isArray(A.anotaciones)?A.anotaciones:[];g(s,re(b)),me=ee(w),Ve=ee(F),Q=ee(T),g(H,e(s).length>0?[...new Set(e(s).map(A=>A.docente).filter(Boolean))].sort():[]),g(K,e(s).length>0?[...new Set(e(s).map(A=>A.materia).filter(Boolean))].sort():[]);const Ee=[...new Set(Q.map(A=>(typeof A=="string"?A:A.grado||"").toString()).filter(Boolean))],Be=e(s).length>0?e(s).map(A=>A.grado).filter(Boolean):[];g(_e,[...new Set([...Ee,...Be])].sort((A,we)=>{const Se=parseInt(A),ge=parseInt(we);return!isNaN(Se)&&!isNaN(ge)?Se-ge:A.localeCompare(we)})),g(ke,e(s).length>0?[...new Set(e(s).map(A=>A.anotacion).filter(Boolean))].sort():[]),E(),console.log("Datos cargados:",{anotaciones:e(s).length,docentes:me.length,docentesUnicos:e(H).length,materiasUnicas:e(K).length,gradosUnicos:e(_e).length,anotacionesUnicas:e(ke).length})}catch(b){console.error("Error cargando datos:",b),await $t.fire({icon:"error",title:"Error",text:"No se pudieron cargar los datos de anotaciones",confirmButtonColor:"#ef4444"})}finally{g(z,!1)}},Oe=()=>{g(c,{docente:O()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",anotacion:""}),E(),g(J,!1)},St=()=>{if(e(se).length===0){$t.fire({icon:"warning",title:"Sin datos",text:"No hay datos para exportar",confirmButtonColor:"#f59e0b"});return}const w=[["Fecha","Docente","Materia","Grado","Horas","Anotaci√≥n","Observaci√≥n"].join(","),...e(se).map(ee=>[ee.fecha,`"${ee.docente}"`,`"${ee.materia}"`,ee.grado,ee.horas,`"${ee.anotacion}"`,`"${ee.observacion}"`].join(","))].join(`
`),F=new Blob([w],{type:"text/csv;charset=utf-8;"}),T=document.createElement("a"),re=URL.createObjectURL(F);T.setAttribute("href",re),T.setAttribute("download",`anotaciones_${new Date().toISOString().split("T")[0]}.csv`),T.style.visibility="hidden",document.body.appendChild(T),T.click(),document.body.removeChild(T)},rt=b=>{try{const[w,F,T]=b.split("-");return w&&F&&T?`${T}/${F}/${w}`:b}catch{return b}},bt=(b,w=50)=>b.length<=w?b:b.substring(0,w)+"...";xo(()=>{Ye()}),X(()=>(e(c),e(s),e(K)),()=>{g(P,e(c).docente?[...new Set(e(s).filter(b=>b.docente===e(c).docente).map(b=>b.materia).filter(Boolean))].sort():e(K))}),X(()=>(e(c),e(s),e(_e)),()=>{g(ot,e(c).docente?[...new Set(e(s).filter(b=>b.docente===e(c).docente).map(b=>b.grado).filter(Boolean))].sort((b,w)=>{const F=parseInt(b),T=parseInt(w);return!isNaN(F)&&!isNaN(T)?F-T:b.localeCompare(w)}):e(_e))}),X(()=>(e(c),e(s),e(ot)),()=>{g(p,e(c).materia?[...new Set(e(s).filter(b=>b.materia===e(c).materia).map(b=>b.grado).filter(Boolean))].sort((b,w)=>{const F=parseInt(b),T=parseInt(w);return!isNaN(F)&&!isNaN(T)?F-T:b.localeCompare(w)}):e(ot))}),X(()=>(e(c),e(s),e(ke)),()=>{g(xe,e(c).docente||e(c).materia||e(c).grado?[...new Set(e(s).filter(b=>!(e(c).docente&&b.docente!==e(c).docente||e(c).materia&&b.materia!==e(c).materia||e(c).grado&&b.grado!==e(c).grado)).map(b=>b.anotacion).filter(Boolean))].sort():e(ke))}),X(()=>{},()=>{g(o,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),X(()=>(e(s),e(c),e(J)),()=>{g(se,e(s).filter(b=>{if(e(c).docente&&b.docente!==e(c).docente||e(c).materia&&b.materia!==e(c).materia||e(c).grado&&b.grado!==e(c).grado||e(c).anotacion&&!b.anotacion.toLowerCase().includes(e(c).anotacion.toLowerCase()))return!1;if(e(J)){const w=b.fecha;if(e(c).fechaInicio&&w<e(c).fechaInicio||e(c).fechaFin&&w>e(c).fechaFin)return!1}return!0}))}),X(()=>(e(J),e(c)),()=>{e(J)&&(!e(c).fechaInicio||!e(c).fechaFin)&&E()}),To(),Mo();var ye=Nr(),at=r(ye),d=r(at),V=r(d),ut=r(V),ft=l(ut,2),We=r(ft),Gt=l(We,2),Te=l(V,2),N=r(Te),Me=l(N,2),qe=l(d,2),zt=r(qe);{var Ut=b=>{var w=mr(),F=r(w),T=l(r(F),2);R(()=>i(T,`color: ${e(o),t(()=>e(o).text)??""};`)),k(b,w)},Dt=b=>{var w=Dr(),F=ho(w),T=r(F),re=r(T),ee=l(r(re));{var Ee=$=>{var G=_r();k($,G)};q(ee,$=>{e(c),t(()=>e(c).docente||e(c).materia||e(c).grado||e(c).anotacion||e(c).fechaInicio||e(c).fechaFin)&&$(Ee)})}var Be=l(re,2),A=l(T,2),we=r(A),Se=l(we,2),ge=r(Se),ne=l(ge,2),xt=l(Se,2),ht=r(xt),st=l(ht,2),lt=l(st,2),mt=l(lt,2),Nt=l(mt,2),_t=l(A,2),n=r(_t),u=r(n),m=r(u),y=l(m,2),Y=r(y);Y.value=Y.__value="";var le=l(Y);ue(le,1,()=>e(H),fe,($,G)=>{var oe=yr(),he=r(oe),pe={};R(()=>{C(he,e(G)),pe!==(pe=e(G))&&(oe.value=(oe.__value=e(G))??"")}),k($,oe)});var Ce=l(u,2),D=r(Ce),Ht=r(D),nt=l(D,2),Je=r(nt),Vt=r(Je);Je.value=Je.__value="";var Yt=l(Je);ue(Yt,1,()=>e(P),fe,($,G)=>{var oe=kr(),he=r(oe),pe={};R(()=>{C(he,e(G)),pe!==(pe=e(G))&&(oe.value=(oe.__value=e(G))??"")}),k($,oe)});var Re=l(nt,2);{var te=$=>{var G=wr();k($,G)};q(Re,$=>{e(c),e(P),t(()=>e(c).docente&&e(P).length===0)&&$(te)})}var ze=l(n,2),Le=r(ze),je=r(Le),Qe=r(je),De=l(je,2),Pe=r(De),it=r(Pe);Pe.value=Pe.__value="";var Ft=l(Pe);ue(Ft,1,()=>e(p),fe,($,G)=>{var oe=Cr(),he=r(oe),pe={};R(()=>{C(he,e(G)),pe!==(pe=e(G))&&(oe.value=(oe.__value=e(G))??"")}),k($,oe)});var Ot=l(De,2);{var Ze=$=>{var G=Ar();k($,G)};q(Ot,$=>{e(c),e(p),t(()=>(e(c).docente||e(c).materia)&&e(p).length===0)&&$(Ze)})}var ct=l(Le,2),ro=r(ct),ao=l(ro,2),_o=l(ze,2),Wt=r(_o),yt=r(Wt),dt=l(yt,2),yo=l(Wt,2),so=r(yo),Tt=l(so,2),lo=l(F,2),qt=r(lo),kt=r(qt),Mt=l(r(kt)),ko=r(Mt),wo=l(qt,2);{var Co=$=>{var G=$r(),oe=r(G),he=r(oe),pe=l(he,2);R(()=>{i(he,`color: ${e(o),t(()=>e(o).icon)??""};`),i(pe,`color: ${e(o),t(()=>e(o).text)??""};`)}),k($,G)},no=$=>{var G=zr(),oe=ho(G),he=r(oe),pe=r(he),Bt=r(pe),Jt=r(Bt),Qt=r(Jt),io=l(Qt),co=l(io),vo=l(co),go=l(vo),po=l(go),bo=l(po),Ao=l(Bt);ue(Ao,5,()=>e(se),fe,(Rt,_)=>{const Ae=Et(()=>(e(_),t(()=>L(e(_).anotacion))));var Ke=Ir(),Xe=r(Ke),Zt=r(Xe),vt=l(Xe),wt=r(vt),et=l(vt),Kt=r(et),gt=l(et),Xt=r(gt),a=l(gt),v=r(a),f=l(a),h=r(f),M=r(h),S=r(M),W=r(S),ie=l(M,2),j=r(ie),Ne=l(f),Lt=r(Ne),Ct=r(Lt);R((jt,$e)=>{i(Ke,`border-color: ${e(o),t(()=>e(o).border)??""};`),i(Xe,`color: ${e(o),t(()=>e(o).text)??""};`),C(Zt,jt),i(vt,`color: ${e(o),t(()=>e(o).text)??""};`),Ge(vt,"title",(e(_),t(()=>e(_).docente))),C(wt,(e(_),t(()=>e(_).docente))),i(et,`color: ${e(o),t(()=>e(o).text)??""};`),Ge(et,"title",(e(_),t(()=>e(_).materia))),C(Kt,(e(_),t(()=>e(_).materia))),i(gt,`color: ${e(o),t(()=>e(o).text)??""};`),C(Xt,(e(_),t(()=>e(_).grado))),i(a,`color: ${e(o),t(()=>e(o).text)??""};`),C(v,(e(_),t(()=>e(_).horas))),i(f,`color: ${e(o),t(()=>e(o).text)??""};`),tt(M,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Ue(e(Ae)),t(()=>e(Ae).color)??""} flex-shrink-0`),C(W,(Ue(e(Ae)),t(()=>e(Ae).icon))),Ge(ie,"title",(e(_),t(()=>e(_).anotacion))),C(j,$e),i(Ne,`color: ${e(o),t(()=>e(o).text)??""};`),C(Ct,(e(_),t(()=>e(_).observacion||"-")))},[()=>(e(_),t(()=>rt(e(_).fecha))),()=>(e(_),t(()=>bt(e(_).anotacion,100)))]),k(Rt,Ke)});var $o=l(oe,2),Io=r($o);ue(Io,5,()=>e(se),fe,(Rt,_)=>{const Ae=Et(()=>(e(_),t(()=>L(e(_).anotacion))));var Ke=Sr(),Xe=r(Ke),Zt=r(Xe),vt=r(Zt),wt=r(vt),et=r(wt),Kt=r(et),gt=l(wt,2),Xt=r(gt),a=l(Xe,2),v=r(a),f=l(r(v),2),h=r(f),M=l(v,2),S=l(r(M),2),W=r(S),ie=l(a,2),j=r(ie),Ne=l(j,2),Lt=r(Ne),Ct=l(ie,2);{var jt=$e=>{var At=Er(),uo=r(At),eo=l(uo,2),Eo=r(eo);R(So=>{i(uo,`color: ${e(o),t(()=>e(o).label)??""};`),i(eo,`color: ${e(o),t(()=>e(o).text)??""};`),Ge(eo,"title",(e(_),t(()=>e(_).observacion))),C(Eo,So)},[()=>(e(_),t(()=>bt(e(_).observacion,150)))]),k($e,At)};q(Ct,$e=>{e(_),t(()=>e(_).observacion)&&$e(jt)})}R(($e,At)=>{i(Ke,`border-color: ${e(o),t(()=>e(o).cardBorder)??""}; background-color: ${e(o),t(()=>e(o).cardBg)??""};`),tt(wt,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium ${Ue(e(Ae)),t(()=>e(Ae).color)??""} flex-shrink-0`),C(Kt,(Ue(e(Ae)),t(()=>e(Ae).icon))),i(gt,`color: ${e(o),t(()=>e(o).label)??""};`),C(Xt,`${e(_),t(()=>e(_).grado)??""} ‚Ä¢ ${$e??""} ‚Ä¢ ${e(_),t(()=>e(_).horas)??""}h`),i(a,`color: ${e(o),t(()=>e(o).text)??""};`),C(h,(e(_),t(()=>e(_).docente))),Ge(S,"title",(e(_),t(()=>e(_).materia))),C(W,(e(_),t(()=>e(_).materia))),i(j,`color: ${e(o),t(()=>e(o).label)??""};`),i(Ne,`color: ${e(o),t(()=>e(o).text)??""};`),Ge(Ne,"title",(e(_),t(()=>e(_).anotacion))),C(Lt,At)},[()=>(e(_),t(()=>rt(e(_).fecha))),()=>(e(_),t(()=>bt(e(_).anotacion,150)))]),k(Rt,Ke)}),R(()=>{i(he,`border-color: ${e(o),t(()=>e(o).cardBorder)??""};`),i(Bt,`background-color: ${e(o),t(()=>e(o).cardBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""};`),i(Qt,`color: ${e(o),t(()=>e(o).text)??""};`),i(io,`color: ${e(o),t(()=>e(o).text)??""};`),i(co,`color: ${e(o),t(()=>e(o).text)??""};`),i(vo,`color: ${e(o),t(()=>e(o).text)??""};`),i(go,`color: ${e(o),t(()=>e(o).text)??""};`),i(po,`color: ${e(o),t(()=>e(o).text)??""};`),i(bo,`color: ${e(o),t(()=>e(o).text)??""};`)}),k($,G)};q(wo,$=>{e(se),t(()=>e(se).length===0)?$(Co):$(no,!1)})}R(()=>{i(F,`border-color: ${e(o),t(()=>e(o).cardBorder)??""};`),i(re,`color: ${e(o),t(()=>e(o).text)??""};`),i(Be,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),i(we,`color: ${e(o),t(()=>e(o).text)??""};`),i(ne,`color: ${e(o),t(()=>e(o).text)??""};`),i(ht,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),i(st,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),i(lt,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),i(mt,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),i(Nt,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),i(m,`color: ${e(o),t(()=>e(o).label)??""};`),i(y,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),i(D,`color: ${e(o),t(()=>e(o).label)??""};`),C(Ht,`Materia ${e(c),t(()=>e(c).docente?"(del docente)":"")??""}`),i(nt,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),C(Vt,(e(c),t(()=>e(c).docente?"Todas las materias del docente":"Todas las materias"))),i(je,`color: ${e(o),t(()=>e(o).label)??""};`),C(Qe,`Grado ${e(c),t(()=>e(c).docente||e(c).materia?"(filtrado)":"")??""}`),i(De,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),C(it,(e(c),t(()=>e(c).docente||e(c).materia?"Todos los grados filtrados":"Todos los grados"))),i(ro,`color: ${e(o),t(()=>e(o).label)??""};`),i(ao,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),i(yt,`color: ${e(o),t(()=>e(o).label)??""};`),dt.disabled=!e(J),i(dt,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),i(so,`color: ${e(o),t(()=>e(o).label)??""};`),Tt.disabled=!e(J),i(Tt,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),i(kt,`color: ${e(o),t(()=>e(o).label)??""};`),C(ko,(e(se),t(()=>e(se).length)))}),U("click",Be,Oe),ir(ge,()=>e(J),$=>g(J,$)),U("click",ht,()=>B("hoy")),U("click",st,()=>B("semana")),U("click",lt,()=>B("mes")),U("click",mt,()=>B("mes_actual")),U("click",Nt,()=>B("trimestre")),He(y,()=>e(c).docente,$=>(ae(c,e(c).docente=$),de(()=>{e(o),e(H),e(P),e(p)}))),He(nt,()=>e(c).materia,$=>(ae(c,e(c).materia=$),de(()=>{e(o),e(H),e(P),e(p)}))),He(De,()=>e(c).grado,$=>(ae(c,e(c).grado=$),de(()=>{e(o),e(H),e(P),e(p)}))),It(ao,()=>e(c).anotacion,$=>(ae(c,e(c).anotacion=$),de(()=>{e(o),e(H),e(P),e(p)}))),It(dt,()=>e(c).fechaInicio,$=>(ae(c,e(c).fechaInicio=$),de(()=>{e(o),e(H),e(P),e(p)}))),It(Tt,()=>e(c).fechaFin,$=>(ae(c,e(c).fechaFin=$),de(()=>{e(o),e(H),e(P),e(p)}))),k(b,w)};q(zt,b=>{e(z)?b(Ut):b(Dt,!1)})}R(()=>{i(at,`background-color: ${e(o),t(()=>e(o).cardBg)??""};`),i(d,`border-color: ${e(o),t(()=>e(o).cardBorder)??""};`),Ge(ut,"src",Xo),i(We,`color: ${e(o),t(()=>e(o).text)??""};`),i(Gt,`color: ${e(o),t(()=>e(o).label)??""};`),N.disabled=(e(se),t(()=>e(se).length===0)),i(Me,`color: ${e(o),t(()=>e(o).text)??""};`)}),U("click",N,St),U("click",Me,function(...b){ve()?.apply(this,b)}),U("click",ye,Qo(function(...b){ve()?.apply(this,b)})),U("keydown",ye,b=>{(b.key==="Enter"||b.key===" ")&&ve()()}),k(Pt,ye),Bo()}var Or=I("<option> </option>"),Tr=I("<option> </option>"),Mr=I("<option> </option>"),Br=pt('<svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Cargando...',1),Rr=pt('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> Aplicar Filtros',1),Lr=I('<div class="text-sm opacity-75"> </div>'),jr=I('<div class="flex items-center justify-center py-12"><!></div>'),Pr=I('<div class="text-center py-12"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v2a2 2 0 002 2h6a2 2 0 002-2v-2M9 17H5a2 2 0 01-2-2v-6a2 2 0 012-2h4M9 7V5a2 2 0 012-2h6a2 2 0 012 2v2M9 7h10a2 2 0 012 2v6a2 2 0 01-2 2H9M9 7V17m0 0h10"></path></svg> <p class="text-lg font-medium mb-2">No hay datos disponibles</p> <p class="text-sm"> </p></div>'),Gr=I('<tr class="border-t transition-colors hover:bg-gray-50 dark:hover:bg-gray-800"><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"><div class="truncate"> </div></td><td class="px-4 py-3 text-sm"><div class="truncate"> </div></td></tr>'),Ur=I('<tr class="border-t-2 font-bold bg-gray-100 dark:bg-gray-800"><td class="px-4 py-3 text-sm font-bold">TOTAL</td><td class="px-4 py-3 text-sm font-bold text-center"> </td><td class="px-4 py-3 text-sm font-bold text-center"></td><td class="px-4 py-3 text-sm font-bold text-center"> </td></tr>'),Hr=I('<div class="overflow-x-auto rounded-lg border"><table class="w-full"><thead><tr><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Fecha</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Horas</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Asignatura</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Anotaci√≥n</th></tr></thead><tbody><!><!></tbody></table></div>'),Vr=I('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-2xl" role="document"><div class="flex items-center justify-between p-6 border-b"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v2a2 2 0 002 2h6a2 2 0 002-2v-2M9 17H5a2 2 0 01-2-2v-6a2 2 0 012-2h4M9 7V5a2 2 0 012-2h6a2 2 0 012 2v2M9 7h10a2 2 0 012 2v6a2 2 0 01-2 2H9M9 7V17m0 0h10"></path></svg></div> <div><h2 id="modal-title" class="text-xl font-bold">Generador de Reportes PDF</h2> <p class="text-sm opacity-75">Filtre y genere reportes de anotaciones</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar ventana de reportes" title="Cerrar"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 140px);"><div class="mb-6 p-4 rounded-xl border"><h3 class="text-lg font-semibold mb-4">Filtros</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="space-y-2"><label for="docente-filter" class="block text-sm font-medium">Docente</label> <select id="docente-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los docentes</option><!></select></div> <div class="space-y-2"><label for="materia-filter" class="block text-sm font-medium">Asignatura</label> <select id="materia-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todas las asignaturas</option><!></select></div> <div class="space-y-2"><label for="grado-filter" class="block text-sm font-medium">Grado</label> <select id="grado-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los grados</option><!></select></div></div> <div class="flex gap-3 mt-4"><button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2"><!></button> <button class="px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> Limpiar</button> <button class="ml-auto px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Generar PDF</button></div></div> <div class="mb-4"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold"> </h3> <!></div></div> <!></div></div></div>');function Yr(Pt,Fe){Oo(Fe,!1);const P=x(),ot=x(),p=x();let xe=null,o=null,ve=oo(Fe,"onClose",8),O=oo(Fe,"initialDocente",8,""),s=x([]),me=x([]),Ve=x([]),Q=[],z=x([]),J=x(!1);const se=async()=>{if(!xe||!o){const[n,u]=await Promise.all([Jo(()=>import("./pdf-Da-GEdgZ.js").then(m=>m.j),[]),Jo(()=>import("./pdf-Da-GEdgZ.js").then(m=>m.b),[])]);xe=n.default,o=u.default}};let c=x(JSON.parse(localStorage.getItem("docenteMaterias")||"{}")),E=x(""),B=x(""),Z=x("");xo(()=>{O()&&g(E,O())}),xo(async()=>{console.log("üöÄ ReportGenerator montado"),await L()});const L=async()=>{try{const[n,u,m]=await Promise.all([Lo(),jo(),Po()]);g(s,n),g(me,u),g(Ve,m),g(c,JSON.parse(localStorage.getItem("docenteMaterias")||"{}"))}catch(n){console.error("Error cargando datos iniciales:",n)}},H=async()=>{g(J,!0);try{const n={spreadsheetId:mo,worksheetTitle:Ro};e(E)&&(n.docente=e(E)),e(B)&&(n.materia=e(B)),e(Z)&&(n.grado=e(Z)),console.log("üîç Enviando payload a getAnotador:",n);const u=await Zo(n);console.log("üìä Respuesta de getAnotador:",u);let m=u;if(u&&typeof u=="object"&&(u.data?m=u.data:u.records?m=u.records:Array.isArray(u)&&(m=u)),Q=Array.isArray(m)?m:[],console.log("‚úÖ Datos procesados:",Q.length,"registros"),console.log("üîç Keys del primer registro:",Q[0]?Object.keys(Q[0]):"No hay registros"),Q.length>0&&Q[0].values){console.log("üîÑ Transformando datos desde formato .values");const y=["Marca Temporal","Fecha","Docente","Asignatura","Grado","Horas","Anotaci√≥n"];Q=Q.map(Y=>{const le={"Marca Temporal":"",Fecha:"",Docente:"",Asignatura:"",Grado:"",Horas:"",Anotaci√≥n:""};return y.forEach((Ce,D)=>{le[Ce]=Y.values?.[D]||""}),le}),console.log("üìä Datos transformados:",Q.length,"registros")}K()}catch(n){if(console.error("‚ùå Error cargando datos del anotador:",n),n instanceof Error&&console.error("üìã Error details:",n.message),n&&typeof n=="object"&&"response"in n){const u=n.response;u&&(console.error("üåê Response status:",u.status),console.error("üåê Response data:",u.data))}Q=[],g(z,[])}finally{g(J,!1)}},K=()=>{if(console.log("üîç Aplicando filtros locales:",{totalRegistros:Q.length,isArray:Array.isArray(Q),docente:e(E),materia:e(B),grado:e(Z)}),!Array.isArray(Q)){console.error("‚ùå anotadorData no es un array:",typeof Q,Q),g(z,[]);return}g(z,Q.filter(n=>{if(!n||typeof n!="object")return console.log("‚ö†Ô∏è Registro inv√°lido:",n),!1;const u=!e(E)||n.Docente===e(E),m=!e(B)||n.Asignatura===e(B),y=!e(Z)||n.Grado===e(Z);return!u&&e(E)&&console.log("‚ùå No coincide docente:",{expected:e(E),actual:n.Docente}),!m&&e(B)&&console.log("‚ùå No coincide materia:",{expected:e(B),actual:n.Asignatura}),!y&&e(Z)&&console.log("‚ùå No coincide grado:",{expected:e(Z),actual:n.Grado}),u&&m&&y})),console.log("‚úÖ Registros filtrados:",e(z).length)},_e=()=>{H()},ke=()=>{g(E,""),g(B,""),g(Z,""),Q=[],g(z,[])},Ye=async()=>{if(await se(),e(z).length===0){alert("No hay datos para generar el PDF");return}const n=new xe({format:"letter"}),u="Anotador de Clases",m=[];e(E)&&m.push(`Docente: ${e(E)}`),e(B)&&m.push(`Asignatura: ${e(B)}`),e(Z)&&m.push(`Grado: ${e(Z)}`);let y=20;try{console.log("üñºÔ∏è Intentando agregar logo EIE al PDF..."),n.setTextColor(99,102,241),n.setFontSize(28),n.setFont("helvetica","bold"),n.text("EIE",n.internal.pageSize.getWidth()/2,y,{align:"center"}),y+=15,console.log("‚úÖ Logo EIE (texto) agregado correctamente")}catch(D){console.log("‚ùå Error con logo EIE, usando fallback:",D),n.setTextColor(99,102,241),n.setFontSize(24),n.text("EIE",n.internal.pageSize.getWidth()/2,y,{align:"center"}),y+=15}n.setTextColor(0,0,0),n.setFontSize(18),n.setFont("helvetica","bold"),n.text(u,n.internal.pageSize.getWidth()/2,y,{align:"center"}),y+=12,n.setTextColor(0,0,0),n.setFontSize(12),n.setFont("helvetica","normal"),n.text("Instituci√≥n Educativa Instituto Gu√°tica",n.internal.pageSize.getWidth()/2,y,{align:"center"}),y+=10,n.setTextColor(60,60,60),n.setFontSize(10),n.setFont("helvetica","normal"),n.text(`Fecha de generaci√≥n: ${new Date().toLocaleDateString()}`,n.internal.pageSize.getWidth()/2,y,{align:"center"}),y+=15,n.setDrawColor(200,200,200),n.setLineWidth(1),n.line(20,y,n.internal.pageSize.getWidth()-20,y),y+=15,m.length>0&&(n.setTextColor(80,80,80),n.setFontSize(9),n.setFont("helvetica","normal"),m.forEach(D=>{n.text(D,20,y,{align:"left"}),y+=6}),y+=10);const Y=e(z).map(D=>[D.Fecha||"",D.Horas||"",D.Asignatura||"",D.Anotaci√≥n||""]),le=["TOTAL",e(P).toFixed(1),"",""];Y.push(le),console.log("üìä Generando PDF con:",{totalHoras:e(P),registros:e(z).length,filasTabla:Y.length}),o(n,{head:[["Fecha","Horas","Asignatura","Anotaci√≥n"]],body:Y,startY:y,styles:{fontSize:8,cellPadding:2,cellWidth:"wrap",valign:"top",overflow:"linebreak"},headStyles:{fillColor:[99,102,241],textColor:255,fontSize:9,fontStyle:"bold",halign:"center"},bodyStyles:{fillColor:[255,255,255],textColor:[0,0,0]},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:{0:{cellWidth:30,minCellHeight:8,halign:"center"},1:{cellWidth:20,minCellHeight:8,halign:"center"},2:{cellWidth:45,minCellHeight:8},3:{cellWidth:"auto",minCellHeight:12}},margin:{top:15,right:15,bottom:15,left:15},tableWidth:"auto",didParseCell:D=>{D.row.index===Y.length-1&&(D.cell.styles.fillColor=[240,240,240],D.cell.styles.fontStyle="bold",D.cell.styles.textColor=[0,0,0],D.column.index===0&&(D.cell.styles.halign="center",D.cell.styles.fillColor=[230,230,230]),D.column.index===1&&(D.cell.styles.halign="center",D.cell.styles.fillColor=[220,220,220]),D.column.index===2&&(D.cell.styles.halign="center",D.cell.styles.fillColor=[220,220,220]),D.column.index===3&&(D.cell.styles.halign="center",D.cell.styles.fillColor=[220,220,220]))}});const Ce=`reporte_anotaciones_${e(E)||"todos"}_${e(B)||"todas"}_${e(Z)||"todos"}_${new Date().toISOString().split("T")[0]}.pdf`;n.save(Ce),console.log("üíæ PDF guardado exitosamente:",Ce)};X(()=>e(z),()=>{g(P,e(z).reduce((n,u)=>{const m=parseFloat(u.Horas||"0");return n+(isNaN(m)?0:m)},0))}),X(()=>(e(E),e(me),e(c)),()=>{g(ot,e(E)?[...e(me)].sort((n,u)=>{const m=e(c)[e(E)]?.includes(n.materia),y=e(c)[e(E)]?.includes(u.materia);return m&&!y?-1:!m&&y?1:n.materia.localeCompare(u.materia)}):e(me))}),X(()=>{},()=>{g(p,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),To(),Mo();var Oe=Vr(),St=r(Oe),rt=r(St),bt=l(r(rt),2),ye=l(rt,2),at=r(ye),d=l(r(at),2),V=r(d),ut=r(V),ft=l(ut,2),We=r(ft);We.value=We.__value="";var Gt=l(We);ue(Gt,1,()=>e(s),fe,(n,u)=>{var m=Or(),y=r(m),Y={};R(()=>{C(y,e(u)),Y!==(Y=e(u))&&(m.value=(m.__value=e(u))??"")}),k(n,m)});var Te=l(V,2),N=r(Te),Me=l(N,2),qe=r(Me);qe.value=qe.__value="";var zt=l(qe);ue(zt,1,()=>e(ot),fe,(n,u)=>{const m=Et(()=>(e(E),e(c),e(u),t(()=>e(E)&&e(c)[e(E)]?.includes(e(u).materia))));var y=Tr(),Y=r(y),le={};R(()=>{i(y,e(m)?"color: #6366f1; font-weight: 600;":""),C(Y,`${e(m)?"‚≠ê ":""}${e(u),t(()=>e(u).materia)??""}`),le!==(le=(e(u),t(()=>e(u).materia)))&&(y.value=(y.__value=(e(u),t(()=>e(u).materia)))??"")}),k(n,y)});var Ut=l(Te,2),Dt=r(Ut),b=l(Dt,2),w=r(b);w.value=w.__value="";var F=l(w);ue(F,1,()=>(e(Ve),t(()=>[...new Set(e(Ve).map(n=>n.grado.toString()))])),fe,(n,u)=>{var m=Mr(),y=r(m),Y={};R(le=>{C(y,le),Y!==(Y=e(u))&&(m.value=(m.__value=e(u))??"")},[()=>(e(u),t(()=>e(u).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),k(n,m)});var T=l(d,2),re=r(T),ee=r(re);{var Ee=n=>{var u=Br();k(n,u)},Be=n=>{var u=Rr();k(n,u)};q(ee,n=>{e(J)?n(Ee):n(Be,!1)})}var A=l(re,2),we=l(A,2),Se=l(at,2),ge=r(Se),ne=r(ge),xt=r(ne),ht=l(ne,2);{var st=n=>{var u=Lr(),m=r(u);R(()=>C(m,`${(e(E)&&`Docente: ${e(E)}`)??""}
              ${(e(B)&&` | Asignatura: ${e(B)}`)??""}
              ${(e(Z)&&` | Grado: ${e(Z)}`)??""}`)),k(n,u)};q(ht,n=>{e(z),t(()=>e(z).length>0)&&n(st)})}var lt=l(Se,2);{var mt=n=>{var u=jr(),m=r(u);Ko(m,{message:"Cargando datos del anotador..."}),k(n,u)},Nt=n=>{var u=Pr(),m=l(r(u),4),y=r(m);R(()=>{i(u,`color: ${e(p),t(()=>e(p).placeholder)??""};`),C(y,e(E)||e(B)||e(Z)?"No se encontraron registros con los filtros seleccionados. Intente con otros criterios.":"Seleccione filtros y haga clic en 'Aplicar Filtros' para cargar los datos.")}),k(n,u)},_t=n=>{var u=Hr(),m=r(u),y=r(m),Y=r(y),le=r(Y),Ce=l(le),D=l(Ce),Ht=l(D),nt=l(y),Je=r(nt);ue(Je,1,()=>e(z),fe,(Re,te)=>{var ze=Gr(),Le=r(ze),je=r(Le),Qe=l(Le),De=r(Qe),Pe=l(Qe),it=r(Pe),Ft=r(it),Ot=l(Pe),Ze=r(Ot),ct=r(Ze);R(()=>{i(ze,`border-color: ${e(p),t(()=>e(p).border)??""};`),C(je,(e(te),t(()=>e(te).Fecha||"-"))),C(De,(e(te),t(()=>e(te).Horas||"-"))),Ge(it,"title",(e(te),t(()=>e(te).Asignatura))),C(Ft,(e(te),t(()=>e(te).Asignatura||"-"))),Ge(Ze,"title",(e(te),t(()=>e(te).Anotaci√≥n))),C(ct,(e(te),t(()=>e(te).Anotaci√≥n||"-")))}),k(Re,ze)});var Vt=l(Je);{var Yt=Re=>{var te=Ur(),ze=l(r(te)),Le=r(ze),je=l(ze,2),Qe=r(je);R(De=>{i(te,`border-color: ${e(p),t(()=>e(p).border)??""}; border-top-width: 2px;`),C(Le,De),C(Qe,`${e(z),t(()=>e(z).length)??""} registros`)},[()=>(e(P),t(()=>e(P).toFixed(1)))]),k(Re,te)};q(Vt,Re=>{e(z),t(()=>e(z).length>0)&&Re(Yt)})}R(()=>{i(u,`border-color: ${e(p),t(()=>e(p).border)??""};`),i(y,`background-color: ${e(p),t(()=>e(p).inputBg)??""};`),i(le,`color: ${e(p),t(()=>e(p).label)??""};`),i(Ce,`color: ${e(p),t(()=>e(p).label)??""};`),i(D,`color: ${e(p),t(()=>e(p).label)??""};`),i(Ht,`color: ${e(p),t(()=>e(p).label)??""};`)}),k(n,u)};q(lt,n=>{e(J)?n(mt):(e(z),t(()=>e(z).length===0)?n(Nt,1):n(_t,!1))})}R(()=>{i(St,`background-color: ${e(p),t(()=>e(p).cardBg)??""}; color: ${e(p),t(()=>e(p).text)??""};`),i(rt,`border-color: ${e(p),t(()=>e(p).cardBorder)??""};`),i(at,`background-color: ${e(p),t(()=>e(p).inputBg)??""}; border-color: ${e(p),t(()=>e(p).border)??""};`),i(ut,`color: ${e(p),t(()=>e(p).label)??""};`),i(ft,`background-color: ${e(p),t(()=>e(p).cardBg)??""}; border-color: ${e(p),t(()=>e(p).border)??""}; color: ${e(p),t(()=>e(p).text)??""};`),i(N,`color: ${e(p),t(()=>e(p).label)??""};`),i(Me,`background-color: ${e(p),t(()=>e(p).cardBg)??""}; border-color: ${e(p),t(()=>e(p).border)??""}; color: ${e(p),t(()=>e(p).text)??""};`),i(Dt,`color: ${e(p),t(()=>e(p).label)??""};`),i(b,`background-color: ${e(p),t(()=>e(p).cardBg)??""}; border-color: ${e(p),t(()=>e(p).border)??""}; color: ${e(p),t(()=>e(p).text)??""};`),re.disabled=e(J),i(A,`color: ${e(p),t(()=>e(p).text)??""};`),we.disabled=(e(z),t(()=>e(z).length===0)),C(xt,`Resultados (${e(z),t(()=>e(z).length)??""} registros)`)}),U("click",bt,function(...n){ve()?.apply(this,n)}),He(ft,()=>e(E),n=>g(E,n)),He(Me,()=>e(B),n=>g(B,n)),He(b,()=>e(Z),n=>g(Z,n)),U("click",re,_e),U("click",A,ke),U("click",we,Ye),U("click",Oe,Qo(function(...n){ve()?.apply(this,n)})),U("keydown",Oe,n=>n.key==="Escape"&&ve()()),k(Pt,Oe),Bo()}var Wr=I('<div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping svelte-1p7gzb0"></div> <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full svelte-1p7gzb0"></div>',1),qr=pt('<svg class="w-5 h-5 text-indigo-500 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1p7gzb0"></path></svg>'),Jr=pt('<svg class="w-5 h-5 text-amber-500 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="svelte-1p7gzb0"></path></svg>'),Qr=pt('<svg class="w-5 h-5 text-indigo-400 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1p7gzb0"></path></svg>'),Zr=I('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-1p7gzb0"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0 svelte-1p7gzb0"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-1p7gzb0"></path></svg></div> <div class="flex-1 pr-6 pt-0.5 svelte-1p7gzb0"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100 svelte-1p7gzb0">Informaci√≥n</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200 svelte-1p7gzb0"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors svelte-1p7gzb0" aria-label="Cerrar alerta"><svg class="w-4 h-4 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-1p7gzb0"></path></svg></button></div>'),Kr=I('<option class="svelte-1p7gzb0"> </option>'),Xr=I('<option class="svelte-1p7gzb0"> </option>'),ea=I('<option class="svelte-1p7gzb0"> </option>'),ta=I('<option class="svelte-1p7gzb0"> </option>'),oa=I('<button class="absolute right-4 top-1/2 transform -translate-y-1/2 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors svelte-1p7gzb0" title="Limpiar b√∫squeda"><svg class="w-4 h-4 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-1p7gzb0"></path></svg></button>'),ra=I('<div class="text-center py-8 svelte-1p7gzb0"><svg class="w-12 h-12 mx-auto mb-4 opacity-50 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" class="svelte-1p7gzb0"></path></svg> <p class="text-sm svelte-1p7gzb0"> </p></div>'),aa=I('<div class="flex items-center justify-center py-12 svelte-1p7gzb0"><!></div>'),sa=I('<span class="ml-2 inline-block animate-bounce svelte-1p7gzb0">‚ú®</span>'),la=I('<span class="text-xs font-medium svelte-1p7gzb0"> </span>'),na=I('<div class="h-px flex-1 transition-all duration-300 group-hover:opacity-50 svelte-1p7gzb0"></div>'),ia=pt('<svg class="w-3 h-3 text-white svelte-1p7gzb0" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" class="svelte-1p7gzb0"></path></svg>'),ca=I('<div class="relative group flex flex-col p-0 rounded-2xl border transition-all duration-200 shadow-sm hover:shadow-md svelte-1p7gzb0"><div class="flex items-start gap-1 p-4 svelte-1p7gzb0"><label class="flex-shrink-0 cursor-pointer p-1 mt-1 svelte-1p7gzb0"><input type="checkbox" class="hidden svelte-1p7gzb0"/> <div class="w-5 h-5 rounded border flex items-center justify-center transition-colors cursor-pointer svelte-1p7gzb0"><!></div></label> <textarea rows="8" class="w-full bg-transparent border-none focus:ring-0 text-base font-medium leading-relaxed resize-none p-1 transition-colors min-h-[180px] pb-6 svelte-1p7gzb0" placeholder="Escriba aqu√≠..."></textarea></div></div>'),da=I('<div class="grid grid-cols-1 md:grid-cols-2 gap-4 svelte-1p7gzb0"></div>'),va=I('<div class="space-y-4 svelte-1p7gzb0"><button type="button" class="flex items-center gap-3 w-full text-left cursor-pointer group focus:outline-none svelte-1p7gzb0"><div class="flex items-center gap-3 flex-1 svelte-1p7gzb0"><h3> <!></h3> <!></div> <!> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" class="svelte-1p7gzb0"></path></svg></button> <!></div>'),ga=pt('<svg class="animate-spin h-7 w-7 text-white svelte-1p7gzb0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25 svelte-1p7gzb0" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75 svelte-1p7gzb0" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),pa=pt('<svg class="w-8 h-8 transform rotate-90 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" class="svelte-1p7gzb0"></path></svg>'),ba=I('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200 svelte-1p7gzb0"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40 svelte-1p7gzb0"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8 svelte-1p7gzb0"><div class="flex items-center gap-4 lg:flex-col svelte-1p7gzb0"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto svelte-1p7gzb0"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center svelte-1p7gzb0">Anotador de Clase</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full svelte-1p7gzb0"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Abrir hoja de c√°lculo"><svg class="w-5 h-5 svelte-1p7gzb0" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Hoja de C√°lculo</span></button> <button id="filter-button-target" class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Abrir filtros de anotaciones"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Filtros</span> <!></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Generar reportes PDF"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Reportes PDF</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Volver al Dashboard"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Dashboard</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full svelte-1p7gzb0" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize svelte-1p7gzb0"> </span></button></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto pb-32 svelte-1p7gzb0"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border svelte-1p7gzb0"><!> <!> <form novalidate="" class="space-y-6 svelte-1p7gzb0"><div class="grid grid-cols-1 md:grid-cols-3 gap-6 svelte-1p7gzb0"><div class="space-y-2 svelte-1p7gzb0"><label for="fecha" class="block text-sm font-medium svelte-1p7gzb0">Fecha</label> <input type="date" id="fecha" required=""/></div> <div class="space-y-2 svelte-1p7gzb0"><label for="docente" class="block text-sm font-medium svelte-1p7gzb0">Docente</label> <select id="docente" required=""><option class="svelte-1p7gzb0"> </option><!></select></div> <div class="space-y-2 svelte-1p7gzb0"><label for="materia" class="block text-sm font-medium svelte-1p7gzb0">Asignatura</label> <select id="materia" required=""><option class="svelte-1p7gzb0"> </option><!></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-1p7gzb0"><div class="space-y-2 svelte-1p7gzb0"><label for="grado" class="block text-sm font-medium svelte-1p7gzb0">Grado</label> <select id="grado" required=""><option class="svelte-1p7gzb0"> </option><!></select></div> <div class="space-y-2 svelte-1p7gzb0"><label for="horas" class="block text-sm font-medium svelte-1p7gzb0">Horas</label> <select id="horas" required=""><option class="svelte-1p7gzb0">Seleccione horas</option><!></select></div></div> <div class="space-y-2 svelte-1p7gzb0"><label for="search" class="block text-sm font-medium svelte-1p7gzb0">Buscar anotaciones</label> <div class="relative svelte-1p7gzb0"><input type="text" id="search" placeholder="Buscar por palabra clave o categor√≠a..." class="w-full px-4 py-3 pl-12 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none svelte-1p7gzb0"/> <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" class="svelte-1p7gzb0"></path></svg> <!></div> <!></div> <div class="space-y-8 svelte-1p7gzb0"><!></div> <div class="space-y-2 svelte-1p7gzb0"><label for="observacion" class="block text-sm font-medium svelte-1p7gzb0">Observaci√≥n</label> <textarea id="observacion" rows="3" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none resize-none svelte-1p7gzb0" placeholder="Observaciones adicionales (opcional)..."></textarea></div> <div class="fixed bottom-8 right-8 z-50 svelte-1p7gzb0"><button type="submit" class="w-16 h-16 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-400 dark:disabled:bg-slate-700 disabled:cursor-not-allowed disabled:scale-100 text-white rounded-full shadow-2xl transition-all duration-300 transform hover:scale-110 active:scale-95 backdrop-blur-sm bg-opacity-95 flex items-center justify-center overflow-hidden border border-white/20 svelte-1p7gzb0" aria-label="Guardar Anotaci√≥n"><!></button></div></form></div></main></div> <!> <!>',1);function ya(Pt,Fe){Oo(Fe,!1);const P=()=>cr(qo,"$theme",ot),[ot,p]=dr(),xe=x(),o=x(),ve=x(),O=x(),s=x(),me=x(),Ve=x();let Q=oo(Fe,"onBack",8),z=x([]),J=x([]),se=x([]),c=x(!1),E=x(!1),B=x(!1),Z=x(!1),L=x({}),H=x({}),K=x(""),_e=x({}),ke=x([]),Ye=x(""),Oe=x("");const St=a=>{ae(H,e(H)[a]=!e(H)[a]),g(H,e(H))},rt=(a,v)=>{const f=e(L)[a].indexOf(v);if(f!==-1){const h={...v,selected:!v.selected},M=[...e(L)[a].slice(0,f),h,...e(L)[a].slice(f+1)];g(L,{...e(L),[a]:M}),console.log("üîÑ Anotaci√≥n toggle:",{categoria:a,index:f,texto:h.text,nuevoEstado:h.selected,totalSeleccionadas:Object.values(e(L)).flat().filter(S=>S.selected).length})}},bt=a=>({"C√ÅTEDRA DE LA PAZ":"#8b5cf6","CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL":"#10b981","CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y":"#f59e0b","DIRECCI√ìN DE GRUPO":"#3b82f6","EDUCACI√ìN ART√çSTICA":"#f43f5e","EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES":"#ef4444","EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS":"#8b5cf6",EMPRENDIMIENTO:"#f97316",ESTAD√çSTICA:"#06b6d4","FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS":"#6366f1",F√çSICA:"#3b82f6",INGL√âS:"#14b8a6","LENGUA CASTELLANA":"#10b981",MATEM√ÅTICAS:"#3b82f6","PROYECTO Y EMPRENDIMIENTO":"#f97316",QU√çMICA:"#06b6d4","TECNOLOG√çA E INFORM√ÅTICA":"#6366f1","√âTICA PROFESIONAL":"#8b5cf6","Estrategias de Ense√±anza-Aprendizaje":"#6366f1","Evaluaci√≥n y Verificaci√≥n de Saberes":"#10b981","Enfoque STEM+ y Contexto Rural":"#f59e0b","Pr√°cticas de Laboratorio y Mantenimiento":"#f43f5e","Ciudadan√≠a Digital y √âtica":"#8b5cf6","Pensamiento Computacional y Programaci√≥n":"#06b6d4","Recursos Anal√≥gicos y Contingencias":"#f97316","Ofim√°tica y Competencias Productivas":"#14b8a6","Gesti√≥n Administrativa y Proyectos Transversales":"#3b82f6"})[a]||"#6366f1",ye={MATEM√ÅTICAS:"MATEM√ÅTICAS","LENGUA CASTELLANA":"LENGUA CASTELLANA",INGL√âS:"INGL√âS","CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL":"CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL","CIENCIAS NATURALES":"CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL","CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y":"CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y","CIENCIAS SOCIALES":"CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y",F√çSICA:"F√çSICA",QU√çMICA:"QU√çMICA","EDUCACI√ìN ART√çSTICA":"EDUCACI√ìN ART√çSTICA","EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES":"EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES","EDUCACI√ìN F√çSICA":"EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES","TECNOLOG√çA E INFORM√ÅTICA":"TECNOLOG√çA E INFORM√ÅTICA",TECNOLOG√çA:"TECNOLOG√çA E INFORM√ÅTICA",INFORM√ÅTICA:"TECNOLOG√çA E INFORM√ÅTICA",EMPRENDIMIENTO:"EMPRENDIMIENTO","FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS":"FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS",FILOSOF√çA:"FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS",ESTAD√çSTICA:"ESTAD√çSTICA","EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS":"EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS",√âTICA:"EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS","DIRECCI√ìN DE GRUPO":"DIRECCI√ìN DE GRUPO","PROYECTO Y EMPRENDIMIENTO":"PROYECTO Y EMPRENDIMIENTO",PROYECTO:"PROYECTO Y EMPRENDIMIENTO","C√ÅTEDRA DE LA PAZ":"C√ÅTEDRA DE LA PAZ","√âTICA PROFESIONAL":"√âTICA PROFESIONAL"},at=a=>{if(!e(d).materia)return a;let v=ye[e(d).materia.toUpperCase()]||ye[e(d).materia]||"";if(!v){const f=e(d).materia.toUpperCase();for(const[h,M]of Object.entries(ye))if(h.includes(f)||f.includes(h)){v=M;break}}return console.log("Materia seleccionada:",e(d).materia,"‚Üí Categor√≠a:",v),a.sort(([f],[h])=>f===v&&h!==v?-1:h===v&&f!==v?1:f.localeCompare(h))};let d=x({fecha:new Date().toLocaleDateString("en-CA"),docente:localStorage.getItem("lastDocente")||"",materia:"",horas:"",grado:"",anotacion:"",observacion:""}),V=x(JSON.parse(localStorage.getItem("docenteMaterias")||"{}"));const ut=(a,v)=>{!a||!v||(e(V)[a]||ae(V,e(V)[a]=[]),e(V)[a].includes(v)||(ae(V,e(V)[a]=[...e(V)[a],v]),localStorage.setItem("docenteMaterias",JSON.stringify(e(V)))))},ft=a=>{const v=a.match(/-(\d+)$/);return v?v[1]:null};let We=x(localStorage.getItem("dismissedInfoAnotadorContent")!==Fo);const Gt=()=>{g(We,!1),localStorage.setItem("dismissedInfoAnotadorContent",Fo)};let Te=x(!1),N=x(!1),Me=x(!1),qe=x(!1);const zt=()=>{g(Me,!0)},Ut=()=>{g(Me,!1)},Dt=()=>{g(qe,!0)},b=()=>{g(qe,!1)};let w=x(!0);const F="¬°Nueva funci√≥n de filtrado avanzado disponible!";function T(){return!0}const re=()=>{localStorage.setItem("dismissedFeatureAlertAnotador",new Date().toISOString()),g(w,!1)},ee=()=>{localStorage.setItem("dismissedFeatureAlertAnotador",new Date().toISOString()),zt()},Ee=()=>`https://docs.google.com/spreadsheets/d/${mo}`,Be=()=>{window.open(Ee(),"_blank")},A=()=>{qo.update(a=>a==="light"?"dim":a==="dim"?"dark":"light")},we=async()=>{g(c,!0),g(E,!0),g(B,!0),g(Z,!0);try{const[a,v,f,h]=await Promise.all([Lo(),jo(),Po(),fr()]);g(z,a),g(J,v),g(se,f);const M={},S={};for(const[W,ie]of Object.entries(h))M[W]=ie.map(j=>({text:j,selected:!1})),S[W]=!1;g(L,M),g(H,S)}catch(a){console.error("Error cargando datos iniciales:",a)}finally{g(c,!1),g(E,!1),g(B,!1),g(Z,!1)}},Se=async a=>{if(a.preventDefault(),e(Te))return;g(N,!0);const v=Object.values(e(L)).flat().filter(S=>S.selected).map(S=>S.text),f=v.join(" | "),h=[];if(e(d).fecha||h.push({id:"fecha",label:"Fecha"}),e(d).docente||h.push({id:"docente",label:"Docente"}),e(d).materia||h.push({id:"materia",label:"Asignatura"}),e(d).grado||h.push({id:"grado",label:"Grado"}),e(d).horas||h.push({id:"horas",label:"Horas"}),v.length===0&&h.push({id:"search",label:"Anotaci√≥n(es)"}),h.length>0){await $t.fire({icon:"warning",title:"Campos requeridos",html:`Complete los siguientes campos:<br/><br/><strong>${h.map(W=>W.label).join("<br/>")}</strong>`,confirmButtonColor:"#6366f1"});const S=document.getElementById(h[0].id);S&&(S.scrollIntoView({behavior:"smooth",block:"center"}),S.focus());return}if(v.length===0){await $t.fire({icon:"warning",title:"Sin anotaciones",text:"Debe seleccionar al menos una anotaci√≥n",confirmButtonColor:"#6366f1"});return}if((await $t.fire({title:"¬øConfirmar Registro?",html:`
        <div class="text-left space-y-2 p-2 rounded-xl bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10" style="font-size: 0.9rem; line-height: 1.4;">
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Fecha:</strong> ${e(d).fecha}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Docente:</strong> ${e(d).docente}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Asignatura:</strong> ${e(d).materia}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Grado:</strong> ${e(d).grado}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Horas:</strong> ${e(d).horas}</div>
          <div style="margin-top: 12px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 8px;">
            <strong style="color: #6366f1;">Anotaciones:</strong>
            <ul style="list-style-type: disc; padding-left: 20px; margin-top: 4px; font-size: 0.8rem; opacity: 0.8;">
              ${v.map(S=>`<li>${S}</li>`).join("")}
            </ul>
          </div>
          ${e(d).observacion?`<div style="margin-top: 12px;"><strong style="color: #6366f1;">Observaci√≥n:</strong> <span style="font-size: 0.8rem;">${e(d).observacion}</span></div>`:""}
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonText:"Si, de acuerdo",cancelButtonText:"No",confirmButtonColor:"#4f46e5",cancelButtonColor:"#64748b",reverseButtons:!0,background:P()==="light"?"#fff":"#1e293b",color:P()==="light"?"#1e293b":"#f1f5f9"})).isConfirmed){g(Te,!0);try{const W=[[new Date().toLocaleString(),e(d).fecha,e(d).docente,e(d).materia,e(d).grado,e(d).horas,f,e(d).observacion]];await xr({spreadsheetId:mo,worksheetTitle:Ro,datos:W}),ut(e(d).docente,e(d).materia),await $t.fire({icon:"success",title:"¬°√âxito!",text:"Anotaci√≥n registrada exitosamente",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),g(d,{fecha:new Date().toLocaleDateString("en-CA"),docente:e(d).docente,materia:e(d).materia,grado:e(d).grado,horas:"",anotacion:"",observacion:""});for(const ie in e(L))ae(L,e(L)[ie]=e(L)[ie].map(j=>({...j,selected:!1})));g(L,{...e(L)}),g(N,!1)}catch(S){console.error("Error enviando:",S),await $t.fire({icon:"error",title:"Error",text:"Error al registrar la anotaci√≥n",confirmButtonColor:"#ef4444"})}finally{g(Te,!1)}}};xo(()=>{we(),g(w,T())}),X(()=>(e(d),e(Oe)),()=>{if(e(d).materia&&e(d).materia!==e(Oe)){g(Oe,e(d).materia);let a=ye[e(d).materia.toUpperCase()]||ye[e(d).materia]||"";if(!a){const v=e(d).materia.toUpperCase();for(const[f,h]of Object.entries(ye))if(f.includes(v)||v.includes(f)){a=h;break}}a&&(g(Ye,a),console.log("‚ú® Categoria destacada:",a),setTimeout(()=>{g(Ye,"")},3e3))}}),X(()=>(e(L),e(K)),()=>{g(_e,Object.entries(e(L)).reduce((a,[v,f])=>{if(!e(K).trim())return a[v]=f,a;const h=e(K).toLowerCase().trim(),M=f.filter(S=>S.text.toLowerCase().includes(h));return M.length>0&&(a[v]=M),a},{}))}),X(()=>(e(J),e(d),e(L),e(_e),e(ke)),()=>{console.log("üîÑ Reactividad actualizada"),console.log("üìö Materias disponibles:",e(J).map(a=>a.materia)),console.log("‚úçÔ∏è Materia seleccionada:",e(d).materia),console.log("üìä Categor√≠as disponibles:",Object.keys(e(L))),console.log("üîç Categor√≠as filtradas:",Object.keys(e(_e))),g(ke,at(Object.entries(e(_e)))),console.log("üìã Entradas ordenadas:",e(ke).map(([a])=>a))}),X(()=>e(d),()=>{e(d).docente&&localStorage.setItem("lastDocente",e(d).docente)}),X(()=>(e(d),e(J),e(V)),()=>{g(xe,e(d).docente?[...e(J)].sort((a,v)=>{const f=e(V)[e(d).docente]?.includes(a.materia),h=e(V)[e(d).docente]?.includes(v.materia);return f&&!h?-1:!f&&h?1:a.materia.localeCompare(v.materia)}):e(J))}),X(()=>e(d),()=>{g(o,ft(e(d).docente))}),X(()=>(e(o),e(se)),()=>{g(ve,e(o)?[...new Set(e(se).map(a=>a.grado.toString()))].filter(a=>a.startsWith(`${e(o)}-`)):[...new Set(e(se).map(a=>a.grado.toString()))].filter(a=>!a.includes("-")))}),X(()=>(e(d),e(L)),()=>{g(O,(()=>{const a=[];return e(d).fecha||a.push("fecha"),e(d).docente||a.push("docente"),e(d).materia||a.push("materia"),e(d).grado||a.push("grado"),e(d).horas||a.push("horas"),Object.values(e(L)).flat().some(f=>f.selected)||a.push("anotacion"),a})())}),X(()=>{},()=>{g(s,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),X(()=>e(L),()=>{g(me,Object.values(e(L)).flat().some(a=>a.selected))}),X(()=>(e(d),e(me)),()=>{g(Ve,e(d).fecha&&e(d).docente&&e(d).materia&&e(d).grado&&e(d).horas&&e(me))}),X(()=>(e(d),e(me),e(Ve),e(L)),()=>{console.log("üîç Validaci√≥n formulario:",{fecha:e(d).fecha,docente:e(d).docente,materia:e(d).materia,grado:e(d).grado,horas:e(d).horas,hasSelectedAnotacion:e(me),isFormValid:e(Ve),totalAnotaciones:Object.values(e(L)).flat().length,selectedCount:Object.values(e(L)).flat().filter(a=>a.selected).length})}),To(),Mo();var ge=ba(),ne=ho(ge),xt=r(ne),ht=r(xt),st=r(ht),lt=r(st),mt=l(lt,2),Nt=l(st,2),_t=r(Nt),n=l(_t,2),u=l(r(n),4);{var m=a=>{var v=Wr();k(a,v)};q(u,a=>{e(w)&&a(m)})}var y=l(n,2),Y=l(y,2),le=l(Y,2),Ce=r(le);{var D=a=>{var v=qr();k(a,v)},Ht=a=>{var v=Jr();k(a,v)},nt=a=>{var v=Qr();k(a,v)};q(Ce,a=>{P()==="dark"?a(D):P()==="light"?a(Ht,1):a(nt,!1)})}var Je=l(Ce,2),Vt=r(Je),Yt=l(xt,2),Re=r(Yt),te=r(Re);{var ze=a=>{var v=Zr(),f=l(r(v),2),h=l(r(f),2),M=r(h),S=l(f,2);R(()=>C(M,Fo)),U("click",S,Gt),k(a,v)};q(te,a=>{e(We)&&a(ze)})}var Le=l(te,2);hr(Le,{featureMessage:F,description:"Ahora puedes filtrar tus anotaciones de forma avanzada. ¬°Pru√©balo!",onTryNow:ee,onDismiss:re,targetSelector:"#filter-button-target",showPopup:!1,colorTheme:"purple"});var je=l(Le,2),Qe=r(je),De=r(Qe),Pe=r(De),it=l(Pe,2),Ft=l(De,2),Ot=r(Ft),Ze=l(Ot,2),ct=r(Ze),ro=r(ct);ct.value=ct.__value="";var ao=l(ct);ue(ao,1,()=>e(z),fe,(a,v)=>{var f=Kr(),h=r(f),M={};R(()=>{C(h,e(v)),M!==(M=e(v))&&(f.value=(f.__value=e(v))??"")}),k(a,f)});var _o=l(Ft,2),Wt=r(_o),yt=l(Wt,2),dt=r(yt),yo=r(dt);dt.value=dt.__value="";var so=l(dt);ue(so,1,()=>e(xe),fe,(a,v)=>{const f=Et(()=>(e(V),e(d),e(v),t(()=>e(V)[e(d).docente]?.includes(e(v).materia))));var h=Xr(),M=r(h),S={};R(()=>{i(h,e(f)?"color: #6366f1; font-weight: 600;":""),C(M,`${e(f)?"‚≠ê ":""}${e(v),t(()=>e(v).materia)??""}`),S!==(S=(e(v),t(()=>e(v).materia)))&&(h.value=(h.__value=(e(v),t(()=>e(v).materia)))??"")}),k(a,h)});var Tt=l(Qe,2),lo=r(Tt),qt=r(lo),kt=l(qt,2),Mt=r(kt),ko=r(Mt);Mt.value=Mt.__value="";var wo=l(Mt);ue(wo,1,()=>e(ve),fe,(a,v)=>{var f=ea(),h=r(f),M={};R(S=>{C(h,S),M!==(M=e(v))&&(f.value=(f.__value=e(v))??"")},[()=>(e(v),t(()=>e(v).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),k(a,f)});var Co=l(lo,2),no=r(Co),$=l(no,2),G=r($);G.value=G.__value="";var oe=l(G);ue(oe,0,()=>[1,2,3,4],fe,(a,v)=>{var f=ta(),h=r(f),M={};R(S=>{C(h,`${v??""} ${v===1?"Hora":"Horas"}`),M!==(M=S)&&(f.value=(f.__value=S)??"")},[()=>t(()=>v.toString())]),k(a,f)});var he=l(Tt,2),pe=r(he),Bt=l(pe,2),Jt=r(Bt),Qt=l(Jt,2),io=l(Qt,2);{var co=a=>{var v=oa();R(()=>i(v,`color: ${e(s),t(()=>e(s).placeholder)??""};`)),U("click",v,()=>g(K,"")),k(a,v)};q(io,a=>{e(K)&&a(co)})}var vo=l(Bt,2);{var go=a=>{var v=ra(),f=l(r(v),2),h=r(f);R(()=>{i(v,`color: ${e(s),t(()=>e(s).placeholder)??""};`),C(h,`No se encontraron anotaciones para "${e(K)??""}"`)}),k(a,v)},po=Wo(()=>(e(K),e(_e),t(()=>e(K)&&Object.keys(e(_e)).length===0)));q(vo,a=>{e(po)&&a(go)})}var bo=l(he,2),Ao=r(bo);{var $o=a=>{var v=aa(),f=r(v);Ko(f,{message:"Cargando opciones de anotaci√≥n..."}),k(a,v)},Io=a=>{var v=vr(),f=ho(v);ue(f,1,()=>e(ke),fe,(h,M)=>{var S=Wo(()=>ur(e(M),2));let W=()=>e(S)[0],ie=()=>e(S)[1];const j=Et(()=>(W(),t(()=>bt(W())))),Ne=Et(()=>(ie(),t(()=>ie().length)));var Lt=va(),Ct=r(Lt),jt=r(Ct),$e=r(jt),At=r($e),uo=l(At);{var eo=be=>{var Ie=sa();k(be,Ie)};q(uo,be=>{W()===e(Ye)&&be(eo)})}var Eo=l($e,2);{var So=be=>{var Ie=la(),zo=r(Ie);R(()=>{i(Ie,`color: ${e(j)??""};`),C(zo,`(${e(Ne)??""} resultado${e(Ne)!==1?"s":""})`)}),k(be,Ie)};q(Eo,be=>{e(K)&&be(So)})}var Go=l(jt,2);{var er=be=>{var Ie=na();R(()=>i(Ie,`background-color: ${e(j)??""}; opacity: 0.2;`)),k(be,Ie)};q(Go,be=>{e(K)||be(er)})}var tr=l(Go,2);let Uo;var or=l(Ct,2);{var rr=be=>{var Ie=da();ue(Ie,5,ie,fe,(zo,ce,ua)=>{const fo=Et(()=>(e(K),e(ce),t(()=>e(K)&&e(ce).text.toLowerCase().includes(e(K).toLowerCase()))));var Do=ca(),ar=r(Do),Ho=r(ar),No=r(Ho),Vo=l(No,2),sr=r(Vo);{var lr=to=>{var nr=ia();k(to,nr)};q(sr,to=>{e(ce),t(()=>e(ce).selected)&&to(lr)})}var Yo=l(Ho,2);R(()=>{i(Do,`
                          background-color: ${e(ce),Ue(e(j)),Ue(e(fo)),e(s),t(()=>e(ce).selected?`${e(j)}10`:e(fo)?`${e(j)}05`:e(s).inputBg)??""};
                          border-color: ${e(ce),Ue(e(j)),Ue(e(fo)),e(s),t(()=>e(ce).selected?e(j):e(fo)?e(j):e(s).border)??""};
                        `),gr(No,(e(ce),t(()=>e(ce).selected))),i(Vo,`
                              border-color: ${e(ce),Ue(e(j)),e(s),t(()=>e(ce).selected?e(j):e(s).border)??""};
                              background-color: ${e(ce),Ue(e(j)),t(()=>e(ce).selected?e(j):"transparent")??""};
                            `),i(Yo,`color: ${e(s),t(()=>e(s).text)??""};`)}),U("change",No,()=>rt(W(),e(ce))),It(Yo,()=>e(ce).text,to=>(e(ce).text=to,de(()=>(ie(),e(ke))))),k(zo,Do)}),pr(3,Ie,()=>br),k(be,Ie)};q(or,be=>{e(H),W(),t(()=>e(H)[W()])&&be(rr)})}R(()=>{tt($e,1,`text-xs font-black uppercase tracking-widest px-3 py-1 rounded-full text-white flex-shrink-0 transition-all duration-300 group-hover:shadow-md ${W()===e(Ye)?"animate-glow ring-4 ring-opacity-50":""}`,"svelte-1p7gzb0"),i($e,`background-color: ${e(j)??""}; ${W()===e(Ye)?`box-shadow: 0 0 25px ${e(j)}60, 0 0 50px ${e(j)}30; ring-color: ${e(j)}; border: 2px solid ${e(j)};`:""}`),C(At,`${W()??""} `),Uo=tt(tr,0,"w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0 svelte-1p7gzb0",null,Uo,{"rotate-180":e(H)[W()]})}),U("click",Ct,()=>St(W())),k(h,Lt)}),k(a,v)};q(Ao,a=>{e(Z)?a($o):a(Io,!1)})}var Rt=l(bo,2),_=r(Rt),Ae=l(_,2),Ke=l(Rt,2),Xe=r(Ke),Zt=r(Xe);{var vt=a=>{var v=ga();k(a,v)},wt=a=>{var v=pa();k(a,v)};q(Zt,a=>{e(Te)?a(vt):a(wt,!1)})}var et=l(ne,2);{var Kt=a=>{Fr(a,{onClose:Ut,get selectedDocente(){return e(d),t(()=>e(d).docente)}})};q(et,a=>{e(Me)&&a(Kt)})}var gt=l(et,2);{var Xt=a=>{Yr(a,{onClose:b,get initialDocente(){return e(d),t(()=>e(d).docente)}})};q(gt,a=>{e(qe)&&a(Xt)})}R((a,v,f,h,M,S,W,ie,j,Ne)=>{i(ne,`background-color: ${e(s),t(()=>e(s).bg)??""};`),i(xt,`background-color: ${e(s),t(()=>e(s).cardBg)??""}; border-color: ${e(s),t(()=>e(s).cardBorder)??""};`),Ge(lt,"src",Xo),i(mt,`color: ${e(s),t(()=>e(s).text)??""};`),i(_t,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${e(s),t(()=>e(s).border)??""}; color: ${e(s),t(()=>e(s).text)??""};`),i(n,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${e(s),t(()=>e(s).border)??""}; color: ${e(s),t(()=>e(s).text)??""};`),i(y,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${e(s),t(()=>e(s).border)??""}; color: ${e(s),t(()=>e(s).text)??""};`),i(Y,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${e(s),t(()=>e(s).border)??""}; color: ${e(s),t(()=>e(s).text)??""};`),i(le,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${e(s),t(()=>e(s).border)??""}; color: ${e(s),t(()=>e(s).text)??""};`),C(Vt,P()),i(Re,`background-color: ${e(s),t(()=>e(s).cardBg)??""}; border-color: ${e(s),t(()=>e(s).cardBorder)??""};`),i(Pe,`color: ${e(s),t(()=>e(s).label)??""};`),tt(it,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none ${a??""}`,"svelte-1p7gzb0"),i(it,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${v??""}; color: ${e(s),t(()=>e(s).text)??""}; color-scheme: ${P()==="light"?"light":"dark"};`),i(Ot,`color: ${e(s),t(()=>e(s).label)??""};`),tt(Ze,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${f??""}`,"svelte-1p7gzb0"),i(Ze,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${h??""}; color: ${e(s),t(()=>e(s).text)??""};`),C(ro,e(c)?"Cargando...":"Seleccione docente"),i(Wt,`color: ${e(s),t(()=>e(s).label)??""};`),tt(yt,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${M??""}`,"svelte-1p7gzb0"),i(yt,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${S??""}; color: ${e(s),t(()=>e(s).text)??""};`),C(yo,e(E)?"Cargando...":"Seleccione asignatura"),i(qt,`color: ${e(s),t(()=>e(s).label)??""};`),tt(kt,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${W??""}`,"svelte-1p7gzb0"),i(kt,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${ie??""}; color: ${e(s),t(()=>e(s).text)??""};`),C(ko,e(B)?"Cargando...":"Seleccione grado"),i(no,`color: ${e(s),t(()=>e(s).label)??""};`),tt($,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer ${j??""}`,"svelte-1p7gzb0"),i($,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${Ne??""}; color: ${e(s),t(()=>e(s).text)??""};`),i(pe,`color: ${e(s),t(()=>e(s).label)??""};`),i(Jt,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${e(s),t(()=>e(s).border)??""}; color: ${e(s),t(()=>e(s).text)??""};`),i(Qt,`color: ${e(s),t(()=>e(s).placeholder)??""};`),i(_,`color: ${e(s),t(()=>e(s).label)??""};`),i(Ae,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${e(s),t(()=>e(s).border)??""}; color: ${e(s),t(()=>e(s).text)??""};`),Xe.disabled=e(Te)},[()=>(e(N),e(O),t(()=>e(N)&&e(O).includes("fecha")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(N),e(O),e(s),t(()=>e(N)&&e(O).includes("fecha")?"#ef4444":e(s).border)),()=>(e(N),e(O),t(()=>e(N)&&e(O).includes("docente")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(N),e(O),e(s),t(()=>e(N)&&e(O).includes("docente")?"#ef4444":e(s).border)),()=>(e(N),e(O),t(()=>e(N)&&e(O).includes("materia")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(N),e(O),e(s),t(()=>e(N)&&e(O).includes("materia")?"#ef4444":e(s).border)),()=>(e(N),e(O),t(()=>e(N)&&e(O).includes("grado")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(N),e(O),e(s),t(()=>e(N)&&e(O).includes("grado")?"#ef4444":e(s).border)),()=>(e(N),e(O),t(()=>e(N)&&e(O).includes("horas")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(N),e(O),e(s),t(()=>e(N)&&e(O).includes("horas")?"#ef4444":e(s).border))]),U("click",_t,Be),U("click",n,zt),U("click",y,Dt),U("click",Y,function(...a){Q()?.apply(this,a)}),U("click",le,A),It(it,()=>e(d).fecha,a=>(ae(d,e(d).fecha=a),de(()=>{e(N),e(O),e(s),e(c),e(z),e(E),e(xe),e(V),e(B),e(ve)}))),He(Ze,()=>e(d).docente,a=>(ae(d,e(d).docente=a),de(()=>{e(N),e(O),e(s),e(c),e(z),e(E),e(xe),e(V),e(B),e(ve)}))),He(yt,()=>e(d).materia,a=>(ae(d,e(d).materia=a),de(()=>{e(N),e(O),e(s),e(c),e(z),e(E),e(xe),e(V),e(B),e(ve)}))),He(kt,()=>e(d).grado,a=>(ae(d,e(d).grado=a),de(()=>{e(N),e(O),e(s),e(c),e(z),e(E),e(xe),e(V),e(B),e(ve)}))),He($,()=>e(d).horas,a=>(ae(d,e(d).horas=a),de(()=>{e(N),e(O),e(s),e(c),e(z),e(E),e(xe),e(V),e(B),e(ve)}))),It(Jt,()=>e(K),a=>g(K,a)),It(Ae,()=>e(d).observacion,a=>(ae(d,e(d).observacion=a),de(()=>{e(N),e(O),e(s),e(c),e(z),e(E),e(xe),e(V),e(B),e(ve)}))),U("submit",je,Se),k(Pt,ge),Bo(),p()}export{ya as default};
