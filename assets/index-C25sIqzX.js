const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/utils-Dc41pFlL.js","assets/excel-G1qE2FwJ.js"])))=>i.map(i=>d[i]);
import{w as Mo,p as Sr,a as kt,o as Ar,l as ye,b as Nr,i as jr,c as io,f as Qt,d as Z,e as u,g as Ir,s as a,t as D,h as U,j as d,k as _,m as o,n as m,q as pe,r as Nt,u as e,v as r,x as l,y as h,z as co,A as xe,B as to,C as vo,D as dt,E as Co,F as Ae,G as To,H as pt,I as ae,J as _e,K as _o,L as at,M as cr,N as Dt,O as Ao,P as go,Q as Oo,R as No,S as jo,T as mo,U as Ro,V as Io,W as Eo,X as Lo,Y as Po}from"./svelte-Cuf3vpgr.js";import{S as Ot}from"./ui-CHfsb5jC.js";import{_ as ao}from"./pdf-CBBHH09D.js";(function(){const k=document.createElement("link").relList;if(k&&k.supports&&k.supports("modulepreload"))return;for(const b of document.querySelectorAll('link[rel="modulepreload"]'))fe(b);new MutationObserver(b=>{for(const I of b)if(I.type==="childList")for(const t of I.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&fe(t)}).observe(document,{childList:!0,subtree:!0});function v(b){const I={};return b.integrity&&(I.integrity=b.integrity),b.referrerPolicy&&(I.referrerPolicy=b.referrerPolicy),b.crossOrigin==="use-credentials"?I.credentials="include":b.crossOrigin==="anonymous"?I.credentials="omit":I.credentials="same-origin",I}function fe(b){if(b.ep)return;b.ep=!0;const I=v(b);fetch(b.href,I)}})();const Ho="/inasistig/assets/asistencia_hero-DmIvUlDZ.png",Go="/inasistig/assets/anotador_hero-DBB4ReZf.png",Uo="/inasistig/assets/diario_hero-B7a5kf5J.png",Kr="/inasistig/assets/eie-DMab_WyA.png",Vo=()=>{if(typeof window<"u"){const N=localStorage.getItem("theme");if(N&&["light","dim","dark"].includes(N))return N}return"dark"},Vr=Mo(Vo());typeof window<"u"&&Vr.subscribe(N=>{localStorage.setItem("theme",N);const k=document.documentElement;k.classList.remove("light","dim","dark"),k.classList.add(N)});var Yo=_('<div class="relative svelte-dtuciw"><div style="top: -8px; left: 50%; transform: translateX(-50%);"></div></div>'),qo=_('<div class="fixed inset-0 bg-black/30 z-40 svelte-dtuciw" style="pointer-events: none;"></div> <div class="fixed z-50 animate-bounce-in svelte-dtuciw"><!> <div><div class="flex items-center gap-2 mb-3 svelte-dtuciw"><div class="p-1.5 bg-white/20 rounded-lg svelte-dtuciw"><svg class="w-5 h-5 svelte-dtuciw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="svelte-dtuciw"></path></svg></div> <span class="inline-block px-2 py-0.5 text-xs font-bold rounded-full bg-white/25 animate-pulse svelte-dtuciw">¬°NUEVO!</span></div> <h3 class="font-bold text-base mb-2 svelte-dtuciw"> </h3> <p> </p> <div class="flex gap-2 svelte-dtuciw"><button>Probar ahora</button> <button class="px-3 py-2 rounded-lg text-sm hover:bg-white/20 transition-colors svelte-dtuciw" aria-label="Cerrar popup">M√°s tarde</button></div> <button class="absolute top-2 right-2 p-1 rounded-lg hover:bg-white/20 transition-colors svelte-dtuciw" aria-label="Cerrar notificaci√≥n"><svg class="w-4 h-4 svelte-dtuciw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-dtuciw"></path></svg></button></div></div>',1);function so(N,k){Sr(k,!1);const v=m();let fe=kt(k,"featureMessage",8),b=kt(k,"description",8),I=kt(k,"onTryNow",8),t=kt(k,"onDismiss",8),ue=kt(k,"targetSelector",8,void 0),Te=kt(k,"showPopup",8),E=kt(k,"colorTheme",8,"blue"),oe=m({top:0,left:0});function V(){if(typeof window<"u"&&ue()){const S=document.querySelector(ue());if(S){const s=S.getBoundingClientRect();d(oe,{top:s.bottom+10,left:s.left+s.width/2})}}else d(oe,{top:window.innerHeight/2-100,left:window.innerWidth/2})}Ar(()=>(V(),window.addEventListener("resize",V),()=>{window.removeEventListener("resize",V)})),ye(()=>{},()=>{d(v,{arrowBorder:{blue:"border-t-blue-600 dark:border-t-blue-400",green:"border-t-green-600 dark:border-t-green-400",purple:"border-t-purple-600 dark:border-t-purple-400",emerald:"border-t-emerald-600 dark:border-t-emerald-400"},bgGradientFrom:{blue:"from-blue-600 dark:from-blue-700",green:"from-green-600 dark:from-green-700",purple:"from-purple-600 dark:from-purple-700",emerald:"from-emerald-600 dark:from-emerald-700"},bgGradientTo:{blue:"to-indigo-600 dark:to-indigo-700",green:"to-emerald-600 dark:to-emerald-700",purple:"to-fuchsia-600 dark:to-fuchsia-700",emerald:"to-teal-600 dark:to-teal-700"},borderColor:{blue:"border-blue-400 dark:border-blue-500",green:"border-green-400 dark:border-green-500",purple:"border-purple-400 dark:border-purple-500",emerald:"border-emerald-400 dark:border-emerald-500"},buttonTextColor:{blue:"text-blue-600",green:"text-green-600",purple:"text-purple-600",emerald:"text-emerald-600"},buttonHoverBg:{blue:"hover:bg-blue-50",green:"hover:bg-green-50",purple:"hover:bg-purple-50",emerald:"hover:bg-emerald-50"},descriptionColor:{blue:"text-blue-100",green:"text-green-100",purple:"text-purple-100",emerald:"text-emerald-100"}})}),ye(()=>pe(Te()),()=>{Te()&&V()}),Nr(),jr();var q=io(),j=Qt(q);{var R=S=>{var s=qo(),i=a(Qt(s),2),w=o(i);{var J=g=>{var H=Yo(),de=o(H);D(()=>Nt(de,1,`absolute w-0 h-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent ${e(v),pe(E()),r(()=>e(v).arrowBorder[E()])??""}`,"svelte-dtuciw")),u(g,H)};Z(w,g=>{ue()&&g(J)})}var be=a(w,2),L=a(o(be),2),Ie=o(L),ce=a(L,2),Ze=o(ce),xt=a(ce,2),Qe=o(xt),Xe=a(Qe,2),He=a(xt,2);D(()=>{l(i,`top: ${e(oe),r(()=>e(oe).top)??""}px; left: ${e(oe),r(()=>e(oe).left)??""}px; transform: translateX(-50%);`),Nt(be,1,`bg-gradient-to-r ${e(v),pe(E()),r(()=>e(v).bgGradientFrom[E()])??""} ${e(v),pe(E()),r(()=>e(v).bgGradientTo[E()])??""} text-white p-4 rounded-xl shadow-2xl border ${e(v),pe(E()),r(()=>e(v).borderColor[E()])??""} min-w-[280px] max-w-[calc(100vw-20px)] md:max-w-[320px]`,"svelte-dtuciw"),h(Ie,fe()),Nt(ce,1,`text-sm ${e(v),pe(E()),r(()=>e(v).descriptionColor[E()])??""} mb-3`,"svelte-dtuciw"),h(Ze,b()),Nt(Qe,1,`px-3 py-2 rounded-lg text-sm bg-white ${e(v),pe(E()),r(()=>e(v).buttonTextColor[E()])??""} font-semibold ${e(v),pe(E()),r(()=>e(v).buttonHoverBg[E()])??""} transition-colors`,"svelte-dtuciw")}),U("click",Qe,function(...g){I()?.apply(this,g)}),U("click",Xe,function(...g){t()?.apply(this,g)}),U("click",He,function(...g){t()?.apply(this,g)}),u(S,s)};Z(j,S=>{Te()&&S(R)})}u(N,q),Ir()}var Jo=pt('<svg class="w-6 h-6 text-amber-500 svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707M16.95 16.95l.707.707M7.636 7.636l.707.707M12 8a4 4 0 100 8 4 4 0 000-8z" class="svelte-1y1a8hs"></path></svg>'),Wo=pt('<svg class="w-6 h-6 text-indigo-400 svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1y1a8hs"></path></svg>'),Ko=pt('<svg class="w-6 h-6 text-indigo-500 svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707M16.95 16.95l.707.707M7.636 7.636l.707.707M12 8a4 4 0 100 8 4 4 0 000-8z" class="svelte-1y1a8hs"></path></svg>'),Zo=_('<button class="group relative flex flex-col justify-between overflow-hidden rounded-[2.5rem] border border-[rgb(var(--card-border))] bg-[rgb(var(--card-bg))] backdrop-blur-xl transition-all duration-500 hover:border-[rgb(var(--accent-primary))]/30 hover:bg-[rgb(var(--bg-secondary))] p-1 svelte-1y1a8hs"><div class="absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent svelte-1y1a8hs"></div> <div class="relative p-8 flex flex-col h-full svelte-1y1a8hs"><div class="flex justify-between items-start mb-12 svelte-1y1a8hs"><div class="flex flex-col gap-1 svelte-1y1a8hs"><span class="text-[10px] font-bold uppercase tracking-[0.2em] text-[rgb(var(--accent-primary))] svelte-1y1a8hs"> </span> <h2 class="text-2xl font-bold tracking-tight text-[rgb(var(--text-primary))] group-hover:text-[rgb(var(--accent-primary))] transition-colors duration-300 svelte-1y1a8hs"> </h2></div> <span class="px-3 py-1 rounded-full text-[10px] font-bold bg-[rgb(var(--bg-tertiary))] border border-[rgb(var(--border-primary))] text-[rgb(var(--text-muted))] uppercase tracking-wider svelte-1y1a8hs"> </span></div> <div class="flex flex-col gap-6 mt-auto svelte-1y1a8hs"><div class="relative w-full aspect-video rounded-3xl overflow-hidden bg-black/20 border border-white/5 svelte-1y1a8hs"><div></div> <img class="w-3/4 h-3/4 mx-auto object-cover grayscale-[0.5] group-hover:grayscale-0 group-hover:scale-110 transition-all duration-700 ease-in-out opacity-60 group-hover:opacity-100 svelte-1y1a8hs"/> <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-500 z-20 svelte-1y1a8hs"><div class="p-3 rounded-full bg-white/10 backdrop-blur-md border border-white/20 svelte-1y1a8hs"><svg class="w-6 h-6 text-white svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" class="svelte-1y1a8hs"></path></svg></div></div></div> <p class="text-sm font-medium leading-relaxed text-[rgb(var(--text-muted))] line-clamp-2 svelte-1y1a8hs"> </p></div> <div class="mt-8 flex items-center justify-between svelte-1y1a8hs"><div class="flex -space-x-2 svelte-1y1a8hs"><div class="w-6 h-6 rounded-full border border-black bg-indigo-500/20 svelte-1y1a8hs"></div> <div class="w-6 h-6 rounded-full border border-black bg-purple-500/20 svelte-1y1a8hs"></div></div> <div class="text-[10px] font-bold text-[rgb(var(--text-muted))] tracking-[0.1em] group-hover:text-[rgb(var(--accent-primary))] transition-colors uppercase svelte-1y1a8hs">Explorar &rarr;</div></div></div> <div></div></button>'),Qo=_(`<header class="max-w-7xl w-full mb-6 lg:mb-8 text-center relative svelte-1y1a8hs"><div class="absolute right-0 top-0 svelte-1y1a8hs"><button class="p-3 rounded-2xl bg-[rgb(var(--bg-secondary))] border border-[rgb(var(--border-primary))] hover:border-[rgb(var(--accent-primary))] transition-all duration-300 group svelte-1y1a8hs" aria-label="Toggle Theme"><!></button></div> <div class="inline-block mb-4 relative svelte-1y1a8hs"><div class="absolute inset-0 bg-indigo-500/20 blur-2xl rounded-full svelte-1y1a8hs"></div> <img alt="EIE Logo" class="relative h-12 md:h-16 object-contain hover:scale-110 transition-transform duration-700 ease-out cursor-none svelte-1y1a8hs"/></div> <div class="space-y-1 svelte-1y1a8hs"><h1 class="text-3xl md:text-5xl font-black tracking-tight svelte-1y1a8hs"><span class="bg-gradient-to-b from-[rgb(var(--text-primary))] to-[rgb(var(--text-secondary))] bg-clip-text text-transparent svelte-1y1a8hs">Ecosistema Digital</span> <span class="text-[rgb(var(--accent-primary))] svelte-1y1a8hs">Instituto Gu√°tica</span></h1> <p class="text-base md:text-lg text-[rgb(var(--text-muted))] max-w-xl mx-auto font-medium svelte-1y1a8hs">Potenciando la excelencia pedag√≥gica a trav√©s de herramientas
          inteligentes y dise√±o centrado en el docente.</p></div></header> <div class="max-w-7xl w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8 svelte-1y1a8hs"></div> <footer class="mt-20 flex flex-col md:flex-row items-center gap-8 text-[rgb(var(--text-muted))] text-xs font-bold tracking-widest uppercase svelte-1y1a8hs"><div class="flex items-center gap-4 px-6 py-3 rounded-full bg-[rgb(var(--bg-secondary))] border border-[rgb(var(--border-primary))] backdrop-blur-sm svelte-1y1a8hs"><span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse svelte-1y1a8hs"></span> SISTEMA OPERATIVO</div> <div class="hidden md:block w-px h-4 bg-[rgb(var(--border-primary))] svelte-1y1a8hs"></div> <div class="svelte-1y1a8hs">v2.0.4 PLATINUM</div> <div class="hidden md:block w-px h-4 bg-[rgb(var(--border-primary))] svelte-1y1a8hs"></div> <div class="svelte-1y1a8hs">2026 EIE DIGITAL</div></footer>`,1),Xo=_(`<div class="min-h-screen w-full flex flex-col items-center p-6 lg:p-12 transition-colors duration-700 bg-[rgb(var(--bg-primary))] text-[rgb(var(--text-primary))] svelte-1y1a8hs"><div class="fixed inset-0 overflow-hidden pointer-events-none -z-10 svelte-1y1a8hs"><div class="absolute -top-[20%] -left-[10%] w-[60%] h-[60%] bg-indigo-500/5 blur-[120px] rounded-full animate-pulse svelte-1y1a8hs"></div> <div class="absolute -bottom-[20%] -right-[10%] w-[60%] h-[60%] bg-purple-500/5 blur-[120px] rounded-full animate-pulse svelte-1y1a8hs" style="animation-delay: 2s"></div> <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-[0.02] mix-blend-overlay svelte-1y1a8hs"></div></div> <!></div> <!>`,1);function ea(N,k){Sr(k,!1);const v=()=>vo(Vr,"$theme",fe),[fe,b]=co();let I=kt(k,"onSelect",8),t=m(!1);const ue="¬°Nueva forma de anotar el Diario de Campo!",Te="Ahora el Diario de Campo permite seleccionar y personalizar anotaciones predefinidas. ¬°Expl√≥ralo!";function E(){const J=localStorage.getItem("dismissedFeatureAlertDashboardDiario");if(!J)return!0;const be=new Date(J);return(new Date().getTime()-be.getTime())/(1e3*60*60*24)>5}const oe=()=>{localStorage.setItem("dismissedFeatureAlertDashboardDiario",new Date().toISOString())},V=()=>{localStorage.setItem("dismissedFeatureAlertDashboardDiario",new Date().toISOString()),I()("diario")};Ar(()=>{d(t,!0),E()});const q=()=>{Vr.update(J=>J==="light"?"dim":J==="dim"?"dark":"light")},j=[{id:"inasistencia",title:"Registro Diario",subtitle:"Gesti√≥n de Asistencia",description:"Control preciso de inasistencias y novedades diarias del aula.",image:Ho,color:"from-blue-600/20 to-indigo-600/20",accent:"blue",tag:"Operativo"},{id:"anotador",title:"Anotador de Clase",subtitle:"Seguimiento √Ågil",description:"Registro din√°mico de incidencias y avances pedag√≥gicos por sesi√≥n.",image:Go,color:"from-purple-600/20 to-pink-600/20",accent:"purple",tag:"Acad√©mico"},{id:"diario",title:"Diario de Campo",subtitle:"Reflexi√≥n Docente",description:"Espacio para la reflexi√≥n profunda y documentaci√≥n pedag√≥gica.",image:Uo,color:"from-emerald-600/20 to-teal-600/20",accent:"emerald",tag:"Estrat√©gico"},{id:"horas_laborables",title:"Horas Laborables",subtitle:"Gesti√≥n de Tiempo",description:"Calculadora especializada para el seguimiento de jornadas y horas docentes.",image:Kr,color:"from-orange-600/20 to-amber-600/20",accent:"orange",tag:"Herramienta",url:"https://ceslep.github.io/horas_laborables"}];jr();var R=Xo(),S=Qt(R),s=a(o(S),2);{var i=J=>{var be=Qo(),L=Qt(be),Ie=o(L),ce=o(Ie),Ze=o(ce);{var xt=ke=>{var ee=Jo();u(ke,ee)},Qe=ke=>{var ee=Wo();u(ke,ee)},Xe=ke=>{var ee=Ko();u(ke,ee)};Z(Ze,ke=>{v()==="light"?ke(xt):v()==="dim"?ke(Qe,1):ke(Xe,!1)})}var He=a(Ie,2),g=a(o(He),2),H=a(L,2);xe(H,5,()=>j,Ae,(ke,ee,Ne)=>{var De=Zo(),se=a(o(De),2),we=o(se),Ye=o(we),We=o(Ye),Be=o(We),Ke=a(We,2),Ge=o(Ke),st=a(Ye,2),ct=o(st),c=a(we,2),$=o(c),B=o($),z=a(B,2),T=a($,2),F=o(T),ne=a(se,2);D(()=>{dt(De,"id",(e(ee),r(()=>e(ee).id==="diario"?"diario-module-target":""))),h(Be,(e(ee),r(()=>e(ee).subtitle))),h(Ge,(e(ee),r(()=>e(ee).title))),h(ct,(e(ee),r(()=>e(ee).tag))),Nt(B,1,`absolute inset-0 bg-gradient-to-br ${e(ee),r(()=>e(ee).color)??""} mix-blend-overlay z-10`,"svelte-1y1a8hs"),dt(z,"src",(e(ee),r(()=>e(ee).image))),dt(z,"alt",(e(ee),r(()=>e(ee).title))),h(F,(e(ee),r(()=>e(ee).description))),Nt(ne,1,`absolute inset-0 bg-gradient-to-br ${e(ee),r(()=>e(ee).color)??""} opacity-0 group-hover:opacity-[0.03] transition-opacity duration-500 pointer-events-none`,"svelte-1y1a8hs")}),U("click",De,()=>I()(e(ee).id)),to(1,De,()=>Co,()=>({y:40,duration:800,delay:200+Ne*150})),u(ke,De)});var de=a(H,2);D(()=>dt(g,"src",Kr)),U("click",ce,q),to(1,L,()=>Co,()=>({y:-20,duration:800,delay:100})),to(1,de,()=>To,()=>({duration:1e3,delay:800})),u(J,be)};Z(s,J=>{e(t)&&J(i)})}var w=a(S,2);so(w,{featureMessage:ue,description:Te,onTryNow:V,onDismiss:oe,targetSelector:"#diario-module-target",showPopup:!1,colorTheme:"emerald"}),u(N,R),Ir(),b()}const lo="1wN7lp7lOGyxKYIUJ9TU89N9knnJjX2Z_TfsOUg48QpQ",ro="https://app.iedeoccidente.com/gs",oo="https://app.iedeoccidente.com/ig",ta=`${oo}/getprofes.php`,ra=`${oo}/getMaterias.php`,oa=`${oo}/getEstudiantes.php`,aa=`${ro}/save_inasistencias.php`,sa=`${ro}/save_anotador.php`,la=`${oo}/getOpcionesAnotador3.php`,na=`${oo}/adiario.php`,ia=`${ro}/save_diario.php`,yo="Inasistencias",ko="Datos",no="1Q6EcSvccB7BoJiw9PD2s5J4PB8AJmr-6v-yKhiE4E8k",So="10pBVNYnS-ctmBYP9Y8KL3h32GZKsyi0bwoyil-kEGaE",da="diario",bo="Selecciona un grado y una asignatura para comenzar a registrar inasistencias. Ahora puedes marcar motivos individuales y observaciones espec√≠ficas por estudiante.Tambien pueden ver el filtro de datos en Locker Studio",xo="Completa los datos de la clase y selecciona las observaciones que correspondan. Puedes editar el texto de cada observaci√≥n si es necesario.Recuerda hacer check en el cuadro de selecci√≥n para guardar esa anotaci√≥n.",fo="Completa los datos de la clase y selecciona las observaciones que correspondan. Puedes editar el texto de cada observaci√≥n si es necesario.Recuerda hacer check en el cuadro de selecci√≥n para guardar esa anotaci√≥n.",ca="https://lookerstudio.google.com/reporting/be2efb22-dc5f-4f21-9dfc-0253e763e19f",ho=[{nombre:"UNO",fecha_inicio:new Date("2026-01-26"),fecha_fin:new Date("2026-03-27")},{nombre:"DOS",fecha_inicio:new Date("2026-03-30"),fecha_fin:new Date("2026-06-12")},{nombre:"TRES",fecha_inicio:new Date("2026-07-07"),fecha_fin:new Date("2026-09-11")},{nombre:"CUATRO",fecha_inicio:new Date("2026-09-14"),fecha_fin:new Date("2026-11-20")}],va=async()=>{try{const N=await fetch(`${na}`);if(!N.ok)throw new Error(`Error: ${N.status}`);return await N.json()}catch(N){throw console.error("Error fetching diario options:",N),N}},Do=async(N={})=>{try{const k=await fetch(`${ro}/get_inasistencias.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!k.ok)throw new Error(`Error: ${k.status}`);return await k.json()}catch(k){throw console.error("Error fetching inasistencias:",k),k}},Bo=async(N={})=>{try{const k=await fetch(`${ro}/get_anotador.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!k.ok)throw new Error(`Error: ${k.status}`);return await k.json()}catch(k){throw console.error("Error fetching inasistencias:",k),k}},ga=async N=>{try{const k=await fetch(`${aa}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!k.ok)throw new Error(`Error: ${k.status}`);return await k.json()}catch(k){throw console.error("Error saving inasistencias:",k),k}},Zr=async()=>{try{const N=await fetch(`${ta}`);if(!N.ok)throw new Error(`Error: ${N.status}`);return await N.json()}catch(N){throw console.error("Error fetching docentes:",N),N}},Qr=async()=>{try{const N=await fetch(`${ra}`);if(!N.ok)throw new Error(`Error: ${N.status}`);return await N.json()}catch(N){throw console.error("Error fetching materias:",N),N}},Xr=async()=>{try{const N=await fetch(`${oa}`);if(!N.ok)throw new Error(`Error: ${N.status}`);return await N.json()}catch(N){throw console.error("Error fetching estudiantes:",N),N}},pa=async()=>{try{const N=await fetch(`${la}`);if(!N.ok)throw new Error(`Error: ${N.status}`);return await N.json()}catch(N){throw console.error("Error fetching opciones anotador3:",N),N}},ua=async N=>{try{const k=await fetch(`${sa}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!k.ok)throw new Error(`Error: ${k.status}`);return await k.json()}catch(k){throw console.error("Error saving inasistencias:",k),k}},ba=async N=>{try{const k=await fetch(`${ia}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!k.ok)throw new Error(`Error: ${k.status}`);return await k.json()}catch(k){throw console.error("Error saving inasistencias:",k),k}};var xa=_('<div class="flex-1 flex items-center justify-center"><div class="text-center"><div class="animate-spin w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full mx-auto mb-4"></div> <p>Cargando datos...</p></div></div>'),fa=_('<span class="ml-2 px-2 py-1 text-xs bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full">Activos</span>'),ha=_("<option> </option>"),ma=_("<option> </option>"),_a=_('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">Este docente no tiene registros de materias</p>'),ya=_("<option> </option>"),ka=_('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">No hay grados para los filtros seleccionados</p>'),wa=_("<option> </option>"),$a=_('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">No hay motivos para los filtros seleccionados</p>'),Ca=_('<div class="flex-1 flex items-center justify-center"><div class="text-center py-12 px-4"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm sm:text-base">No se encontraron registros con los filtros seleccionados</p></div></div>'),Aa=_('<button class="text-indigo-600 dark:text-indigo-400 hover:underline font-medium text-left truncate w-full"> </button>'),Sa=_('<tr class="border-b transition-colors hover:bg-black/5 dark:hover:bg-white/5 text-xs"><td class="p-2"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 text-center"> </td><td class="p-2 truncate max-w-[150px]"><!></td><td class="p-2 text-center"><span><span> </span> </span></td><td class="p-2 text-center"> </td><td class="p-2"><span class="truncate block max-w-xs text-xs"> </span></td></tr>'),Ia=_('<button class="text-indigo-600 dark:text-indigo-400 hover:underline font-medium text-left truncate w-full"> </button>'),Ea=_('<tr class="border-b transition-colors hover:bg-black/5 dark:hover:bg-white/5 text-xs"><td class="p-2 whitespace-nowrap"> </td><td class="p-2"><span class="truncate block max-w-[120px]"> </span></td><td class="p-2 truncate max-w-[120px]"> </td><td class="p-2"><span class="truncate block max-w-[100px]"><!></span></td><td class="p-2 text-center"><span><span> </span> </span></td><td class="p-2 whitespace-nowrap text-center"> </td><td class="p-2 whitespace-nowrap text-center"> </td></tr>'),Da=_('<button class="font-semibold text-xs text-indigo-600 dark:text-indigo-400 truncate hover:underline text-left w-full"> </button>'),Ba=_('<p class="font-semibold text-xs text-indigo-600 dark:text-indigo-400 truncate"> </p>'),za=_('<div class="text-[10px] p-1.5 rounded"><div class="flex items-start"><svg class="w-3 h-3 mr-1 mt-0.5 flex-shrink-0 opacity-60" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="line-clamp-1"> </span></div></div>'),Fa=_('<div class="border rounded-lg p-2 transition-colors hover:bg-black/5 dark:hover:bg-white/5"><div class="flex justify-between items-center mb-1.5"><div class="flex-1 min-w-0"><!> <p class="text-[10px] opacity-75"> </p></div> <div class="flex flex-col items-end ml-2 flex-shrink-0"><span><span> </span> </span> <span class="text-[10px] font-semibold"> </span></div></div> <div class="flex gap-3 text-[10px] mb-1.5"><div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="truncate"> </span></div> <div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <span class="truncate"> </span></div></div> <!></div>'),Ma=_('<div class="hidden lg:flex flex-1 flex-col overflow-hidden min-h-0"><div class="flex-1 overflow-auto min-w-full border rounded-lg"><table class="w-full border-collapse text-sm min-w-[800px]"><thead class="sticky top-0 z-10 border-b"><tr><th class="text-left p-2 font-semibold whitespace-nowrap">Fecha</th><th class="text-left p-2 font-semibold whitespace-nowrap">Docente</th><th class="text-left p-2 font-semibold whitespace-nowrap">Materia</th><th class="text-center p-2 font-semibold whitespace-nowrap">Grado</th><th class="text-left p-2 font-semibold whitespace-nowrap">Estudiante</th><th class="text-center p-2 font-semibold whitespace-nowrap">Motivo</th><th class="text-center p-2 font-semibold whitespace-nowrap">Horas</th><th class="text-left p-2 font-semibold whitespace-nowrap">Observaciones</th></tr></thead><tbody></tbody></table></div></div> <div class="hidden md:flex lg:hidden flex-1 overflow-auto"><div class="min-w-full border rounded-lg"><table class="w-full border-collapse text-xs"><thead class="sticky top-0 z-10 border-b"><tr><th class="text-left p-2 font-semibold whitespace-nowrap">Fecha</th><th class="text-left p-2 font-semibold whitespace-nowrap">Docente</th><th class="text-left p-2 font-semibold whitespace-nowrap">Materia</th><th class="text-left p-2 font-semibold whitespace-nowrap">Estudiante</th><th class="text-center p-2 font-semibold whitespace-nowrap">Motivo</th><th class="text-center p-2 font-semibold whitespace-nowrap">Horas</th><th class="text-center p-2 font-semibold whitespace-nowrap">Grado</th></tr></thead><tbody></tbody></table></div></div> <div class="flex-1 overflow-y-auto md:hidden px-1"><div class="space-y-2"></div></div>',1),Ta=_('<div class="p-3 sm:p-4 border-b"><div class="flex items-center justify-between mb-2 sm:mb-3"><h3 class="text-lg font-semibold">Filtros <!></h3> <button class="text-sm px-3 py-1 rounded-lg border transition-colors hover:bg-black/5 dark:hover:bg-white/5">Limpiar filtros</button></div> <div class="mb-3 p-1.5 sm:p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg"><p class="text-[10px] sm:text-xs font-medium mb-1.5">R√°pido: Fechas</p> <div class="flex items-center mb-2"><input id="checkFiltrarFecha" type="checkbox" class="w-4 h-4 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 dark:bg-zinc-700"/> <label for="checkFiltrarFecha" class="ml-2 text-xs font-medium">Activar filtro por fechas</label></div> <div class="flex flex-wrap gap-1 sm:gap-2"><button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Hoy</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 7 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 30 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Mes actual</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimo trimestre</button></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"><div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroDocente" class="block text-xs sm:text-sm font-medium">Docente</label> <select id="filtroDocente" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option>Todos los docentes</option><!></select></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroMateria" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroMateria" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroGrado" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroGrado" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroMotivo" class="block text-xs sm:text-sm font-medium">Motivo</label> <select id="filtroMotivo" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaInicio" class="block text-xs sm:text-sm font-medium">Fecha desde</label> <input id="filtroFechaInicio" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaFin" class="block text-xs sm:text-sm font-medium">Fecha hasta</label> <input id="filtroFechaFin" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div></div></div></div> <div class="flex-1 flex flex-col p-2 sm:p-4 min-h-0"><div class="mb-4 px-0 sm:px-3"><p class="text-sm">Se encontraron <span class="font-bold text-indigo-500"> </span> registros</p></div> <!></div>',1),Oa=_('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4" role="button" tabindex="0" aria-label="Cerrar ventana"><div class="w-full max-w-7xl max-h-[95vh] bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl overflow-hidden flex flex-col"><div class="flex items-center justify-between p-3 sm:p-4 border-b"><div class="flex items-center gap-3"><img alt="EIE Logo" class="h-8 w-auto hidden sm:block"/> <div><h2 class="text-lg sm:text-xl font-bold">Inasistencias</h2> <p class="text-xs hidden sm:block">Filtra y consulta los registros</p></div></div> <div class="flex items-center gap-3"><button class="inline-flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Exportar CSV</button> <button class="p-2 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5" aria-label="Cerrar"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div> <div class="flex-1 overflow-hidden flex flex-col min-h-0"><!></div></div></div>');function Na(N,k){Sr(k,!1);const v=m(),fe=m(),b=m(),I=m(),t=m();let ue=kt(k,"onClose",8),Te=kt(k,"selectedDocente",8,""),E=m([]),oe=[],V=[],q=[],j=m(!1),R=m(!1),S=m([]),s=m({docente:Te()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",motivo:""});const i=()=>{const c=new Date,$=new Date(c.getFullYear(),c.getMonth()-1,c.getDate()),B=z=>{const T=z.getFullYear(),F=String(z.getMonth()+1).padStart(2,"0"),ne=String(z.getDate()).padStart(2,"0");return`${T}-${F}-${ne}`};ae(s,e(s).fechaInicio=B($)),_e(()=>{e(t),e(L),e(v),e(b),e(I)}),ae(s,e(s).fechaFin=B(c)),_e(()=>{e(t),e(L),e(v),e(b),e(I)})},w=c=>{const $=new Date;let B;switch(c){case"hoy":B=new Date($);break;case"semana":B=new Date($),B.setDate($.getDate()-7);break;case"mes":B=new Date($),B.setDate($.getDate()-30);break;case"mes_actual":B=new Date($.getFullYear(),$.getMonth(),1);break;case"trimestre":B=new Date($),B.setDate($.getDate()-90);break;default:i();return}const z=T=>{const F=T.getFullYear(),ne=String(T.getMonth()+1).padStart(2,"0"),he=String(T.getDate()).padStart(2,"0");return`${F}-${ne}-${he}`};ae(s,e(s).fechaInicio=z(B)),_e(()=>{e(t),e(L),e(v),e(b),e(I)}),ae(s,e(s).fechaFin=z($)),_e(()=>{e(t),e(L),e(v),e(b),e(I)}),d(R,!0),console.log("‚úÖ setFechaPreset ejecutado:",{preset:c,fechaInicio:e(s).fechaInicio,fechaFin:e(s).fechaFin,filtrarPorFecha:e(R)})},J=[{value:"Sin excusa",icon:"üö´",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},{value:"Excusa",icon:"üìÑ",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},{value:"LLegada Tarde",icon:"‚è∞",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},{value:"Transporte Escolar",icon:"üöå",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},{value:"Permiso",icon:"‚úÖ",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},{value:"No portar/sin uniforme",icon:"üëö",color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"},{value:"Pacto de Aula",icon:"ü§ù",color:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"},{value:"Uso del celular",icon:"üì±",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},{value:"Desorden en Clase",icon:"üîä",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"},{value:"Fuga",icon:"üèÉ‚Äç‚ôÇÔ∏è",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},{value:"No realizaci√≥n de Aseo",icon:"üßπ",color:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200"},{value:"Licencia por salud",icon:"üè•",color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"},{value:"Incapacidad",icon:"ü©∫",color:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200"},{value:"Reuni√≥n interna",icon:"üë•",color:"bg-zinc-100 text-zinc-800 dark:bg-zinc-900 dark:text-zinc-200"},{value:"Psicoorientaci√≥n",icon:"üß†",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}],be=c=>J.find($=>$.value===c)||{icon:"‚ùì",color:"bg-gray-100 text-gray-800"};let L=m([]),Ie=m([]),ce=m([]),Ze=m([]);const xt=async()=>{d(j,!0);try{const[c,$,B,z]=await Promise.all([Do({spreadsheetId:lo,worksheetTitle:yo}),Zr(),Qr(),Xr()]);console.log("Respuesta cruda de inasistencias:",c),console.log("Tipo de dato:",typeof c),console.log("Es array:",Array.isArray(c)),c&&typeof c=="object"&&console.log("Keys:",Object.keys(c));const T=y=>{if(!y?.records||!Array.isArray(y.records))return[];const $e=y.records[0]?.values||[];return y.records.slice(1).map(G=>{const Y=G.values||[];return{timestamp:Y[0]||"",docente:Y[1]||"",fecha:Y[2]||"",horas:Y[3]||"",materia:Y[4]||"",motivo:Y[5]||"",grado:Y[6]||"",nombre:Y[7]||"",observaciones:Y[8]||""}}).filter(G=>G.docente&&G.fecha)},F=y=>Array.isArray(y)?y:y?.data&&Array.isArray(y.data)?y.data:y?.rows&&Array.isArray(y.rows)?y.rows:y?.values&&Array.isArray(y.values)?y.values:y?.inasistencias&&Array.isArray(y.inasistencias)?y.inasistencias:[];d(E,T(c)),oe=F($),V=F(B),q=F(z),d(L,e(E).length>0?[...new Set(e(E).map(y=>y.docente).filter(Boolean))].sort():[]),d(Ie,e(E).length>0?[...new Set(e(E).map(y=>y.materia).filter(Boolean))].sort():[]);const ne=[...new Set(q.map(y=>(typeof y=="string"?y:y.grado||"").toString()).filter(Boolean))],he=e(E).length>0?e(E).map(y=>y.grado).filter(Boolean):[];d(ce,[...new Set([...ne,...he])].sort((y,$e)=>{const ve=parseInt(y),G=parseInt($e);return!isNaN(ve)&&!isNaN(G)?ve-G:y.localeCompare($e)})),d(Ze,e(E).length>0?[...new Set(e(E).map(y=>y.motivo).filter(Boolean))].sort():[]),i(),console.log("Datos cargados:",{inasistencias:e(E).length,docentes:oe.length,docentesUnicos:e(L).length,materiasUnicas:e(Ie).length,gradosUnicos:e(ce).length,motivosUnicos:e(Ze).length})}catch(c){console.error("Error cargando datos:",c),await Ot.fire({icon:"error",title:"Error",text:"No se pudieron cargar los datos de inasistencias",confirmButtonColor:"#ef4444"})}finally{d(j,!1)}},Qe=()=>{d(s,{docente:Te()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",motivo:""}),i(),d(R,!1)},Xe=()=>{if(e(S).length===0){Ot.fire({icon:"warning",title:"Sin datos",text:"No hay datos para exportar",confirmButtonColor:"#f59e0b"});return}const $=[["Fecha","Docente","Materia","Grado","Estudiante","Motivo","Horas","Observaciones"].join(","),...e(S).map(F=>[F.fecha,`"${F.docente}"`,`"${F.materia}"`,F.grado,`"${F.nombre}"`,`"${F.motivo}"`,F.horas,`"${F.observaciones}"`].join(","))].join(`
`),B=new Blob([$],{type:"text/csv;charset=utf-8;"}),z=document.createElement("a"),T=URL.createObjectURL(B);z.setAttribute("href",T),z.setAttribute("download",`inasistencias_${new Date().toISOString().split("T")[0]}.csv`),z.style.visibility="hidden",document.body.appendChild(z),z.click(),document.body.removeChild(z)},He=c=>{try{const[$,B,z]=c.split("-");return $&&B&&z?`${z}/${B}/${$}`:c}catch{return c}},g=c=>{if(!e(s).docente||!e(s).materia||!e(s).grado)return;const B=e(E).filter(T=>{if(T.nombre!==c||T.docente!==e(s).docente||T.materia!==e(s).materia||T.grado!==e(s).grado)return!1;if(e(R)){const F=T.fecha;if(e(s).fechaInicio&&F<e(s).fechaInicio||e(s).fechaFin&&F>e(s).fechaFin)return!1}return!0}).reduce((T,F)=>{const ne=parseInt(F.horas)||0;return T+ne},0);let z="";e(R)&&e(s).fechaInicio&&e(s).fechaFin?z=`entre ${He(e(s).fechaInicio)} y ${He(e(s).fechaFin)}`:z="en total (hist√≥rico)",Ot.fire({icon:"info",title:c,html:`
        <div class="text-left space-y-2">
          <p><strong>Materia:</strong> ${e(s).materia}</p>
          <p><strong>Total inasistencias:</strong> ${B} horas</p>
          <p class="text-sm text-gray-500 text-center mt-4">(${z})</p>
        </div>
      `,confirmButtonColor:"#4f46e5"})};Ar(()=>{xt()}),ye(()=>(e(s),e(E),e(Ie)),()=>{d(v,e(s).docente?[...new Set(e(E).filter(c=>c.docente===e(s).docente).map(c=>c.materia).filter(Boolean))].sort():e(Ie))}),ye(()=>(e(s),e(E),e(ce)),()=>{d(fe,e(s).docente?[...new Set(e(E).filter(c=>c.docente===e(s).docente).map(c=>c.grado).filter(Boolean))].sort((c,$)=>{const B=parseInt(c),z=parseInt($);return!isNaN(B)&&!isNaN(z)?B-z:c.localeCompare($)}):e(ce))}),ye(()=>(e(s),e(E),e(fe)),()=>{d(b,e(s).materia?[...new Set(e(E).filter(c=>c.materia===e(s).materia).map(c=>c.grado).filter(Boolean))].sort((c,$)=>{const B=parseInt(c),z=parseInt($);return!isNaN(B)&&!isNaN(z)?B-z:c.localeCompare($)}):e(fe))}),ye(()=>(e(s),e(E),e(Ze)),()=>{d(I,e(s).docente||e(s).materia||e(s).grado?[...new Set(e(E).filter(c=>!(e(s).docente&&c.docente!==e(s).docente||e(s).materia&&c.materia!==e(s).materia||e(s).grado&&c.grado!==e(s).grado)).map(c=>c.motivo).filter(Boolean))].sort():e(Ze))}),ye(()=>{},()=>{d(t,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),ye(()=>(e(E),e(R),e(s),e(S)),()=>{console.log("üîÑ Filtro reactivo ejecut√°ndose:",{totalInasistencias:e(E).length,filtrarPorFecha:e(R),fechaInicio:e(s).fechaInicio,fechaFin:e(s).fechaFin}),d(S,e(E).filter(c=>{if(e(s).docente&&c.docente!==e(s).docente||e(s).materia&&c.materia!==e(s).materia||e(s).grado&&c.grado!==e(s).grado||e(s).motivo&&c.motivo!==e(s).motivo)return!1;if(e(R)){const $=c.fecha;if(e(s).fechaInicio&&$<e(s).fechaInicio||e(s).fechaFin&&$>e(s).fechaFin)return!1}return!0})),console.log(`üìä Resultados filtrados: ${e(S).length} de ${e(E).length}`)}),ye(()=>(e(R),e(s)),()=>{e(R)&&(!e(s).fechaInicio||!e(s).fechaFin)&&i()}),Nr(),jr();var H=Oa(),de=o(H),ke=o(de),ee=o(ke),Ne=o(ee),De=a(Ne,2),se=o(De),we=a(se,2),Ye=a(ee,2),We=o(Ye),Be=a(We,2),Ke=a(ke,2),Ge=o(Ke);{var st=c=>{var $=xa(),B=o($),z=a(o(B),2);D(()=>l(z,`color: ${e(t),r(()=>e(t).text)??""};`)),u(c,$)},ct=c=>{var $=Ta(),B=Qt($),z=o(B),T=o(z),F=a(o(T));{var ne=te=>{var Se=fa();u(te,Se)};Z(F,te=>{e(s),r(()=>e(s).docente||e(s).materia||e(s).grado||e(s).motivo||e(s).fechaInicio||e(s).fechaFin)&&te(ne)})}var he=a(T,2),y=a(z,2),$e=o(y),ve=a($e,2),G=o(ve),Y=a(G,2),ze=a(ve,2),Ue=o(ze),Fe=a(Ue,2),At=a(Fe,2),Bt=a(At,2),zt=a(Bt,2),lr=a(y,2),f=o(lr),M=o(f),K=o(M),Q=a(K,2),je=o(Q);je.value=je.__value="";var ut=a(je);xe(ut,1,()=>e(L),Ae,(te,Se)=>{var Ve=ha(),gt=o(Ve),ft={};D(()=>{h(gt,e(Se)),ft!==(ft=e(Se))&&(Ve.value=(Ve.__value=e(Se))??"")}),u(te,Ve)});var Ft=a(M,2),me=o(Ft),Xt=o(me),wt=a(me,2),jt=o(wt),er=o(jt);jt.value=jt.__value="";var Rt=a(jt);xe(Rt,1,()=>e(v),Ae,(te,Se)=>{var Ve=ma(),gt=o(Ve),ft={};D(()=>{h(gt,e(Se)),ft!==(ft=e(Se))&&(Ve.value=(Ve.__value=e(Se))??"")}),u(te,Ve)});var vt=a(wt,2);{var St=te=>{var Se=_a();u(te,Se)};Z(vt,te=>{e(s),e(v),r(()=>e(s).docente&&e(v).length===0)&&te(St)})}var Mt=a(f,2),Lt=o(Mt),$t=o(Lt),O=o($t),W=a($t,2),le=o(W),Me=o(le);le.value=le.__value="";var lt=a(le);xe(lt,1,()=>e(b),Ae,(te,Se)=>{var Ve=ya(),gt=o(Ve),ft={};D(()=>{h(gt,e(Se)),ft!==(ft=e(Se))&&(Ve.value=(Ve.__value=e(Se))??"")}),u(te,Ve)});var Pt=a(W,2);{var Yr=te=>{var Se=ka();u(te,Se)};Z(Pt,te=>{e(s),e(b),r(()=>(e(s).docente||e(s).materia)&&e(b).length===0)&&te(Yr)})}var Rr=a(Lt,2),nr=o(Rr),fr=a(nr,2),ir=o(fr),vr=o(ir);ir.value=ir.__value="";var Lr=a(ir);xe(Lr,1,()=>e(I),Ae,(te,Se)=>{const Ve=Dt(()=>(e(Se),r(()=>be(e(Se)))));var gt=wa(),ft=o(gt),tr={};D(()=>{h(ft,`${pe(e(Ve)),r(()=>e(Ve).icon)??""}
                      ${e(Se)??""}`),tr!==(tr=e(Se))&&(gt.value=(gt.__value=e(Se))??"")}),u(te,gt)});var Er=a(fr,2);{var Dr=te=>{var Se=$a();u(te,Se)};Z(Er,te=>{e(s),e(I),r(()=>(e(s).docente||e(s).materia||e(s).grado)&&e(I).length===0)&&te(Dr)})}var gr=a(Mt,2),hr=o(gr),Br=o(hr),pr=a(Br,2),mr=a(hr,2),zr=o(mr),_r=a(zr,2),qr=a(B,2),ur=o(qr),br=o(ur),ie=a(o(br)),Le=o(ie),et=a(ur,2);{var Ht=te=>{var Se=Ca(),Ve=o(Se),gt=o(Ve),ft=a(gt,2);D(()=>{l(gt,`color: ${e(t),r(()=>e(t).icon)??""};`),l(ft,`color: ${e(t),r(()=>e(t).text)??""};`)}),u(te,Se)},It=te=>{var Se=Ma(),Ve=Qt(Se),gt=o(Ve),ft=o(gt),tr=o(ft),Pr=o(tr),yr=o(Pr),Hr=a(yr),Gr=a(Hr),Fr=a(Gr),kr=a(Fr),Mr=a(kr),X=a(Mr),Wt=a(X),rr=a(tr);xe(rr,5,()=>e(S),Ae,(ht,A)=>{const tt=Dt(()=>(e(A),r(()=>be(e(A).motivo))));var mt=Sa(),Et=o(mt),Kt=o(Et),it=a(Et),Ut=o(it),Zt=a(it),Tt=o(Zt),Vt=a(Zt),ar=o(Vt),bt=a(Vt),ot=o(bt);{var _t=yt=>{var Je=Aa(),ge=o(Je);D(()=>h(ge,(e(A),r(()=>e(A).nombre)))),U("click",Je,()=>g(e(A).nombre)),u(yt,Je)},wr=yt=>{var Je=Ao();D(()=>h(Je,(e(A),r(()=>e(A).nombre)))),u(yt,Je)};Z(ot,yt=>{e(s),r(()=>e(s).docente&&e(s).materia&&e(s).grado)?yt(_t):yt(wr,!1)})}var qe=a(bt),Or=o(qe),Yt=o(Or),Gt=o(Yt),$r=a(Yt),qt=a(qe),Cr=o(qt),dr=a(qt),Ur=o(dr),Jt=o(Ur);D(yt=>{l(mt,`border-color: ${e(t),r(()=>e(t).border)??""};`),l(Et,`color: ${e(t),r(()=>e(t).text)??""};`),h(Kt,yt),l(it,`color: ${e(t),r(()=>e(t).text)??""};`),dt(it,"title",(e(A),r(()=>e(A).docente))),h(Ut,(e(A),r(()=>e(A).docente))),l(Zt,`color: ${e(t),r(()=>e(t).text)??""};`),dt(Zt,"title",(e(A),r(()=>e(A).materia))),h(Tt,(e(A),r(()=>e(A).materia))),l(Vt,`color: ${e(t),r(()=>e(t).text)??""};`),h(ar,(e(A),r(()=>e(A).grado))),l(bt,`color: ${e(t),r(()=>e(t).text)??""};`),dt(bt,"title",(e(A),r(()=>e(A).nombre))),Nt(Or,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${pe(e(tt)),r(()=>e(tt).color)??""}`),h(Gt,(pe(e(tt)),r(()=>e(tt).icon))),h($r,` ${e(A),r(()=>e(A).motivo)??""}`),l(qt,`color: ${e(t),r(()=>e(t).text)??""};`),h(Cr,(e(A),r(()=>e(A).horas))),l(dr,`color: ${e(t),r(()=>e(t).text)??""};`),h(Jt,(e(A),r(()=>e(A).observaciones||"-")))},[()=>(e(A),r(()=>He(e(A).fecha)))]),u(ht,mt)});var or=a(Ve,2),Tr=o(or),xr=o(Tr),p=o(xr),n=o(p),x=o(n),C=a(x),P=a(C),re=a(P),Ce=a(re),Pe=a(Ce),Re=a(Pe),Ct=a(p);xe(Ct,5,()=>e(S),Ae,(ht,A)=>{const tt=Dt(()=>(e(A),r(()=>be(e(A).motivo))));var mt=Ea(),Et=o(mt),Kt=o(Et),it=a(Et),Ut=o(it),Zt=o(Ut),Tt=a(it),Vt=o(Tt),ar=a(Tt),bt=o(ar),ot=o(bt);{var _t=Jt=>{var yt=Ia(),Je=o(yt);D(()=>h(Je,(e(A),r(()=>e(A).nombre)))),U("click",yt,()=>g(e(A).nombre)),u(Jt,yt)},wr=Jt=>{var yt=Ao();D(()=>h(yt,(e(A),r(()=>e(A).nombre)))),u(Jt,yt)};Z(ot,Jt=>{e(s),r(()=>e(s).docente&&e(s).materia&&e(s).grado)?Jt(_t):Jt(wr,!1)})}var qe=a(ar),Or=o(qe),Yt=o(Or),Gt=o(Yt),$r=a(Yt),qt=a(qe),Cr=o(qt),dr=a(qt),Ur=o(dr);D(Jt=>{l(mt,`border-color: ${e(t),r(()=>e(t).border)??""};`),l(Et,`color: ${e(t),r(()=>e(t).text)??""};`),h(Kt,Jt),l(it,`color: ${e(t),r(()=>e(t).text)??""};`),dt(Ut,"title",(e(A),r(()=>e(A).docente))),h(Zt,(e(A),r(()=>e(A).docente))),l(Tt,`color: ${e(t),r(()=>e(t).text)??""};`),dt(Tt,"title",(e(A),r(()=>e(A).materia))),h(Vt,(e(A),r(()=>e(A).materia))),l(ar,`color: ${e(t),r(()=>e(t).text)??""};`),dt(bt,"title",(e(A),r(()=>e(A).nombre))),Nt(Or,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${pe(e(tt)),r(()=>e(tt).color)??""}`),h(Gt,(pe(e(tt)),r(()=>e(tt).icon))),h($r,` ${e(A),r(()=>e(A).motivo)??""}`),l(qt,`color: ${e(t),r(()=>e(t).text)??""};`),h(Cr,(e(A),r(()=>e(A).horas))),l(dr,`color: ${e(t),r(()=>e(t).text)??""};`),h(Ur,(e(A),r(()=>e(A).grado)))},[()=>(e(A),r(()=>He(e(A).fecha)))]),u(ht,mt)});var rt=a(or,2),nt=o(rt);xe(nt,5,()=>e(S),Ae,(ht,A)=>{const tt=Dt(()=>(e(A),r(()=>be(e(A).motivo))));var mt=Fa(),Et=o(mt),Kt=o(Et),it=o(Kt);{var Ut=Je=>{var ge=Da(),Ee=o(ge);D(()=>h(Ee,(e(A),r(()=>e(A).nombre)))),U("click",ge,()=>g(e(A).nombre)),u(Je,ge)},Zt=Je=>{var ge=Ba(),Ee=o(ge);D(()=>h(Ee,(e(A),r(()=>e(A).nombre)))),u(Je,ge)};Z(it,Je=>{e(s),r(()=>e(s).docente&&e(s).materia&&e(s).grado)?Je(Ut):Je(Zt,!1)})}var Tt=a(it,2),Vt=o(Tt),ar=a(Kt,2),bt=o(ar),ot=o(bt),_t=o(ot),wr=a(ot),qe=a(bt,2),Or=o(qe),Yt=a(Et,2),Gt=o(Yt),$r=a(o(Gt),2),qt=o($r),Cr=a(Gt,2),dr=a(o(Cr),2),Ur=o(dr),Jt=a(Yt,2);{var yt=Je=>{var ge=za(),Ee=o(ge),Oe=a(o(Ee),2),sr=o(Oe);D(()=>{l(ge,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; color: ${e(t),r(()=>e(t).label)??""};`),h(sr,(e(A),r(()=>e(A).observaciones)))}),u(Je,ge)};Z(Jt,Je=>{e(A),r(()=>e(A).observaciones)&&Je(yt)})}D(Je=>{l(mt,`border-color: ${e(t),r(()=>e(t).cardBorder)??""}; background-color: ${e(t),r(()=>e(t).cardBg)??""};`),l(Tt,`color: ${e(t),r(()=>e(t).label)??""};`),h(Vt,`${e(A),r(()=>e(A).grado)??""} ‚Ä¢ ${Je??""}`),Nt(bt,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium ${pe(e(tt)),r(()=>e(tt).color)??""} mb-0.5`),h(_t,(pe(e(tt)),r(()=>e(tt).icon))),h(wr,` ${e(A),r(()=>e(A).motivo)??""}`),l(qe,`color: ${e(t),r(()=>e(t).text)??""};`),h(Or,`${e(A),r(()=>e(A).horas)??""}h`),l(Yt,`color: ${e(t),r(()=>e(t).text)??""};`),h(qt,(e(A),r(()=>e(A).docente))),dt(dr,"title",(e(A),r(()=>e(A).materia))),h(Ur,(e(A),r(()=>e(A).materia)))},[()=>(e(A),r(()=>He(e(A).fecha)))]),u(ht,mt)}),D(()=>{l(gt,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),l(tr,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""};`),l(yr,`color: ${e(t),r(()=>e(t).text)??""};`),l(Hr,`color: ${e(t),r(()=>e(t).text)??""};`),l(Gr,`color: ${e(t),r(()=>e(t).text)??""};`),l(Fr,`color: ${e(t),r(()=>e(t).text)??""};`),l(kr,`color: ${e(t),r(()=>e(t).text)??""};`),l(Mr,`color: ${e(t),r(()=>e(t).text)??""};`),l(X,`color: ${e(t),r(()=>e(t).text)??""};`),l(Wt,`color: ${e(t),r(()=>e(t).text)??""};`),l(Tr,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),l(p,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""};`),l(x,`color: ${e(t),r(()=>e(t).text)??""};`),l(C,`color: ${e(t),r(()=>e(t).text)??""};`),l(P,`color: ${e(t),r(()=>e(t).text)??""};`),l(re,`color: ${e(t),r(()=>e(t).text)??""};`),l(Ce,`color: ${e(t),r(()=>e(t).text)??""};`),l(Pe,`color: ${e(t),r(()=>e(t).text)??""};`),l(Re,`color: ${e(t),r(()=>e(t).text)??""};`)}),u(te,Se)};Z(et,te=>{e(S),r(()=>e(S).length===0)?te(Ht):te(It,!1)})}D(()=>{l(B,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),l(T,`color: ${e(t),r(()=>e(t).text)??""};`),l(he,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l($e,`color: ${e(t),r(()=>e(t).text)??""};`),l(Y,`color: ${e(t),r(()=>e(t).text)??""};`),l(Ue,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(Fe,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(At,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(Bt,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(zt,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(K,`color: ${e(t),r(()=>e(t).label)??""};`),l(Q,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(me,`color: ${e(t),r(()=>e(t).label)??""};`),h(Xt,`Materia ${e(s),r(()=>e(s).docente?"(del docente)":"")??""}`),l(wt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),h(er,(e(s),r(()=>e(s).docente?"Todas las materias del docente":"Todas las materias"))),l($t,`color: ${e(t),r(()=>e(t).label)??""};`),h(O,`Grado ${e(s),r(()=>e(s).docente||e(s).materia?"(filtrado)":"")??""}`),l(W,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),h(Me,(e(s),r(()=>e(s).docente||e(s).materia?"Todos los grados filtrados":"Todos los grados"))),l(nr,`color: ${e(t),r(()=>e(t).label)??""};`),l(fr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),h(vr,(e(s),r(()=>e(s).docente||e(s).materia||e(s).grado?"Todos los motivos filtrados":"Todos los motivos"))),l(Br,`color: ${e(t),r(()=>e(t).label)??""};`),pr.disabled=!e(R),l(pr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(zr,`color: ${e(t),r(()=>e(t).label)??""};`),_r.disabled=!e(R),l(_r,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(br,`color: ${e(t),r(()=>e(t).label)??""};`),h(Le,(e(S),r(()=>e(S).length)))}),U("click",he,Qe),_o(G,()=>e(R),te=>d(R,te)),U("click",Ue,()=>w("hoy")),U("click",Fe,()=>w("semana")),U("click",At,()=>w("mes")),U("click",Bt,()=>w("mes_actual")),U("click",zt,()=>w("trimestre")),at(Q,()=>e(s).docente,te=>(ae(s,e(s).docente=te),_e(()=>{e(t),e(L),e(v),e(b),e(I)}))),at(wt,()=>e(s).materia,te=>(ae(s,e(s).materia=te),_e(()=>{e(t),e(L),e(v),e(b),e(I)}))),at(W,()=>e(s).grado,te=>(ae(s,e(s).grado=te),_e(()=>{e(t),e(L),e(v),e(b),e(I)}))),at(fr,()=>e(s).motivo,te=>(ae(s,e(s).motivo=te),_e(()=>{e(t),e(L),e(v),e(b),e(I)}))),cr(pr,()=>e(s).fechaInicio,te=>(ae(s,e(s).fechaInicio=te),_e(()=>{e(t),e(L),e(v),e(b),e(I)}))),cr(_r,()=>e(s).fechaFin,te=>(ae(s,e(s).fechaFin=te),_e(()=>{e(t),e(L),e(v),e(b),e(I)}))),u(c,$)};Z(Ge,c=>{e(j)?c(st):c(ct,!1)})}D(()=>{l(de,`background-color: ${e(t),r(()=>e(t).cardBg)??""};`),l(ke,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),dt(Ne,"src",Kr),l(se,`color: ${e(t),r(()=>e(t).text)??""};`),l(we,`color: ${e(t),r(()=>e(t).label)??""};`),We.disabled=(e(S),r(()=>e(S).length===0)),l(Be,`color: ${e(t),r(()=>e(t).text)??""};`)}),U("click",We,Xe),U("click",Be,function(...c){ue()?.apply(this,c)}),U("click",H,go(function(...c){ue()?.apply(this,c)})),U("keydown",H,c=>{(c.key==="Enter"||c.key===" ")&&ue()()}),u(N,H),Ir()}var ja=_('<p class="text-sm font-medium tracking-wide animate-pulse" style="color: rgb(var(--text-secondary));"> </p>'),Ra=_('<div class="flex flex-col items-center justify-center gap-4 p-8 animate-in fade-in duration-500"><div><div class="absolute inset-0 bg-indigo-500/20 blur-xl rounded-full animate-pulse"></div> <div class="absolute inset-0 rounded-full border-2 border-indigo-500/20 border-t-indigo-500 animate-spin"></div> <div class="absolute inset-2 rounded-full border-2 border-violet-500/20 border-b-violet-500 animate-[spin_1.5s_linear_infinite_reverse]"></div> <div class="absolute inset-[35%] bg-gradient-to-tr from-indigo-600 to-violet-600 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)] animate-pulse"></div></div> <!></div>');function po(N,k){Sr(k,!1);const v=m();let fe=kt(k,"size",8,"medium"),b=kt(k,"message",8,"");const I={small:"w-8 h-8",medium:"w-16 h-16",large:"w-24 h-24"};ye(()=>pe(fe()),()=>{d(v,I[fe()]||I.medium)}),Nr();var t=Ra(),ue=o(t),Te=a(ue,2);{var E=oe=>{var V=ja(),q=o(V);D(()=>h(q,b())),u(oe,V)};Z(Te,oe=>{b()&&oe(E)})}D(()=>Nt(ue,1,`relative ${e(v)??""}`)),u(N,t),Ir()}var La=_('<div class="flex justify-center py-12"><!></div>'),Pa=_("<option> </option>"),Ha=_("<option> </option>"),Ga=_("<option> </option>"),Ua=_("<option> </option>"),Va=pt('<svg class="animate-spin h-5 w-5 text-white" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Generando...',1),Ya=pt('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg> Descargar Excel',1),qa=_('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="space-y-2"><label for="rep-docente" class="block text-sm font-medium">Docente</label> <select id="rep-docente" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione docente</option><!></select></div> <div class="space-y-2"><label for="rep-materia" class="block text-sm font-medium">Materia</label> <select id="rep-materia" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione materia</option><!></select></div> <div class="space-y-2"><label for="rep-grado" class="block text-sm font-medium">Grado</label> <select id="rep-grado" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione grado</option><!></select></div> <div class="space-y-2"><label for="rep-periodo" class="block text-sm font-medium">Periodo</label> <select id="rep-periodo" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"></select></div></div> <div class="pt-4 flex gap-3"><button class="flex-1 px-6 py-3 border rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors font-medium">Cancelar</button> <button class="flex-[2] px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg hover:shadow-green-500/20"><!></button></div>',1),Ja=_('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-2xl overflow-hidden shadow-2xl border"><div class="flex items-center justify-between p-6 border-b"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h2 id="modal-title" class="text-xl font-bold">Generador de Reporte Excel</h2> <p class="text-sm opacity-75">Inasistencias por materia y grado</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar modal"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 space-y-6"><!></div></div></div>');function Wa(N,k){Sr(k,!1);const v=m();let fe=null,b=null,I=kt(k,"onClose",8),t=kt(k,"initialDocente",8,""),ue=m([]),Te=m([]),E=m([]),oe=m(t()||""),V=m(""),q=m(""),j=m(ho[0].nombre),R=m(!1),S=m(!1);const s=async()=>{if(!fe||!b){const[g,H]=await Promise.all([ao(()=>import("./excel-G1qE2FwJ.js").then(de=>de.e),[]),ao(()=>import("./utils-Dc41pFlL.js").then(de=>de.F),__vite__mapDeps([0,1]))]);fe=g.default,b=H.default}},i=g=>g?g.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g," ").trim().toLowerCase():"",w=g=>{const H=[],de=new Date(g.fecha_inicio),ke=new Date(g.fecha_fin);for(;de<=ke;){const ee=de.getUTCDay();ee>=1&&ee<=6&&H.push(new Date(de)),de.setUTCDate(de.getUTCDate()+1)}return H},J=g=>{const H=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return`${g.getUTCDate()}/${H[g.getUTCMonth()]}/${g.getUTCFullYear().toString().substr(2)}`};Ar(async()=>{d(R,!0);try{const[g,H,de]=await Promise.all([Zr(),Qr(),Xr()]);d(ue,g),d(Te,H),d(E,de)}catch(g){console.error("Error cargando datos iniciales:",g)}finally{d(R,!1)}});const be=async()=>{if(await s(),!e(oe)||!e(V)||!e(q)){Ot.fire({icon:"warning",title:"Campos incompletos",text:"Por favor seleccione Docente, Materia y Grado."});return}const g=ho.find(H=>H.nombre===e(j));if(!g){Ot.fire({icon:"error",title:"Error",text:"Periodo no encontrado"});return}d(S,!0);try{const H=await Do({spreadsheetId:lo,worksheetTitle:yo});if(!H?.records||!Array.isArray(H.records))throw new Error("No se pudieron obtener los registros de inasistencias");const de=H.records.slice(1),ke=i(e(oe)),ee=i(e(V)),Ne=e(q).toString().trim(),De=de.map(T=>{const F=T.values||[];return{fecha:F[2]||"",docente:F[1]||"",materia:F[4]||"",grado:(F[6]||"").toString().trim(),nombre:F[7]||"",motivo:F[5]||"",horas:F[3]||"0"}}).filter(T=>{const F=i(T.docente),ne=i(T.materia),he=T.grado,y=F.includes(ke)||ke.includes(F),$e=ne.includes(ee)||ee.includes(ne),ve=he===Ne,G=new Date(T.fecha),Y=G>=g.fecha_inicio&&G<=g.fecha_fin;return y&&$e&&ve&&Y}),se=e(E).filter(T=>T.grado.toString()===e(q)).map(T=>T.nombre).sort();if(se.length===0)throw new Error("No hay estudiantes registrados para el grado seleccionado");const Ye=w(g).filter(T=>{const F=T.toISOString().split("T")[0];return De.some(ne=>ne.fecha===F)});if(Ye.length===0){Ot.fire({icon:"info",title:"Sin datos",text:"No se encontraron inasistencias para los filtros seleccionados en este periodo."}),d(S,!1);return}const We=new fe.Workbook,Be=We.addWorksheet("Reporte de Inasistencias"),Ke=Ye.length+2,Ge=Be.addRow([`REPORTE DE INASISTENCIAS - ${e(V)} - GRADO ${e(q)}`]);Ge.height=30,Ge.font={bold:!0,size:16,color:{argb:"FFFFFF"}},Ge.fill={type:"pattern",pattern:"solid",fgColor:{argb:"2E75B6"}},Ge.alignment={vertical:"middle",horizontal:"center"},Be.mergeCells(1,1,1,Ke);const st=Be.addRow([`Docente: ${e(oe)} | Periodo: ${g.nombre} (${J(g.fecha_inicio)} - ${J(g.fecha_fin)})`]);st.height=20,st.font={bold:!0,size:10,color:{argb:"FFFFFF"}},st.fill={type:"pattern",pattern:"solid",fgColor:{argb:"5B9BD5"}},st.alignment={vertical:"middle",horizontal:"left"},Be.mergeCells(2,1,2,Ke);const ct=["Estudiantes",...Ye.map(T=>J(T)),"Total Horas"],c=Be.addRow(ct);c.height=25,c.font={bold:!0,size:11,color:{argb:"FFFFFF"}},c.alignment={vertical:"middle",horizontal:"center"},Be.getColumn(1).width=35,Ye.forEach((T,F)=>{Be.getColumn(F+2).width=12}),Be.getColumn(Ke).width=15,c.eachCell((T,F)=>{T.fill={type:"pattern",pattern:"solid",fgColor:{argb:F===Ke?"FF6B6B":"4472C4"}},T.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}),se.forEach(T=>{const F=[T];let ne=0;Ye.forEach($e=>{const ve=$e.toISOString().split("T")[0],G=De.filter(Y=>i(Y.nombre)===i(T)&&Y.fecha===ve);if(G.length>0){const Y=G.reduce((ze,Ue)=>ze+(parseFloat(Ue.horas)||0),0);F.push(Y>0?Y.toString():"X"),ne+=Y}else F.push("‚úì")}),F.push(ne.toString());const he=Be.addRow(F);he.getCell(1).font={bold:!0},he.getCell(1).fill={type:"pattern",pattern:"solid",fgColor:{argb:"F2F2F2"}},Ye.forEach(($e,ve)=>{const G=he.getCell(ve+2);G.alignment={horizontal:"center"};const Y=G.value?.toString();Y==="X"||parseFloat(Y||"0")>0?(G.font={color:{argb:"FF0000"},bold:!0},G.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE6E6"}}):G.font={color:{argb:"00AA00"}}});const y=he.getCell(Ke);y.font={bold:!0,color:{argb:ne>0?"FF0000":"00AA00"}},y.alignment={horizontal:"center"},y.fill={type:"pattern",pattern:"solid",fgColor:{argb:ne>0?"FFE6E6":"E6FFE6"}},he.eachCell($e=>{$e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})});const $=await We.xlsx.writeBuffer(),B=new Blob([$],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),z=`Reporte_Inasistencias_${e(q)}_${e(V).replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.xlsx`;b(B,z),Ot.fire({icon:"success",title:"Reporte generado",text:`Se ha generado el reporte con ${se.length} estudiantes.`,timer:2e3,showConfirmButton:!1})}catch(H){console.error("Error generando Excel:",H);const de=H instanceof Error?H.message:"Error desconocido";Ot.fire({icon:"error",title:"Error",text:de})}finally{d(S,!1)}};ye(()=>{},()=>{d(v,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Nr(),jr();var L=Ja(),Ie=o(L),ce=o(Ie),Ze=a(o(ce),2),xt=a(ce,2),Qe=o(xt);{var Xe=g=>{var H=La(),de=o(H);po(de,{message:"Cargando datos..."}),u(g,H)},He=g=>{var H=qa(),de=Qt(H),ke=o(de),ee=o(ke),Ne=a(ee,2),De=o(Ne);De.value=De.__value="";var se=a(De);xe(se,1,()=>e(ue),Ae,(G,Y)=>{var ze=Pa(),Ue=o(ze),Fe={};D(()=>{h(Ue,e(Y)),Fe!==(Fe=e(Y))&&(ze.value=(ze.__value=e(Y))??"")}),u(G,ze)});var we=a(ke,2),Ye=o(we),We=a(Ye,2),Be=o(We);Be.value=Be.__value="";var Ke=a(Be);xe(Ke,1,()=>e(Te),Ae,(G,Y)=>{var ze=Ha(),Ue=o(ze),Fe={};D(()=>{h(Ue,(e(Y),r(()=>e(Y).materia))),Fe!==(Fe=(e(Y),r(()=>e(Y).materia)))&&(ze.value=(ze.__value=(e(Y),r(()=>e(Y).materia)))??"")}),u(G,ze)});var Ge=a(we,2),st=o(Ge),ct=a(st,2),c=o(ct);c.value=c.__value="";var $=a(c);xe($,1,()=>(e(E),r(()=>[...new Set(e(E).map(G=>G.grado.toString()))])),Ae,(G,Y)=>{var ze=Ga(),Ue=o(ze),Fe={};D(At=>{h(Ue,At),Fe!==(Fe=e(Y))&&(ze.value=(ze.__value=e(Y))??"")},[()=>(e(Y),r(()=>e(Y).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),u(G,ze)});var B=a(Ge,2),z=o(B),T=a(z,2);xe(T,5,()=>ho,Ae,(G,Y)=>{var ze=Ua(),Ue=o(ze),Fe={};D(()=>{h(Ue,`Periodo ${e(Y),r(()=>e(Y).nombre)??""}`),Fe!==(Fe=(e(Y),r(()=>e(Y).nombre)))&&(ze.value=(ze.__value=(e(Y),r(()=>e(Y).nombre)))??"")}),u(G,ze)});var F=a(de,2),ne=o(F),he=a(ne,2),y=o(he);{var $e=G=>{var Y=Va();u(G,Y)},ve=G=>{var Y=Ya();u(G,Y)};Z(y,G=>{e(S)?G($e):G(ve,!1)})}D(()=>{l(ee,`color: ${e(v),r(()=>e(v).label)??""};`),l(Ne,`background-color: ${e(v),r(()=>e(v).inputBg)??""}; border-color: ${e(v),r(()=>e(v).border)??""}; color: ${e(v),r(()=>e(v).text)??""};`),l(Ye,`color: ${e(v),r(()=>e(v).label)??""};`),l(We,`background-color: ${e(v),r(()=>e(v).inputBg)??""}; border-color: ${e(v),r(()=>e(v).border)??""}; color: ${e(v),r(()=>e(v).text)??""};`),l(st,`color: ${e(v),r(()=>e(v).label)??""};`),l(ct,`background-color: ${e(v),r(()=>e(v).inputBg)??""}; border-color: ${e(v),r(()=>e(v).border)??""}; color: ${e(v),r(()=>e(v).text)??""};`),l(z,`color: ${e(v),r(()=>e(v).label)??""};`),l(T,`background-color: ${e(v),r(()=>e(v).inputBg)??""}; border-color: ${e(v),r(()=>e(v).border)??""}; color: ${e(v),r(()=>e(v).text)??""};`),l(ne,`border-color: ${e(v),r(()=>e(v).border)??""};`),he.disabled=e(S)||!e(oe)||!e(V)||!e(q)}),at(Ne,()=>e(oe),G=>d(oe,G)),at(We,()=>e(V),G=>d(V,G)),at(ct,()=>e(q),G=>d(q,G)),at(T,()=>e(j),G=>d(j,G)),U("click",ne,function(...G){I()?.apply(this,G)}),U("click",he,be),u(g,H)};Z(Qe,g=>{e(R)?g(Xe):g(He,!1)})}D(()=>{l(Ie,`background-color: ${e(v),r(()=>e(v).cardBg)??""}; border-color: ${e(v),r(()=>e(v).cardBorder)??""}; color: ${e(v),r(()=>e(v).text)??""};`),l(ce,`border-color: ${e(v),r(()=>e(v).cardBorder)??""};`)}),U("click",Ze,function(...g){I()?.apply(this,g)}),U("click",L,go(function(...g){I()?.apply(this,g)})),U("keydown",L,g=>g.key==="Escape"&&I()()),u(N,L),Ir()}var Ka=_('<div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping svelte-gsxx31"></div> <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full svelte-gsxx31"></div>',1),Za=_('<div class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-ping svelte-gsxx31"></div> <div class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full svelte-gsxx31"></div>',1),Qa=pt('<svg class="w-5 h-5 text-indigo-500 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-gsxx31"></path></svg>'),Xa=pt('<svg class="w-5 h-5 text-amber-500 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="svelte-gsxx31"></path></svg>'),es=pt('<svg class="w-5 h-5 text-indigo-400 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-gsxx31"></path></svg>'),ts=_('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-gsxx31"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0 svelte-gsxx31"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-gsxx31"></path></svg></div> <div class="flex-1 pr-6 pt-0.5 svelte-gsxx31"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100 svelte-gsxx31">Informaci√≥n</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200 svelte-gsxx31"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors svelte-gsxx31" aria-label="Cerrar alerta"><svg class="w-4 h-4 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-gsxx31"></path></svg></button></div>'),rs=_('<option class="svelte-gsxx31"> </option>'),os=_('<option class="svelte-gsxx31"> </option>'),as=_('<option class="svelte-gsxx31"> </option>'),ss=_('<option class="svelte-gsxx31"> </option>'),ls=_('<span><span class="mr-1.5 svelte-gsxx31"> </span> <button type="button" class="ml-1.5 hover:opacity-70 transition-opacity svelte-gsxx31" aria-label="Eliminar motivo"><svg class="w-3 h-3 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12" class="svelte-gsxx31"></path></svg></button></span>'),ns=_('<option class="svelte-gsxx31"> </option>'),is=_('<option class="svelte-gsxx31"> </option>'),ds=_('<div class="flex items-center gap-2 svelte-gsxx31"><button type="button" class="p-2 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Agregar observaci√≥n"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" class="svelte-gsxx31"></path></svg></button></div>'),cs=_('<div class="px-4 pb-4 animate-fade-in svelte-gsxx31"><textarea placeholder="Escribe una observaci√≥n espec√≠fica para este estudiante..." rows="2" class="w-full px-4 py-2 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none resize-none text-sm svelte-gsxx31"></textarea></div>'),vs=_('<div><div class="flex-1 min-w-0 svelte-gsxx31"><span class="text-base font-medium block svelte-gsxx31"> </span> <div class="flex flex-wrap gap-2 mt-2 svelte-gsxx31"></div></div> <div class="flex flex-col sm:flex-row items-center gap-2 w-full sm:w-auto svelte-gsxx31"><div><select class="w-full appearance-none border rounded-lg px-4 py-2 pr-10 text-sm focus:ring-2 focus:ring-indigo-500 cursor-pointer transition-all outline-none svelte-gsxx31"><option class="svelte-gsxx31">Hora...</option><option class="svelte-gsxx31">0 (Sin hora)</option><!></select> <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 svelte-gsxx31"><svg class="w-4 h-4 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-gsxx31"></path></svg></div></div> <div class="relative w-full sm:w-56 svelte-gsxx31"><select class="w-full appearance-none border rounded-lg px-4 py-2 pr-10 text-sm focus:ring-2 focus:ring-indigo-500 cursor-pointer transition-all outline-none svelte-gsxx31"><option class="svelte-gsxx31">A√±adir motivo...</option><option class="svelte-gsxx31">üö´ Limpiar todo</option><!></select> <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 svelte-gsxx31"><svg class="w-4 h-4 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" class="svelte-gsxx31"></path></svg></div></div></div> <!></div> <!>',1),gs=_('<div class="text-center py-12 opacity-60 svelte-gsxx31">No hay estudiantes en este grado.</div>'),ps=_('<div class="space-y-3 animate-fade-in svelte-gsxx31"><label class="block text-sm font-semibold uppercase tracking-wider svelte-gsxx31"> </label> <div class="space-y-2 max-h-[700px] overflow-y-auto border rounded-2xl p-4 bg-zinc-50/50 dark:bg-zinc-900/50 backdrop-blur-sm scrollbar-thin scrollbar-thumb-zinc-300 dark:scrollbar-thumb-zinc-600 svelte-gsxx31"><!> <!></div></div>'),us=pt('<svg class="animate-spin h-6 w-6 lg:h-7 lg:w-7 svelte-gsxx31" fill="none" viewBox="0 0 24 24"><circle class="opacity-25 svelte-gsxx31" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75 svelte-gsxx31" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),bs=pt('<svg class="h-6 w-6 lg:h-7 lg:w-7 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" class="svelte-gsxx31"></path></svg>'),xs=_('<span class="absolute -top-1 -right-1 lg:-top-2 lg:-right-2 bg-red-500 text-white text-[10px] lg:text-xs font-bold rounded-full h-5 w-5 lg:h-6 lg:w-6 flex items-center justify-center ring-2 ring-white dark:ring-zinc-950 animate-bounce svelte-gsxx31"> </span>'),fs=_('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200 svelte-gsxx31"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40 svelte-gsxx31"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8 svelte-gsxx31"><div class="flex items-center gap-4 lg:flex-col svelte-gsxx31"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto svelte-gsxx31"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center svelte-gsxx31">Registrar Inasistencias</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full svelte-gsxx31"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Abrir hoja de c√°lculo"><svg class="w-5 h-5 svelte-gsxx31" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Hoja de C√°lculo</span></button> <button id="filter-button-target" class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 relative svelte-gsxx31" title="Abrir Looker Studio"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Filtros</span> <!></button> <button id="report-button-target" class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 relative svelte-gsxx31" title="Generar reportes Excel"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2a2 2 0 00-2-2H5a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Reporte Excel</span> <!></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Abrir Looker Studio"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Looker Studio</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Volver al Dashboard"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Dashboard</span></button> <div class="relative svelte-gsxx31"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full svelte-gsxx31" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize svelte-gsxx31"> </span></button></div></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto svelte-gsxx31"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border svelte-gsxx31"><!> <!> <!> <form class="space-y-6 svelte-gsxx31"><div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-gsxx31"><div class="space-y-2 svelte-gsxx31"><label for="docente" class="block text-sm font-medium svelte-gsxx31">Docente</label> <select id="docente" name="docente" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-gsxx31"><option class="svelte-gsxx31"> </option><!></select></div> <div class="space-y-2 svelte-gsxx31"><div class="flex items-center justify-between svelte-gsxx31"><label for="materia" class="block text-sm font-medium svelte-gsxx31">Materia</label></div> <select id="materia" name="materia" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-gsxx31"><option class="svelte-gsxx31"> </option><!></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-gsxx31"><div class="space-y-2 svelte-gsxx31"><label for="horas" class="block text-sm font-medium svelte-gsxx31">Cantidad de Horas</label> <select id="horas" name="horas" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer svelte-gsxx31"><option class="svelte-gsxx31">Seleccione horas</option><option class="svelte-gsxx31">Sin hora espec√≠fica</option><!></select></div> <div class="space-y-2 svelte-gsxx31"><label for="grado" class="block text-sm font-medium svelte-gsxx31">Grado</label> <select id="grado" name="grado" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-gsxx31"><option class="svelte-gsxx31"> </option><!></select></div></div> <!> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-gsxx31"><div class="space-y-2 svelte-gsxx31"><label for="fecha" class="block text-sm font-medium svelte-gsxx31">Fecha</label> <input type="date" id="fecha" name="fecha" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none svelte-gsxx31"/></div> <div class="space-y-2 svelte-gsxx31"><label for="observaciones" class="block text-sm font-medium svelte-gsxx31">Observaciones</label> <textarea id="observaciones" name="observaciones" rows="3" placeholder="Opcional..." class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none resize-none svelte-gsxx31"></textarea></div></div> <div class="flex items-center justify-between pt-6 border-t svelte-gsxx31"><div class="text-sm font-medium svelte-gsxx31">Inasistencias marcadas: <span class="text-indigo-500 font-bold ml-1 svelte-gsxx31"> </span></div></div></form></div></main> <button class="fixed bottom-6 right-6 lg:bottom-10 lg:right-10 bg-green-600 hover:bg-green-700 text-white p-4 lg:p-5 rounded-full shadow-2xl hover:shadow-green-500/20 transform transition-all duration-300 hover:scale-110 active:scale-95 disabled:opacity-50 disabled:grayscale disabled:cursor-not-allowed z-50 group svelte-gsxx31" title="Guardar inasistencias"><!> <!></button></div> <!> <!>',1);function hs(N,k){Sr(k,!1);const v=()=>vo(Vr,"$theme",fe),[fe,b]=co(),I=m(),t=m(),ue=m(),Te="¬°Nueva funci√≥n de filtrado avanzado disponible!",E="¬°Nueva funci√≥n de reporte en Excel disponible!";let oe=kt(k,"onBack",8),V=m([]),q=m([]),j=m([]),R=m(!1),S=m(!1),s=m(!1),i=m({docente:localStorage.getItem("lastDocente")||"",materia:"",horas:"",grado:"",fecha:new Date().toISOString().split("T")[0],observaciones:""}),w=m([]),J=m({}),be=m({}),L=m(!1),Ie=m(!1),ce=m(!1);const Ze=()=>{d(Ie,!0)},xt=()=>{d(Ie,!1)},Qe=()=>{d(ce,!0)},Xe=()=>{d(ce,!1)};let He=m(localStorage.getItem("dismissedInfoInasistenciaContent")!==bo),g=m(!0),H=m(!0);function de(n){return!0}const ke=()=>{localStorage.setItem("dismissedInfoInasistenciaContent",bo),d(He,!1)},ee=()=>{localStorage.setItem("dismissedFeatureAlertFilters",new Date().toISOString()),d(g,!1)},Ne=()=>{localStorage.setItem("dismissedFeatureAlertFilters",new Date().toISOString()),Ze()},De=()=>{localStorage.setItem("dismissedFeatureAlertReport",new Date().toISOString()),d(H,!1)},se=()=>{localStorage.setItem("dismissedFeatureAlertReport",new Date().toISOString()),Qe(),d(H,!1)};let we=m(JSON.parse(localStorage.getItem("docenteMaterias")||"{}"));const Ye=(n,x)=>{!n||!x||(e(we)[n]||ae(we,e(we)[n]=[]),e(we)[n].includes(x)||(ae(we,e(we)[n]=[...e(we)[n],x]),localStorage.setItem("docenteMaterias",JSON.stringify(e(we)))))},We=()=>`https://docs.google.com/spreadsheets/d/${lo}`,Be=()=>{window.open(We(),"_blank")},Ke=()=>{window.open(ca,"_blank")},Ge=[{value:"Sin excusa",label:"Sin excusa",icon:"üö´",bgColor:"bg-red-50",borderColor:"border-red-300",textColor:"text-red-700",darkBgColor:"dark:bg-red-950",darkBorderColor:"dark:border-red-800",darkTextColor:"dark:text-red-300",obligaHoras:!0},{value:"Excusa",label:"Excusa",icon:"üìÑ",bgColor:"bg-blue-50",borderColor:"border-blue-300",textColor:"text-blue-700",darkBgColor:"dark:bg-blue-950",darkBorderColor:"dark:border-blue-800",darkTextColor:"dark:text-blue-300",obligaHoras:!0},{value:"LLegada Tarde",label:"Llegada Tarde",icon:"‚è∞",bgColor:"bg-indigo-50",borderColor:"border-indigo-300",textColor:"text-indigo-700",darkBgColor:"dark:bg-indigo-950",darkBorderColor:"dark:border-indigo-800",darkTextColor:"dark:text-indigo-300",obligaHoras:!1},{value:"Transporte Escolar",label:"Transporte Escolar",icon:"üöå",bgColor:"bg-red-50",borderColor:"border-red-300",textColor:"text-red-700",darkBgColor:"dark:bg-red-950",darkBorderColor:"dark:border-red-800",darkTextColor:"dark:text-red-300",obligaHoras:!0},{value:"Permiso",label:"Permiso",icon:"‚úÖ",bgColor:"bg-green-50",borderColor:"border-green-300",textColor:"text-green-700",darkBgColor:"dark:bg-green-950",darkBorderColor:"dark:border-green-800",darkTextColor:"dark:text-green-300",obligaHoras:!0},{value:"No portar/sin uniforme",label:"No portar/sin uniforme",icon:"üëö",bgColor:"bg-cyan-50",borderColor:"border-cyan-300",textColor:"text-cyan-700",darkBgColor:"dark:bg-cyan-950",darkBorderColor:"dark:border-cyan-800",darkTextColor:"dark:text-cyan-300",obligaHoras:!1},{value:"Pacto de Aula",label:"Pacto de Aula",icon:"ü§ù",bgColor:"bg-purple-50",borderColor:"border-purple-300",textColor:"text-purple-700",darkBgColor:"dark:bg-purple-950",darkBorderColor:"dark:border-purple-800",darkTextColor:"dark:text-purple-300",obligaHoras:!1},{value:"Uso del celular",label:"Uso del celular",icon:"üì±",bgColor:"bg-orange-50",borderColor:"border-orange-300",textColor:"text-orange-700",darkBgColor:"dark:bg-orange-950",darkBorderColor:"dark:border-orange-800",darkTextColor:"dark:text-orange-300",obligaHoras:!1},{value:"Desorden en Clase",label:"Desorden en Clase",icon:"üîä",bgColor:"bg-yellow-50",borderColor:"border-yellow-300",textColor:"text-yellow-700",darkBgColor:"dark:bg-yellow-950",darkBorderColor:"dark:border-yellow-800",darkTextColor:"dark:text-yellow-300",obligaHoras:!1},{value:"Fuga",label:"Fuga",icon:"üèÉ‚Äç‚ôÇÔ∏è",bgColor:"bg-red-100",borderColor:"border-red-400",textColor:"text-red-800",darkBgColor:"dark:bg-red-950",darkBorderColor:"dark:border-red-800",darkTextColor:"dark:text-red-300",obligaHoras:!0},{value:"No realizaci√≥n de Aseo",label:"No realizaci√≥n de Aseo",icon:"üßπ",bgColor:"bg-teal-50",borderColor:"border-teal-300",textColor:"text-teal-700",darkBgColor:"dark:bg-teal-950",darkBorderColor:"dark:border-teal-800",darkTextColor:"dark:text-teal-300",obligaHoras:!1},{value:"Licencia por salud",label:"Licencia por salud",icon:"üè•",bgColor:"bg-cyan-50",borderColor:"border-cyan-300",textColor:"text-cyan-700",darkBgColor:"dark:bg-cyan-950",darkBorderColor:"dark:border-cyan-800",darkTextColor:"dark:text-cyan-300",obligaHoras:!0},{value:"Incapacidad",label:"Incapacidad",icon:"ü©∫",bgColor:"bg-pink-50",borderColor:"border-pink-300",textColor:"text-pink-700",darkBgColor:"dark:bg-pink-950",darkBorderColor:"dark:border-pink-800",darkTextColor:"dark:text-pink-300",obligaHoras:!0},{value:"Reuni√≥n interna",label:"Reuni√≥n interna",icon:"üë•",bgColor:"bg-zinc-50",borderColor:"border-zinc-300",textColor:"text-zinc-700",darkBgColor:"dark:bg-zinc-950",darkBorderColor:"dark:border-zinc-800",darkTextColor:"dark:text-zinc-300",obligaHoras:!1},{value:"Ignorar",label:"Ignorar",icon:"üö´",bgColor:"bg-zinc-50",borderColor:"border-zinc-300",textColor:"text-zinc-700",darkBgColor:"dark:bg-zinc-950",darkBorderColor:"dark:border-zinc-800",darkTextColor:"dark:text-zinc-300",obligaHoras:!1},{value:"Psicoorientaci√≥n",label:"Psicoorientaci√≥n",icon:"üß†",bgColor:"bg-green-50",borderColor:"border-green-300",textColor:"text-green-700",darkBgColor:"dark:bg-green-950",darkBorderColor:"dark:border-green-800",darkTextColor:"dark:text-green-300",obligaHoras:!1},{value:"Retirado por el acudiente",label:"Retirado por el acudiente",icon:"üë®",bgColor:"bg-green-50",borderColor:"border-green-300",textColor:"text-green-700",darkBgColor:"dark:bg-green-950",darkBorderColor:"dark:border-green-800",darkTextColor:"dark:text-green-300",obligaHoras:!1}],st=()=>{Vr.update(n=>n==="light"?"dim":n==="dim"?"dark":"light")},ct=async()=>{d(R,!0),d(S,!0),d(s,!0);try{const[n,x,C]=await Promise.all([Zr(),Qr(),Xr()]);d(V,n),d(q,x),d(j,C)}catch(n){console.error("Error cargando datos iniciales:",n)}finally{d(R,!1),d(S,!1),d(s,!1)}},c=(n,x)=>{d(w,e(w).filter(C=>!(C.nombre===n&&C.motivo===x)))},$=(n,x,C)=>{if(x===""||x==="Ignorar"){d(w,e(w).filter(Pe=>Pe.nombre!==n));return}const P=Ge.find(Pe=>Pe.value===x);if(!P)return;let re=e(J)[n]||e(i).horas;if(P.obligaHoras||(re="0"),P.obligaHoras&&d(w,e(w).filter(Pe=>{if(Pe.nombre!==n)return!0;const Re=Ge.find(Ct=>Ct.value===Pe.motivo);return Re&&!Re.obligaHoras})),!e(w).some(Pe=>Pe.nombre===n&&Pe.motivo===x)){const Pe=e(w).find(Re=>Re.nombre===n)?.observaciones||"";d(w,[...e(w),{nombre:n,motivo:x,horas:re,observaciones:Pe}])}},B=(n,x)=>{d(w,e(w).map(C=>C.nombre===n?{...C,observaciones:x}:C))},z=n=>{ae(be,e(be)[n]=!e(be)[n])},T=(n,x)=>{ae(J,e(J)[n]=x),d(w,e(w).map(C=>{if(C.nombre===n){const P=Ge.find(re=>re.value===C.motivo);if(P&&P.obligaHoras)return{...C,horas:x}}return C}))},F=async n=>{if(n.preventDefault(),!(e(L)||e(w).length===0)){d(L,!0);try{const x=new Date().toISOString(),C=e(w).filter(P=>P.motivo&&P.motivo!=="Ignorar").map(P=>[x,e(i).docente,e(i).fecha,P.horas,e(i).materia,P.motivo,e(i).grado,P.nombre,P.observaciones||e(i).observaciones]);await ga({spreadsheetId:lo,worksheetTitle:yo,inasistencias:C}),Ye(e(i).docente,e(i).materia),await Ot.fire({icon:"success",title:"¬°√âxito!",text:`${e(w).length} inasistencia(s) registrada(s) exitosamente`,timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),d(i,{...e(i),grado:"",fecha:new Date().toISOString().split("T")[0],observaciones:"",horas:""}),d(w,[]),d(J,{}),d(be,{})}catch(x){console.error("Error enviando:",x),await Ot.fire({icon:"error",title:"Error",text:"Error al registrar la inasistencia",confirmButtonColor:"#ef4444"})}finally{d(L,!1)}}};Ar(()=>{ct(),d(g,de()),d(H,de())}),ye(()=>e(i),()=>{e(i).docente&&localStorage.setItem("lastDocente",e(i).docente)}),ye(()=>(e(i),e(q),e(we)),()=>{d(I,e(i).docente?[...e(q)].sort((n,x)=>{const C=e(we)[e(i).docente]?.includes(n.materia),P=e(we)[e(i).docente]?.includes(x.materia);return C&&!P?-1:!C&&P?1:n.materia.localeCompare(x.materia)}):e(q))}),ye(()=>{},()=>{d(t,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),ye(()=>(e(i),e(j)),()=>{d(ue,e(i).grado?e(j).filter(n=>n.grado.toString()===e(i).grado):[])}),Nr(),jr();var ne=fs(),he=Qt(ne),y=o(he),$e=o(y),ve=o($e),G=o(ve),Y=a(G,2),ze=a(ve,2),Ue=o(ze),Fe=a(Ue,2),At=a(o(Fe),4);{var Bt=n=>{var x=Ka();u(n,x)};Z(At,n=>{e(g)&&n(Bt)})}var zt=a(Fe,2),lr=a(o(zt),4);{var f=n=>{var x=Za();u(n,x)};Z(lr,n=>{e(H)&&n(f)})}var M=a(zt,2),K=a(M,2),Q=a(K,2),je=o(Q),ut=o(je);{var Ft=n=>{var x=Qa();u(n,x)},me=n=>{var x=Xa();u(n,x)},Xt=n=>{var x=es();u(n,x)};Z(ut,n=>{v()==="dark"?n(Ft):v()==="light"?n(me,1):n(Xt,!1)})}var wt=a(ut,2),jt=o(wt),er=a(y,2),Rt=o(er),vt=o(Rt);{var St=n=>{var x=ts(),C=a(o(x),2),P=a(o(C),2),re=o(P),Ce=a(C,2);D(()=>h(re,bo)),U("click",Ce,ke),u(n,x)};Z(vt,n=>{e(He)&&n(St)})}var Mt=a(vt,2);so(Mt,{featureMessage:Te,description:"Ahora puedes filtrar tus datos de forma avanzada. ¬°Pru√©balo!",onTryNow:Ne,onDismiss:ee,targetSelector:"#filter-button-target",showPopup:!1,colorTheme:"blue"});var Lt=a(Mt,2);so(Lt,{featureMessage:E,description:"Ahora puedes generar reportes de inasistencias en formato Excel. ¬°Descarga y analiza tus datos!",onTryNow:se,onDismiss:De,targetSelector:"#report-button-target",showPopup:!1,colorTheme:"green"});var $t=a(Lt,2),O=o($t),W=o(O),le=o(W),Me=a(le,2),lt=o(Me),Pt=o(lt);lt.value=lt.__value="";var Yr=a(lt);xe(Yr,1,()=>e(V),Ae,(n,x)=>{var C=rs(),P=o(C),re={};D(()=>{h(P,e(x)),re!==(re=e(x))&&(C.value=(C.__value=e(x))??"")}),u(n,C)});var Rr=a(W,2),nr=o(Rr),fr=o(nr),ir=a(nr,2),vr=o(ir),Lr=o(vr);vr.value=vr.__value="";var Er=a(vr);xe(Er,1,()=>e(I),Ae,(n,x)=>{const C=Dt(()=>(e(we),e(i),e(x),r(()=>e(we)[e(i).docente]?.includes(e(x).materia))));var P=os(),re=o(P),Ce={};D(()=>{l(P,e(C)?"color: #6366f1; font-weight: 600;":""),h(re,`${e(C)?"‚≠ê ":""}${e(x),r(()=>e(x).materia)??""}`),Ce!==(Ce=(e(x),r(()=>e(x).materia)))&&(P.value=(P.__value=(e(x),r(()=>e(x).materia)))??"")}),u(n,P)});var Dr=a(O,2),gr=o(Dr),hr=o(gr),Br=a(hr,2),pr=o(Br);pr.value=pr.__value="";var mr=a(pr);mr.value=mr.__value="0";var zr=a(mr);xe(zr,0,()=>[1,2,3,4],Ae,(n,x)=>{var C=as(),P=o(C),re={};D(Ce=>{h(P,`${x??""} ${x===1?"Hora":"Horas"}`),re!==(re=Ce)&&(C.value=(C.__value=Ce)??"")},[()=>r(()=>x.toString())]),u(n,C)});var _r=a(gr,2),qr=o(_r),ur=a(qr,2),br=o(ur),ie=o(br);br.value=br.__value="";var Le=a(br);xe(Le,1,()=>(e(j),r(()=>[...new Set(e(j).map(n=>n.grado.toString()))])),Ae,(n,x)=>{var C=ss(),P=o(C),re={};D(Ce=>{h(P,Ce),re!==(re=e(x))&&(C.value=(C.__value=e(x))??"")},[()=>(e(x),r(()=>e(x).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),u(n,C)});var et=a(Dr,2);{var Ht=n=>{var x=ps(),C=o(x),P=o(C),re=a(C,2),Ce=o(re);xe(Ce,1,()=>e(ue),Ct=>Ct.nombre,(Ct,rt)=>{const nt=Dt(()=>(e(w),e(rt),r(()=>e(w).filter(ge=>ge.nombre===e(rt).nombre)))),ht=Dt(()=>(pe(e(nt)),r(()=>e(nt).length>0))),A=Dt(()=>(pe(e(nt)),r(()=>e(nt).some(ge=>{const Ee=Ge.find(Oe=>Oe.value===ge.motivo);return Ee&&Ee.obligaHoras}))));var tt=vs(),mt=Qt(tt);let Et;var Kt=o(mt),it=o(Kt),Ut=o(it),Zt=a(it,2);xe(Zt,5,()=>e(nt),Ae,(ge,Ee)=>{const Oe=Dt(()=>(e(Ee),r(()=>Ge.find(Wr=>Wr.value===e(Ee).motivo))));var sr=io(),eo=Qt(sr);{var Jr=Wr=>{var uo=ls(),wo=o(uo),zo=o(wo),$o=a(wo),Fo=a($o);D(()=>{Nt(uo,1,(pe(e(Oe)),r(()=>`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold border ${e(Oe).bgColor} ${e(Oe).textColor} ${e(Oe).borderColor} ${e(Oe).darkBgColor} ${e(Oe).darkTextColor} ${e(Oe).darkBorderColor}`)),"svelte-gsxx31"),h(zo,(pe(e(Oe)),r(()=>e(Oe).icon))),h($o,` ${pe(e(Oe)),r(()=>e(Oe).label)??""} `)}),U("click",Fo,()=>c(e(rt).nombre,e(Ee).motivo)),u(Wr,uo)};Z(eo,Wr=>{e(Oe)&&Wr(Jr)})}u(ge,sr)});var Tt=a(Kt,2),Vt=o(Tt);let ar;var bt=o(Vt),ot=o(bt);ot.value=ot.__value="";var _t=a(ot);_t.value=_t.__value="0";var wr=a(_t);xe(wr,0,()=>[1,2,3,4],Ae,(ge,Ee)=>{var Oe=ns(),sr=o(Oe),eo={};D(Jr=>{h(sr,Ee),eo!==(eo=Jr)&&(Oe.value=(Oe.__value=Jr)??"")},[()=>r(()=>Ee.toString())]),u(ge,Oe)});var qe;Oo(bt);var Or=a(bt,2),Yt=a(Vt,2),Gt=o(Yt),$r=o(Gt);$r.value=$r.__value="";var qt=a($r);qt.value=qt.__value="Ignorar";var Cr=a(qt);xe(Cr,1,()=>Ge,Ae,(ge,Ee)=>{const Oe=Dt(()=>(pe(e(nt)),e(Ee),r(()=>e(nt).some(Wr=>Wr.motivo===e(Ee).value))));var sr=is(),eo=o(sr),Jr={};D(()=>{sr.disabled=e(Oe),h(eo,`${e(Ee),r(()=>e(Ee).icon)??""} ${e(Ee),r(()=>e(Ee).label)??""} ${e(Oe)?"‚úì":""}`),Jr!==(Jr=(e(Ee),r(()=>e(Ee).value)))&&(sr.value=(sr.__value=(e(Ee),r(()=>e(Ee).value)))??"")}),u(ge,sr)}),Gt.value=Gt.__value="";var dr=a(Gt,2),Ur=a(Tt,2);{var Jt=ge=>{var Ee=ds(),Oe=o(Ee);D(()=>l(Oe,`color: ${pe(e(nt)),e(t),r(()=>e(nt)[0]?.observaciones?"rgb(var(--text-primary))":e(t).icon)??""};`)),U("click",Oe,()=>z(e(rt).nombre)),u(ge,Ee)};Z(Ur,ge=>{e(ht)&&ge(Jt)})}var yt=a(mt,2);{var Je=ge=>{var Ee=cs(),Oe=o(Ee);D(()=>{jo(Oe,(pe(e(nt)),r(()=>e(nt)[0]?.observaciones||""))),l(Oe,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`)}),U("input",Oe,sr=>B(e(rt).nombre,sr.currentTarget.value)),u(ge,Ee)};Z(yt,ge=>{pe(e(ht)),e(be),e(rt),pe(e(nt)),r(()=>e(ht)&&(e(be)[e(rt).nombre]||e(nt)[0]?.observaciones))&&ge(Je)})}D(ge=>{Et=Nt(mt,1,"flex flex-col sm:flex-row sm:items-center justify-between p-4 border rounded-xl transition-all duration-200 gap-4 svelte-gsxx31",null,Et,{"ring-2":e(ht),"ring-indigo-500":e(ht)}),l(mt,`background-color: ${e(t),r(()=>e(t).bg)??""}; border-color: ${pe(e(ht)),e(t),r(()=>e(ht)?"transparent":e(t).border)??""};`),l(it,`color: ${e(t),r(()=>e(t).text)??""};`),h(Ut,(e(rt),r(()=>e(rt).nombre))),ar=Nt(Vt,1,"relative w-full sm:w-32 transition-opacity duration-200 svelte-gsxx31",null,ar,{"opacity-40":!e(A)}),bt.disabled=!e(A),l(bt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),qe!==(qe=ge)&&(bt.value=(bt.__value=ge)??"",No(bt,ge)),l(Or,`color: ${e(t),r(()=>e(t).icon)??""};`),l(Gt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(dr,`color: ${e(t),r(()=>e(t).icon)??""};`)},[()=>(pe(e(nt)),e(J),e(rt),e(i),r(()=>e(nt).find(ge=>{const Ee=Ge.find(Oe=>Oe.value===ge.motivo);return Ee&&Ee.obligaHoras})?.horas||e(J)[e(rt).nombre]||e(i).horas))]),U("change",bt,ge=>T(e(rt).nombre,ge.currentTarget.value)),U("change",Gt,ge=>{$(e(rt).nombre,ge.currentTarget.value),ge.currentTarget.value=""}),u(Ct,tt)});var Pe=a(Ce,2);{var Re=Ct=>{var rt=gs();D(()=>l(rt,`color: ${e(t),r(()=>e(t).text)??""};`)),u(Ct,rt)};Z(Pe,Ct=>{e(ue),r(()=>e(ue).length===0)&&Ct(Re)})}D(()=>{l(C,`color: ${e(t),r(()=>e(t).label)??""};`),h(P,`Estudiantes del Grado ${e(i),r(()=>e(i).grado)??""}`),l(re,`border-color: ${e(t),r(()=>e(t).border)??""};`)}),u(n,x)};Z(et,n=>{e(i),r(()=>e(i).grado&&e(i).horas!=="")&&n(Ht)})}var It=a(et,2),te=o(It),Se=o(te),Ve=a(Se,2),gt=a(te,2),ft=o(gt),tr=a(ft,2),Pr=a(It,2),yr=o(Pr),Hr=a(o(yr)),Gr=o(Hr),Fr=a(er,2),kr=o(Fr);{var Mr=n=>{var x=us();u(n,x)},X=n=>{var x=bs();u(n,x)};Z(kr,n=>{e(L)?n(Mr):n(X,!1)})}var Wt=a(kr,2);{var rr=n=>{var x=xs(),C=o(x);D(()=>h(C,(e(w),r(()=>e(w).length)))),u(n,x)};Z(Wt,n=>{e(L),e(w),r(()=>!e(L)&&e(w).length>0)&&n(rr)})}var or=a(he,2);{var Tr=n=>{Na(n,{onClose:xt,get selectedDocente(){return e(i),r(()=>e(i).docente)}})};Z(or,n=>{e(Ie)&&n(Tr)})}var xr=a(or,2);{var p=n=>{Wa(n,{onClose:Xe,get initialDocente(){return e(i),r(()=>e(i).docente)}})};Z(xr,n=>{e(ce)&&n(p)})}D(()=>{l(he,`background-color: ${e(t),r(()=>e(t).bg)??""};`),l(y,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),dt(G,"src",Kr),l(Y,`color: ${e(t),r(()=>e(t).text)??""};`),l(Ue,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(Fe,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(zt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(M,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(K,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(je,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),h(jt,v()),l(Rt,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),l(le,`color: ${e(t),r(()=>e(t).label)??""};`),Me.disabled=e(R),l(Me,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),h(Pt,e(R)?"Cargando...":"Seleccione docente"),l(fr,`color: ${e(t),r(()=>e(t).label)??""};`),ir.disabled=e(S),l(ir,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),h(Lr,e(S)?"Cargando...":"Seleccione materia"),l(hr,`color: ${e(t),r(()=>e(t).label)??""};`),l(Br,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(qr,`color: ${e(t),r(()=>e(t).label)??""};`),ur.disabled=e(s),l(ur,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),h(ie,e(s)?"Cargando...":"Seleccione grado"),l(Se,`color: ${e(t),r(()=>e(t).label)??""};`),l(Ve,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(ft,`color: ${e(t),r(()=>e(t).label)??""};`),l(tr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(Pr,`border-color: ${e(t),r(()=>e(t).border)??""};`),l(yr,`color: ${e(t),r(()=>e(t).label)??""};`),h(Gr,(e(w),r(()=>e(w).length))),Fr.disabled=(e(L),e(w),e(i),r(()=>e(L)||e(w).length===0||!e(i).docente||!e(i).materia))}),U("click",Ue,Be),U("click",Fe,Ze),U("click",zt,Qe),U("click",M,Ke),U("click",K,function(...n){oe()?.apply(this,n)}),U("click",je,st),at(Me,()=>e(i).docente,n=>(ae(i,e(i).docente=n),_e(()=>{e(R),e(t),e(V),e(S),e(I),e(we),e(s),e(j)}))),at(ir,()=>e(i).materia,n=>(ae(i,e(i).materia=n),_e(()=>{e(R),e(t),e(V),e(S),e(I),e(we),e(s),e(j)}))),at(Br,()=>e(i).horas,n=>(ae(i,e(i).horas=n),_e(()=>{e(R),e(t),e(V),e(S),e(I),e(we),e(s),e(j)}))),at(ur,()=>e(i).grado,n=>(ae(i,e(i).grado=n),_e(()=>{e(R),e(t),e(V),e(S),e(I),e(we),e(s),e(j)}))),cr(Ve,()=>e(i).fecha,n=>(ae(i,e(i).fecha=n),_e(()=>{e(R),e(t),e(V),e(S),e(I),e(we),e(s),e(j)}))),cr(tr,()=>e(i).observaciones,n=>(ae(i,e(i).observaciones=n),_e(()=>{e(R),e(t),e(V),e(S),e(I),e(we),e(s),e(j)}))),U("submit",$t,F),U("click",Fr,F),u(N,ne),Ir(),b()}var ms=_('<div class="flex-1 flex items-center justify-center"><div class="text-center"><div class="animate-spin w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full mx-auto mb-4"></div> <p>Cargando datos...</p></div></div>'),_s=_('<span class="ml-2 px-2 py-1 text-xs bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full">Activos</span>'),ys=_("<option> </option>"),ks=_("<option> </option>"),ws=_('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">Este docente no tiene registros de materias</p>'),$s=_("<option> </option>"),Cs=_('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">No hay grados para los filtros seleccionados</p>'),As=_('<div class="flex-1 flex items-center justify-center"><div class="text-center py-12 px-4"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm sm:text-base">No se encontraron registros con los filtros seleccionados</p></div></div>'),Ss=_('<tr class="border-b transition-colors hover:bg-black/5 dark:hover:bg-white/5 text-xs"><td class="p-2"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 text-center"> </td><td class="p-2 text-center"> </td><td class="p-2"><div class="flex items-center gap-2 max-w-[300px]"><span><span> </span></span> <span class="truncate"> </span></div></td><td class="p-2"><span class="truncate block max-w-xs text-xs"> </span></td></tr>'),Is=_('<div><p class="text-xs font-medium mb-1">Observaci√≥n:</p> <p class="text-xs"> </p></div>'),Es=_('<div class="border rounded-lg p-3 transition-colors hover:bg-black/5 dark:hover:bg-white/5"><div class="flex justify-between items-center mb-2"><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><span><span> </span></span> <p class="text-xs opacity-75"> </p></div></div></div> <div class="flex gap-2 text-[10px] mb-2"><div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="truncate"> </span></div> <div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <span class="truncate"> </span></div></div> <div class="mb-2"><p class="text-xs font-medium mb-1">Anotaci√≥n:</p> <p class="text-xs"> </p></div> <!></div>'),Ds=_('<div class="hidden lg:flex flex-1 flex-col overflow-hidden min-h-0"><div class="flex-1 overflow-auto min-w-full border rounded-lg"><table class="w-full border-collapse text-sm min-w-[900px]"><thead class="sticky top-0 z-10 border-b"><tr><th class="text-left p-2 font-semibold whitespace-nowrap">Fecha</th><th class="text-left p-2 font-semibold whitespace-nowrap">Docente</th><th class="text-left p-2 font-semibold whitespace-nowrap">Materia</th><th class="text-center p-2 font-semibold whitespace-nowrap">Grado</th><th class="text-center p-2 font-semibold whitespace-nowrap">Horas</th><th class="text-left p-2 font-semibold whitespace-nowrap">Anotaci√≥n</th><th class="text-left p-2 font-semibold whitespace-nowrap">Observaci√≥n</th></tr></thead><tbody></tbody></table></div></div> <div class="flex-1 overflow-y-auto lg:hidden px-1"><div class="space-y-2"></div></div>',1),Bs=_('<div class="p-3 sm:p-4 border-b"><div class="flex items-center justify-between mb-2 sm:mb-3"><h3 class="text-lg font-semibold">Filtros <!></h3> <button class="text-sm px-3 py-1 rounded-lg border transition-colors hover:bg-black/5 dark:hover:bg-white/5">Limpiar filtros</button></div> <div class="mb-3 p-1.5 sm:p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg"><p class="text-[10px] sm:text-xs font-medium mb-1.5">R√°pido: Fechas</p> <div class="flex items-center mb-2"><input id="checkFiltrarFecha" type="checkbox" class="w-4 h-4 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 dark:bg-zinc-700"/> <label for="checkFiltrarFecha" class="ml-2 text-xs font-medium">Activar filtro por fechas</label></div> <div class="flex flex-wrap gap-1 sm:gap-2"><button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Hoy</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 7 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 30 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Mes actual</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimo trimestre</button></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"><div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroDocente" class="block text-xs sm:text-sm font-medium">Docente</label> <select id="filtroDocente" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option>Todos los docentes</option><!></select></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroMateria" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroMateria" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroGrado" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroGrado" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroAnotacion" class="block text-xs sm:text-sm font-medium">B√∫squeda en anotaci√≥n</label> <input id="filtroAnotacion" type="text" placeholder="Buscar en anotaciones..." class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"/></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaInicio" class="block text-xs sm:text-sm font-medium">Fecha desde</label> <input id="filtroFechaInicio" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaFin" class="block text-xs sm:text-sm font-medium">Fecha hasta</label> <input id="filtroFechaFin" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div></div></div></div> <div class="flex-1 flex flex-col p-2 sm:p-4 min-h-0"><div class="mb-4 px-0 sm:px-3"><p class="text-sm">Se encontraron <span class="font-bold text-indigo-500"> </span> registros</p></div> <!></div>',1),zs=_('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4" role="button" tabindex="0" aria-label="Cerrar ventana"><div class="w-full max-w-7xl max-h-[95vh] bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl overflow-hidden flex flex-col"><div class="flex items-center justify-between p-3 sm:p-4 border-b"><div class="flex items-center gap-3"><img alt="EIE Logo" class="h-8 w-auto hidden sm:block"/> <div><h2 class="text-lg sm:text-xl font-bold">Anotaciones de Clase</h2> <p class="text-xs hidden sm:block">Filtra y consulta los registros</p></div></div> <div class="flex items-center gap-3"><button class="inline-flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Exportar CSV</button> <button class="p-2 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5" aria-label="Cerrar"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div> <div class="flex-1 overflow-hidden flex flex-col min-h-0"><!></div></div></div>');function Fs(N,k){Sr(k,!1);const v=m(),fe=m(),b=m(),I=m(),t=m();let ue=kt(k,"onClose",8),Te=kt(k,"selectedDocente",8,""),E=m([]),oe=[],V=[],q=[],j=m(!1),R=m(!1),S=m([]),s=m({docente:Te()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",anotacion:""});const i=()=>{const c=new Date,$=new Date(c.getFullYear(),c.getMonth()-1,c.getDate()),B=z=>{const T=z.getFullYear(),F=String(z.getMonth()+1).padStart(2,"0"),ne=String(z.getDate()).padStart(2,"0");return`${T}-${F}-${ne}`};ae(s,e(s).fechaInicio=B($)),_e(()=>{e(t),e(L),e(v),e(b)}),ae(s,e(s).fechaFin=B(c)),_e(()=>{e(t),e(L),e(v),e(b)})},w=c=>{const $=new Date;let B;switch(c){case"hoy":B=new Date($);break;case"semana":B=new Date($),B.setDate($.getDate()-7);break;case"mes":B=new Date($),B.setDate($.getDate()-30);break;case"mes_actual":B=new Date($.getFullYear(),$.getMonth(),1);break;case"trimestre":B=new Date($),B.setDate($.getDate()-90);break;default:i();return}const z=T=>{const F=T.getFullYear(),ne=String(T.getMonth()+1).padStart(2,"0"),he=String(T.getDate()).padStart(2,"0");return`${F}-${ne}-${he}`};ae(s,e(s).fechaInicio=z(B)),_e(()=>{e(t),e(L),e(v),e(b)}),ae(s,e(s).fechaFin=z($)),_e(()=>{e(t),e(L),e(v),e(b)}),d(R,!0)},J=[{value:"Estrategias de Ense√±anza-Aprendizaje",icon:"üìö",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},{value:"Evaluaci√≥n y Verificaci√≥n de Saberes",icon:"üìù",color:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200"},{value:"Enfoque STEM+ y Contexto Rural",icon:"üî¨",color:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200"},{value:"Pr√°cticas de Laboratorio y Mantenimiento",icon:"üîß",color:"bg-rose-100 text-rose-800 dark:bg-rose-900 dark:text-rose-200"},{value:"Ciudadan√≠a Digital y √âtica",icon:"üíª",color:"bg-violet-100 text-violet-800 dark:bg-violet-900 dark:text-violet-200"},{value:"Pensamiento Computacional y Programaci√≥n",icon:"üíª",color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"},{value:"Recursos Anal√≥gicos y Contingencias",icon:"üìã",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},{value:"Ofim√°tica y Competencias Productivas",icon:"üñ•Ô∏è",color:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200"},{value:"Gesti√≥n Administrativa y Proyectos Transversales",icon:"üìä",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}],be=c=>{for(const $ of J)if(c.includes($.value))return $;return{icon:"üìù",color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};let L=m([]),Ie=m([]),ce=m([]),Ze=m([]);const xt=async()=>{d(j,!0);try{const[c,$,B,z]=await Promise.all([Bo({spreadsheetId:no,worksheetTitle:ko}),Zr(),Qr(),Xr()]),T=y=>{if(!y?.records||!Array.isArray(y.records))return[];const $e=y.records[0]?.values||[];return y.records.slice(1).map(G=>{const Y=G.values||[];return{timestamp:Y[0]||"",fecha:Y[1]||"",docente:Y[2]||"",materia:Y[3]||"",grado:Y[4]||"",horas:Y[5]||"",anotacion:Y[6]||"",observacion:Y[7]||""}}).filter(G=>G.docente&&G.fecha)},F=y=>Array.isArray(y)?y:y?.data&&Array.isArray(y.data)?y.data:y?.rows&&Array.isArray(y.rows)?y.rows:y?.values&&Array.isArray(y.values)?y.values:y?.anotaciones&&Array.isArray(y.anotaciones)?y.anotaciones:[];d(E,T(c)),oe=F($),V=F(B),q=F(z),d(L,e(E).length>0?[...new Set(e(E).map(y=>y.docente).filter(Boolean))].sort():[]),d(Ie,e(E).length>0?[...new Set(e(E).map(y=>y.materia).filter(Boolean))].sort():[]);const ne=[...new Set(q.map(y=>(typeof y=="string"?y:y.grado||"").toString()).filter(Boolean))],he=e(E).length>0?e(E).map(y=>y.grado).filter(Boolean):[];d(ce,[...new Set([...ne,...he])].sort((y,$e)=>{const ve=parseInt(y),G=parseInt($e);return!isNaN(ve)&&!isNaN(G)?ve-G:y.localeCompare($e)})),d(Ze,e(E).length>0?[...new Set(e(E).map(y=>y.anotacion).filter(Boolean))].sort():[]),i(),console.log("Datos cargados:",{anotaciones:e(E).length,docentes:oe.length,docentesUnicos:e(L).length,materiasUnicas:e(Ie).length,gradosUnicos:e(ce).length,anotacionesUnicas:e(Ze).length})}catch(c){console.error("Error cargando datos:",c),await Ot.fire({icon:"error",title:"Error",text:"No se pudieron cargar los datos de anotaciones",confirmButtonColor:"#ef4444"})}finally{d(j,!1)}},Qe=()=>{d(s,{docente:Te()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",anotacion:""}),i(),d(R,!1)},Xe=()=>{if(e(S).length===0){Ot.fire({icon:"warning",title:"Sin datos",text:"No hay datos para exportar",confirmButtonColor:"#f59e0b"});return}const $=[["Fecha","Docente","Materia","Grado","Horas","Anotaci√≥n","Observaci√≥n"].join(","),...e(S).map(F=>[F.fecha,`"${F.docente}"`,`"${F.materia}"`,F.grado,F.horas,`"${F.anotacion}"`,`"${F.observacion}"`].join(","))].join(`
`),B=new Blob([$],{type:"text/csv;charset=utf-8;"}),z=document.createElement("a"),T=URL.createObjectURL(B);z.setAttribute("href",T),z.setAttribute("download",`anotaciones_${new Date().toISOString().split("T")[0]}.csv`),z.style.visibility="hidden",document.body.appendChild(z),z.click(),document.body.removeChild(z)},He=c=>{try{const[$,B,z]=c.split("-");return $&&B&&z?`${z}/${B}/${$}`:c}catch{return c}},g=(c,$=50)=>c.length<=$?c:c.substring(0,$)+"...";Ar(()=>{xt()}),ye(()=>(e(s),e(E),e(Ie)),()=>{d(v,e(s).docente?[...new Set(e(E).filter(c=>c.docente===e(s).docente).map(c=>c.materia).filter(Boolean))].sort():e(Ie))}),ye(()=>(e(s),e(E),e(ce)),()=>{d(fe,e(s).docente?[...new Set(e(E).filter(c=>c.docente===e(s).docente).map(c=>c.grado).filter(Boolean))].sort((c,$)=>{const B=parseInt(c),z=parseInt($);return!isNaN(B)&&!isNaN(z)?B-z:c.localeCompare($)}):e(ce))}),ye(()=>(e(s),e(E),e(fe)),()=>{d(b,e(s).materia?[...new Set(e(E).filter(c=>c.materia===e(s).materia).map(c=>c.grado).filter(Boolean))].sort((c,$)=>{const B=parseInt(c),z=parseInt($);return!isNaN(B)&&!isNaN(z)?B-z:c.localeCompare($)}):e(fe))}),ye(()=>(e(s),e(E),e(Ze)),()=>{d(I,e(s).docente||e(s).materia||e(s).grado?[...new Set(e(E).filter(c=>!(e(s).docente&&c.docente!==e(s).docente||e(s).materia&&c.materia!==e(s).materia||e(s).grado&&c.grado!==e(s).grado)).map(c=>c.anotacion).filter(Boolean))].sort():e(Ze))}),ye(()=>{},()=>{d(t,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),ye(()=>(e(E),e(s),e(R)),()=>{d(S,e(E).filter(c=>{if(e(s).docente&&c.docente!==e(s).docente||e(s).materia&&c.materia!==e(s).materia||e(s).grado&&c.grado!==e(s).grado||e(s).anotacion&&!c.anotacion.toLowerCase().includes(e(s).anotacion.toLowerCase()))return!1;if(e(R)){const $=c.fecha;if(e(s).fechaInicio&&$<e(s).fechaInicio||e(s).fechaFin&&$>e(s).fechaFin)return!1}return!0}))}),ye(()=>(e(R),e(s)),()=>{e(R)&&(!e(s).fechaInicio||!e(s).fechaFin)&&i()}),Nr(),jr();var H=zs(),de=o(H),ke=o(de),ee=o(ke),Ne=o(ee),De=a(Ne,2),se=o(De),we=a(se,2),Ye=a(ee,2),We=o(Ye),Be=a(We,2),Ke=a(ke,2),Ge=o(Ke);{var st=c=>{var $=ms(),B=o($),z=a(o(B),2);D(()=>l(z,`color: ${e(t),r(()=>e(t).text)??""};`)),u(c,$)},ct=c=>{var $=Bs(),B=Qt($),z=o(B),T=o(z),F=a(o(T));{var ne=ie=>{var Le=_s();u(ie,Le)};Z(F,ie=>{e(s),r(()=>e(s).docente||e(s).materia||e(s).grado||e(s).anotacion||e(s).fechaInicio||e(s).fechaFin)&&ie(ne)})}var he=a(T,2),y=a(z,2),$e=o(y),ve=a($e,2),G=o(ve),Y=a(G,2),ze=a(ve,2),Ue=o(ze),Fe=a(Ue,2),At=a(Fe,2),Bt=a(At,2),zt=a(Bt,2),lr=a(y,2),f=o(lr),M=o(f),K=o(M),Q=a(K,2),je=o(Q);je.value=je.__value="";var ut=a(je);xe(ut,1,()=>e(L),Ae,(ie,Le)=>{var et=ys(),Ht=o(et),It={};D(()=>{h(Ht,e(Le)),It!==(It=e(Le))&&(et.value=(et.__value=e(Le))??"")}),u(ie,et)});var Ft=a(M,2),me=o(Ft),Xt=o(me),wt=a(me,2),jt=o(wt),er=o(jt);jt.value=jt.__value="";var Rt=a(jt);xe(Rt,1,()=>e(v),Ae,(ie,Le)=>{var et=ks(),Ht=o(et),It={};D(()=>{h(Ht,e(Le)),It!==(It=e(Le))&&(et.value=(et.__value=e(Le))??"")}),u(ie,et)});var vt=a(wt,2);{var St=ie=>{var Le=ws();u(ie,Le)};Z(vt,ie=>{e(s),e(v),r(()=>e(s).docente&&e(v).length===0)&&ie(St)})}var Mt=a(f,2),Lt=o(Mt),$t=o(Lt),O=o($t),W=a($t,2),le=o(W),Me=o(le);le.value=le.__value="";var lt=a(le);xe(lt,1,()=>e(b),Ae,(ie,Le)=>{var et=$s(),Ht=o(et),It={};D(()=>{h(Ht,e(Le)),It!==(It=e(Le))&&(et.value=(et.__value=e(Le))??"")}),u(ie,et)});var Pt=a(W,2);{var Yr=ie=>{var Le=Cs();u(ie,Le)};Z(Pt,ie=>{e(s),e(b),r(()=>(e(s).docente||e(s).materia)&&e(b).length===0)&&ie(Yr)})}var Rr=a(Lt,2),nr=o(Rr),fr=a(nr,2),ir=a(Mt,2),vr=o(ir),Lr=o(vr),Er=a(Lr,2),Dr=a(vr,2),gr=o(Dr),hr=a(gr,2),Br=a(B,2),pr=o(Br),mr=o(pr),zr=a(o(mr)),_r=o(zr),qr=a(pr,2);{var ur=ie=>{var Le=As(),et=o(Le),Ht=o(et),It=a(Ht,2);D(()=>{l(Ht,`color: ${e(t),r(()=>e(t).icon)??""};`),l(It,`color: ${e(t),r(()=>e(t).text)??""};`)}),u(ie,Le)},br=ie=>{var Le=Ds(),et=Qt(Le),Ht=o(et),It=o(Ht),te=o(It),Se=o(te),Ve=o(Se),gt=a(Ve),ft=a(gt),tr=a(ft),Pr=a(tr),yr=a(Pr),Hr=a(yr),Gr=a(te);xe(Gr,5,()=>e(S),Ae,(Mr,X)=>{const Wt=Dt(()=>(e(X),r(()=>be(e(X).anotacion))));var rr=Ss(),or=o(rr),Tr=o(or),xr=a(or),p=o(xr),n=a(xr),x=o(n),C=a(n),P=o(C),re=a(C),Ce=o(re),Pe=a(re),Re=o(Pe),Ct=o(Re),rt=o(Ct),nt=o(rt),ht=a(Ct,2),A=o(ht),tt=a(Pe),mt=o(tt),Et=o(mt);D((Kt,it)=>{l(rr,`border-color: ${e(t),r(()=>e(t).border)??""};`),l(or,`color: ${e(t),r(()=>e(t).text)??""};`),h(Tr,Kt),l(xr,`color: ${e(t),r(()=>e(t).text)??""};`),dt(xr,"title",(e(X),r(()=>e(X).docente))),h(p,(e(X),r(()=>e(X).docente))),l(n,`color: ${e(t),r(()=>e(t).text)??""};`),dt(n,"title",(e(X),r(()=>e(X).materia))),h(x,(e(X),r(()=>e(X).materia))),l(C,`color: ${e(t),r(()=>e(t).text)??""};`),h(P,(e(X),r(()=>e(X).grado))),l(re,`color: ${e(t),r(()=>e(t).text)??""};`),h(Ce,(e(X),r(()=>e(X).horas))),l(Pe,`color: ${e(t),r(()=>e(t).text)??""};`),Nt(Ct,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${pe(e(Wt)),r(()=>e(Wt).color)??""} flex-shrink-0`),h(nt,(pe(e(Wt)),r(()=>e(Wt).icon))),dt(ht,"title",(e(X),r(()=>e(X).anotacion))),h(A,it),l(tt,`color: ${e(t),r(()=>e(t).text)??""};`),h(Et,(e(X),r(()=>e(X).observacion||"-")))},[()=>(e(X),r(()=>He(e(X).fecha))),()=>(e(X),r(()=>g(e(X).anotacion,100)))]),u(Mr,rr)});var Fr=a(et,2),kr=o(Fr);xe(kr,5,()=>e(S),Ae,(Mr,X)=>{const Wt=Dt(()=>(e(X),r(()=>be(e(X).anotacion))));var rr=Es(),or=o(rr),Tr=o(or),xr=o(Tr),p=o(xr),n=o(p),x=o(n),C=a(p,2),P=o(C),re=a(or,2),Ce=o(re),Pe=a(o(Ce),2),Re=o(Pe),Ct=a(Ce,2),rt=a(o(Ct),2),nt=o(rt),ht=a(re,2),A=o(ht),tt=a(A,2),mt=o(tt),Et=a(ht,2);{var Kt=it=>{var Ut=Is(),Zt=o(Ut),Tt=a(Zt,2),Vt=o(Tt);D(ar=>{l(Zt,`color: ${e(t),r(()=>e(t).label)??""};`),l(Tt,`color: ${e(t),r(()=>e(t).text)??""};`),dt(Tt,"title",(e(X),r(()=>e(X).observacion))),h(Vt,ar)},[()=>(e(X),r(()=>g(e(X).observacion,150)))]),u(it,Ut)};Z(Et,it=>{e(X),r(()=>e(X).observacion)&&it(Kt)})}D((it,Ut)=>{l(rr,`border-color: ${e(t),r(()=>e(t).cardBorder)??""}; background-color: ${e(t),r(()=>e(t).cardBg)??""};`),Nt(p,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium ${pe(e(Wt)),r(()=>e(Wt).color)??""} flex-shrink-0`),h(x,(pe(e(Wt)),r(()=>e(Wt).icon))),l(C,`color: ${e(t),r(()=>e(t).label)??""};`),h(P,`${e(X),r(()=>e(X).grado)??""} ‚Ä¢ ${it??""} ‚Ä¢ ${e(X),r(()=>e(X).horas)??""}h`),l(re,`color: ${e(t),r(()=>e(t).text)??""};`),h(Re,(e(X),r(()=>e(X).docente))),dt(rt,"title",(e(X),r(()=>e(X).materia))),h(nt,(e(X),r(()=>e(X).materia))),l(A,`color: ${e(t),r(()=>e(t).label)??""};`),l(tt,`color: ${e(t),r(()=>e(t).text)??""};`),dt(tt,"title",(e(X),r(()=>e(X).anotacion))),h(mt,Ut)},[()=>(e(X),r(()=>He(e(X).fecha))),()=>(e(X),r(()=>g(e(X).anotacion,150)))]),u(Mr,rr)}),D(()=>{l(Ht,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),l(te,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""};`),l(Ve,`color: ${e(t),r(()=>e(t).text)??""};`),l(gt,`color: ${e(t),r(()=>e(t).text)??""};`),l(ft,`color: ${e(t),r(()=>e(t).text)??""};`),l(tr,`color: ${e(t),r(()=>e(t).text)??""};`),l(Pr,`color: ${e(t),r(()=>e(t).text)??""};`),l(yr,`color: ${e(t),r(()=>e(t).text)??""};`),l(Hr,`color: ${e(t),r(()=>e(t).text)??""};`)}),u(ie,Le)};Z(qr,ie=>{e(S),r(()=>e(S).length===0)?ie(ur):ie(br,!1)})}D(()=>{l(B,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),l(T,`color: ${e(t),r(()=>e(t).text)??""};`),l(he,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l($e,`color: ${e(t),r(()=>e(t).text)??""};`),l(Y,`color: ${e(t),r(()=>e(t).text)??""};`),l(Ue,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(Fe,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(At,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(Bt,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(zt,`border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(K,`color: ${e(t),r(()=>e(t).label)??""};`),l(Q,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(me,`color: ${e(t),r(()=>e(t).label)??""};`),h(Xt,`Materia ${e(s),r(()=>e(s).docente?"(del docente)":"")??""}`),l(wt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),h(er,(e(s),r(()=>e(s).docente?"Todas las materias del docente":"Todas las materias"))),l($t,`color: ${e(t),r(()=>e(t).label)??""};`),h(O,`Grado ${e(s),r(()=>e(s).docente||e(s).materia?"(filtrado)":"")??""}`),l(W,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),h(Me,(e(s),r(()=>e(s).docente||e(s).materia?"Todos los grados filtrados":"Todos los grados"))),l(nr,`color: ${e(t),r(()=>e(t).label)??""};`),l(fr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(Lr,`color: ${e(t),r(()=>e(t).label)??""};`),Er.disabled=!e(R),l(Er,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(gr,`color: ${e(t),r(()=>e(t).label)??""};`),hr.disabled=!e(R),l(hr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(mr,`color: ${e(t),r(()=>e(t).label)??""};`),h(_r,(e(S),r(()=>e(S).length)))}),U("click",he,Qe),_o(G,()=>e(R),ie=>d(R,ie)),U("click",Ue,()=>w("hoy")),U("click",Fe,()=>w("semana")),U("click",At,()=>w("mes")),U("click",Bt,()=>w("mes_actual")),U("click",zt,()=>w("trimestre")),at(Q,()=>e(s).docente,ie=>(ae(s,e(s).docente=ie),_e(()=>{e(t),e(L),e(v),e(b)}))),at(wt,()=>e(s).materia,ie=>(ae(s,e(s).materia=ie),_e(()=>{e(t),e(L),e(v),e(b)}))),at(W,()=>e(s).grado,ie=>(ae(s,e(s).grado=ie),_e(()=>{e(t),e(L),e(v),e(b)}))),cr(fr,()=>e(s).anotacion,ie=>(ae(s,e(s).anotacion=ie),_e(()=>{e(t),e(L),e(v),e(b)}))),cr(Er,()=>e(s).fechaInicio,ie=>(ae(s,e(s).fechaInicio=ie),_e(()=>{e(t),e(L),e(v),e(b)}))),cr(hr,()=>e(s).fechaFin,ie=>(ae(s,e(s).fechaFin=ie),_e(()=>{e(t),e(L),e(v),e(b)}))),u(c,$)};Z(Ge,c=>{e(j)?c(st):c(ct,!1)})}D(()=>{l(de,`background-color: ${e(t),r(()=>e(t).cardBg)??""};`),l(ke,`border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),dt(Ne,"src",Kr),l(se,`color: ${e(t),r(()=>e(t).text)??""};`),l(we,`color: ${e(t),r(()=>e(t).label)??""};`),We.disabled=(e(S),r(()=>e(S).length===0)),l(Be,`color: ${e(t),r(()=>e(t).text)??""};`)}),U("click",We,Xe),U("click",Be,function(...c){ue()?.apply(this,c)}),U("click",H,go(function(...c){ue()?.apply(this,c)})),U("keydown",H,c=>{(c.key==="Enter"||c.key===" ")&&ue()()}),u(N,H),Ir()}var Ms=_("<option> </option>"),Ts=_("<option> </option>"),Os=_("<option> </option>"),Ns=pt('<svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Cargando...',1),js=pt('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> Aplicar Filtros',1),Rs=_('<div class="text-sm opacity-75"> </div>'),Ls=_('<div class="flex items-center justify-center py-12"><!></div>'),Ps=_('<div class="text-center py-12"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v2a2 2 0 002 2h6a2 2 0 002-2v-2M9 17H5a2 2 0 01-2-2v-6a2 2 0 012-2h4M9 7V5a2 2 0 012-2h6a2 2 0 012 2v2M9 7h10a2 2 0 012 2v6a2 2 0 01-2 2H9M9 7V17m0 0h10"></path></svg> <p class="text-lg font-medium mb-2">No hay datos disponibles</p> <p class="text-sm"> </p></div>'),Hs=_('<tr class="border-t transition-colors hover:bg-gray-50 dark:hover:bg-gray-800"><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"><div class="truncate"> </div></td></tr>'),Gs=_('<tr class="border-t-2 font-bold bg-gray-100 dark:bg-gray-800"><td class="px-4 py-3 text-sm font-bold">TOTAL</td><td class="px-4 py-3 text-sm font-bold text-center"> </td><td class="px-4 py-3 text-sm font-bold text-center"> </td></tr>'),Us=_('<div class="overflow-x-auto rounded-lg border"><table class="w-full"><thead><tr><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Fecha</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Horas</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Anotaci√≥n</th></tr></thead><tbody><!><!></tbody></table></div>'),Vs=_('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-2xl" role="document"><div class="flex items-center justify-between p-6 border-b"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v2a2 2 0 002 2h6a2 2 0 002-2v-2M9 17H5a2 2 0 01-2-2v-6a2 2 0 012-2h4M9 7V5a2 2 0 012-2h6a2 2 0 012 2v2M9 7h10a2 2 0 012 2v6a2 2 0 01-2 2H9M9 7V17m0 0h10"></path></svg></div> <div><h2 id="modal-title" class="text-xl font-bold">Generador de Reportes PDF</h2> <p class="text-sm opacity-75">Filtre y genere reportes de anotaciones</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar ventana de reportes" title="Cerrar"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 140px);"><div class="mb-6 p-4 rounded-xl border"><h3 class="text-lg font-semibold mb-4">Filtros</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="space-y-2"><label for="docente-filter" class="block text-sm font-medium">Docente</label> <select id="docente-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los docentes</option><!></select></div> <div class="space-y-2"><label for="materia-filter" class="block text-sm font-medium">Asignatura</label> <select id="materia-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todas las asignaturas</option><!></select></div> <div class="space-y-2"><label for="grado-filter" class="block text-sm font-medium">Grado</label> <select id="grado-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los grados</option><!></select></div></div> <div class="flex gap-3 mt-4"><button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2"><!></button> <button class="px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> Limpiar</button> <button class="ml-auto px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Generar PDF</button></div></div> <div class="mb-4"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold"> </h3> <!></div></div> <!></div></div></div>');function Ys(N,k){Sr(k,!1);const v=m(),fe=m(),b=m();let I=null,t=null,ue=kt(k,"onClose",8),Te=kt(k,"initialDocente",8,""),E=m([]),oe=m([]),V=m([]),q=[],j=m([]),R=m(!1);const S=async()=>{if(!I||!t){const[f,M]=await Promise.all([ao(()=>import("./pdf-CBBHH09D.js").then(K=>K.j),[]),ao(()=>import("./pdf-CBBHH09D.js").then(K=>K.b),[])]);I=f.default,t=M.default}};let s=m(JSON.parse(localStorage.getItem("docenteMaterias")||"{}")),i=m(""),w=m(""),J=m("");Ar(()=>{Te()&&d(i,Te())}),Ar(async()=>{console.log("üöÄ ReportGenerator montado"),await be()});const be=async()=>{try{const[f,M,K]=await Promise.all([Zr(),Qr(),Xr()]);d(E,f),d(oe,M),d(V,K),d(s,JSON.parse(localStorage.getItem("docenteMaterias")||"{}"))}catch(f){console.error("Error cargando datos iniciales:",f)}},L=async()=>{d(R,!0);try{const f={spreadsheetId:no,worksheetTitle:ko};e(i)&&(f.docente=e(i)),e(w)&&(f.materia=e(w)),e(J)&&(f.grado=e(J)),console.log("üîç Enviando payload a getAnotador:",f);const M=await Bo(f);console.log("üìä Respuesta de getAnotador:",M);let K=M;if(M&&typeof M=="object"&&(M.data?K=M.data:M.records?K=M.records:Array.isArray(M)&&(K=M)),q=Array.isArray(K)?K:[],console.log("‚úÖ Datos procesados:",q.length,"registros"),console.log("üîç Keys del primer registro:",q[0]?Object.keys(q[0]):"No hay registros"),q.length>0&&q[0].values){console.log("üîÑ Transformando datos desde formato .values");const Q=["Marca Temporal","Fecha","Docente","Asignatura","Grado","Horas","Anotaci√≥n"];q=q.map(je=>{const ut={"Marca Temporal":"",Fecha:"",Docente:"",Asignatura:"",Grado:"",Horas:"",Anotaci√≥n:""};return Q.forEach((Ft,me)=>{ut[Ft]=je.values?.[me]||""}),ut}),console.log("üìä Datos transformados:",q.length,"registros")}Ie()}catch(f){if(console.error("‚ùå Error cargando datos del anotador:",f),f instanceof Error&&console.error("üìã Error details:",f.message),f&&typeof f=="object"&&"response"in f){const M=f.response;M&&(console.error("üåê Response status:",M.status),console.error("üåê Response data:",M.data))}q=[],d(j,[])}finally{d(R,!1)}},Ie=()=>{if(console.log("üîç Aplicando filtros locales:",{totalRegistros:q.length,isArray:Array.isArray(q),docente:e(i),materia:e(w),grado:e(J)}),!Array.isArray(q)){console.error("‚ùå anotadorData no es un array:",typeof q,q),d(j,[]);return}d(j,q.filter(f=>{if(!f||typeof f!="object")return console.log("‚ö†Ô∏è Registro inv√°lido:",f),!1;const M=!e(i)||f.Docente===e(i),K=!e(w)||f.Asignatura===e(w),Q=!e(J)||f.Grado===e(J);return!M&&e(i)&&console.log("‚ùå No coincide docente:",{expected:e(i),actual:f.Docente}),!K&&e(w)&&console.log("‚ùå No coincide materia:",{expected:e(w),actual:f.Asignatura}),!Q&&e(J)&&console.log("‚ùå No coincide grado:",{expected:e(J),actual:f.Grado}),M&&K&&Q})),console.log("‚úÖ Registros filtrados:",e(j).length)},ce=()=>{L()},Ze=()=>{d(i,""),d(w,""),d(J,""),q=[],d(j,[])},xt=async()=>{if(await S(),e(j).length===0){alert("No hay datos para generar el PDF");return}const f=new I({format:"letter"}),M="Anotador de Clases",K=[];e(i)&&K.push(`Docente: ${e(i)}`),e(w)&&K.push(`Asignatura: ${e(w)}`),e(J)&&K.push(`Grado: ${e(J)}`);let Q=20;try{console.log("üñºÔ∏è Intentando agregar logo EIE al PDF..."),f.setTextColor(99,102,241),f.setFontSize(28),f.setFont("helvetica","bold"),f.text("EIE",f.internal.pageSize.getWidth()/2,Q,{align:"center"}),Q+=15,console.log("‚úÖ Logo EIE (texto) agregado correctamente")}catch(me){console.log("‚ùå Error con logo EIE, usando fallback:",me),f.setTextColor(99,102,241),f.setFontSize(24),f.text("EIE",f.internal.pageSize.getWidth()/2,Q,{align:"center"}),Q+=15}f.setTextColor(0,0,0),f.setFontSize(18),f.setFont("helvetica","bold"),f.text(M,f.internal.pageSize.getWidth()/2,Q,{align:"center"}),Q+=12,f.setTextColor(0,0,0),f.setFontSize(12),f.setFont("helvetica","normal"),f.text("Instituci√≥n Educativa Instituto Gu√°tica",f.internal.pageSize.getWidth()/2,Q,{align:"center"}),Q+=10,f.setTextColor(60,60,60),f.setFontSize(10),f.setFont("helvetica","normal"),f.text(`Fecha de generaci√≥n: ${new Date().toLocaleDateString()}`,f.internal.pageSize.getWidth()/2,Q,{align:"center"}),Q+=15,f.setDrawColor(200,200,200),f.setLineWidth(1),f.line(20,Q,f.internal.pageSize.getWidth()-20,Q),Q+=15,K.length>0&&(f.setTextColor(80,80,80),f.setFontSize(9),f.setFont("helvetica","normal"),K.forEach(me=>{f.text(me,20,Q,{align:"left"}),Q+=6}),Q+=10);const je=e(j).map(me=>[me.Fecha||"",me.Horas||"",me.Anotaci√≥n||""]),ut=["TOTAL",e(v).toFixed(1),""];je.push(ut),console.log("üìä Generando PDF con:",{totalHoras:e(v),registros:e(j).length,filasTabla:je.length}),t(f,{head:[["Fecha","Horas","Anotaci√≥n"]],body:je,startY:Q,styles:{fontSize:8,cellPadding:2,cellWidth:"wrap",valign:"top",overflow:"linebreak"},headStyles:{fillColor:[99,102,241],textColor:255,fontSize:9,fontStyle:"bold",halign:"center"},bodyStyles:{fillColor:[255,255,255],textColor:[0,0,0]},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:{0:{cellWidth:60,minCellHeight:8,halign:"center"},1:{cellWidth:30,minCellHeight:8,halign:"center"},2:{cellWidth:"auto",minCellHeight:12}},margin:{top:15,right:15,bottom:15,left:15},tableWidth:"auto",didParseCell:me=>{me.row.index===je.length-1&&(me.cell.styles.fillColor=[240,240,240],me.cell.styles.fontStyle="bold",me.cell.styles.textColor=[0,0,0],me.column.index===0&&(me.cell.styles.halign="center",me.cell.styles.fillColor=[230,230,230]),me.column.index===1&&(me.cell.styles.halign="center",me.cell.styles.fillColor=[220,220,220]),me.column.index===2&&(me.cell.styles.halign="center",me.cell.styles.fillColor=[220,220,220]))}});const Ft=`reporte_anotaciones_${e(i)||"todos"}_${e(w)||"todas"}_${e(J)||"todos"}_${new Date().toISOString().split("T")[0]}.pdf`;f.save(Ft),console.log("üíæ PDF guardado exitosamente:",Ft)};ye(()=>e(j),()=>{d(v,e(j).reduce((f,M)=>{const K=parseFloat(M.Horas||"0");return f+(isNaN(K)?0:K)},0))}),ye(()=>(e(i),e(oe),e(s)),()=>{d(fe,e(i)?[...e(oe)].sort((f,M)=>{const K=e(s)[e(i)]?.includes(f.materia),Q=e(s)[e(i)]?.includes(M.materia);return K&&!Q?-1:!K&&Q?1:f.materia.localeCompare(M.materia)}):e(oe))}),ye(()=>{},()=>{d(b,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Nr(),jr();var Qe=Vs(),Xe=o(Qe),He=o(Xe),g=a(o(He),2),H=a(He,2),de=o(H),ke=a(o(de),2),ee=o(ke),Ne=o(ee),De=a(Ne,2),se=o(De);se.value=se.__value="";var we=a(se);xe(we,1,()=>e(E),Ae,(f,M)=>{var K=Ms(),Q=o(K),je={};D(()=>{h(Q,e(M)),je!==(je=e(M))&&(K.value=(K.__value=e(M))??"")}),u(f,K)});var Ye=a(ee,2),We=o(Ye),Be=a(We,2),Ke=o(Be);Ke.value=Ke.__value="";var Ge=a(Ke);xe(Ge,1,()=>e(fe),Ae,(f,M)=>{const K=Dt(()=>(e(i),e(s),e(M),r(()=>e(i)&&e(s)[e(i)]?.includes(e(M).materia))));var Q=Ts(),je=o(Q),ut={};D(()=>{l(Q,e(K)?"color: #6366f1; font-weight: 600;":""),h(je,`${e(K)?"‚≠ê ":""}${e(M),r(()=>e(M).materia)??""}`),ut!==(ut=(e(M),r(()=>e(M).materia)))&&(Q.value=(Q.__value=(e(M),r(()=>e(M).materia)))??"")}),u(f,Q)});var st=a(Ye,2),ct=o(st),c=a(ct,2),$=o(c);$.value=$.__value="";var B=a($);xe(B,1,()=>(e(V),r(()=>[...new Set(e(V).map(f=>f.grado.toString()))])),Ae,(f,M)=>{var K=Os(),Q=o(K),je={};D(ut=>{h(Q,ut),je!==(je=e(M))&&(K.value=(K.__value=e(M))??"")},[()=>(e(M),r(()=>e(M).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),u(f,K)});var z=a(ke,2),T=o(z),F=o(T);{var ne=f=>{var M=Ns();u(f,M)},he=f=>{var M=js();u(f,M)};Z(F,f=>{e(R)?f(ne):f(he,!1)})}var y=a(T,2),$e=a(y,2),ve=a(de,2),G=o(ve),Y=o(G),ze=o(Y),Ue=a(Y,2);{var Fe=f=>{var M=Rs(),K=o(M);D(()=>h(K,`${(e(i)&&`Docente: ${e(i)}`)??""}
              ${(e(w)&&` | Asignatura: ${e(w)}`)??""}
              ${(e(J)&&` | Grado: ${e(J)}`)??""}`)),u(f,M)};Z(Ue,f=>{e(j),r(()=>e(j).length>0)&&f(Fe)})}var At=a(ve,2);{var Bt=f=>{var M=Ls(),K=o(M);po(K,{message:"Cargando datos del anotador..."}),u(f,M)},zt=f=>{var M=Ps(),K=a(o(M),4),Q=o(K);D(()=>{l(M,`color: ${e(b),r(()=>e(b).placeholder)??""};`),h(Q,e(i)||e(w)||e(J)?"No se encontraron registros con los filtros seleccionados. Intente con otros criterios.":"Seleccione filtros y haga clic en 'Aplicar Filtros' para cargar los datos.")}),u(f,M)},lr=f=>{var M=Us(),K=o(M),Q=o(K),je=o(Q),ut=o(je),Ft=a(ut),me=a(Ft),Xt=a(Q),wt=o(Xt);xe(wt,1,()=>e(j),Ae,(Rt,vt)=>{var St=Hs(),Mt=o(St),Lt=o(Mt),$t=a(Mt),O=o($t),W=a($t),le=o(W),Me=o(le);D(()=>{l(St,`border-color: ${e(b),r(()=>e(b).border)??""};`),h(Lt,(e(vt),r(()=>e(vt).Fecha||"-"))),h(O,(e(vt),r(()=>e(vt).Horas||"-"))),dt(le,"title",(e(vt),r(()=>e(vt).Anotaci√≥n))),h(Me,(e(vt),r(()=>e(vt).Anotaci√≥n||"-")))}),u(Rt,St)});var jt=a(wt);{var er=Rt=>{var vt=Gs(),St=a(o(vt)),Mt=o(St),Lt=a(St),$t=o(Lt);D(O=>{l(vt,`border-color: ${e(b),r(()=>e(b).border)??""}; border-top-width: 2px;`),h(Mt,O),h($t,`${e(j),r(()=>e(j).length)??""} registros`)},[()=>(e(v),r(()=>e(v).toFixed(1)))]),u(Rt,vt)};Z(jt,Rt=>{e(j),r(()=>e(j).length>0)&&Rt(er)})}D(()=>{l(M,`border-color: ${e(b),r(()=>e(b).border)??""};`),l(Q,`background-color: ${e(b),r(()=>e(b).inputBg)??""};`),l(ut,`color: ${e(b),r(()=>e(b).label)??""};`),l(Ft,`color: ${e(b),r(()=>e(b).label)??""};`),l(me,`color: ${e(b),r(()=>e(b).label)??""};`)}),u(f,M)};Z(At,f=>{e(R)?f(Bt):(e(j),r(()=>e(j).length===0)?f(zt,1):f(lr,!1))})}D(()=>{l(Xe,`background-color: ${e(b),r(()=>e(b).cardBg)??""}; color: ${e(b),r(()=>e(b).text)??""};`),l(He,`border-color: ${e(b),r(()=>e(b).cardBorder)??""};`),l(de,`background-color: ${e(b),r(()=>e(b).inputBg)??""}; border-color: ${e(b),r(()=>e(b).border)??""};`),l(Ne,`color: ${e(b),r(()=>e(b).label)??""};`),l(De,`background-color: ${e(b),r(()=>e(b).cardBg)??""}; border-color: ${e(b),r(()=>e(b).border)??""}; color: ${e(b),r(()=>e(b).text)??""};`),l(We,`color: ${e(b),r(()=>e(b).label)??""};`),l(Be,`background-color: ${e(b),r(()=>e(b).cardBg)??""}; border-color: ${e(b),r(()=>e(b).border)??""}; color: ${e(b),r(()=>e(b).text)??""};`),l(ct,`color: ${e(b),r(()=>e(b).label)??""};`),l(c,`background-color: ${e(b),r(()=>e(b).cardBg)??""}; border-color: ${e(b),r(()=>e(b).border)??""}; color: ${e(b),r(()=>e(b).text)??""};`),T.disabled=e(R),l(y,`color: ${e(b),r(()=>e(b).text)??""};`),$e.disabled=(e(j),r(()=>e(j).length===0)),h(ze,`Resultados (${e(j),r(()=>e(j).length)??""} registros)`)}),U("click",g,function(...f){ue()?.apply(this,f)}),at(De,()=>e(i),f=>d(i,f)),at(Be,()=>e(w),f=>d(w,f)),at(c,()=>e(J),f=>d(J,f)),U("click",T,ce),U("click",y,Ze),U("click",$e,xt),U("click",Qe,go(function(...f){ue()?.apply(this,f)})),U("keydown",Qe,f=>f.key==="Escape"&&ue()()),u(N,Qe),Ir()}var qs=_('<div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping svelte-1p7gzb0"></div> <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full svelte-1p7gzb0"></div>',1),Js=pt('<svg class="w-5 h-5 text-indigo-500 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1p7gzb0"></path></svg>'),Ws=pt('<svg class="w-5 h-5 text-amber-500 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="svelte-1p7gzb0"></path></svg>'),Ks=pt('<svg class="w-5 h-5 text-indigo-400 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1p7gzb0"></path></svg>'),Zs=_('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-1p7gzb0"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0 svelte-1p7gzb0"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-1p7gzb0"></path></svg></div> <div class="flex-1 pr-6 pt-0.5 svelte-1p7gzb0"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100 svelte-1p7gzb0">Informaci√≥n</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200 svelte-1p7gzb0"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors svelte-1p7gzb0" aria-label="Cerrar alerta"><svg class="w-4 h-4 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-1p7gzb0"></path></svg></button></div>'),Qs=_('<option class="svelte-1p7gzb0"> </option>'),Xs=_('<option class="svelte-1p7gzb0"> </option>'),el=_('<option class="svelte-1p7gzb0"> </option>'),tl=_('<option class="svelte-1p7gzb0"> </option>'),rl=_('<button class="absolute right-4 top-1/2 transform -translate-y-1/2 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors svelte-1p7gzb0" title="Limpiar b√∫squeda"><svg class="w-4 h-4 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-1p7gzb0"></path></svg></button>'),ol=_('<div class="text-center py-8 svelte-1p7gzb0"><svg class="w-12 h-12 mx-auto mb-4 opacity-50 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" class="svelte-1p7gzb0"></path></svg> <p class="text-sm svelte-1p7gzb0"> </p></div>'),al=_('<div class="flex items-center justify-center py-12 svelte-1p7gzb0"><!></div>'),sl=_('<span class="ml-2 inline-block animate-bounce svelte-1p7gzb0">‚ú®</span>'),ll=_('<span class="text-xs font-medium svelte-1p7gzb0"> </span>'),nl=_('<div class="h-px flex-1 transition-all duration-300 group-hover:opacity-50 svelte-1p7gzb0"></div>'),il=pt('<svg class="w-3 h-3 text-white svelte-1p7gzb0" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" class="svelte-1p7gzb0"></path></svg>'),dl=_('<div class="relative group flex flex-col p-0 rounded-2xl border transition-all duration-200 shadow-sm hover:shadow-md svelte-1p7gzb0"><div class="flex items-start gap-1 p-4 svelte-1p7gzb0"><label class="flex-shrink-0 cursor-pointer p-1 mt-1 svelte-1p7gzb0"><input type="checkbox" class="hidden svelte-1p7gzb0"/> <div class="w-5 h-5 rounded border flex items-center justify-center transition-colors cursor-pointer svelte-1p7gzb0"><!></div></label> <textarea rows="8" class="w-full bg-transparent border-none focus:ring-0 text-base font-medium leading-relaxed resize-none p-1 transition-colors min-h-[180px] pb-6 svelte-1p7gzb0" placeholder="Escriba aqu√≠..."></textarea></div></div>'),cl=_('<div class="grid grid-cols-1 md:grid-cols-2 gap-4 svelte-1p7gzb0"></div>'),vl=_('<div class="space-y-4 svelte-1p7gzb0"><button type="button" class="flex items-center gap-3 w-full text-left cursor-pointer group focus:outline-none svelte-1p7gzb0"><div class="flex items-center gap-3 flex-1 svelte-1p7gzb0"><h3> <!></h3> <!></div> <!> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" class="svelte-1p7gzb0"></path></svg></button> <!></div>'),gl=pt('<svg class="animate-spin h-7 w-7 text-white svelte-1p7gzb0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25 svelte-1p7gzb0" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75 svelte-1p7gzb0" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),pl=pt('<svg class="w-8 h-8 transform rotate-90 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" class="svelte-1p7gzb0"></path></svg>'),ul=_('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200 svelte-1p7gzb0"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40 svelte-1p7gzb0"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8 svelte-1p7gzb0"><div class="flex items-center gap-4 lg:flex-col svelte-1p7gzb0"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto svelte-1p7gzb0"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center svelte-1p7gzb0">Anotador de Clase</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full svelte-1p7gzb0"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Abrir hoja de c√°lculo"><svg class="w-5 h-5 svelte-1p7gzb0" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Hoja de C√°lculo</span></button> <button id="filter-button-target" class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Abrir filtros de anotaciones"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Filtros</span> <!></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Generar reportes PDF"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Reportes PDF</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Volver al Dashboard"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Dashboard</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full svelte-1p7gzb0" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize svelte-1p7gzb0"> </span></button></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto pb-32 svelte-1p7gzb0"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border svelte-1p7gzb0"><!> <!> <form class="space-y-6 svelte-1p7gzb0"><div class="grid grid-cols-1 md:grid-cols-3 gap-6 svelte-1p7gzb0"><div class="space-y-2 svelte-1p7gzb0"><label for="fecha" class="block text-sm font-medium svelte-1p7gzb0">Fecha</label> <input type="date" id="fecha" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none svelte-1p7gzb0"/></div> <div class="space-y-2 svelte-1p7gzb0"><label for="docente" class="block text-sm font-medium svelte-1p7gzb0">Docente</label> <select id="docente" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-1p7gzb0"><option class="svelte-1p7gzb0"> </option><!></select></div> <div class="space-y-2 svelte-1p7gzb0"><label for="materia" class="block text-sm font-medium svelte-1p7gzb0">Asignatura</label> <select id="materia" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-1p7gzb0"><option class="svelte-1p7gzb0"> </option><!></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-1p7gzb0"><div class="space-y-2 svelte-1p7gzb0"><label for="grado" class="block text-sm font-medium svelte-1p7gzb0">Grado</label> <select id="grado" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 svelte-1p7gzb0"><option class="svelte-1p7gzb0"> </option><!></select></div> <div class="space-y-2 svelte-1p7gzb0"><label for="horas" class="block text-sm font-medium svelte-1p7gzb0">Horas</label> <select id="horas" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer svelte-1p7gzb0"><option class="svelte-1p7gzb0">Seleccione horas</option><!></select></div></div> <div class="space-y-2 svelte-1p7gzb0"><label for="search" class="block text-sm font-medium svelte-1p7gzb0">Buscar anotaciones</label> <div class="relative svelte-1p7gzb0"><input type="text" id="search" placeholder="Buscar por palabra clave o categor√≠a..." class="w-full px-4 py-3 pl-12 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none svelte-1p7gzb0"/> <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" class="svelte-1p7gzb0"></path></svg> <!></div> <!></div> <div class="space-y-8 svelte-1p7gzb0"><!></div> <div class="space-y-2 svelte-1p7gzb0"><label for="observacion" class="block text-sm font-medium svelte-1p7gzb0">Observaci√≥n</label> <textarea id="observacion" rows="3" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none resize-none svelte-1p7gzb0" placeholder="Observaciones adicionales (opcional)..."></textarea></div> <div class="fixed bottom-8 right-8 z-50 svelte-1p7gzb0"><button type="submit" class="w-16 h-16 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-400 dark:disabled:bg-slate-700 disabled:cursor-not-allowed disabled:scale-100 text-white rounded-full shadow-2xl transition-all duration-300 transform hover:scale-110 active:scale-95 backdrop-blur-sm bg-opacity-95 flex items-center justify-center overflow-hidden border border-white/20 svelte-1p7gzb0" aria-label="Guardar Anotaci√≥n"><!></button></div></form></div></main></div> <!> <!>',1);function bl(N,k){Sr(k,!1);const v=()=>vo(Vr,"$theme",fe),[fe,b]=co(),I=m(),t=m(),ue=m(),Te=m();let E=kt(k,"onBack",8),oe=m([]),V=m([]),q=m([]),j=m(!1),R=m(!1),S=m(!1),s=m(!1),i=m({}),w=m({}),J=m(""),be=m({}),L=m([]),Ie=m(""),ce=m("");const Ze=p=>{ae(w,e(w)[p]=!e(w)[p]),d(w,e(w))},xt=(p,n)=>{const x=e(i)[p].indexOf(n);if(x!==-1){const C={...n,selected:!n.selected},P=[...e(i)[p].slice(0,x),C,...e(i)[p].slice(x+1)];d(i,{...e(i),[p]:P}),console.log("üîÑ Anotaci√≥n toggle:",{categoria:p,index:x,texto:C.text,nuevoEstado:C.selected,totalSeleccionadas:Object.values(e(i)).flat().filter(re=>re.selected).length})}},Qe=p=>({"C√ÅTEDRA DE LA PAZ":"#8b5cf6","CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL":"#10b981","CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y":"#f59e0b","DIRECCI√ìN DE GRUPO":"#3b82f6","EDUCACI√ìN ART√çSTICA":"#f43f5e","EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES":"#ef4444","EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS":"#8b5cf6",EMPRENDIMIENTO:"#f97316",ESTAD√çSTICA:"#06b6d4","FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS":"#6366f1",F√çSICA:"#3b82f6",INGL√âS:"#14b8a6","LENGUA CASTELLANA":"#10b981",MATEM√ÅTICAS:"#3b82f6","PROYECTO Y EMPRENDIMIENTO":"#f97316",QU√çMICA:"#06b6d4","TECNOLOG√çA E INFORM√ÅTICA":"#6366f1","√âTICA PROFESIONAL":"#8b5cf6","Estrategias de Ense√±anza-Aprendizaje":"#6366f1","Evaluaci√≥n y Verificaci√≥n de Saberes":"#10b981","Enfoque STEM+ y Contexto Rural":"#f59e0b","Pr√°cticas de Laboratorio y Mantenimiento":"#f43f5e","Ciudadan√≠a Digital y √âtica":"#8b5cf6","Pensamiento Computacional y Programaci√≥n":"#06b6d4","Recursos Anal√≥gicos y Contingencias":"#f97316","Ofim√°tica y Competencias Productivas":"#14b8a6","Gesti√≥n Administrativa y Proyectos Transversales":"#3b82f6"})[p]||"#6366f1",Xe={MATEM√ÅTICAS:"MATEM√ÅTICAS","LENGUA CASTELLANA":"LENGUA CASTELLANA",INGL√âS:"INGL√âS","CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL":"CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL","CIENCIAS NATURALES":"CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL","CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y":"CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y","CIENCIAS SOCIALES":"CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y",F√çSICA:"F√çSICA",QU√çMICA:"QU√çMICA","EDUCACI√ìN ART√çSTICA":"EDUCACI√ìN ART√çSTICA","EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES":"EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES","EDUCACI√ìN F√çSICA":"EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES","TECNOLOG√çA E INFORM√ÅTICA":"TECNOLOG√çA E INFORM√ÅTICA",TECNOLOG√çA:"TECNOLOG√çA E INFORM√ÅTICA",INFORM√ÅTICA:"TECNOLOG√çA E INFORM√ÅTICA",EMPRENDIMIENTO:"EMPRENDIMIENTO","FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS":"FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS",FILOSOF√çA:"FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS",ESTAD√çSTICA:"ESTAD√çSTICA","EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS":"EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS",√âTICA:"EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS","DIRECCI√ìN DE GRUPO":"DIRECCI√ìN DE GRUPO","PROYECTO Y EMPRENDIMIENTO":"PROYECTO Y EMPRENDIMIENTO",PROYECTO:"PROYECTO Y EMPRENDIMIENTO","C√ÅTEDRA DE LA PAZ":"C√ÅTEDRA DE LA PAZ","√âTICA PROFESIONAL":"√âTICA PROFESIONAL"},He=p=>{if(!e(g).materia)return p;let n=Xe[e(g).materia.toUpperCase()]||Xe[e(g).materia]||"";if(!n){const x=e(g).materia.toUpperCase();for(const[C,P]of Object.entries(Xe))if(C.includes(x)||x.includes(C)){n=P;break}}return console.log("Materia seleccionada:",e(g).materia,"‚Üí Categor√≠a:",n),p.sort(([x],[C])=>x===n&&C!==n?-1:C===n&&x!==n?1:x.localeCompare(C))};let g=m({fecha:new Date().toISOString().split("T")[0],docente:localStorage.getItem("lastDocente")||"",materia:"",horas:"",grado:"",anotacion:"",observacion:""}),H=m(JSON.parse(localStorage.getItem("docenteMaterias")||"{}"));const de=(p,n)=>{!p||!n||(e(H)[p]||ae(H,e(H)[p]=[]),e(H)[p].includes(n)||(ae(H,e(H)[p]=[...e(H)[p],n]),localStorage.setItem("docenteMaterias",JSON.stringify(e(H)))))};let ke=m(localStorage.getItem("dismissedInfoAnotadorContent")!==xo);const ee=()=>{d(ke,!1),localStorage.setItem("dismissedInfoAnotadorContent",xo)};let Ne=m(!1),De=m(!1),se=m(!1);const we=()=>{d(De,!0)},Ye=()=>{d(De,!1)},We=()=>{d(se,!0)},Be=()=>{d(se,!1)};let Ke=m(!0);const Ge="¬°Nueva funci√≥n de filtrado avanzado disponible!";function st(){return!0}const ct=()=>{localStorage.setItem("dismissedFeatureAlertAnotador",new Date().toISOString()),d(Ke,!1)},c=()=>{localStorage.setItem("dismissedFeatureAlertAnotador",new Date().toISOString()),we()},$=()=>`https://docs.google.com/spreadsheets/d/${no}`,B=()=>{window.open($(),"_blank")},z=()=>{Vr.update(p=>p==="light"?"dim":p==="dim"?"dark":"light")},T=async()=>{d(j,!0),d(R,!0),d(S,!0),d(s,!0);try{const[p,n,x,C]=await Promise.all([Zr(),Qr(),Xr(),pa()]);d(oe,p),d(V,n),d(q,x);const P={},re={};for(const[Ce,Pe]of Object.entries(C))P[Ce]=Pe.map(Re=>({text:Re,selected:!1})),re[Ce]=!1;d(i,P),d(w,re)}catch(p){console.error("Error cargando datos iniciales:",p)}finally{d(j,!1),d(R,!1),d(S,!1),d(s,!1)}},F=async p=>{if(p.preventDefault(),e(Ne))return;const n=Object.values(e(i)).flat().filter(P=>P.selected).map(P=>P.text),x=n.join(" | ");if((await Ot.fire({title:"¬øConfirmar Registro?",html:`
        <div class="text-left space-y-2 p-2 rounded-xl bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10" style="font-size: 0.9rem; line-height: 1.4;">
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Fecha:</strong> ${e(g).fecha}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Docente:</strong> ${e(g).docente}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Asignatura:</strong> ${e(g).materia}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Grado:</strong> ${e(g).grado}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Horas:</strong> ${e(g).horas}</div>
          <div style="margin-top: 12px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 8px;">
            <strong style="color: #6366f1;">Anotaciones:</strong>
            <ul style="list-style-type: disc; padding-left: 20px; margin-top: 4px; font-size: 0.8rem; opacity: 0.8;">
              ${n.map(P=>`<li>${P}</li>`).join("")}
            </ul>
          </div>
          ${e(g).observacion?`<div style="margin-top: 12px;"><strong style="color: #6366f1;">Observaci√≥n:</strong> <span style="font-size: 0.8rem;">${e(g).observacion}</span></div>`:""}
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonText:"Si, de acuerdo",cancelButtonText:"No",confirmButtonColor:"#4f46e5",cancelButtonColor:"#64748b",reverseButtons:!0,background:v()==="light"?"#fff":"#1e293b",color:v()==="light"?"#1e293b":"#f1f5f9"})).isConfirmed){d(Ne,!0);try{const re=[[new Date().toLocaleString(),e(g).fecha,e(g).docente,e(g).materia,e(g).grado,e(g).horas,x,e(g).observacion]];await ua({spreadsheetId:no,worksheetTitle:ko,datos:re}),de(e(g).docente,e(g).materia),await Ot.fire({icon:"success",title:"¬°√âxito!",text:"Anotaci√≥n registrada exitosamente",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),d(g,{fecha:new Date().toISOString().split("T")[0],docente:e(g).docente,materia:e(g).materia,grado:e(g).grado,horas:"",anotacion:"",observacion:""});for(const Ce in e(i))ae(i,e(i)[Ce]=e(i)[Ce].map(Pe=>({...Pe,selected:!1})));d(i,{...e(i)})}catch(P){console.error("Error enviando:",P),await Ot.fire({icon:"error",title:"Error",text:"Error al registrar la anotaci√≥n",confirmButtonColor:"#ef4444"})}finally{d(Ne,!1)}}};Ar(()=>{T(),d(Ke,st())}),ye(()=>(e(g),e(ce)),()=>{if(e(g).materia&&e(g).materia!==e(ce)){d(ce,e(g).materia);let p=Xe[e(g).materia.toUpperCase()]||Xe[e(g).materia]||"";if(!p){const n=e(g).materia.toUpperCase();for(const[x,C]of Object.entries(Xe))if(x.includes(n)||n.includes(x)){p=C;break}}p&&(d(Ie,p),console.log("‚ú® Categoria destacada:",p),setTimeout(()=>{d(Ie,"")},3e3))}}),ye(()=>(e(i),e(J)),()=>{d(be,Object.entries(e(i)).reduce((p,[n,x])=>{if(!e(J).trim())return p[n]=x,p;const C=e(J).toLowerCase().trim(),P=x.filter(re=>re.text.toLowerCase().includes(C));return P.length>0&&(p[n]=P),p},{}))}),ye(()=>(e(V),e(g),e(i),e(be),e(L)),()=>{console.log("üîÑ Reactividad actualizada"),console.log("üìö Materias disponibles:",e(V).map(p=>p.materia)),console.log("‚úçÔ∏è Materia seleccionada:",e(g).materia),console.log("üìä Categor√≠as disponibles:",Object.keys(e(i))),console.log("üîç Categor√≠as filtradas:",Object.keys(e(be))),d(L,He(Object.entries(e(be)))),console.log("üìã Entradas ordenadas:",e(L).map(([p])=>p))}),ye(()=>e(g),()=>{e(g).docente&&localStorage.setItem("lastDocente",e(g).docente)}),ye(()=>(e(g),e(V),e(H)),()=>{d(I,e(g).docente?[...e(V)].sort((p,n)=>{const x=e(H)[e(g).docente]?.includes(p.materia),C=e(H)[e(g).docente]?.includes(n.materia);return x&&!C?-1:!x&&C?1:p.materia.localeCompare(n.materia)}):e(V))}),ye(()=>{},()=>{d(t,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),ye(()=>e(i),()=>{d(ue,Object.values(e(i)).flat().some(p=>p.selected))}),ye(()=>(e(g),e(ue)),()=>{d(Te,e(g).fecha&&e(g).docente&&e(g).materia&&e(g).grado&&e(g).horas&&e(ue))}),ye(()=>(e(g),e(ue),e(Te),e(i)),()=>{console.log("üîç Validaci√≥n formulario:",{fecha:e(g).fecha,docente:e(g).docente,materia:e(g).materia,grado:e(g).grado,horas:e(g).horas,hasSelectedAnotacion:e(ue),isFormValid:e(Te),totalAnotaciones:Object.values(e(i)).flat().length,selectedCount:Object.values(e(i)).flat().filter(p=>p.selected).length})}),Nr(),jr();var ne=ul(),he=Qt(ne),y=o(he),$e=o(y),ve=o($e),G=o(ve),Y=a(G,2),ze=a(ve,2),Ue=o(ze),Fe=a(Ue,2),At=a(o(Fe),4);{var Bt=p=>{var n=qs();u(p,n)};Z(At,p=>{e(Ke)&&p(Bt)})}var zt=a(Fe,2),lr=a(zt,2),f=a(lr,2),M=o(f);{var K=p=>{var n=Js();u(p,n)},Q=p=>{var n=Ws();u(p,n)},je=p=>{var n=Ks();u(p,n)};Z(M,p=>{v()==="dark"?p(K):v()==="light"?p(Q,1):p(je,!1)})}var ut=a(M,2),Ft=o(ut),me=a(y,2),Xt=o(me),wt=o(Xt);{var jt=p=>{var n=Zs(),x=a(o(n),2),C=a(o(x),2),P=o(C),re=a(x,2);D(()=>h(P,xo)),U("click",re,ee),u(p,n)};Z(wt,p=>{e(ke)&&p(jt)})}var er=a(wt,2);so(er,{featureMessage:Ge,description:"Ahora puedes filtrar tus anotaciones de forma avanzada. ¬°Pru√©balo!",onTryNow:c,onDismiss:ct,targetSelector:"#filter-button-target",showPopup:!1,colorTheme:"purple"});var Rt=a(er,2),vt=o(Rt),St=o(vt),Mt=o(St),Lt=a(Mt,2),$t=a(St,2),O=o($t),W=a(O,2),le=o(W),Me=o(le);le.value=le.__value="";var lt=a(le);xe(lt,1,()=>e(oe),Ae,(p,n)=>{var x=Qs(),C=o(x),P={};D(()=>{h(C,e(n)),P!==(P=e(n))&&(x.value=(x.__value=e(n))??"")}),u(p,x)});var Pt=a($t,2),Yr=o(Pt),Rr=a(Yr,2),nr=o(Rr),fr=o(nr);nr.value=nr.__value="";var ir=a(nr);xe(ir,1,()=>e(I),Ae,(p,n)=>{const x=Dt(()=>(e(H),e(g),e(n),r(()=>e(H)[e(g).docente]?.includes(e(n).materia))));var C=Xs(),P=o(C),re={};D(()=>{l(C,e(x)?"color: #6366f1; font-weight: 600;":""),h(P,`${e(x)?"‚≠ê ":""}${e(n),r(()=>e(n).materia)??""}`),re!==(re=(e(n),r(()=>e(n).materia)))&&(C.value=(C.__value=(e(n),r(()=>e(n).materia)))??"")}),u(p,C)});var vr=a(vt,2),Lr=o(vr),Er=o(Lr),Dr=a(Er,2),gr=o(Dr),hr=o(gr);gr.value=gr.__value="";var Br=a(gr);xe(Br,1,()=>(e(q),r(()=>[...new Set(e(q).map(p=>p.grado.toString()))])),Ae,(p,n)=>{var x=el(),C=o(x),P={};D(re=>{h(C,re),P!==(P=e(n))&&(x.value=(x.__value=e(n))??"")},[()=>(e(n),r(()=>e(n).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),u(p,x)});var pr=a(Lr,2),mr=o(pr),zr=a(mr,2),_r=o(zr);_r.value=_r.__value="";var qr=a(_r);xe(qr,0,()=>[1,2,3,4],Ae,(p,n)=>{var x=tl(),C=o(x),P={};D(re=>{h(C,`${n??""} ${n===1?"Hora":"Horas"}`),P!==(P=re)&&(x.value=(x.__value=re)??"")},[()=>r(()=>n.toString())]),u(p,x)});var ur=a(vr,2),br=o(ur),ie=a(br,2),Le=o(ie),et=a(Le,2),Ht=a(et,2);{var It=p=>{var n=rl();D(()=>l(n,`color: ${e(t),r(()=>e(t).placeholder)??""};`)),U("click",n,()=>d(J,"")),u(p,n)};Z(Ht,p=>{e(J)&&p(It)})}var te=a(ie,2);{var Se=p=>{var n=ol(),x=a(o(n),2),C=o(x);D(()=>{l(n,`color: ${e(t),r(()=>e(t).placeholder)??""};`),h(C,`No se encontraron anotaciones para "${e(J)??""}"`)}),u(p,n)},Ve=mo(()=>(e(J),e(be),r(()=>e(J)&&Object.keys(e(be)).length===0)));Z(te,p=>{e(Ve)&&p(Se)})}var gt=a(ur,2),ft=o(gt);{var tr=p=>{var n=al(),x=o(n);po(x,{message:"Cargando opciones de anotaci√≥n..."}),u(p,n)},Pr=p=>{var n=io(),x=Qt(n);xe(x,1,()=>e(L),Ae,(C,P)=>{var re=mo(()=>Eo(e(P),2));let Ce=()=>e(re)[0],Pe=()=>e(re)[1];const Re=Dt(()=>(Ce(),r(()=>Qe(Ce())))),Ct=Dt(()=>(Pe(),r(()=>Pe().length)));var rt=vl(),nt=o(rt),ht=o(nt),A=o(ht),tt=o(A),mt=a(tt);{var Et=ot=>{var _t=sl();u(ot,_t)};Z(mt,ot=>{Ce()===e(Ie)&&ot(Et)})}var Kt=a(A,2);{var it=ot=>{var _t=ll(),wr=o(_t);D(()=>{l(_t,`color: ${e(Re)??""};`),h(wr,`(${e(Ct)??""} resultado${e(Ct)!==1?"s":""})`)}),u(ot,_t)};Z(Kt,ot=>{e(J)&&ot(it)})}var Ut=a(ht,2);{var Zt=ot=>{var _t=nl();D(()=>l(_t,`background-color: ${e(Re)??""}; opacity: 0.2;`)),u(ot,_t)};Z(Ut,ot=>{e(J)||ot(Zt)})}var Tt=a(Ut,2);let Vt;var ar=a(nt,2);{var bt=ot=>{var _t=cl();xe(_t,5,Pe,Ae,(wr,qe,Or)=>{const Yt=Dt(()=>(e(J),e(qe),r(()=>e(J)&&e(qe).text.toLowerCase().includes(e(J).toLowerCase()))));var Gt=dl(),$r=o(Gt),qt=o($r),Cr=o(qt),dr=a(Cr,2),Ur=o(dr);{var Jt=Je=>{var ge=il();u(Je,ge)};Z(Ur,Je=>{e(qe),r(()=>e(qe).selected)&&Je(Jt)})}var yt=a(qt,2);D(()=>{l(Gt,`
                          background-color: ${e(qe),pe(e(Re)),pe(e(Yt)),e(t),r(()=>e(qe).selected?`${e(Re)}10`:e(Yt)?`${e(Re)}05`:e(t).inputBg)??""};
                          border-color: ${e(qe),pe(e(Re)),pe(e(Yt)),e(t),r(()=>e(qe).selected?e(Re):e(Yt)?e(Re):e(t).border)??""};
                        `),Ro(Cr,(e(qe),r(()=>e(qe).selected))),l(dr,`
                              border-color: ${e(qe),pe(e(Re)),e(t),r(()=>e(qe).selected?e(Re):e(t).border)??""};
                              background-color: ${e(qe),pe(e(Re)),r(()=>e(qe).selected?e(Re):"transparent")??""};
                            `),l(yt,`color: ${e(t),r(()=>e(t).text)??""};`)}),U("change",Cr,()=>xt(Ce(),e(qe))),cr(yt,()=>e(qe).text,Je=>(e(qe).text=Je,_e(()=>(Pe(),e(L))))),u(wr,Gt)}),to(3,_t,()=>Io),u(ot,_t)};Z(ar,ot=>{e(w),Ce(),r(()=>e(w)[Ce()])&&ot(bt)})}D(()=>{Nt(A,1,`text-xs font-black uppercase tracking-widest px-3 py-1 rounded-full text-white flex-shrink-0 transition-all duration-300 group-hover:shadow-md ${Ce()===e(Ie)?"animate-glow ring-4 ring-opacity-50":""}`,"svelte-1p7gzb0"),l(A,`background-color: ${e(Re)??""}; ${Ce()===e(Ie)?`box-shadow: 0 0 25px ${e(Re)}60, 0 0 50px ${e(Re)}30; ring-color: ${e(Re)}; border: 2px solid ${e(Re)};`:""}`),h(tt,`${Ce()??""} `),Vt=Nt(Tt,0,"w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0 svelte-1p7gzb0",null,Vt,{"rotate-180":e(w)[Ce()]})}),U("click",nt,()=>Ze(Ce())),u(C,rt)}),u(p,n)};Z(ft,p=>{e(s)?p(tr):p(Pr,!1)})}var yr=a(gt,2),Hr=o(yr),Gr=a(Hr,2),Fr=a(yr,2),kr=o(Fr),Mr=o(kr);{var X=p=>{var n=gl();u(p,n)},Wt=p=>{var n=pl();u(p,n)};Z(Mr,p=>{e(Ne)?p(X):p(Wt,!1)})}var rr=a(he,2);{var or=p=>{Fs(p,{onClose:Ye,get selectedDocente(){return e(g),r(()=>e(g).docente)}})};Z(rr,p=>{e(De)&&p(or)})}var Tr=a(rr,2);{var xr=p=>{Ys(p,{onClose:Be,get initialDocente(){return e(g),r(()=>e(g).docente)}})};Z(Tr,p=>{e(se)&&p(xr)})}D(()=>{l(he,`background-color: ${e(t),r(()=>e(t).bg)??""};`),l(y,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),dt(G,"src",Kr),l(Y,`color: ${e(t),r(()=>e(t).text)??""};`),l(Ue,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(Fe,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(zt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(lr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(f,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),h(Ft,v()),l(Xt,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),l(Mt,`color: ${e(t),r(()=>e(t).label)??""};`),l(Lt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""}; color-scheme: ${v()==="light"?"light":"dark"};`),l(O,`color: ${e(t),r(()=>e(t).label)??""};`),l(W,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),h(Me,e(j)?"Cargando...":"Seleccione docente"),l(Yr,`color: ${e(t),r(()=>e(t).label)??""};`),l(Rr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),h(fr,e(R)?"Cargando...":"Seleccione asignatura"),l(Er,`color: ${e(t),r(()=>e(t).label)??""};`),l(Dr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),h(hr,e(S)?"Cargando...":"Seleccione grado"),l(mr,`color: ${e(t),r(()=>e(t).label)??""};`),l(zr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(br,`color: ${e(t),r(()=>e(t).label)??""};`),l(Le,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(et,`color: ${e(t),r(()=>e(t).placeholder)??""};`),l(Hr,`color: ${e(t),r(()=>e(t).label)??""};`),l(Gr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),kr.disabled=e(Ne)||!e(Te),dt(kr,"title",e(Te)?"Guardar Anotaci√≥n":"Complete todos los campos requeridos y al menos una anotaci√≥n")}),U("click",Ue,B),U("click",Fe,we),U("click",zt,We),U("click",lr,function(...p){E()?.apply(this,p)}),U("click",f,z),cr(Lt,()=>e(g).fecha,p=>(ae(g,e(g).fecha=p),_e(()=>{e(t),e(j),e(oe),e(R),e(I),e(H),e(S),e(q)}))),at(W,()=>e(g).docente,p=>(ae(g,e(g).docente=p),_e(()=>{e(t),e(j),e(oe),e(R),e(I),e(H),e(S),e(q)}))),at(Rr,()=>e(g).materia,p=>(ae(g,e(g).materia=p),_e(()=>{e(t),e(j),e(oe),e(R),e(I),e(H),e(S),e(q)}))),at(Dr,()=>e(g).grado,p=>(ae(g,e(g).grado=p),_e(()=>{e(t),e(j),e(oe),e(R),e(I),e(H),e(S),e(q)}))),at(zr,()=>e(g).horas,p=>(ae(g,e(g).horas=p),_e(()=>{e(t),e(j),e(oe),e(R),e(I),e(H),e(S),e(q)}))),cr(Le,()=>e(J),p=>d(J,p)),cr(Gr,()=>e(g).observacion,p=>(ae(g,e(g).observacion=p),_e(()=>{e(t),e(j),e(oe),e(R),e(I),e(H),e(S),e(q)}))),U("submit",Rt,F),u(N,ne),Ir(),b()}var xl=_('<div class="flex items-center justify-center py-12"><!></div>'),fl=pt('<svg class="w-3 h-3 text-white" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),hl=_('<div class="relative group flex flex-col p-0 rounded-2xl border transition-all duration-200 shadow-sm hover:shadow-md"><div class="flex flex-col p-4 gap-3"><div class="flex items-start justify-between gap-2"><div class="flex items-center gap-2"><label class="flex-shrink-0 cursor-pointer"><input type="checkbox" class="hidden"/> <div class="w-5 h-5 rounded border flex items-center justify-center transition-colors"><!></div></label> <span class="font-bold text-sm leading-tight"> </span></div> <div class="flex gap-1.5 flex-shrink-0"><span class="text-[10px] font-bold px-1.5 py-0.5 rounded bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 opacity-60"> </span> <span class="text-[10px] font-bold px-1.5 py-0.5 rounded bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 opacity-60"> </span></div></div> <textarea rows="4" class="w-full bg-transparent border-none focus:ring-0 text-sm font-medium leading-relaxed resize-none p-0 transition-colors opacity-80" placeholder="Escriba aqu√≠..."></textarea></div></div>'),ml=_('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>'),_l=_('<div class="space-y-4"><button type="button" class="flex items-center gap-3 w-full text-left cursor-pointer group focus:outline-none"><h3 class="text-xs font-black uppercase tracking-widest px-3 py-1 rounded-full text-white flex-shrink-0 transition-all duration-300 group-hover:shadow-md"> </h3> <div class="h-px flex-1 transition-all duration-300 group-hover:opacity-50"></div> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>'),yl=_('<div class="space-y-8"><!></div>');function kl(N,k){Sr(k,!1);const v=m();let fe=kt(k,"selectedDiarioAnots",28,()=>[]),b=m({}),I=m({}),t=m(!1);const ue=Lo(),Te=S=>{if(e(I)[S])ae(I,e(I)[S]=!1);else{for(const s in e(I))ae(I,e(I)[s]=!1);ae(I,e(I)[S]=!0)}d(I,e(I))},E=S=>({Administrativo:"#6366f1",Emergencia:"#ef4444",Acad√©mico:"#f59e0b",Convivencia:"#22c55e",Infraestructura:"#0ea5e9",Salud:"#ec4899",Tecnol√≥gico:"#8b5cf6",Comunicaci√≥n:"#3b82f6",Disciplinario:"#64748b",Normalidad:"#10b981"})[S]||"#6366f1",oe=async()=>{d(t,!0);try{const s=(await va()).situaciones||{},i={},w={};Object.entries(s).forEach(([J,be])=>{be.length>0&&(w[J]=!1,i[J]=be.map(L=>({id:L.id,text:L.descripcion,selected:!1,originalTitulo:L.titulo,categoria:L.categoria,impacto:L.impacto,tiempo_estimado:L.tiempo_estimado})))}),d(b,i),d(I,w)}catch(S){console.error("Error cargando opciones de diario:",S)}finally{d(t,!1)}};Ar(()=>{oe()}),ye(()=>(e(b),pe(fe())),()=>{const S=Object.values(e(b)).flat().filter(s=>s.selected&&s.text.trim()!=="").map(s=>`[${s.categoria}] ${s.originalTitulo}: ${s.text}`);JSON.stringify(S)!==JSON.stringify(fe())&&(fe(S),ue("change",fe()))}),ye(()=>{},()=>{d(v,{text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",inputBg:"rgb(var(--bg-secondary))"})}),Nr(),jr();var V=yl(),q=o(V);{var j=S=>{var s=xl(),i=o(s);po(i,{message:"Cargando opciones de diario..."}),u(S,s)},R=S=>{var s=io(),i=Qt(s);xe(i,1,()=>(e(b),r(()=>Object.entries(e(b)))),Ae,(w,J)=>{var be=mo(()=>Eo(e(J),2));let L=()=>e(be)[0],Ie=()=>e(be)[1];const ce=Dt(()=>(L(),r(()=>E(L()))));var Ze=_l(),xt=o(Ze),Qe=o(xt),Xe=o(Qe),He=a(Qe,2),g=a(He,2);let H;var de=a(xt,2);{var ke=ee=>{var Ne=ml();xe(Ne,5,Ie,De=>De.id,(De,se,we)=>{var Ye=hl(),We=o(Ye),Be=o(We),Ke=o(Be),Ge=o(Ke),st=o(Ge),ct=a(st,2),c=o(ct);{var $=ve=>{var G=fl();u(ve,G)};Z(c,ve=>{e(se),r(()=>e(se).selected)&&ve($)})}var B=a(Ge,2),z=o(B),T=a(Ke,2),F=o(T),ne=o(F),he=a(F,2),y=o(he),$e=a(Be,2);D(()=>{l(Ye,`
                  background-color: ${e(se),pe(e(ce)),e(v),r(()=>e(se).selected?`${e(ce)}10`:e(v).inputBg)??""};
                  border-color: ${e(se),pe(e(ce)),e(v),r(()=>e(se).selected?e(ce):e(v).border)??""};
                `),l(ct,`
                            border-color: ${e(se),pe(e(ce)),e(v),r(()=>e(se).selected?e(ce):e(v).border)??""};
                            background-color: ${e(se),pe(e(ce)),r(()=>e(se).selected?e(ce):"transparent")??""};
                          `),l(B,`color: ${e(v),r(()=>e(v).text)??""};`),h(z,(e(se),r(()=>e(se).originalTitulo))),l(F,`color: ${e(v),r(()=>e(v).text)??""};`),h(ne,`IMP: ${e(se),r(()=>e(se).impacto)??""}`),l(he,`color: ${e(v),r(()=>e(v).text)??""};`),h(y,`${e(se),r(()=>e(se).tiempo_estimado)??""} MIN`),l($e,`color: ${e(v),r(()=>e(v).text)??""};`)}),_o(st,()=>e(se).selected,ve=>(e(se).selected=ve,_e(()=>(Ie(),e(b))))),U("change",st,()=>{d(b,e(b))}),cr($e,()=>e(se).text,ve=>(e(se).text=ve,_e(()=>(Ie(),e(b))))),U("input",$e,()=>{d(b,e(b))}),u(De,Ye)}),to(3,Ne,()=>Io),u(ee,Ne)};Z(de,ee=>{e(I),L(),r(()=>e(I)[L()])&&ee(ke)})}D(()=>{l(Qe,`background-color: ${e(ce)??""};`),h(Xe,L()),l(He,`background-color: ${e(ce)??""}; opacity: 0.2;`),H=Nt(g,0,"w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0",null,H,{"rotate-180":e(I)[L()]})}),U("click",xt,()=>Te(L())),u(w,Ze)}),u(S,s)};Z(q,S=>{e(t)?S(j):S(R,!1)})}u(N,V),Ir()}var wl=pt('<svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>'),$l=pt('<svg class="w-5 h-5 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>'),Cl=pt('<svg class="w-5 h-5 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>'),Al=_('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-qemcko"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <div class="flex-1 pr-6 pt-0.5"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100">Informaci√≥n</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors" aria-label="Cerrar alerta"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),Sl=_("<option> </option>"),Il=_("<option> </option>"),El=_("<option> </option>"),Dl=_("<option> </option>"),Bl=pt('<svg class="animate-spin h-7 w-7 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),zl=pt('<svg class="w-8 h-8 transform rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>'),Fl=_('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8"><div class="flex items-center gap-4 lg:flex-col"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center">Diario de Campo</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Abrir hoja de c√°lculo"><svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Hoja de C√°lculo</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Volver al Dashboard"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Dashboard</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize"> </span></button></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto pb-32"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border"><!> <form class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="space-y-2"><label for="fecha" class="block text-sm font-medium">Fecha</label> <input type="date" id="fecha" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"/></div> <div class="space-y-2"><label for="docente" class="block text-sm font-medium">Docente</label> <select id="docente" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50"><option> </option><!></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="space-y-2"><label for="materia" class="block text-sm font-medium">Asignatura</label> <select id="materia" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50"><option> </option><!></select></div> <div class="space-y-2"><label for="grado" class="block text-sm font-medium">Grado</label> <select id="grado" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50"><option> </option><!></select></div></div> <div class="space-y-2"><label for="horas" class="block text-sm font-medium">Horas</label> <select id="horas" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer"><option>Seleccione horas</option><!></select></div> <div class="space-y-2"><!></div> <div class="fixed bottom-8 right-8 z-50"><button type="submit" class="w-16 h-16 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-400 dark:disabled:bg-slate-700 disabled:cursor-not-allowed disabled:scale-100 text-white rounded-full shadow-2xl transition-all duration-300 transform hover:scale-110 active:scale-95 backdrop-blur-sm bg-opacity-95 flex items-center justify-center overflow-hidden border border-white/20" aria-label="Guardar Diario de Campo"><!></button></div></form></div></main></div>');function Ml(N,k){Sr(k,!1);const v=()=>vo(Vr,"$theme",fe),[fe,b]=co(),I=m(),t=m(),ue=m();let Te=kt(k,"onBack",8),E=m([]),oe=m([]),V=m([]),q=m(!1),j=m(!1),R=m(!1),S=m(!1),s=m([]),i=m({fecha:new Date().toISOString().split("T")[0],docente:localStorage.getItem("lastDocenteDiario")||"",materia:"",grado:"",horas:""}),w=m(JSON.parse(localStorage.getItem("docenteMateriasDiario")||"{}"));const J=(O,W)=>{!O||!W||(e(w)[O]||ae(w,e(w)[O]=[]),e(w)[O].includes(W)||(ae(w,e(w)[O]=[...e(w)[O],W]),localStorage.setItem("docenteMateriasDiario",JSON.stringify(e(w)))))};let be=m(localStorage.getItem("dismissedInfoDiarioContent")!==fo);const L=()=>{d(be,!1),localStorage.setItem("dismissedInfoDiarioContent",fo)},Ie=()=>`https://docs.google.com/spreadsheets/d/${So}`,ce=()=>{window.open(Ie(),"_blank")},Ze=()=>{Vr.update(O=>O==="light"?"dim":O==="dim"?"dark":"light")},xt=async()=>{d(q,!0),d(j,!0),d(R,!0);try{const[O,W,le]=await Promise.all([Zr(),Qr(),Xr()]);d(E,O),d(oe,W),d(V,le)}catch(O){console.error("Error cargando datos iniciales:",O)}finally{d(q,!1),d(j,!1),d(R,!1)}},Qe=async O=>{if(O.preventDefault(),e(S))return;const W=e(s).join(" | ");if((await Ot.fire({title:"¬øConfirmar Registro?",html:`
        <div class="text-left space-y-2 p-2 rounded-xl bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10" style="font-size: 0.9rem; line-height: 1.4;">
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Fecha:</strong> ${e(i).fecha}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Docente:</strong> ${e(i).docente}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Asignatura:</strong> ${e(i).materia}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Grado:</strong> ${e(i).grado}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Horas:</strong> ${e(i).horas}</div>
          <div style="margin-top: 12px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 8px;">
            <strong style="color: #6366f1;">Diario de Campo:</strong>
            <ul style="list-style-type: disc; padding-left: 20px; margin-top: 4px; font-size: 0.8rem; opacity: 0.8;">
              ${e(s).map(Me=>`<li>${Me}</li>`).join("")}
            </ul>
          </div>
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonText:"Si, de acuerdo",cancelButtonText:"No",confirmButtonColor:"#4f46e5",cancelButtonColor:"#64748b",reverseButtons:!0,background:v()==="light"?"#fff":"#1e293b",color:v()==="light"?"#1e293b":"#f1f5f9"})).isConfirmed){d(S,!0);try{const lt=[[new Date().toLocaleString(),e(i).fecha,e(i).horas,e(i).docente,e(i).materia,e(i).grado,W]];await ba({spreadsheetId:So,worksheetTitle:da,datos:lt}),J(e(i).docente,e(i).materia),await Ot.fire({icon:"success",title:"¬°√âxito!",text:"Diario de Campo registrado exitosamente",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),d(i,{fecha:new Date().toISOString().split("T")[0],docente:e(i).docente,materia:e(i).materia,grado:e(i).grado,horas:""}),d(s,[])}catch(Me){console.error("Error enviando:",Me),await Ot.fire({icon:"error",title:"Error",text:"Error al registrar el Diario de Campo",confirmButtonColor:"#ef4444"})}finally{d(S,!1)}}};Ar(()=>{xt()}),ye(()=>e(i),()=>{e(i).docente&&localStorage.setItem("lastDocenteDiario",e(i).docente)}),ye(()=>(e(i),e(oe),e(w)),()=>{d(I,e(i).docente?[...e(oe)].sort((O,W)=>{const le=e(w)[e(i).docente]?.includes(O.materia),Me=e(w)[e(i).docente]?.includes(W.materia);return le&&!Me?-1:!le&&Me?1:O.materia.localeCompare(W.materia)}):e(oe))}),ye(()=>{},()=>{d(t,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),ye(()=>(e(i),e(s)),()=>{d(ue,e(i).fecha&&e(i).docente&&e(i).materia&&e(i).grado&&e(i).horas&&e(s).length>0)}),Nr(),jr();var Xe=Fl(),He=o(Xe),g=o(He),H=o(g),de=o(H),ke=a(de,2),ee=a(H,2),Ne=o(ee),De=a(Ne,2),se=a(De,2),we=o(se);{var Ye=O=>{var W=wl();u(O,W)},We=O=>{var W=$l();u(O,W)},Be=O=>{var W=Cl();u(O,W)};Z(we,O=>{v()==="dark"?O(Ye):v()==="light"?O(We,1):O(Be,!1)})}var Ke=a(we,2),Ge=o(Ke),st=a(He,2),ct=o(st),c=o(ct);{var $=O=>{var W=Al(),le=a(o(W),2),Me=a(o(le),2),lt=o(Me),Pt=a(le,2);D(()=>h(lt,fo)),U("click",Pt,L),u(O,W)};Z(c,O=>{e(be)&&O($)})}var B=a(c,2),z=o(B),T=o(z),F=o(T),ne=a(F,2),he=a(T,2),y=o(he),$e=a(y,2),ve=o($e),G=o(ve);ve.value=ve.__value="";var Y=a(ve);xe(Y,1,()=>e(E),Ae,(O,W)=>{var le=Sl(),Me=o(le),lt={};D(()=>{h(Me,e(W)),lt!==(lt=e(W))&&(le.value=(le.__value=e(W))??"")}),u(O,le)});var ze=a(z,2),Ue=o(ze),Fe=o(Ue),At=a(Fe,2),Bt=o(At),zt=o(Bt);Bt.value=Bt.__value="";var lr=a(Bt);xe(lr,1,()=>e(I),Ae,(O,W)=>{const le=Dt(()=>(e(w),e(i),e(W),r(()=>e(w)[e(i).docente]?.includes(e(W).materia))));var Me=Il(),lt=o(Me),Pt={};D(()=>{l(Me,e(le)?"color: #6366f1; font-weight: 600;":""),h(lt,`${e(le)?"‚≠ê ":""}${e(W),r(()=>e(W).materia)??""}`),Pt!==(Pt=(e(W),r(()=>e(W).materia)))&&(Me.value=(Me.__value=(e(W),r(()=>e(W).materia)))??"")}),u(O,Me)});var f=a(Ue,2),M=o(f),K=a(M,2),Q=o(K),je=o(Q);Q.value=Q.__value="";var ut=a(Q);xe(ut,1,()=>(e(V),r(()=>[...new Set(e(V).map(O=>O.grado.toString()))])),Ae,(O,W)=>{var le=El(),Me=o(le),lt={};D(Pt=>{h(Me,Pt),lt!==(lt=e(W))&&(le.value=(le.__value=e(W))??"")},[()=>(e(W),r(()=>e(W).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),u(O,le)});var Ft=a(ze,2),me=o(Ft),Xt=a(me,2),wt=o(Xt);wt.value=wt.__value="";var jt=a(wt);xe(jt,0,()=>[1,2,3,4],Ae,(O,W)=>{var le=Dl(),Me=o(le),lt={};D(Pt=>{h(Me,`${W??""} ${W===1?"Hora":"Horas"}`),lt!==(lt=Pt)&&(le.value=(le.__value=Pt)??"")},[()=>r(()=>W.toString())]),u(O,le)});var er=a(Ft,2),Rt=o(er);kl(Rt,{get selectedDiarioAnots(){return e(s)},set selectedDiarioAnots(O){d(s,O)},$$legacy:!0});var vt=a(er,2),St=o(vt),Mt=o(St);{var Lt=O=>{var W=Bl();u(O,W)},$t=O=>{var W=zl();u(O,W)};Z(Mt,O=>{e(S)?O(Lt):O($t,!1)})}D(()=>{l(Xe,`background-color: ${e(t),r(()=>e(t).bg)??""};`),l(He,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),dt(de,"src",Kr),l(ke,`color: ${e(t),r(()=>e(t).text)??""};`),l(Ne,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(De,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),l(se,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),h(Ge,v()),l(ct,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),l(F,`color: ${e(t),r(()=>e(t).label)??""};`),l(ne,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""}; color-scheme: ${v()==="light"?"light":"dark"};`),l(y,`color: ${e(t),r(()=>e(t).label)??""};`),l($e,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),h(G,e(q)?"Cargando...":"Seleccione docente"),l(Fe,`color: ${e(t),r(()=>e(t).label)??""};`),l(At,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),h(zt,e(j)?"Cargando...":"Seleccione asignatura"),l(M,`color: ${e(t),r(()=>e(t).label)??""};`),l(K,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),h(je,e(R)?"Cargando...":"Seleccione grado"),l(me,`color: ${e(t),r(()=>e(t).label)??""};`),l(Xt,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),St.disabled=e(S)||!e(ue),dt(St,"title",e(ue)?"Guardar Diario de Campo":"Complete todos los campos requeridos")}),U("click",Ne,ce),U("click",De,function(...O){Te()?.apply(this,O)}),U("click",se,Ze),cr(ne,()=>e(i).fecha,O=>(ae(i,e(i).fecha=O),_e(()=>{e(t),e(q),e(E),e(j),e(I),e(w),e(R),e(V)}))),at($e,()=>e(i).docente,O=>(ae(i,e(i).docente=O),_e(()=>{e(t),e(q),e(E),e(j),e(I),e(w),e(R),e(V)}))),at(At,()=>e(i).materia,O=>(ae(i,e(i).materia=O),_e(()=>{e(t),e(q),e(E),e(j),e(I),e(w),e(R),e(V)}))),at(K,()=>e(i).grado,O=>(ae(i,e(i).grado=O),_e(()=>{e(t),e(q),e(E),e(j),e(I),e(w),e(R),e(V)}))),at(Xt,()=>e(i).horas,O=>(ae(i,e(i).horas=O),_e(()=>{e(t),e(q),e(E),e(j),e(I),e(w),e(R),e(V)}))),U("submit",B,Qe),u(N,Xe),Ir(),b()}var Tl=_('<div class="w-full h-screen flex flex-col bg-[rgb(var(--bg-primary))]"><div class="h-16 flex items-center justify-between px-6 border-b transition-colors duration-200" style="background-color: rgb(var(--card-bg)); border-color: rgb(var(--card-border));"><button class="flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 font-medium" style="color: rgb(var(--text-primary));"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> Volver al Dashboard</button> <h2 class="text-lg font-bold" style="color: rgb(var(--text-primary));">Horas Laborables</h2> <div class="w-10"></div></div> <iframe src="https://ceslep.github.io/horas_laborables" title="Horas Laborables" class="flex-1 w-full border-none"></iframe></div>'),Ol=_('<main class="w-full min-h-screen"><!></main>');function Nl(N){let k=m("dashboard");const v=V=>{d(k,V)},fe=()=>{d(k,"dashboard")};var b=Ol(),I=o(b);{var t=V=>{ea(V,{onSelect:v})},ue=V=>{hs(V,{onBack:fe})},Te=V=>{bl(V,{onBack:fe})},E=V=>{Ml(V,{onBack:fe})},oe=V=>{var q=Tl(),j=o(q),R=o(j);U("click",R,fe),u(V,q)};Z(I,V=>{e(k)==="dashboard"?V(t):e(k)==="inasistencia"?V(ue,1):e(k)==="anotador"?V(Te,2):e(k)==="diario"?V(E,3):e(k)==="horas_laborables"&&V(oe,4)})}u(N,b)}Po(Nl,{target:document.getElementById("app")});
