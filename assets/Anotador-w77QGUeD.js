import{p as Oo,a as so,n as h,o as xo,l as U,j as g,u as e,b as To,i as Mo,s as l,d as W,t as B,h as H,e as k,g as Bo,M as te,N as ve,m as r,f as mo,v as t,A as he,F as xe,O as ir,P as Pe,Q as St,k as E,x as c,y as A,D as Le,r as et,q as je,R as zt,T as Qo,H as dt,C as cr,z as dr,Y as Wo,c as vr,U as gr,B as pr,Z as br,_ as ur}from"./svelte-CFZEjrxY.js";import{S as Et}from"./ui-CHfsb5jC.js";import{d as Zo,e as Ro,f as _o,a as Lo,b as jo,c as Po,L as Ko,h as Fo,i as fr,j as hr}from"./Loader-DZc-WlDL.js";import{e as Xo,F as xr,t as qo}from"./index-V3ObqOX8.js";import{_ as Jo}from"./pdf-CBBHH09D.js";var mr=E('<div class="flex-1 flex items-center justify-center"><div class="text-center"><div class="animate-spin w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full mx-auto mb-4"></div> <p>Cargando datos...</p></div></div>'),_r=E('<span class="ml-2 px-2 py-1 text-xs bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full">Activos</span>'),yr=E("<option> </option>"),kr=E("<option> </option>"),wr=E('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">Este docente no tiene registros de materias</p>'),Cr=E("<option> </option>"),Ar=E('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">No hay grados para los filtros seleccionados</p>'),$r=E('<div class="flex-1 flex items-center justify-center"><div class="text-center py-12 px-4"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm sm:text-base">No se encontraron registros con los filtros seleccionados</p></div></div>'),Ir=E('<tr class="border-b transition-colors hover:bg-black/5 dark:hover:bg-white/5 text-xs"><td class="p-2"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 text-center"> </td><td class="p-2 text-center"> </td><td class="p-2"><div class="flex items-center gap-2 max-w-[300px]"><span><span> </span></span> <span class="truncate"> </span></div></td><td class="p-2"><span class="truncate block max-w-xs text-xs"> </span></td></tr>'),Er=E('<div><p class="text-xs font-medium mb-1">Observaci√≥n:</p> <p class="text-xs"> </p></div>'),Sr=E('<div class="border rounded-lg p-3 transition-colors hover:bg-black/5 dark:hover:bg-white/5"><div class="flex justify-between items-center mb-2"><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><span><span> </span></span> <p class="text-xs opacity-75"> </p></div></div></div> <div class="flex gap-2 text-[10px] mb-2"><div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="truncate"> </span></div> <div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <span class="truncate"> </span></div></div> <div class="mb-2"><p class="text-xs font-medium mb-1">Anotaci√≥n:</p> <p class="text-xs"> </p></div> <!></div>'),zr=E('<div class="hidden lg:flex flex-1 flex-col overflow-hidden min-h-0"><div class="flex-1 overflow-auto min-w-full border rounded-lg"><table class="w-full border-collapse text-sm min-w-[900px]"><thead class="sticky top-0 z-10 border-b"><tr><th class="text-left p-2 font-semibold whitespace-nowrap">Fecha</th><th class="text-left p-2 font-semibold whitespace-nowrap">Docente</th><th class="text-left p-2 font-semibold whitespace-nowrap">Materia</th><th class="text-center p-2 font-semibold whitespace-nowrap">Grado</th><th class="text-center p-2 font-semibold whitespace-nowrap">Horas</th><th class="text-left p-2 font-semibold whitespace-nowrap">Anotaci√≥n</th><th class="text-left p-2 font-semibold whitespace-nowrap">Observaci√≥n</th></tr></thead><tbody></tbody></table></div></div> <div class="flex-1 overflow-y-auto lg:hidden px-1"><div class="space-y-2"></div></div>',1),Dr=E('<div class="p-3 sm:p-4 border-b"><div class="flex items-center justify-between mb-2 sm:mb-3"><h3 class="text-lg font-semibold">Filtros <!></h3> <button class="text-sm px-3 py-1 rounded-lg border transition-colors hover:bg-black/5 dark:hover:bg-white/5">Limpiar filtros</button></div> <div class="mb-3 p-1.5 sm:p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg"><p class="text-[10px] sm:text-xs font-medium mb-1.5">R√°pido: Fechas</p> <div class="flex items-center mb-2"><input id="checkFiltrarFecha" type="checkbox" class="w-4 h-4 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 dark:bg-zinc-700"/> <label for="checkFiltrarFecha" class="ml-2 text-xs font-medium">Activar filtro por fechas</label></div> <div class="flex flex-wrap gap-1 sm:gap-2"><button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Hoy</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 7 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 30 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Mes actual</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimo trimestre</button></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"><div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroDocente" class="block text-xs sm:text-sm font-medium">Docente</label> <select id="filtroDocente" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option>Todos los docentes</option><!></select></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroMateria" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroMateria" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroGrado" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroGrado" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroAnotacion" class="block text-xs sm:text-sm font-medium">B√∫squeda en anotaci√≥n</label> <input id="filtroAnotacion" type="text" placeholder="Buscar en anotaciones..." class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"/></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaInicio" class="block text-xs sm:text-sm font-medium">Fecha desde</label> <input id="filtroFechaInicio" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaFin" class="block text-xs sm:text-sm font-medium">Fecha hasta</label> <input id="filtroFechaFin" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div></div></div></div> <div class="flex-1 flex flex-col p-2 sm:p-4 min-h-0"><div class="mb-4 px-0 sm:px-3"><p class="text-sm">Se encontraron <span class="font-bold text-indigo-500"> </span> registros</p></div> <!></div>',1),Nr=E('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4" role="button" tabindex="0" aria-label="Cerrar ventana"><div class="w-full max-w-7xl max-h-[95vh] bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl overflow-hidden flex flex-col"><div class="flex items-center justify-between p-3 sm:p-4 border-b"><div class="flex items-center gap-3"><img alt="EIE Logo" class="h-8 w-auto hidden sm:block"/> <div><h2 class="text-lg sm:text-xl font-bold">Anotaciones de Clase</h2> <p class="text-xs hidden sm:block">Filtra y consulta los registros</p></div></div> <div class="flex items-center gap-3"><button class="inline-flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Exportar CSV</button> <button class="p-2 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5" aria-label="Cerrar"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div> <div class="flex-1 overflow-hidden flex flex-col min-h-0"><!></div></div></div>');function Fr(Jt,Ne){Oo(Ne,!1);const q=h(),Fe=h(),oe=h(),le=h(),o=h();let u=so(Ne,"onClose",8),F=so(Ne,"selectedDocente",8,""),s=h([]),ye=[],tt=[],vt=[],ne=h(!1),Q=h(!1),O=h([]),i=h({docente:F()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",anotacion:""});const ee=()=>{const b=new Date,C=new Date(b.getFullYear(),b.getMonth()-1,b.getDate()),N=T=>{const re=T.getFullYear(),J=String(T.getMonth()+1).padStart(2,"0"),Se=String(T.getDate()).padStart(2,"0");return`${re}-${J}-${Se}`};te(i,e(i).fechaInicio=N(C)),ve(()=>{e(o),e(m),e(q),e(oe)}),te(i,e(i).fechaFin=N(b)),ve(()=>{e(o),e(m),e(q),e(oe)})},ie=b=>{const C=new Date;let N;switch(b){case"hoy":N=new Date(C);break;case"semana":N=new Date(C),N.setDate(C.getDate()-7);break;case"mes":N=new Date(C),N.setDate(C.getDate()-30);break;case"mes_actual":N=new Date(C.getFullYear(),C.getMonth(),1);break;case"trimestre":N=new Date(C),N.setDate(C.getDate()-90);break;default:ee();return}const T=re=>{const J=re.getFullYear(),Se=String(re.getMonth()+1).padStart(2,"0"),Me=String(re.getDate()).padStart(2,"0");return`${J}-${Se}-${Me}`};te(i,e(i).fechaInicio=T(N)),ve(()=>{e(o),e(m),e(q),e(oe)}),te(i,e(i).fechaFin=T(C)),ve(()=>{e(o),e(m),e(q),e(oe)}),g(Q,!0)},ke=[{value:"Estrategias de Ense√±anza-Aprendizaje",icon:"üìö",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},{value:"Evaluaci√≥n y Verificaci√≥n de Saberes",icon:"üìù",color:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200"},{value:"Enfoque STEM+ y Contexto Rural",icon:"üî¨",color:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200"},{value:"Pr√°cticas de Laboratorio y Mantenimiento",icon:"üîß",color:"bg-rose-100 text-rose-800 dark:bg-rose-900 dark:text-rose-200"},{value:"Ciudadan√≠a Digital y √âtica",icon:"üíª",color:"bg-violet-100 text-violet-800 dark:bg-violet-900 dark:text-violet-200"},{value:"Pensamiento Computacional y Programaci√≥n",icon:"üíª",color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"},{value:"Recursos Anal√≥gicos y Contingencias",icon:"üìã",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},{value:"Ofim√°tica y Competencias Productivas",icon:"üñ•Ô∏è",color:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200"},{value:"Gesti√≥n Administrativa y Proyectos Transversales",icon:"üìä",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}],R=b=>{for(const C of ke)if(b.includes(C.value))return C;return{icon:"üìù",color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};let m=h([]),z=h([]),L=h([]),we=h([]);const Ge=async()=>{g(ne,!0);try{const[b,C,N,T]=await Promise.all([Zo({spreadsheetId:_o,worksheetTitle:Ro}),Lo(),jo(),Po()]),re=$=>{if(!$?.records||!Array.isArray($.records))return[];const ze=$.records[0]?.values||[];return $.records.slice(1).map(be=>{const se=be.values||[];return{timestamp:se[0]||"",fecha:se[1]||"",docente:se[2]||"",materia:se[3]||"",grado:se[4]||"",horas:se[5]||"",anotacion:se[6]||"",observacion:se[7]||""}}).filter(be=>be.docente&&be.fecha)},J=$=>Array.isArray($)?$:$?.data&&Array.isArray($.data)?$.data:$?.rows&&Array.isArray($.rows)?$.rows:$?.values&&Array.isArray($.values)?$.values:$?.anotaciones&&Array.isArray($.anotaciones)?$.anotaciones:[];g(s,re(b)),ye=J(C),tt=J(N),vt=J(T),g(m,e(s).length>0?[...new Set(e(s).map($=>$.docente).filter(Boolean))].sort():[]),g(z,e(s).length>0?[...new Set(e(s).map($=>$.materia).filter(Boolean))].sort():[]);const Se=[...new Set(vt.map($=>(typeof $=="string"?$:$.grado||"").toString()).filter(Boolean))],Me=e(s).length>0?e(s).map($=>$.grado).filter(Boolean):[];g(L,[...new Set([...Se,...Me])].sort(($,ze)=>{const Be=parseInt($),be=parseInt(ze);return!isNaN(Be)&&!isNaN(be)?Be-be:$.localeCompare(ze)})),g(we,e(s).length>0?[...new Set(e(s).map($=>$.anotacion).filter(Boolean))].sort():[]),ee(),console.log("Datos cargados:",{anotaciones:e(s).length,docentes:ye.length,docentesUnicos:e(m).length,materiasUnicas:e(z).length,gradosUnicos:e(L).length,anotacionesUnicas:e(we).length})}catch(b){console.error("Error cargando datos:",b),await Et.fire({icon:"error",title:"Error",text:"No se pudieron cargar los datos de anotaciones",confirmButtonColor:"#ef4444"})}finally{g(ne,!1)}},gt=()=>{g(i,{docente:F()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",anotacion:""}),ee(),g(Q,!1)},Qt=()=>{if(e(O).length===0){Et.fire({icon:"warning",title:"Sin datos",text:"No hay datos para exportar",confirmButtonColor:"#f59e0b"});return}const C=[["Fecha","Docente","Materia","Grado","Horas","Anotaci√≥n","Observaci√≥n"].join(","),...e(O).map(J=>[J.fecha,`"${J.docente}"`,`"${J.materia}"`,J.grado,J.horas,`"${J.anotacion}"`,`"${J.observacion}"`].join(","))].join(`
`),N=new Blob([C],{type:"text/csv;charset=utf-8;"}),T=document.createElement("a"),re=URL.createObjectURL(N);T.setAttribute("href",re),T.setAttribute("download",`anotaciones_${new Date().toISOString().split("T")[0]}.csv`),T.style.visibility="hidden",document.body.appendChild(T),T.click(),document.body.removeChild(T)},Dt=b=>{try{const[C,N,T]=b.split("-");return C&&N&&T?`${T}/${N}/${C}`:b}catch{return b}},pt=(b,C=50)=>b.length<=C?b:b.substring(0,C)+"...";xo(()=>{Ge()}),U(()=>(e(i),e(s),e(z)),()=>{g(q,e(i).docente?[...new Set(e(s).filter(b=>b.docente===e(i).docente).map(b=>b.materia).filter(Boolean))].sort():e(z))}),U(()=>(e(i),e(s),e(L)),()=>{g(Fe,e(i).docente?[...new Set(e(s).filter(b=>b.docente===e(i).docente).map(b=>b.grado).filter(Boolean))].sort((b,C)=>{const N=parseInt(b),T=parseInt(C);return!isNaN(N)&&!isNaN(T)?N-T:b.localeCompare(C)}):e(L))}),U(()=>(e(i),e(s),e(Fe)),()=>{g(oe,e(i).materia?[...new Set(e(s).filter(b=>b.materia===e(i).materia).map(b=>b.grado).filter(Boolean))].sort((b,C)=>{const N=parseInt(b),T=parseInt(C);return!isNaN(N)&&!isNaN(T)?N-T:b.localeCompare(C)}):e(Fe))}),U(()=>(e(i),e(s),e(we)),()=>{g(le,e(i).docente||e(i).materia||e(i).grado?[...new Set(e(s).filter(b=>!(e(i).docente&&b.docente!==e(i).docente||e(i).materia&&b.materia!==e(i).materia||e(i).grado&&b.grado!==e(i).grado)).map(b=>b.anotacion).filter(Boolean))].sort():e(we))}),U(()=>{},()=>{g(o,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),U(()=>(e(s),e(i),e(Q)),()=>{g(O,e(s).filter(b=>{if(e(i).docente&&b.docente!==e(i).docente||e(i).materia&&b.materia!==e(i).materia||e(i).grado&&b.grado!==e(i).grado||e(i).anotacion&&!b.anotacion.toLowerCase().includes(e(i).anotacion.toLowerCase()))return!1;if(e(Q)){const C=b.fecha;if(e(i).fechaInicio&&C<e(i).fechaInicio||e(i).fechaFin&&C>e(i).fechaFin)return!1}return!0}))}),U(()=>(e(Q),e(i)),()=>{e(Q)&&(!e(i).fechaInicio||!e(i).fechaFin)&&ee()}),To(),Mo();var ge=Nr(),bt=r(ge),d=r(bt),V=r(d),Nt=r(V),ut=l(Nt,2),ot=r(ut),Ft=l(ot,2),Oe=l(V,2),D=r(Oe),Te=l(D,2),ft=l(d,2),ht=r(ft);{var Ot=b=>{var C=mr(),N=r(C),T=l(r(N),2);B(()=>c(T,`color: ${e(o),t(()=>e(o).text)??""};`)),k(b,C)},xt=b=>{var C=Dr(),N=mo(C),T=r(N),re=r(T),J=l(r(re));{var Se=I=>{var G=_r();k(I,G)};W(J,I=>{e(i),t(()=>e(i).docente||e(i).materia||e(i).grado||e(i).anotacion||e(i).fechaInicio||e(i).fechaFin)&&I(Se)})}var Me=l(re,2),$=l(T,2),ze=r($),Be=l(ze,2),be=r(Be),se=l(be,2),rt=l(Be,2),at=r(rt),st=l(at,2),He=l(st,2),mt=l(He,2),Tt=l(mt,2),_t=l($,2),Ue=r(_t),Mt=r(Ue),Bt=r(Mt),Ve=l(Bt,2),n=r(Ve);n.value=n.__value="";var p=l(n);he(p,1,()=>e(m),xe,(I,G)=>{var X=yr(),_e=r(X),ue={};B(()=>{A(_e,e(G)),ue!==(ue=e(G))&&(X.value=(X.__value=e(G))??"")}),k(I,X)});var _=l(Mt,2),w=r(_),Z=r(w),ae=l(w,2),pe=r(ae),Re=r(pe);pe.value=pe.__value="";var Rt=l(pe);he(Rt,1,()=>e(q),xe,(I,G)=>{var X=kr(),_e=r(X),ue={};B(()=>{A(_e,e(G)),ue!==(ue=e(G))&&(X.value=(X.__value=e(G))??"")}),k(I,X)});var Ye=l(ae,2);{var P=I=>{var G=wr();k(I,G)};W(Ye,I=>{e(i),e(q),t(()=>e(i).docente&&e(q).length===0)&&I(P)})}var Lt=l(Ue,2),yt=r(Lt),Ce=r(yt),K=r(Ce),me=l(Ce,2),Ae=r(me),We=r(Ae);Ae.value=Ae.__value="";var qe=l(Ae);he(qe,1,()=>e(oe),xe,(I,G)=>{var X=Cr(),_e=r(X),ue={};B(()=>{A(_e,e(G)),ue!==(ue=e(G))&&(X.value=(X.__value=e(G))??"")}),k(I,X)});var lt=l(me,2);{var Je=I=>{var G=Ar();k(I,G)};W(lt,I=>{e(i),e(oe),t(()=>(e(i).docente||e(i).materia)&&e(oe).length===0)&&I(Je)})}var Qe=l(yt,2),jt=r(Qe),Pt=l(jt,2),Gt=l(Lt,2),kt=r(Gt),wt=r(kt),nt=l(wt,2),yo=l(kt,2),lo=r(yo),Ht=l(lo,2),no=l(N,2),Zt=r(no),Ct=r(Zt),Ut=l(r(Ct)),ko=r(Ut),wo=l(Zt,2);{var Co=I=>{var G=$r(),X=r(G),_e=r(X),ue=l(_e,2);B(()=>{c(_e,`color: ${e(o),t(()=>e(o).icon)??""};`),c(ue,`color: ${e(o),t(()=>e(o).text)??""};`)}),k(I,G)},io=I=>{var G=zr(),X=mo(G),_e=r(X),ue=r(_e),Vt=r(ue),Kt=r(Vt),Xt=r(Kt),co=l(Xt),vo=l(co),go=l(vo),po=l(go),bo=l(po),uo=l(bo),Ao=l(Vt);he(Ao,5,()=>e(O),xe,(Yt,y)=>{const $e=zt(()=>(e(y),t(()=>R(e(y).anotacion))));var Ze=Ir(),Ke=r(Ze),eo=r(Ke),it=l(Ke),At=r(it),Xe=l(it),to=r(Xe),ct=l(Xe),oo=r(ct),a=l(ct),v=r(a),f=l(a),x=r(f),M=r(x),S=r(M),Y=r(S),ce=l(M,2),j=r(ce),De=l(f),Wt=r(De),$t=r(Wt);B((qt,Ie)=>{c(Ze,`border-color: ${e(o),t(()=>e(o).border)??""};`),c(Ke,`color: ${e(o),t(()=>e(o).text)??""};`),A(eo,qt),c(it,`color: ${e(o),t(()=>e(o).text)??""};`),Le(it,"title",(e(y),t(()=>e(y).docente))),A(At,(e(y),t(()=>e(y).docente))),c(Xe,`color: ${e(o),t(()=>e(o).text)??""};`),Le(Xe,"title",(e(y),t(()=>e(y).materia))),A(to,(e(y),t(()=>e(y).materia))),c(ct,`color: ${e(o),t(()=>e(o).text)??""};`),A(oo,(e(y),t(()=>e(y).grado))),c(a,`color: ${e(o),t(()=>e(o).text)??""};`),A(v,(e(y),t(()=>e(y).horas))),c(f,`color: ${e(o),t(()=>e(o).text)??""};`),et(M,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${je(e($e)),t(()=>e($e).color)??""} flex-shrink-0`),A(Y,(je(e($e)),t(()=>e($e).icon))),Le(ce,"title",(e(y),t(()=>e(y).anotacion))),A(j,Ie),c(De,`color: ${e(o),t(()=>e(o).text)??""};`),A($t,(e(y),t(()=>e(y).observacion||"-")))},[()=>(e(y),t(()=>Dt(e(y).fecha))),()=>(e(y),t(()=>pt(e(y).anotacion,100)))]),k(Yt,Ze)});var $o=l(X,2),Io=r($o);he(Io,5,()=>e(O),xe,(Yt,y)=>{const $e=zt(()=>(e(y),t(()=>R(e(y).anotacion))));var Ze=Sr(),Ke=r(Ze),eo=r(Ke),it=r(eo),At=r(it),Xe=r(At),to=r(Xe),ct=l(At,2),oo=r(ct),a=l(Ke,2),v=r(a),f=l(r(v),2),x=r(f),M=l(v,2),S=l(r(M),2),Y=r(S),ce=l(a,2),j=r(ce),De=l(j,2),Wt=r(De),$t=l(ce,2);{var qt=Ie=>{var It=Er(),fo=r(It),ro=l(fo,2),Eo=r(ro);B(So=>{c(fo,`color: ${e(o),t(()=>e(o).label)??""};`),c(ro,`color: ${e(o),t(()=>e(o).text)??""};`),Le(ro,"title",(e(y),t(()=>e(y).observacion))),A(Eo,So)},[()=>(e(y),t(()=>pt(e(y).observacion,150)))]),k(Ie,It)};W($t,Ie=>{e(y),t(()=>e(y).observacion)&&Ie(qt)})}B((Ie,It)=>{c(Ze,`border-color: ${e(o),t(()=>e(o).cardBorder)??""}; background-color: ${e(o),t(()=>e(o).cardBg)??""};`),et(At,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium ${je(e($e)),t(()=>e($e).color)??""} flex-shrink-0`),A(to,(je(e($e)),t(()=>e($e).icon))),c(ct,`color: ${e(o),t(()=>e(o).label)??""};`),A(oo,`${e(y),t(()=>e(y).grado)??""} ‚Ä¢ ${Ie??""} ‚Ä¢ ${e(y),t(()=>e(y).horas)??""}h`),c(a,`color: ${e(o),t(()=>e(o).text)??""};`),A(x,(e(y),t(()=>e(y).docente))),Le(S,"title",(e(y),t(()=>e(y).materia))),A(Y,(e(y),t(()=>e(y).materia))),c(j,`color: ${e(o),t(()=>e(o).label)??""};`),c(De,`color: ${e(o),t(()=>e(o).text)??""};`),Le(De,"title",(e(y),t(()=>e(y).anotacion))),A(Wt,It)},[()=>(e(y),t(()=>Dt(e(y).fecha))),()=>(e(y),t(()=>pt(e(y).anotacion,150)))]),k(Yt,Ze)}),B(()=>{c(_e,`border-color: ${e(o),t(()=>e(o).cardBorder)??""};`),c(Vt,`background-color: ${e(o),t(()=>e(o).cardBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""};`),c(Xt,`color: ${e(o),t(()=>e(o).text)??""};`),c(co,`color: ${e(o),t(()=>e(o).text)??""};`),c(vo,`color: ${e(o),t(()=>e(o).text)??""};`),c(go,`color: ${e(o),t(()=>e(o).text)??""};`),c(po,`color: ${e(o),t(()=>e(o).text)??""};`),c(bo,`color: ${e(o),t(()=>e(o).text)??""};`),c(uo,`color: ${e(o),t(()=>e(o).text)??""};`)}),k(I,G)};W(wo,I=>{e(O),t(()=>e(O).length===0)?I(Co):I(io,!1)})}B(()=>{c(N,`border-color: ${e(o),t(()=>e(o).cardBorder)??""};`),c(re,`color: ${e(o),t(()=>e(o).text)??""};`),c(Me,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),c(ze,`color: ${e(o),t(()=>e(o).text)??""};`),c(se,`color: ${e(o),t(()=>e(o).text)??""};`),c(at,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),c(st,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),c(He,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),c(mt,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),c(Tt,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),c(Bt,`color: ${e(o),t(()=>e(o).label)??""};`),c(Ve,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),c(w,`color: ${e(o),t(()=>e(o).label)??""};`),A(Z,`Materia ${e(i),t(()=>e(i).docente?"(del docente)":"")??""}`),c(ae,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),A(Re,(e(i),t(()=>e(i).docente?"Todas las materias del docente":"Todas las materias"))),c(Ce,`color: ${e(o),t(()=>e(o).label)??""};`),A(K,`Grado ${e(i),t(()=>e(i).docente||e(i).materia?"(filtrado)":"")??""}`),c(me,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),A(We,(e(i),t(()=>e(i).docente||e(i).materia?"Todos los grados filtrados":"Todos los grados"))),c(jt,`color: ${e(o),t(()=>e(o).label)??""};`),c(Pt,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),c(wt,`color: ${e(o),t(()=>e(o).label)??""};`),nt.disabled=!e(Q),c(nt,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),c(lo,`color: ${e(o),t(()=>e(o).label)??""};`),Ht.disabled=!e(Q),c(Ht,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),c(Ct,`color: ${e(o),t(()=>e(o).label)??""};`),A(ko,(e(O),t(()=>e(O).length)))}),H("click",Me,gt),ir(be,()=>e(Q),I=>g(Q,I)),H("click",at,()=>ie("hoy")),H("click",st,()=>ie("semana")),H("click",He,()=>ie("mes")),H("click",mt,()=>ie("mes_actual")),H("click",Tt,()=>ie("trimestre")),Pe(Ve,()=>e(i).docente,I=>(te(i,e(i).docente=I),ve(()=>{e(o),e(m),e(q),e(oe)}))),Pe(ae,()=>e(i).materia,I=>(te(i,e(i).materia=I),ve(()=>{e(o),e(m),e(q),e(oe)}))),Pe(me,()=>e(i).grado,I=>(te(i,e(i).grado=I),ve(()=>{e(o),e(m),e(q),e(oe)}))),St(Pt,()=>e(i).anotacion,I=>(te(i,e(i).anotacion=I),ve(()=>{e(o),e(m),e(q),e(oe)}))),St(nt,()=>e(i).fechaInicio,I=>(te(i,e(i).fechaInicio=I),ve(()=>{e(o),e(m),e(q),e(oe)}))),St(Ht,()=>e(i).fechaFin,I=>(te(i,e(i).fechaFin=I),ve(()=>{e(o),e(m),e(q),e(oe)}))),k(b,C)};W(ht,b=>{e(ne)?b(Ot):b(xt,!1)})}B(()=>{c(bt,`background-color: ${e(o),t(()=>e(o).cardBg)??""};`),c(d,`border-color: ${e(o),t(()=>e(o).cardBorder)??""};`),Le(Nt,"src",Xo),c(ot,`color: ${e(o),t(()=>e(o).text)??""};`),c(Ft,`color: ${e(o),t(()=>e(o).label)??""};`),D.disabled=(e(O),t(()=>e(O).length===0)),c(Te,`color: ${e(o),t(()=>e(o).text)??""};`)}),H("click",D,Qt),H("click",Te,function(...b){u()?.apply(this,b)}),H("click",ge,Qo(function(...b){u()?.apply(this,b)})),H("keydown",ge,b=>{(b.key==="Enter"||b.key===" ")&&u()()}),k(Jt,ge),Bo()}var Or=E("<option> </option>"),Tr=E("<option> </option>"),Mr=E("<option> </option>"),Br=dt('<svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Cargando...',1),Rr=dt('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> Aplicar Filtros',1),Lr=E('<div class="text-sm opacity-75"> </div>'),jr=E('<div class="flex items-center justify-center py-12"><!></div>'),Pr=E('<div class="text-center py-12"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v2a2 2 0 002 2h6a2 2 0 002-2v-2M9 17H5a2 2 0 01-2-2v-6a2 2 0 012-2h4M9 7V5a2 2 0 012-2h6a2 2 0 012 2v2M9 7h10a2 2 0 012 2v6a2 2 0 01-2 2H9M9 7V17m0 0h10"></path></svg> <p class="text-lg font-medium mb-2">No hay datos disponibles</p> <p class="text-sm"> </p></div>'),Gr=E('<tr class="border-t transition-colors hover:bg-gray-50 dark:hover:bg-gray-800"><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"><div class="truncate"> </div></td><td class="px-4 py-3 text-sm"><div class="truncate"> </div></td></tr>'),Hr=E('<tr class="border-t-2 font-bold bg-gray-100 dark:bg-gray-800"><td class="px-4 py-3 text-sm font-bold">TOTAL</td><td class="px-4 py-3 text-sm font-bold text-center"> </td><td class="px-4 py-3 text-sm font-bold text-center"></td><td class="px-4 py-3 text-sm font-bold text-center"> </td></tr>'),Ur=E('<div class="overflow-x-auto rounded-lg border"><table class="w-full"><thead><tr><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Fecha</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Horas</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Asignatura</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Anotaci√≥n</th></tr></thead><tbody><!><!></tbody></table></div>'),Vr=E('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-2xl" role="document"><div class="flex items-center justify-between p-6 border-b"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v2a2 2 0 002 2h6a2 2 0 002-2v-2M9 17H5a2 2 0 01-2-2v-6a2 2 0 012-2h4M9 7V5a2 2 0 012-2h6a2 2 0 012 2v2M9 7h10a2 2 0 012 2v6a2 2 0 01-2 2H9M9 7V17m0 0h10"></path></svg></div> <div><h2 id="modal-title" class="text-xl font-bold">Generador de Reportes PDF</h2> <p class="text-sm opacity-75">Filtre y genere reportes de anotaciones</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar ventana de reportes" title="Cerrar"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 140px);"><div class="mb-6 p-4 rounded-xl border"><h3 class="text-lg font-semibold mb-4">Filtros</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="space-y-2"><label for="docente-filter" class="block text-sm font-medium">Docente</label> <select id="docente-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los docentes</option><!></select></div> <div class="space-y-2"><label for="materia-filter" class="block text-sm font-medium">Asignatura</label> <select id="materia-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todas las asignaturas</option><!></select></div> <div class="space-y-2"><label for="grado-filter" class="block text-sm font-medium">Grado</label> <select id="grado-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los grados</option><!></select></div></div> <div class="flex gap-3 mt-4"><button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2"><!></button> <button class="px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> Limpiar</button> <button class="ml-auto px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Generar PDF</button></div></div> <div class="mb-4"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold"> </h3> <!></div></div> <!></div></div></div>');function Yr(Jt,Ne){Oo(Ne,!1);const q=h(),Fe=h(),oe=h(),le=h(),o=h(),u=h();let F=null,s=null,ye=so(Ne,"onClose",8),tt=so(Ne,"initialDocente",8,""),vt=h([]),ne=h([]),Q=h([]),O=[],i=h([]),ee=h(!1);const ie=async()=>{if(!F||!s){const[n,p]=await Promise.all([Jo(()=>import("./pdf-CBBHH09D.js").then(_=>_.j),[]),Jo(()=>import("./pdf-CBBHH09D.js").then(_=>_.b),[])]);F=n.default,s=p.default}};let ke=h(JSON.parse(localStorage.getItem("docenteMaterias")||"{}"));const R=n=>{const p=n.match(/-(\d+)$/);return p?p[1]:null};let m=h(""),z=h(""),L=h("");xo(()=>{tt()&&g(m,tt())}),xo(async()=>{console.log("üöÄ ReportGenerator montado"),await we()});const we=async()=>{try{const[n,p,_]=await Promise.all([Lo(),jo(),Po()]);g(vt,n),g(ne,p),g(Q,_),g(ke,JSON.parse(localStorage.getItem("docenteMaterias")||"{}"))}catch(n){console.error("Error cargando datos iniciales:",n)}},Ge=async()=>{g(ee,!0);try{const n={spreadsheetId:_o,worksheetTitle:Ro};e(m)&&(n.docente=e(m)),e(z)&&(n.materia=e(z)),e(L)&&(n.grado=e(L)),console.log("üîç Enviando payload a getAnotador:",n);const p=await Zo(n);console.log("üìä Respuesta de getAnotador:",p);let _=p;if(p&&typeof p=="object"&&(p.data?_=p.data:p.records?_=p.records:Array.isArray(p)&&(_=p)),O=Array.isArray(_)?_:[],console.log("‚úÖ Datos procesados:",O.length,"registros"),console.log("üîç Keys del primer registro:",O[0]?Object.keys(O[0]):"No hay registros"),O.length>0&&O[0].values){console.log("üîÑ Transformando datos desde formato .values");const w=["Marca Temporal","Fecha","Docente","Asignatura","Grado","Horas","Anotaci√≥n"];O=O.map(Z=>{const ae={"Marca Temporal":"",Fecha:"",Docente:"",Asignatura:"",Grado:"",Horas:"",Anotaci√≥n:""};return w.forEach((pe,Re)=>{ae[pe]=Z.values?.[Re]||""}),ae}),console.log("üìä Datos transformados:",O.length,"registros")}gt()}catch(n){if(console.error("‚ùå Error cargando datos del anotador:",n),n instanceof Error&&console.error("üìã Error details:",n.message),n&&typeof n=="object"&&"response"in n){const p=n.response;p&&(console.error("üåê Response status:",p.status),console.error("üåê Response data:",p.data))}O=[],g(i,[])}finally{g(ee,!1)}},gt=()=>{if(console.log("üîç Aplicando filtros locales:",{totalRegistros:O.length,isArray:Array.isArray(O),docente:e(m),materia:e(z),grado:e(L)}),!Array.isArray(O)){console.error("‚ùå anotadorData no es un array:",typeof O,O),g(i,[]);return}g(i,O.filter(n=>{if(!n||typeof n!="object")return console.log("‚ö†Ô∏è Registro inv√°lido:",n),!1;const p=!e(m)||n.Docente===e(m),_=!e(z)||n.Asignatura===e(z),w=!e(L)||n.Grado===e(L);return!p&&e(m)&&console.log("‚ùå No coincide docente:",{expected:e(m),actual:n.Docente}),!_&&e(z)&&console.log("‚ùå No coincide materia:",{expected:e(z),actual:n.Asignatura}),!w&&e(L)&&console.log("‚ùå No coincide grado:",{expected:e(L),actual:n.Grado}),p&&_&&w})),console.log("‚úÖ Registros filtrados:",e(i).length)},Qt=()=>{Ge()},Dt=()=>{g(m,""),g(z,""),g(L,""),O=[],g(i,[])},pt=async()=>{if(await ie(),e(i).length===0){alert("No hay datos para generar el PDF");return}const n=new F({format:"letter"}),p="Anotador de Clases",_=[];e(m)&&_.push(`Docente: ${e(m)}`),e(z)&&_.push(`Asignatura: ${e(z)}`),e(L)&&_.push(`Grado: ${e(L)}`);let w=20;try{console.log("üñºÔ∏è Intentando agregar logo EIE al PDF..."),n.setTextColor(99,102,241),n.setFontSize(28),n.setFont("helvetica","bold"),n.text("EIE",n.internal.pageSize.getWidth()/2,w,{align:"center"}),w+=15,console.log("‚úÖ Logo EIE (texto) agregado correctamente")}catch(P){console.log("‚ùå Error con logo EIE, usando fallback:",P),n.setTextColor(99,102,241),n.setFontSize(24),n.text("EIE",n.internal.pageSize.getWidth()/2,w,{align:"center"}),w+=15}n.setTextColor(0,0,0),n.setFontSize(18),n.setFont("helvetica","bold"),n.text(p,n.internal.pageSize.getWidth()/2,w,{align:"center"}),w+=12,n.setTextColor(0,0,0),n.setFontSize(12),n.setFont("helvetica","normal"),n.text("Instituci√≥n Educativa Instituto Gu√°tica",n.internal.pageSize.getWidth()/2,w,{align:"center"}),w+=10,n.setTextColor(60,60,60),n.setFontSize(10),n.setFont("helvetica","normal"),n.text(`Fecha de generaci√≥n: ${new Date().toLocaleDateString()}`,n.internal.pageSize.getWidth()/2,w,{align:"center"}),w+=15,n.setDrawColor(200,200,200),n.setLineWidth(1),n.line(20,w,n.internal.pageSize.getWidth()-20,w),w+=15,_.length>0&&(n.setTextColor(80,80,80),n.setFontSize(9),n.setFont("helvetica","normal"),_.forEach(P=>{n.text(P,20,w,{align:"left"}),w+=6}),w+=10);const Z=!e(L),ae=Z?[["Fecha","Horas","Asignatura","Grado","Anotaci√≥n"]]:[["Fecha","Horas","Asignatura","Anotaci√≥n"]],pe=e(i).map(P=>Z?[P.Fecha||"",P.Horas||"",P.Asignatura||"",P.Grado||"",P.Anotaci√≥n||""]:[P.Fecha||"",P.Horas||"",P.Asignatura||"",P.Anotaci√≥n||""]),Re=Z?["TOTAL",e(le).toFixed(1),"","",`${e(i).length} registros`]:["TOTAL",e(le).toFixed(1),"",`${e(i).length} registros`];pe.push(Re),console.log("üìä Generando PDF con:",{totalHoras:e(le),registros:e(i).length,filasTabla:pe.length,showGradoColumn:Z}),s(n,{head:ae,body:pe,startY:w,styles:{fontSize:7,cellPadding:1.5,cellWidth:"wrap",valign:"top",overflow:"linebreak"},headStyles:{fillColor:[99,102,241],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},bodyStyles:{fillColor:[255,255,255],textColor:[0,0,0]},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:Z?{0:{cellWidth:22,minCellHeight:8,halign:"center"},1:{cellWidth:15,minCellHeight:8,halign:"center"},2:{cellWidth:35,minCellHeight:8},3:{cellWidth:18,minCellHeight:8,halign:"center"},4:{cellWidth:"auto",minCellHeight:12}}:{0:{cellWidth:28,minCellHeight:8,halign:"center"},1:{cellWidth:18,minCellHeight:8,halign:"center"},2:{cellWidth:45,minCellHeight:8},3:{cellWidth:"auto",minCellHeight:12}},margin:{top:12,right:12,bottom:12,left:12},tableWidth:"auto",didParseCell:P=>{P.row.index===pe.length-1&&(P.cell.styles.fillColor=[230,230,230],P.cell.styles.fontStyle="bold",P.cell.styles.textColor=[0,0,0],P.cell.styles.halign="center")}});const Ye=`reporte_anotaciones_${e(m)||"todos"}_${e(z)||"todas"}_${e(L)||"todos"}_${new Date().toISOString().split("T")[0]}.pdf`;n.save(Ye),console.log("üíæ PDF guardado exitosamente:",Ye)};U(()=>e(m),()=>{g(q,e(m).includes("-"))}),U(()=>e(m),()=>{g(Fe,R(e(m)))}),U(()=>(e(Fe),e(Q)),()=>{g(oe,e(Fe)?[...new Set(e(Q).map(n=>n.grado.toString()))].filter(n=>n.startsWith(`${e(Fe)}-`)):[...new Set(e(Q).map(n=>n.grado.toString()))].filter(n=>!n.includes("-")))}),U(()=>e(i),()=>{g(le,e(i).reduce((n,p)=>{const _=parseFloat(p.Horas||"0");return n+(isNaN(_)?0:_)},0))}),U(()=>(e(m),e(ne),e(ke)),()=>{g(o,e(m)?[...e(ne)].sort((n,p)=>{const _=e(ke)[e(m)]?.includes(n.materia),w=e(ke)[e(m)]?.includes(p.materia);return _&&!w?-1:!_&&w?1:n.materia.localeCompare(p.materia)}):e(ne))}),U(()=>{},()=>{g(u,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),To(),Mo();var ge=Vr(),bt=r(ge),d=r(bt),V=l(r(d),2),Nt=l(d,2),ut=r(Nt),ot=l(r(ut),2),Ft=r(ot),Oe=r(Ft),D=l(Oe,2),Te=r(D);Te.value=Te.__value="";var ft=l(Te);he(ft,1,()=>e(vt),xe,(n,p)=>{var _=Or(),w=r(_),Z={};B(()=>{A(w,e(p)),Z!==(Z=e(p))&&(_.value=(_.__value=e(p))??"")}),k(n,_)});var ht=l(Ft,2),Ot=r(ht),xt=l(Ot,2),b=r(xt);b.value=b.__value="";var C=l(b);he(C,1,()=>e(o),xe,(n,p)=>{const _=zt(()=>(e(m),e(ke),e(p),t(()=>e(m)&&e(ke)[e(m)]?.includes(e(p).materia))));var w=Tr(),Z=r(w),ae={};B(()=>{c(w,e(_)?"color: #6366f1; font-weight: 600;":""),A(Z,`${e(_)?"‚≠ê ":""}${e(p),t(()=>e(p).materia)??""}`),ae!==(ae=(e(p),t(()=>e(p).materia)))&&(w.value=(w.__value=(e(p),t(()=>e(p).materia)))??"")}),k(n,w)});var N=l(ht,2),T=r(N),re=l(T,2),J=r(re);J.value=J.__value="";var Se=l(J);he(Se,1,()=>e(oe),xe,(n,p)=>{var _=Mr(),w=r(_),Z={};B(ae=>{A(w,ae),Z!==(Z=e(p))&&(_.value=(_.__value=e(p))??"")},[()=>(e(p),t(()=>e(p).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),k(n,_)});var Me=l(ot,2),$=r(Me),ze=r($);{var Be=n=>{var p=Br();k(n,p)},be=n=>{var p=Rr();k(n,p)};W(ze,n=>{e(ee)?n(Be):n(be,!1)})}var se=l($,2),rt=l(se,2),at=l(ut,2),st=r(at),He=r(st),mt=r(He),Tt=l(He,2);{var _t=n=>{var p=Lr(),_=r(p);B(()=>A(_,`${(e(m)&&`Docente: ${e(m)}`)??""}
              ${(e(z)&&` | Asignatura: ${e(z)}`)??""}
              ${(e(L)&&` | Grado: ${e(L)}`)??""}`)),k(n,p)};W(Tt,n=>{e(i),t(()=>e(i).length>0)&&n(_t)})}var Ue=l(at,2);{var Mt=n=>{var p=jr(),_=r(p);Ko(_,{message:"Cargando datos del anotador..."}),k(n,p)},Bt=n=>{var p=Pr(),_=l(r(p),4),w=r(_);B(()=>{c(p,`color: ${e(u),t(()=>e(u).placeholder)??""};`),A(w,e(m)||e(z)||e(L)?"No se encontraron registros con los filtros seleccionados. Intente con otros criterios.":"Seleccione filtros y haga clic en 'Aplicar Filtros' para cargar los datos.")}),k(n,p)},Ve=n=>{var p=Ur(),_=r(p),w=r(_),Z=r(w),ae=r(Z),pe=l(ae),Re=l(pe),Rt=l(Re),Ye=l(w),P=r(Ye);he(P,1,()=>e(i),xe,(Ce,K)=>{var me=Gr(),Ae=r(me),We=r(Ae),qe=l(Ae),lt=r(qe),Je=l(qe),Qe=r(Je),jt=r(Qe),Pt=l(Je),Gt=r(Pt),kt=r(Gt);B(()=>{c(me,`border-color: ${e(u),t(()=>e(u).border)??""};`),A(We,(e(K),t(()=>e(K).Fecha||"-"))),A(lt,(e(K),t(()=>e(K).Horas||"-"))),Le(Qe,"title",(e(K),t(()=>e(K).Asignatura))),A(jt,(e(K),t(()=>e(K).Asignatura||"-"))),Le(Gt,"title",(e(K),t(()=>e(K).Anotaci√≥n))),A(kt,(e(K),t(()=>e(K).Anotaci√≥n||"-")))}),k(Ce,me)});var Lt=l(P);{var yt=Ce=>{var K=Hr(),me=l(r(K)),Ae=r(me),We=l(me,2),qe=r(We);B(lt=>{c(K,`border-color: ${e(u),t(()=>e(u).border)??""}; border-top-width: 2px;`),A(Ae,lt),A(qe,`${e(i),t(()=>e(i).length)??""} registros`)},[()=>(e(le),t(()=>e(le).toFixed(1)))]),k(Ce,K)};W(Lt,Ce=>{e(i),t(()=>e(i).length>0)&&Ce(yt)})}B(()=>{c(p,`border-color: ${e(u),t(()=>e(u).border)??""};`),c(w,`background-color: ${e(u),t(()=>e(u).inputBg)??""};`),c(ae,`color: ${e(u),t(()=>e(u).label)??""};`),c(pe,`color: ${e(u),t(()=>e(u).label)??""};`),c(Re,`color: ${e(u),t(()=>e(u).label)??""};`),c(Rt,`color: ${e(u),t(()=>e(u).label)??""};`)}),k(n,p)};W(Ue,n=>{e(ee)?n(Mt):(e(i),t(()=>e(i).length===0)?n(Bt,1):n(Ve,!1))})}B(()=>{c(bt,`background-color: ${e(u),t(()=>e(u).cardBg)??""}; color: ${e(u),t(()=>e(u).text)??""};`),c(d,`border-color: ${e(u),t(()=>e(u).cardBorder)??""};`),c(ut,`background-color: ${e(u),t(()=>e(u).inputBg)??""}; border-color: ${e(u),t(()=>e(u).border)??""};`),c(Oe,`color: ${e(u),t(()=>e(u).label)??""};`),c(D,`background-color: ${e(u),t(()=>e(u).cardBg)??""}; border-color: ${e(u),t(()=>e(u).border)??""}; color: ${e(u),t(()=>e(u).text)??""};`),c(Ot,`color: ${e(u),t(()=>e(u).label)??""};`),c(xt,`background-color: ${e(u),t(()=>e(u).cardBg)??""}; border-color: ${e(u),t(()=>e(u).border)??""}; color: ${e(u),t(()=>e(u).text)??""};`),c(T,`color: ${e(u),t(()=>e(u).label)??""};`),c(re,`background-color: ${e(u),t(()=>e(u).cardBg)??""}; border-color: ${e(u),t(()=>e(u).border)??""}; color: ${e(u),t(()=>e(u).text)??""};`),$.disabled=e(ee),c(se,`color: ${e(u),t(()=>e(u).text)??""};`),rt.disabled=(e(i),t(()=>e(i).length===0)),A(mt,`Resultados (${e(i),t(()=>e(i).length)??""} registros)`)}),H("click",V,function(...n){ye()?.apply(this,n)}),Pe(D,()=>e(m),n=>g(m,n)),Pe(xt,()=>e(z),n=>g(z,n)),Pe(re,()=>e(L),n=>g(L,n)),H("click",$,Qt),H("click",se,Dt),H("click",rt,pt),H("click",ge,Qo(function(...n){ye()?.apply(this,n)})),H("keydown",ge,n=>n.key==="Escape"&&ye()()),k(Jt,ge),Bo()}var Wr=E('<div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping svelte-1p7gzb0"></div> <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full svelte-1p7gzb0"></div>',1),qr=dt('<svg class="w-5 h-5 text-indigo-500 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1p7gzb0"></path></svg>'),Jr=dt('<svg class="w-5 h-5 text-amber-500 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="svelte-1p7gzb0"></path></svg>'),Qr=dt('<svg class="w-5 h-5 text-indigo-400 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1p7gzb0"></path></svg>'),Zr=E('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-1p7gzb0"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0 svelte-1p7gzb0"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-1p7gzb0"></path></svg></div> <div class="flex-1 pr-6 pt-0.5 svelte-1p7gzb0"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100 svelte-1p7gzb0">Informaci√≥n</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200 svelte-1p7gzb0"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors svelte-1p7gzb0" aria-label="Cerrar alerta"><svg class="w-4 h-4 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-1p7gzb0"></path></svg></button></div>'),Kr=E('<option class="svelte-1p7gzb0"> </option>'),Xr=E('<option class="svelte-1p7gzb0"> </option>'),ea=E('<option class="svelte-1p7gzb0"> </option>'),ta=E('<option class="svelte-1p7gzb0"> </option>'),oa=E('<button class="absolute right-4 top-1/2 transform -translate-y-1/2 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors svelte-1p7gzb0" title="Limpiar b√∫squeda"><svg class="w-4 h-4 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-1p7gzb0"></path></svg></button>'),ra=E('<div class="text-center py-8 svelte-1p7gzb0"><svg class="w-12 h-12 mx-auto mb-4 opacity-50 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" class="svelte-1p7gzb0"></path></svg> <p class="text-sm svelte-1p7gzb0"> </p></div>'),aa=E('<div class="flex items-center justify-center py-12 svelte-1p7gzb0"><!></div>'),sa=E('<span class="ml-2 inline-block animate-bounce svelte-1p7gzb0">‚ú®</span>'),la=E('<span class="text-xs font-medium svelte-1p7gzb0"> </span>'),na=E('<div class="h-px flex-1 transition-all duration-300 group-hover:opacity-50 svelte-1p7gzb0"></div>'),ia=dt('<svg class="w-3 h-3 text-white svelte-1p7gzb0" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" class="svelte-1p7gzb0"></path></svg>'),ca=E('<div class="relative group flex flex-col p-0 rounded-2xl border transition-all duration-200 shadow-sm hover:shadow-md svelte-1p7gzb0"><div class="flex items-start gap-1 p-4 svelte-1p7gzb0"><label class="flex-shrink-0 cursor-pointer p-1 mt-1 svelte-1p7gzb0"><input type="checkbox" class="hidden svelte-1p7gzb0"/> <div class="w-5 h-5 rounded border flex items-center justify-center transition-colors cursor-pointer svelte-1p7gzb0"><!></div></label> <textarea rows="8" class="w-full bg-transparent border-none focus:ring-0 text-base font-medium leading-relaxed resize-none p-1 transition-colors min-h-[180px] pb-6 svelte-1p7gzb0" placeholder="Escriba aqu√≠..."></textarea></div></div>'),da=E('<div class="grid grid-cols-1 md:grid-cols-2 gap-4 svelte-1p7gzb0"></div>'),va=E('<div class="space-y-4 svelte-1p7gzb0"><button type="button" class="flex items-center gap-3 w-full text-left cursor-pointer group focus:outline-none svelte-1p7gzb0"><div class="flex items-center gap-3 flex-1 svelte-1p7gzb0"><h3> <!></h3> <!></div> <!> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" class="svelte-1p7gzb0"></path></svg></button> <!></div>'),ga=dt('<svg class="animate-spin h-7 w-7 text-white svelte-1p7gzb0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25 svelte-1p7gzb0" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75 svelte-1p7gzb0" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),pa=dt('<svg class="w-8 h-8 transform rotate-90 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" class="svelte-1p7gzb0"></path></svg>'),ba=E('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200 svelte-1p7gzb0"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40 svelte-1p7gzb0"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8 svelte-1p7gzb0"><div class="flex items-center gap-4 lg:flex-col svelte-1p7gzb0"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto svelte-1p7gzb0"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center svelte-1p7gzb0">Anotador de Clase</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full svelte-1p7gzb0"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Abrir hoja de c√°lculo"><svg class="w-5 h-5 svelte-1p7gzb0" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Hoja de C√°lculo</span></button> <button id="filter-button-target" class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Abrir filtros de anotaciones"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Filtros</span> <!></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Generar reportes PDF"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Reportes PDF</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Volver al Dashboard"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Dashboard</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full svelte-1p7gzb0" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize svelte-1p7gzb0"> </span></button></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto pb-32 svelte-1p7gzb0"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border svelte-1p7gzb0"><!> <!> <form novalidate="" class="space-y-6 svelte-1p7gzb0"><div class="grid grid-cols-1 md:grid-cols-3 gap-6 svelte-1p7gzb0"><div class="space-y-2 svelte-1p7gzb0"><label for="fecha" class="block text-sm font-medium svelte-1p7gzb0">Fecha</label> <input type="date" id="fecha" required=""/></div> <div class="space-y-2 svelte-1p7gzb0"><label for="docente" class="block text-sm font-medium svelte-1p7gzb0">Docente</label> <select id="docente" required=""><option class="svelte-1p7gzb0"> </option><!></select></div> <div class="space-y-2 svelte-1p7gzb0"><label for="materia" class="block text-sm font-medium svelte-1p7gzb0">Asignatura</label> <select id="materia" required=""><option class="svelte-1p7gzb0"> </option><!></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-1p7gzb0"><div class="space-y-2 svelte-1p7gzb0"><label for="grado" class="block text-sm font-medium svelte-1p7gzb0">Grado</label> <select id="grado" required=""><option class="svelte-1p7gzb0"> </option><!></select></div> <div class="space-y-2 svelte-1p7gzb0"><label for="horas" class="block text-sm font-medium svelte-1p7gzb0">Horas</label> <select id="horas" required=""><option class="svelte-1p7gzb0">Seleccione horas</option><!></select></div></div> <div class="space-y-2 svelte-1p7gzb0"><label for="search" class="block text-sm font-medium svelte-1p7gzb0">Buscar anotaciones</label> <div class="relative svelte-1p7gzb0"><input type="text" id="search" placeholder="Buscar por palabra clave o categor√≠a..." class="w-full px-4 py-3 pl-12 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none svelte-1p7gzb0"/> <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" class="svelte-1p7gzb0"></path></svg> <!></div> <!></div> <div class="space-y-8 svelte-1p7gzb0"><!></div> <div class="space-y-2 svelte-1p7gzb0"><label for="observacion" class="block text-sm font-medium svelte-1p7gzb0">Observaci√≥n</label> <textarea id="observacion" rows="3" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none resize-none svelte-1p7gzb0" placeholder="Observaciones adicionales (opcional)..."></textarea></div> <div class="fixed bottom-8 right-8 z-50 svelte-1p7gzb0"><button type="submit" class="w-16 h-16 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-400 dark:disabled:bg-slate-700 disabled:cursor-not-allowed disabled:scale-100 text-white rounded-full shadow-2xl transition-all duration-300 transform hover:scale-110 active:scale-95 backdrop-blur-sm bg-opacity-95 flex items-center justify-center overflow-hidden border border-white/20 svelte-1p7gzb0" aria-label="Guardar Anotaci√≥n"><!></button></div></form></div></main></div> <!> <!>',1);function ya(Jt,Ne){Oo(Ne,!1);const q=()=>cr(qo,"$theme",Fe),[Fe,oe]=dr(),le=h(),o=h(),u=h(),F=h(),s=h(),ye=h(),tt=h();let vt=so(Ne,"onBack",8),ne=h([]),Q=h([]),O=h([]),i=h(!1),ee=h(!1),ie=h(!1),ke=h(!1),R=h({}),m=h({}),z=h(""),L=h({}),we=h([]),Ge=h(""),gt=h("");const Qt=a=>{te(m,e(m)[a]=!e(m)[a]),g(m,e(m))},Dt=(a,v)=>{const f=e(R)[a].indexOf(v);if(f!==-1){const x={...v,selected:!v.selected},M=[...e(R)[a].slice(0,f),x,...e(R)[a].slice(f+1)];g(R,{...e(R),[a]:M}),console.log("üîÑ Anotaci√≥n toggle:",{categoria:a,index:f,texto:x.text,nuevoEstado:x.selected,totalSeleccionadas:Object.values(e(R)).flat().filter(S=>S.selected).length})}},pt=a=>({"C√ÅTEDRA DE LA PAZ":"#8b5cf6","CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL":"#10b981","CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y":"#f59e0b","DIRECCI√ìN DE GRUPO":"#3b82f6","EDUCACI√ìN ART√çSTICA":"#f43f5e","EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES":"#ef4444","EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS":"#8b5cf6",EMPRENDIMIENTO:"#f97316",ESTAD√çSTICA:"#06b6d4","FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS":"#6366f1",F√çSICA:"#3b82f6",INGL√âS:"#14b8a6","LENGUA CASTELLANA":"#10b981",MATEM√ÅTICAS:"#3b82f6","PROYECTO Y EMPRENDIMIENTO":"#f97316",QU√çMICA:"#06b6d4","TECNOLOG√çA E INFORM√ÅTICA":"#6366f1","√âTICA PROFESIONAL":"#8b5cf6","Estrategias de Ense√±anza-Aprendizaje":"#6366f1","Evaluaci√≥n y Verificaci√≥n de Saberes":"#10b981","Enfoque STEM+ y Contexto Rural":"#f59e0b","Pr√°cticas de Laboratorio y Mantenimiento":"#f43f5e","Ciudadan√≠a Digital y √âtica":"#8b5cf6","Pensamiento Computacional y Programaci√≥n":"#06b6d4","Recursos Anal√≥gicos y Contingencias":"#f97316","Ofim√°tica y Competencias Productivas":"#14b8a6","Gesti√≥n Administrativa y Proyectos Transversales":"#3b82f6"})[a]||"#6366f1",ge={MATEM√ÅTICAS:"MATEM√ÅTICAS","LENGUA CASTELLANA":"LENGUA CASTELLANA",INGL√âS:"INGL√âS","CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL":"CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL","CIENCIAS NATURALES":"CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL","CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y":"CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y","CIENCIAS SOCIALES":"CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y",F√çSICA:"F√çSICA",QU√çMICA:"QU√çMICA","EDUCACI√ìN ART√çSTICA":"EDUCACI√ìN ART√çSTICA","EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES":"EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES","EDUCACI√ìN F√çSICA":"EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES","TECNOLOG√çA E INFORM√ÅTICA":"TECNOLOG√çA E INFORM√ÅTICA",TECNOLOG√çA:"TECNOLOG√çA E INFORM√ÅTICA",INFORM√ÅTICA:"TECNOLOG√çA E INFORM√ÅTICA",EMPRENDIMIENTO:"EMPRENDIMIENTO","FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS":"FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS",FILOSOF√çA:"FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS",ESTAD√çSTICA:"ESTAD√çSTICA","EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS":"EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS",√âTICA:"EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS","DIRECCI√ìN DE GRUPO":"DIRECCI√ìN DE GRUPO","PROYECTO Y EMPRENDIMIENTO":"PROYECTO Y EMPRENDIMIENTO",PROYECTO:"PROYECTO Y EMPRENDIMIENTO","C√ÅTEDRA DE LA PAZ":"C√ÅTEDRA DE LA PAZ","√âTICA PROFESIONAL":"√âTICA PROFESIONAL"},bt=a=>{if(!e(d).materia)return a;let v=ge[e(d).materia.toUpperCase()]||ge[e(d).materia]||"";if(!v){const f=e(d).materia.toUpperCase();for(const[x,M]of Object.entries(ge))if(x.includes(f)||f.includes(x)){v=M;break}}return console.log("Materia seleccionada:",e(d).materia,"‚Üí Categor√≠a:",v),a.sort(([f],[x])=>f===v&&x!==v?-1:x===v&&f!==v?1:f.localeCompare(x))};let d=h({fecha:new Date().toLocaleDateString("en-CA"),docente:localStorage.getItem("lastDocente")||"",materia:"",horas:"",grado:"",anotacion:"",observacion:""}),V=h(JSON.parse(localStorage.getItem("docenteMaterias")||"{}"));const Nt=(a,v)=>{!a||!v||(e(V)[a]||te(V,e(V)[a]=[]),e(V)[a].includes(v)||(te(V,e(V)[a]=[...e(V)[a],v]),localStorage.setItem("docenteMaterias",JSON.stringify(e(V)))))},ut=a=>{const v=a.match(/-(\d+)$/);return v?v[1]:null};let ot=h(localStorage.getItem("dismissedInfoAnotadorContent")!==Fo);const Ft=()=>{g(ot,!1),localStorage.setItem("dismissedInfoAnotadorContent",Fo)};let Oe=h(!1),D=h(!1),Te=h(!1),ft=h(!1);const ht=()=>{g(Te,!0)},Ot=()=>{g(Te,!1)},xt=()=>{g(ft,!0)},b=()=>{g(ft,!1)};let C=h(!0);const N="¬°Nueva funci√≥n de filtrado avanzado disponible!";function T(){return!0}const re=()=>{localStorage.setItem("dismissedFeatureAlertAnotador",new Date().toISOString()),g(C,!1)},J=()=>{localStorage.setItem("dismissedFeatureAlertAnotador",new Date().toISOString()),ht()},Se=()=>`https://docs.google.com/spreadsheets/d/${_o}`,Me=()=>{window.open(Se(),"_blank")},$=()=>{qo.update(a=>a==="light"?"dim":a==="dim"?"dark":"light")},ze=async()=>{g(i,!0),g(ee,!0),g(ie,!0),g(ke,!0);try{const[a,v,f,x]=await Promise.all([Lo(),jo(),Po(),fr()]);g(ne,a),g(Q,v),g(O,f);const M={},S={};for(const[Y,ce]of Object.entries(x))M[Y]=ce.map(j=>({text:j,selected:!1})),S[Y]=!1;g(R,M),g(m,S)}catch(a){console.error("Error cargando datos iniciales:",a)}finally{g(i,!1),g(ee,!1),g(ie,!1),g(ke,!1)}},Be=async a=>{if(a.preventDefault(),e(Oe))return;g(D,!0);const v=Object.values(e(R)).flat().filter(S=>S.selected).map(S=>S.text),f=v.join(" | "),x=[];if(e(d).fecha||x.push({id:"fecha",label:"Fecha"}),e(d).docente||x.push({id:"docente",label:"Docente"}),e(d).materia||x.push({id:"materia",label:"Asignatura"}),e(d).grado||x.push({id:"grado",label:"Grado"}),e(d).horas||x.push({id:"horas",label:"Horas"}),v.length===0&&x.push({id:"search",label:"Anotaci√≥n(es)"}),x.length>0){await Et.fire({icon:"warning",title:"Campos requeridos",html:`Complete los siguientes campos:<br/><br/><strong>${x.map(Y=>Y.label).join("<br/>")}</strong>`,confirmButtonColor:"#6366f1"});const S=document.getElementById(x[0].id);S&&(S.scrollIntoView({behavior:"smooth",block:"center"}),S.focus());return}if(v.length===0){await Et.fire({icon:"warning",title:"Sin anotaciones",text:"Debe seleccionar al menos una anotaci√≥n",confirmButtonColor:"#6366f1"});return}if((await Et.fire({title:"¬øConfirmar Registro?",html:`
        <div class="text-left space-y-2 p-2 rounded-xl bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10" style="font-size: 0.9rem; line-height: 1.4;">
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Fecha:</strong> ${e(d).fecha}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Docente:</strong> ${e(d).docente}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Asignatura:</strong> ${e(d).materia}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Grado:</strong> ${e(d).grado}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Horas:</strong> ${e(d).horas}</div>
          <div style="margin-top: 12px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 8px;">
            <strong style="color: #6366f1;">Anotaciones:</strong>
            <ul style="list-style-type: disc; padding-left: 20px; margin-top: 4px; font-size: 0.8rem; opacity: 0.8;">
              ${v.map(S=>`<li>${S}</li>`).join("")}
            </ul>
          </div>
          ${e(d).observacion?`<div style="margin-top: 12px;"><strong style="color: #6366f1;">Observaci√≥n:</strong> <span style="font-size: 0.8rem;">${e(d).observacion}</span></div>`:""}
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonText:"Si, de acuerdo",cancelButtonText:"No",confirmButtonColor:"#4f46e5",cancelButtonColor:"#64748b",reverseButtons:!0,background:q()==="light"?"#fff":"#1e293b",color:q()==="light"?"#1e293b":"#f1f5f9"})).isConfirmed){g(Oe,!0);try{const Y=[[new Date().toLocaleString(),e(d).fecha,e(d).docente,e(d).materia,e(d).grado,e(d).horas,f,e(d).observacion]];await hr({spreadsheetId:_o,worksheetTitle:Ro,datos:Y}),Nt(e(d).docente,e(d).materia),await Et.fire({icon:"success",title:"¬°√âxito!",text:"Anotaci√≥n registrada exitosamente",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),g(d,{fecha:new Date().toLocaleDateString("en-CA"),docente:e(d).docente,materia:e(d).materia,grado:e(d).grado,horas:"",anotacion:"",observacion:""});for(const ce in e(R))te(R,e(R)[ce]=e(R)[ce].map(j=>({...j,selected:!1})));g(R,{...e(R)}),g(D,!1)}catch(S){console.error("Error enviando:",S),await Et.fire({icon:"error",title:"Error",text:"Error al registrar la anotaci√≥n",confirmButtonColor:"#ef4444"})}finally{g(Oe,!1)}}};xo(()=>{ze(),g(C,T())}),U(()=>(e(d),e(gt)),()=>{if(e(d).materia&&e(d).materia!==e(gt)){g(gt,e(d).materia);let a=ge[e(d).materia.toUpperCase()]||ge[e(d).materia]||"";if(!a){const v=e(d).materia.toUpperCase();for(const[f,x]of Object.entries(ge))if(f.includes(v)||v.includes(f)){a=x;break}}a&&(g(Ge,a),console.log("‚ú® Categoria destacada:",a),setTimeout(()=>{g(Ge,"")},3e3))}}),U(()=>(e(R),e(z)),()=>{g(L,Object.entries(e(R)).reduce((a,[v,f])=>{if(!e(z).trim())return a[v]=f,a;const x=e(z).toLowerCase().trim(),M=f.filter(S=>S.text.toLowerCase().includes(x));return M.length>0&&(a[v]=M),a},{}))}),U(()=>(e(Q),e(d),e(R),e(L),e(we)),()=>{console.log("üîÑ Reactividad actualizada"),console.log("üìö Materias disponibles:",e(Q).map(a=>a.materia)),console.log("‚úçÔ∏è Materia seleccionada:",e(d).materia),console.log("üìä Categor√≠as disponibles:",Object.keys(e(R))),console.log("üîç Categor√≠as filtradas:",Object.keys(e(L))),g(we,bt(Object.entries(e(L)))),console.log("üìã Entradas ordenadas:",e(we).map(([a])=>a))}),U(()=>e(d),()=>{e(d).docente&&localStorage.setItem("lastDocente",e(d).docente)}),U(()=>(e(d),e(Q),e(V)),()=>{g(le,e(d).docente?[...e(Q)].sort((a,v)=>{const f=e(V)[e(d).docente]?.includes(a.materia),x=e(V)[e(d).docente]?.includes(v.materia);return f&&!x?-1:!f&&x?1:a.materia.localeCompare(v.materia)}):e(Q))}),U(()=>e(d),()=>{g(o,ut(e(d).docente))}),U(()=>(e(o),e(O)),()=>{g(u,e(o)?[...new Set(e(O).map(a=>a.grado.toString()))].filter(a=>a.startsWith(`${e(o)}-`)):[...new Set(e(O).map(a=>a.grado.toString()))].filter(a=>!a.includes("-")))}),U(()=>(e(d),e(R)),()=>{g(F,(()=>{const a=[];return e(d).fecha||a.push("fecha"),e(d).docente||a.push("docente"),e(d).materia||a.push("materia"),e(d).grado||a.push("grado"),e(d).horas||a.push("horas"),Object.values(e(R)).flat().some(f=>f.selected)||a.push("anotacion"),a})())}),U(()=>{},()=>{g(s,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),U(()=>e(R),()=>{g(ye,Object.values(e(R)).flat().some(a=>a.selected))}),U(()=>(e(d),e(ye)),()=>{g(tt,e(d).fecha&&e(d).docente&&e(d).materia&&e(d).grado&&e(d).horas&&e(ye))}),U(()=>(e(d),e(ye),e(tt),e(R)),()=>{console.log("üîç Validaci√≥n formulario:",{fecha:e(d).fecha,docente:e(d).docente,materia:e(d).materia,grado:e(d).grado,horas:e(d).horas,hasSelectedAnotacion:e(ye),isFormValid:e(tt),totalAnotaciones:Object.values(e(R)).flat().length,selectedCount:Object.values(e(R)).flat().filter(a=>a.selected).length})}),To(),Mo();var be=ba(),se=mo(be),rt=r(se),at=r(rt),st=r(at),He=r(st),mt=l(He,2),Tt=l(st,2),_t=r(Tt),Ue=l(_t,2),Mt=l(r(Ue),4);{var Bt=a=>{var v=Wr();k(a,v)};W(Mt,a=>{e(C)&&a(Bt)})}var Ve=l(Ue,2),n=l(Ve,2),p=l(n,2),_=r(p);{var w=a=>{var v=qr();k(a,v)},Z=a=>{var v=Jr();k(a,v)},ae=a=>{var v=Qr();k(a,v)};W(_,a=>{q()==="dark"?a(w):q()==="light"?a(Z,1):a(ae,!1)})}var pe=l(_,2),Re=r(pe),Rt=l(rt,2),Ye=r(Rt),P=r(Ye);{var Lt=a=>{var v=Zr(),f=l(r(v),2),x=l(r(f),2),M=r(x),S=l(f,2);B(()=>A(M,Fo)),H("click",S,Ft),k(a,v)};W(P,a=>{e(ot)&&a(Lt)})}var yt=l(P,2);xr(yt,{featureMessage:N,description:"Ahora puedes filtrar tus anotaciones de forma avanzada. ¬°Pru√©balo!",onTryNow:J,onDismiss:re,targetSelector:"#filter-button-target",showPopup:!1,colorTheme:"purple"});var Ce=l(yt,2),K=r(Ce),me=r(K),Ae=r(me),We=l(Ae,2),qe=l(me,2),lt=r(qe),Je=l(lt,2),Qe=r(Je),jt=r(Qe);Qe.value=Qe.__value="";var Pt=l(Qe);he(Pt,1,()=>e(ne),xe,(a,v)=>{var f=Kr(),x=r(f),M={};B(()=>{A(x,e(v)),M!==(M=e(v))&&(f.value=(f.__value=e(v))??"")}),k(a,f)});var Gt=l(qe,2),kt=r(Gt),wt=l(kt,2),nt=r(wt),yo=r(nt);nt.value=nt.__value="";var lo=l(nt);he(lo,1,()=>e(le),xe,(a,v)=>{const f=zt(()=>(e(V),e(d),e(v),t(()=>e(V)[e(d).docente]?.includes(e(v).materia))));var x=Xr(),M=r(x),S={};B(()=>{c(x,e(f)?"color: #6366f1; font-weight: 600;":""),A(M,`${e(f)?"‚≠ê ":""}${e(v),t(()=>e(v).materia)??""}`),S!==(S=(e(v),t(()=>e(v).materia)))&&(x.value=(x.__value=(e(v),t(()=>e(v).materia)))??"")}),k(a,x)});var Ht=l(K,2),no=r(Ht),Zt=r(no),Ct=l(Zt,2),Ut=r(Ct),ko=r(Ut);Ut.value=Ut.__value="";var wo=l(Ut);he(wo,1,()=>e(u),xe,(a,v)=>{var f=ea(),x=r(f),M={};B(S=>{A(x,S),M!==(M=e(v))&&(f.value=(f.__value=e(v))??"")},[()=>(e(v),t(()=>e(v).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),k(a,f)});var Co=l(no,2),io=r(Co),I=l(io,2),G=r(I);G.value=G.__value="";var X=l(G);he(X,0,()=>[1,2,3,4],xe,(a,v)=>{var f=ta(),x=r(f),M={};B(S=>{A(x,`${v??""} ${v===1?"Hora":"Horas"}`),M!==(M=S)&&(f.value=(f.__value=S)??"")},[()=>t(()=>v.toString())]),k(a,f)});var _e=l(Ht,2),ue=r(_e),Vt=l(ue,2),Kt=r(Vt),Xt=l(Kt,2),co=l(Xt,2);{var vo=a=>{var v=oa();B(()=>c(v,`color: ${e(s),t(()=>e(s).placeholder)??""};`)),H("click",v,()=>g(z,"")),k(a,v)};W(co,a=>{e(z)&&a(vo)})}var go=l(Vt,2);{var po=a=>{var v=ra(),f=l(r(v),2),x=r(f);B(()=>{c(v,`color: ${e(s),t(()=>e(s).placeholder)??""};`),A(x,`No se encontraron anotaciones para "${e(z)??""}"`)}),k(a,v)},bo=Wo(()=>(e(z),e(L),t(()=>e(z)&&Object.keys(e(L)).length===0)));W(go,a=>{e(bo)&&a(po)})}var uo=l(_e,2),Ao=r(uo);{var $o=a=>{var v=aa(),f=r(v);Ko(f,{message:"Cargando opciones de anotaci√≥n..."}),k(a,v)},Io=a=>{var v=vr(),f=mo(v);he(f,1,()=>e(we),xe,(x,M)=>{var S=Wo(()=>ur(e(M),2));let Y=()=>e(S)[0],ce=()=>e(S)[1];const j=zt(()=>(Y(),t(()=>pt(Y())))),De=zt(()=>(ce(),t(()=>ce().length)));var Wt=va(),$t=r(Wt),qt=r($t),Ie=r(qt),It=r(Ie),fo=l(It);{var ro=fe=>{var Ee=sa();k(fe,Ee)};W(fo,fe=>{Y()===e(Ge)&&fe(ro)})}var Eo=l(Ie,2);{var So=fe=>{var Ee=la(),zo=r(Ee);B(()=>{c(Ee,`color: ${e(j)??""};`),A(zo,`(${e(De)??""} resultado${e(De)!==1?"s":""})`)}),k(fe,Ee)};W(Eo,fe=>{e(z)&&fe(So)})}var Go=l(qt,2);{var er=fe=>{var Ee=na();B(()=>c(Ee,`background-color: ${e(j)??""}; opacity: 0.2;`)),k(fe,Ee)};W(Go,fe=>{e(z)||fe(er)})}var tr=l(Go,2);let Ho;var or=l($t,2);{var rr=fe=>{var Ee=da();he(Ee,5,ce,xe,(zo,de,ua)=>{const ho=zt(()=>(e(z),e(de),t(()=>e(z)&&e(de).text.toLowerCase().includes(e(z).toLowerCase()))));var Do=ca(),ar=r(Do),Uo=r(ar),No=r(Uo),Vo=l(No,2),sr=r(Vo);{var lr=ao=>{var nr=ia();k(ao,nr)};W(sr,ao=>{e(de),t(()=>e(de).selected)&&ao(lr)})}var Yo=l(Uo,2);B(()=>{c(Do,`
                          background-color: ${e(de),je(e(j)),je(e(ho)),e(s),t(()=>e(de).selected?`${e(j)}10`:e(ho)?`${e(j)}05`:e(s).inputBg)??""};
                          border-color: ${e(de),je(e(j)),je(e(ho)),e(s),t(()=>e(de).selected?e(j):e(ho)?e(j):e(s).border)??""};
                        `),gr(No,(e(de),t(()=>e(de).selected))),c(Vo,`
                              border-color: ${e(de),je(e(j)),e(s),t(()=>e(de).selected?e(j):e(s).border)??""};
                              background-color: ${e(de),je(e(j)),t(()=>e(de).selected?e(j):"transparent")??""};
                            `),c(Yo,`color: ${e(s),t(()=>e(s).text)??""};`)}),H("change",No,()=>Dt(Y(),e(de))),St(Yo,()=>e(de).text,ao=>(e(de).text=ao,ve(()=>(ce(),e(we))))),k(zo,Do)}),pr(3,Ee,()=>br),k(fe,Ee)};W(or,fe=>{e(m),Y(),t(()=>e(m)[Y()])&&fe(rr)})}B(()=>{et(Ie,1,`text-xs font-black uppercase tracking-widest px-3 py-1 rounded-full text-white flex-shrink-0 transition-all duration-300 group-hover:shadow-md ${Y()===e(Ge)?"animate-glow ring-4 ring-opacity-50":""}`,"svelte-1p7gzb0"),c(Ie,`background-color: ${e(j)??""}; ${Y()===e(Ge)?`box-shadow: 0 0 25px ${e(j)}60, 0 0 50px ${e(j)}30; ring-color: ${e(j)}; border: 2px solid ${e(j)};`:""}`),A(It,`${Y()??""} `),Ho=et(tr,0,"w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0 svelte-1p7gzb0",null,Ho,{"rotate-180":e(m)[Y()]})}),H("click",$t,()=>Qt(Y())),k(x,Wt)}),k(a,v)};W(Ao,a=>{e(ke)?a($o):a(Io,!1)})}var Yt=l(uo,2),y=r(Yt),$e=l(y,2),Ze=l(Yt,2),Ke=r(Ze),eo=r(Ke);{var it=a=>{var v=ga();k(a,v)},At=a=>{var v=pa();k(a,v)};W(eo,a=>{e(Oe)?a(it):a(At,!1)})}var Xe=l(se,2);{var to=a=>{Fr(a,{onClose:Ot,get selectedDocente(){return e(d),t(()=>e(d).docente)}})};W(Xe,a=>{e(Te)&&a(to)})}var ct=l(Xe,2);{var oo=a=>{Yr(a,{onClose:b,get initialDocente(){return e(d),t(()=>e(d).docente)}})};W(ct,a=>{e(ft)&&a(oo)})}B((a,v,f,x,M,S,Y,ce,j,De)=>{c(se,`background-color: ${e(s),t(()=>e(s).bg)??""};`),c(rt,`background-color: ${e(s),t(()=>e(s).cardBg)??""}; border-color: ${e(s),t(()=>e(s).cardBorder)??""};`),Le(He,"src",Xo),c(mt,`color: ${e(s),t(()=>e(s).text)??""};`),c(_t,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${e(s),t(()=>e(s).border)??""}; color: ${e(s),t(()=>e(s).text)??""};`),c(Ue,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${e(s),t(()=>e(s).border)??""}; color: ${e(s),t(()=>e(s).text)??""};`),c(Ve,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${e(s),t(()=>e(s).border)??""}; color: ${e(s),t(()=>e(s).text)??""};`),c(n,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${e(s),t(()=>e(s).border)??""}; color: ${e(s),t(()=>e(s).text)??""};`),c(p,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${e(s),t(()=>e(s).border)??""}; color: ${e(s),t(()=>e(s).text)??""};`),A(Re,q()),c(Ye,`background-color: ${e(s),t(()=>e(s).cardBg)??""}; border-color: ${e(s),t(()=>e(s).cardBorder)??""};`),c(Ae,`color: ${e(s),t(()=>e(s).label)??""};`),et(We,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none ${a??""}`,"svelte-1p7gzb0"),c(We,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${v??""}; color: ${e(s),t(()=>e(s).text)??""}; color-scheme: ${q()==="light"?"light":"dark"};`),c(lt,`color: ${e(s),t(()=>e(s).label)??""};`),et(Je,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${f??""}`,"svelte-1p7gzb0"),c(Je,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${x??""}; color: ${e(s),t(()=>e(s).text)??""};`),A(jt,e(i)?"Cargando...":"Seleccione docente"),c(kt,`color: ${e(s),t(()=>e(s).label)??""};`),et(wt,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${M??""}`,"svelte-1p7gzb0"),c(wt,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${S??""}; color: ${e(s),t(()=>e(s).text)??""};`),A(yo,e(ee)?"Cargando...":"Seleccione asignatura"),c(Zt,`color: ${e(s),t(()=>e(s).label)??""};`),et(Ct,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${Y??""}`,"svelte-1p7gzb0"),c(Ct,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${ce??""}; color: ${e(s),t(()=>e(s).text)??""};`),A(ko,e(ie)?"Cargando...":"Seleccione grado"),c(io,`color: ${e(s),t(()=>e(s).label)??""};`),et(I,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer ${j??""}`,"svelte-1p7gzb0"),c(I,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${De??""}; color: ${e(s),t(()=>e(s).text)??""};`),c(ue,`color: ${e(s),t(()=>e(s).label)??""};`),c(Kt,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${e(s),t(()=>e(s).border)??""}; color: ${e(s),t(()=>e(s).text)??""};`),c(Xt,`color: ${e(s),t(()=>e(s).placeholder)??""};`),c(y,`color: ${e(s),t(()=>e(s).label)??""};`),c($e,`background-color: ${e(s),t(()=>e(s).inputBg)??""}; border-color: ${e(s),t(()=>e(s).border)??""}; color: ${e(s),t(()=>e(s).text)??""};`),Ke.disabled=e(Oe)},[()=>(e(D),e(F),t(()=>e(D)&&e(F).includes("fecha")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(D),e(F),e(s),t(()=>e(D)&&e(F).includes("fecha")?"#ef4444":e(s).border)),()=>(e(D),e(F),t(()=>e(D)&&e(F).includes("docente")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(D),e(F),e(s),t(()=>e(D)&&e(F).includes("docente")?"#ef4444":e(s).border)),()=>(e(D),e(F),t(()=>e(D)&&e(F).includes("materia")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(D),e(F),e(s),t(()=>e(D)&&e(F).includes("materia")?"#ef4444":e(s).border)),()=>(e(D),e(F),t(()=>e(D)&&e(F).includes("grado")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(D),e(F),e(s),t(()=>e(D)&&e(F).includes("grado")?"#ef4444":e(s).border)),()=>(e(D),e(F),t(()=>e(D)&&e(F).includes("horas")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(D),e(F),e(s),t(()=>e(D)&&e(F).includes("horas")?"#ef4444":e(s).border))]),H("click",_t,Me),H("click",Ue,ht),H("click",Ve,xt),H("click",n,function(...a){vt()?.apply(this,a)}),H("click",p,$),St(We,()=>e(d).fecha,a=>(te(d,e(d).fecha=a),ve(()=>{e(D),e(F),e(s),e(i),e(ne),e(ee),e(le),e(V),e(ie),e(u)}))),Pe(Je,()=>e(d).docente,a=>(te(d,e(d).docente=a),ve(()=>{e(D),e(F),e(s),e(i),e(ne),e(ee),e(le),e(V),e(ie),e(u)}))),Pe(wt,()=>e(d).materia,a=>(te(d,e(d).materia=a),ve(()=>{e(D),e(F),e(s),e(i),e(ne),e(ee),e(le),e(V),e(ie),e(u)}))),Pe(Ct,()=>e(d).grado,a=>(te(d,e(d).grado=a),ve(()=>{e(D),e(F),e(s),e(i),e(ne),e(ee),e(le),e(V),e(ie),e(u)}))),Pe(I,()=>e(d).horas,a=>(te(d,e(d).horas=a),ve(()=>{e(D),e(F),e(s),e(i),e(ne),e(ee),e(le),e(V),e(ie),e(u)}))),St(Kt,()=>e(z),a=>g(z,a)),St($e,()=>e(d).observacion,a=>(te(d,e(d).observacion=a),ve(()=>{e(D),e(F),e(s),e(i),e(ne),e(ee),e(le),e(V),e(ie),e(u)}))),H("submit",Ce,Be),k(Jt,be),Bo(),oe()}export{ya as default};
