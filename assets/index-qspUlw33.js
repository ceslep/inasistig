const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/utils-Dc41pFlL.js","assets/excel-G1qE2FwJ.js"])))=>i.map(i=>d[i]);
import{w as Jo,p as Mr,a as Tt,o as Ar,l as Ae,b as Lr,i as Pr,c as bo,f as rr,d as re,e as b,g as Tr,s as a,t as S,h as G,j as d,k,m as r,n as h,q as Ne,r as Ze,u as e,v as t,x as s,y,z as mo,A as ke,B as po,C as _o,D as jt,E as Mo,F as Ee,G as Ko,H as Et,I as Fe,J as qe,K as Do,L as pt,M as zr,N as Bt,O as To,P as no,Q as Eo,R as Zo,S as Qo,T as Xo,U as So,V as Oo,W as No,X as ea,Y as ta}from"./svelte-Cjm1MGoY.js";import{S as $t}from"./ui-CHfsb5jC.js";import{_ as io}from"./pdf-CBBHH09D.js";(function(){const A=document.createElement("link").relList;if(A&&A.supports&&A.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))Te(g);new MutationObserver(g=>{for(const C of g)if(C.type==="childList")for(const o of C.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&Te(o)}).observe(document,{childList:!0,subtree:!0});function v(g){const C={};return g.integrity&&(C.integrity=g.integrity),g.referrerPolicy&&(C.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?C.credentials="include":g.crossOrigin==="anonymous"?C.credentials="omit":C.credentials="same-origin",C}function Te(g){if(g.ep)return;g.ep=!0;const C=v(g);fetch(g.href,C)}})();const ra="/inasistig/assets/asistencia_hero-DmIvUlDZ.png",oa="/inasistig/assets/anotador_hero-DBB4ReZf.png",aa="/inasistig/assets/diario_hero-B7a5kf5J.png",ao="/inasistig/assets/eie-DMab_WyA.png",sa=()=>{if(typeof window<"u"){const J=localStorage.getItem("theme");if(J&&["light","dim","dark"].includes(J))return J}return"dark"},Qr=Jo(sa());typeof window<"u"&&Qr.subscribe(J=>{localStorage.setItem("theme",J);const A=document.documentElement;A.classList.remove("light","dim","dark"),A.classList.add(J)});var la=k('<div class="relative svelte-dtuciw"><div style="top: -8px; left: 50%; transform: translateX(-50%);"></div></div>'),ia=k('<div class="fixed inset-0 bg-black/30 z-40 svelte-dtuciw" style="pointer-events: none;"></div> <div class="fixed z-50 animate-bounce-in svelte-dtuciw"><!> <div><div class="flex items-center gap-2 mb-3 svelte-dtuciw"><div class="p-1.5 bg-white/20 rounded-lg svelte-dtuciw"><svg class="w-5 h-5 svelte-dtuciw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="svelte-dtuciw"></path></svg></div> <span class="inline-block px-2 py-0.5 text-xs font-bold rounded-full bg-white/25 animate-pulse svelte-dtuciw">¬°NUEVO!</span></div> <h3 class="font-bold text-base mb-2 svelte-dtuciw"> </h3> <p> </p> <div class="flex gap-2 svelte-dtuciw"><button>Probar ahora</button> <button class="px-3 py-2 rounded-lg text-sm hover:bg-white/20 transition-colors svelte-dtuciw" aria-label="Cerrar popup">M√°s tarde</button></div> <button class="absolute top-2 right-2 p-1 rounded-lg hover:bg-white/20 transition-colors svelte-dtuciw" aria-label="Cerrar notificaci√≥n"><svg class="w-4 h-4 svelte-dtuciw" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-dtuciw"></path></svg></button></div></div>',1);function xo(J,A){Mr(A,!1);const v=h();let Te=Tt(A,"featureMessage",8),g=Tt(A,"description",8),C=Tt(A,"onTryNow",8),o=Tt(A,"onDismiss",8),be=Tt(A,"targetSelector",8,void 0),i=Tt(A,"showPopup",8),c=Tt(A,"colorTheme",8,"blue"),m=h({top:0,left:0});function le(){if(typeof window<"u"&&be()){const R=document.querySelector(be());if(R){const l=R.getBoundingClientRect();d(m,{top:l.bottom+10,left:l.left+l.width/2})}}else d(m,{top:window.innerHeight/2-100,left:window.innerWidth/2})}Ar(()=>(le(),window.addEventListener("resize",le),()=>{window.removeEventListener("resize",le)})),Ae(()=>{},()=>{d(v,{arrowBorder:{blue:"border-t-blue-600 dark:border-t-blue-400",green:"border-t-green-600 dark:border-t-green-400",purple:"border-t-purple-600 dark:border-t-purple-400",emerald:"border-t-emerald-600 dark:border-t-emerald-400"},bgGradientFrom:{blue:"from-blue-600 dark:from-blue-700",green:"from-green-600 dark:from-green-700",purple:"from-purple-600 dark:from-purple-700",emerald:"from-emerald-600 dark:from-emerald-700"},bgGradientTo:{blue:"to-indigo-600 dark:to-indigo-700",green:"to-emerald-600 dark:to-emerald-700",purple:"to-fuchsia-600 dark:to-fuchsia-700",emerald:"to-teal-600 dark:to-teal-700"},borderColor:{blue:"border-blue-400 dark:border-blue-500",green:"border-green-400 dark:border-green-500",purple:"border-purple-400 dark:border-purple-500",emerald:"border-emerald-400 dark:border-emerald-500"},buttonTextColor:{blue:"text-blue-600",green:"text-green-600",purple:"text-purple-600",emerald:"text-emerald-600"},buttonHoverBg:{blue:"hover:bg-blue-50",green:"hover:bg-green-50",purple:"hover:bg-purple-50",emerald:"hover:bg-emerald-50"},descriptionColor:{blue:"text-blue-100",green:"text-green-100",purple:"text-purple-100",emerald:"text-emerald-100"}})}),Ae(()=>Ne(i()),()=>{i()&&le()}),Lr(),Pr();var ge=bo(),H=rr(ge);{var q=R=>{var l=ia(),O=a(rr(l),2),j=r(O);{var X=ce=>{var $e=la(),Qe=r($e);S(()=>Ze(Qe,1,`absolute w-0 h-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent ${e(v),Ne(c()),t(()=>e(v).arrowBorder[c()])??""}`,"svelte-dtuciw")),b(ce,$e)};re(j,ce=>{be()&&ce(X)})}var F=a(j,2),x=a(r(F),2),ae=r(x),De=a(x,2),Ye=r(De),tt=a(De,2),Q=r(tt),B=a(Q,2),U=a(tt,2);S(()=>{s(O,`top: ${e(m),t(()=>e(m).top)??""}px; left: ${e(m),t(()=>e(m).left)??""}px; transform: translateX(-50%);`),Ze(F,1,`bg-gradient-to-r ${e(v),Ne(c()),t(()=>e(v).bgGradientFrom[c()])??""} ${e(v),Ne(c()),t(()=>e(v).bgGradientTo[c()])??""} text-white p-4 rounded-xl shadow-2xl border ${e(v),Ne(c()),t(()=>e(v).borderColor[c()])??""} min-w-[280px] max-w-[calc(100vw-20px)] md:max-w-[320px]`,"svelte-dtuciw"),y(ae,Te()),Ze(De,1,`text-sm ${e(v),Ne(c()),t(()=>e(v).descriptionColor[c()])??""} mb-3`,"svelte-dtuciw"),y(Ye,g()),Ze(Q,1,`px-3 py-2 rounded-lg text-sm bg-white ${e(v),Ne(c()),t(()=>e(v).buttonTextColor[c()])??""} font-semibold ${e(v),Ne(c()),t(()=>e(v).buttonHoverBg[c()])??""} transition-colors`,"svelte-dtuciw")}),G("click",Q,function(...ce){C()?.apply(this,ce)}),G("click",B,function(...ce){o()?.apply(this,ce)}),G("click",U,function(...ce){o()?.apply(this,ce)}),b(R,l)};re(H,R=>{i()&&R(q)})}b(J,ge),Tr()}var na=Et('<svg class="w-6 h-6 text-amber-500 svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707M16.95 16.95l.707.707M7.636 7.636l.707.707M12 8a4 4 0 100 8 4 4 0 000-8z" class="svelte-1y1a8hs"></path></svg>'),da=Et('<svg class="w-6 h-6 text-indigo-400 svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1y1a8hs"></path></svg>'),ca=Et('<svg class="w-6 h-6 text-indigo-500 svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707M16.95 16.95l.707.707M7.636 7.636l.707.707M12 8a4 4 0 100 8 4 4 0 000-8z" class="svelte-1y1a8hs"></path></svg>'),va=k('<button class="group relative flex flex-col justify-between overflow-hidden rounded-[2.5rem] border border-[rgb(var(--card-border))] bg-[rgb(var(--card-bg))] backdrop-blur-xl transition-all duration-500 hover:border-[rgb(var(--accent-primary))]/30 hover:bg-[rgb(var(--bg-secondary))] p-1 svelte-1y1a8hs"><div class="absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent svelte-1y1a8hs"></div> <div class="relative p-8 flex flex-col h-full svelte-1y1a8hs"><div class="flex justify-between items-start mb-12 svelte-1y1a8hs"><div class="flex flex-col gap-1 svelte-1y1a8hs"><span class="text-[10px] font-bold uppercase tracking-[0.2em] text-[rgb(var(--accent-primary))] svelte-1y1a8hs"> </span> <h2 class="text-2xl font-bold tracking-tight text-[rgb(var(--text-primary))] group-hover:text-[rgb(var(--accent-primary))] transition-colors duration-300 svelte-1y1a8hs"> </h2></div> <span class="px-3 py-1 rounded-full text-[10px] font-bold bg-[rgb(var(--bg-tertiary))] border border-[rgb(var(--border-primary))] text-[rgb(var(--text-muted))] uppercase tracking-wider svelte-1y1a8hs"> </span></div> <div class="flex flex-col gap-6 mt-auto svelte-1y1a8hs"><div class="relative w-full aspect-video rounded-3xl overflow-hidden bg-black/20 border border-white/5 svelte-1y1a8hs"><div></div> <img class="w-3/4 h-3/4 mx-auto object-cover grayscale-[0.5] group-hover:grayscale-0 group-hover:scale-110 transition-all duration-700 ease-in-out opacity-60 group-hover:opacity-100 svelte-1y1a8hs"/> <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-500 z-20 svelte-1y1a8hs"><div class="p-3 rounded-full bg-white/10 backdrop-blur-md border border-white/20 svelte-1y1a8hs"><svg class="w-6 h-6 text-white svelte-1y1a8hs" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" class="svelte-1y1a8hs"></path></svg></div></div></div> <p class="text-sm font-medium leading-relaxed text-[rgb(var(--text-muted))] line-clamp-2 svelte-1y1a8hs"> </p></div> <div class="mt-8 flex items-center justify-between svelte-1y1a8hs"><div class="flex -space-x-2 svelte-1y1a8hs"><div class="w-6 h-6 rounded-full border border-black bg-indigo-500/20 svelte-1y1a8hs"></div> <div class="w-6 h-6 rounded-full border border-black bg-purple-500/20 svelte-1y1a8hs"></div></div> <div class="text-[10px] font-bold text-[rgb(var(--text-muted))] tracking-[0.1em] group-hover:text-[rgb(var(--accent-primary))] transition-colors uppercase svelte-1y1a8hs">Explorar &rarr;</div></div></div> <div></div></button>'),ga=k(`<header class="max-w-7xl w-full mb-6 lg:mb-8 text-center relative svelte-1y1a8hs"><div class="absolute right-0 top-0 svelte-1y1a8hs"><button class="p-3 rounded-2xl bg-[rgb(var(--bg-secondary))] border border-[rgb(var(--border-primary))] hover:border-[rgb(var(--accent-primary))] transition-all duration-300 group svelte-1y1a8hs" aria-label="Toggle Theme"><!></button></div> <div class="inline-block mb-4 relative svelte-1y1a8hs"><div class="absolute inset-0 bg-indigo-500/20 blur-2xl rounded-full svelte-1y1a8hs"></div> <img alt="EIE Logo" class="relative h-12 md:h-16 object-contain hover:scale-110 transition-transform duration-700 ease-out cursor-none svelte-1y1a8hs"/></div> <div class="space-y-1 svelte-1y1a8hs"><h1 class="text-3xl md:text-5xl font-black tracking-tight svelte-1y1a8hs"><span class="bg-gradient-to-b from-[rgb(var(--text-primary))] to-[rgb(var(--text-secondary))] bg-clip-text text-transparent svelte-1y1a8hs">Ecosistema Digital</span> <span class="text-[rgb(var(--accent-primary))] svelte-1y1a8hs">Instituto Gu√°tica</span></h1> <p class="text-base md:text-lg text-[rgb(var(--text-muted))] max-w-xl mx-auto font-medium svelte-1y1a8hs">Potenciando la excelencia pedag√≥gica a trav√©s de herramientas
          inteligentes y dise√±o centrado en el docente.</p></div></header> <div class="max-w-7xl w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8 svelte-1y1a8hs"></div> <footer class="mt-20 flex flex-col md:flex-row items-center gap-8 text-[rgb(var(--text-muted))] text-xs font-bold tracking-widest uppercase svelte-1y1a8hs"><div class="flex items-center gap-4 px-6 py-3 rounded-full bg-[rgb(var(--bg-secondary))] border border-[rgb(var(--border-primary))] backdrop-blur-sm svelte-1y1a8hs"><span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse svelte-1y1a8hs"></span> SISTEMA OPERATIVO</div> <div class="hidden md:block w-px h-4 bg-[rgb(var(--border-primary))] svelte-1y1a8hs"></div> <div class="svelte-1y1a8hs">v2.0.4 PLATINUM</div> <div class="hidden md:block w-px h-4 bg-[rgb(var(--border-primary))] svelte-1y1a8hs"></div> <div class="svelte-1y1a8hs">2026 EIE DIGITAL</div></footer>`,1),pa=k(`<div class="min-h-screen w-full flex flex-col items-center p-6 lg:p-12 transition-colors duration-700 bg-[rgb(var(--bg-primary))] text-[rgb(var(--text-primary))] svelte-1y1a8hs"><div class="fixed inset-0 overflow-hidden pointer-events-none -z-10 svelte-1y1a8hs"><div class="absolute -top-[20%] -left-[10%] w-[60%] h-[60%] bg-indigo-500/5 blur-[120px] rounded-full animate-pulse svelte-1y1a8hs"></div> <div class="absolute -bottom-[20%] -right-[10%] w-[60%] h-[60%] bg-purple-500/5 blur-[120px] rounded-full animate-pulse svelte-1y1a8hs" style="animation-delay: 2s"></div> <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-[0.02] mix-blend-overlay svelte-1y1a8hs"></div></div> <!></div> <!>`,1);function ua(J,A){Mr(A,!1);const v=()=>_o(Qr,"$theme",Te),[Te,g]=mo();let C=Tt(A,"onSelect",8),o=h(!1);const be="¬°Nueva forma de anotar el Diario de Campo!",i="Ahora el Diario de Campo permite seleccionar y personalizar anotaciones predefinidas. ¬°Expl√≥ralo!";function c(){const X=localStorage.getItem("dismissedFeatureAlertDashboardDiario");if(!X)return!0;const F=new Date(X);return(new Date().getTime()-F.getTime())/(1e3*60*60*24)>5}const m=()=>{localStorage.setItem("dismissedFeatureAlertDashboardDiario",new Date().toISOString())},le=()=>{localStorage.setItem("dismissedFeatureAlertDashboardDiario",new Date().toISOString()),C()("diario")};Ar(()=>{d(o,!0),c()});const ge=()=>{Qr.update(X=>X==="light"?"dim":X==="dim"?"dark":"light")},H=[{id:"inasistencia",title:"Registro Diario",subtitle:"Gesti√≥n de Asistencia",description:"Control preciso de inasistencias y novedades diarias del aula.",image:ra,color:"from-blue-600/20 to-indigo-600/20",accent:"blue",tag:"Operativo"},{id:"anotador",title:"Anotador de Clase",subtitle:"Seguimiento √Ågil",description:"Registro din√°mico de incidencias y avances pedag√≥gicos por sesi√≥n.",image:oa,color:"from-purple-600/20 to-pink-600/20",accent:"purple",tag:"Acad√©mico"},{id:"diario",title:"Diario de Campo",subtitle:"Reflexi√≥n Docente",description:"Espacio para la reflexi√≥n profunda y documentaci√≥n pedag√≥gica.",image:aa,color:"from-emerald-600/20 to-teal-600/20",accent:"emerald",tag:"Estrat√©gico"},{id:"horas_laborables",title:"Horas Laborables",subtitle:"Gesti√≥n de Tiempo",description:"Calculadora especializada para el seguimiento de jornadas y horas docentes.",image:ao,color:"from-orange-600/20 to-amber-600/20",accent:"orange",tag:"Herramienta",url:"https://ceslep.github.io/horas_laborables"}];Pr();var q=pa(),R=rr(q),l=a(r(R),2);{var O=X=>{var F=ga(),x=rr(F),ae=r(x),De=r(ae),Ye=r(De);{var tt=$=>{var Z=na();b($,Z)},Q=$=>{var Z=da();b($,Z)},B=$=>{var Z=ca();b($,Z)};re(Ye,$=>{v()==="light"?$(tt):v()==="dim"?$(Q,1):$(B,!1)})}var U=a(ae,2),ce=a(r(U),2),$e=a(x,2);ke($e,5,()=>H,Ee,($,Z,te)=>{var ie=va(),se=a(r(ie),2),Xe=r(se),Oe=r(Xe),W=r(Oe),fe=r(W),Le=a(W,2),nt=r(Le),Je=a(Oe,2),rt=r(Je),D=a(Xe,2),p=r(D),E=r(p),z=a(E,2),V=a(p,2),ee=r(V),ve=a(se,2);S(()=>{jt(ie,"id",(e(Z),t(()=>e(Z).id==="diario"?"diario-module-target":""))),y(fe,(e(Z),t(()=>e(Z).subtitle))),y(nt,(e(Z),t(()=>e(Z).title))),y(rt,(e(Z),t(()=>e(Z).tag))),Ze(E,1,`absolute inset-0 bg-gradient-to-br ${e(Z),t(()=>e(Z).color)??""} mix-blend-overlay z-10`,"svelte-1y1a8hs"),jt(z,"src",(e(Z),t(()=>e(Z).image))),jt(z,"alt",(e(Z),t(()=>e(Z).title))),y(ee,(e(Z),t(()=>e(Z).description))),Ze(ve,1,`absolute inset-0 bg-gradient-to-br ${e(Z),t(()=>e(Z).color)??""} opacity-0 group-hover:opacity-[0.03] transition-opacity duration-500 pointer-events-none`,"svelte-1y1a8hs")}),G("click",ie,()=>C()(e(Z).id)),po(1,ie,()=>Mo,()=>({y:40,duration:800,delay:200+te*150})),b($,ie)});var Qe=a($e,2);S(()=>jt(ce,"src",ao)),G("click",De,ge),po(1,x,()=>Mo,()=>({y:-20,duration:800,delay:100})),po(1,Qe,()=>Ko,()=>({duration:1e3,delay:800})),b(X,F)};re(l,X=>{e(o)&&X(O)})}var j=a(R,2);xo(j,{featureMessage:be,description:i,onTryNow:le,onDismiss:m,targetSelector:"#diario-module-target",showPopup:!1,colorTheme:"emerald"}),b(J,q),Tr(),g()}const uo="1wN7lp7lOGyxKYIUJ9TU89N9knnJjX2Z_TfsOUg48QpQ",co="https://app.iedeoccidente.com/gs",fo="https://app.iedeoccidente.com/ig",ba=`${fo}/getprofes.php`,fa=`${fo}/getMaterias.php`,xa=`${fo}/getEstudiantes.php`,ha=`${co}/save_inasistencias2.php`,ma=`${co}/save_anotador.php`,_a=`${fo}/getOpcionesAnotador3.php`,ya=`${fo}/adiario.php`,wa=`${co}/save_diario.php`,yo="Inasistencias",Io="Datos",ho="1Q6EcSvccB7BoJiw9PD2s5J4PB8AJmr-6v-yKhiE4E8k",Ao="10pBVNYnS-ctmBYP9Y8KL3h32GZKsyi0bwoyil-kEGaE",jo="diario",ko="Selecciona un grado y una asignatura para comenzar a registrar inasistencias. Ahora puedes marcar motivos individuales y observaciones espec√≠ficas por estudiante.Tambien pueden ver el filtro de datos en Locker Studio",$o="Completa los datos de la clase y selecciona las observaciones que correspondan. Puedes editar el texto de cada observaci√≥n si es necesario.Recuerda hacer check en el cuadro de selecci√≥n para guardar esa anotaci√≥n.",Co="Completa los datos de la clase y selecciona las observaciones que correspondan. Puedes editar el texto de cada observaci√≥n si es necesario.Recuerda hacer check en el cuadro de selecci√≥n para guardar esa anotaci√≥n.",ka="https://lookerstudio.google.com/reporting/be2efb22-dc5f-4f21-9dfc-0253e763e19f",lo=[{nombre:"UNO",fecha_inicio:new Date("2026-01-26"),fecha_fin:new Date("2026-03-27")},{nombre:"DOS",fecha_inicio:new Date("2026-03-30"),fecha_fin:new Date("2026-06-12")},{nombre:"TRES",fecha_inicio:new Date("2026-07-07"),fecha_fin:new Date("2026-09-11")},{nombre:"CUATRO",fecha_inicio:new Date("2026-09-14"),fecha_fin:new Date("2026-11-20")}],$a=async()=>{try{const J=await fetch(`${ya}`);if(!J.ok)throw new Error(`Error: ${J.status}`);return await J.json()}catch(J){throw console.error("Error fetching diario options:",J),J}},Bo=async(J={})=>{try{const A=await fetch(`${co}/get_inasistencias.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)});if(!A.ok)throw new Error(`Error: ${A.status}`);return await A.json()}catch(A){throw console.error("Error fetching inasistencias:",A),A}},Ro=async(J={})=>{try{const A=await fetch(`${co}/get_anotador.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)});if(!A.ok)throw new Error(`Error: ${A.status}`);return await A.json()}catch(A){throw console.error("Error fetching inasistencias:",A),A}},Ca=async(J={})=>{try{const A=await fetch(`${co}/get_diario.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)});if(!A.ok)throw new Error(`Error: ${A.status}`);return await A.json()}catch(A){throw console.error("Error fetching diario:",A),A}},Sa=async J=>{try{const A=await fetch(`${ha}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)});if(!A.ok)throw new Error(`Error: ${A.status}`);return await A.json()}catch(A){throw console.error("Error saving inasistencias:",A),A}},Xr=async()=>{try{const J=await fetch(`${ba}`);if(!J.ok)throw new Error(`Error: ${J.status}`);return await J.json()}catch(J){throw console.error("Error fetching docentes:",J),J}},eo=async()=>{try{const J=await fetch(`${fa}`);if(!J.ok)throw new Error(`Error: ${J.status}`);return await J.json()}catch(J){throw console.error("Error fetching materias:",J),J}},to=async()=>{try{const J=await fetch(`${xa}`);if(!J.ok)throw new Error(`Error: ${J.status}`);return await J.json()}catch(J){throw console.error("Error fetching estudiantes:",J),J}},Aa=async()=>{try{const J=await fetch(`${_a}`);if(!J.ok)throw new Error(`Error: ${J.status}`);return await J.json()}catch(J){throw console.error("Error fetching opciones anotador3:",J),J}},Da=async J=>{try{const A=await fetch(`${ma}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)});if(!A.ok)throw new Error(`Error: ${A.status}`);return await A.json()}catch(A){throw console.error("Error saving inasistencias:",A),A}},Ea=async J=>{try{const A=await fetch(`${wa}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)});if(!A.ok)throw new Error(`Error: ${A.status}`);return await A.json()}catch(A){throw console.error("Error saving inasistencias:",A),A}};var Ia=k('<div class="flex-1 flex items-center justify-center"><div class="text-center"><div class="animate-spin w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full mx-auto mb-4"></div> <p>Cargando datos...</p></div></div>'),Ba=k('<span class="ml-2 px-2 py-1 text-xs bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full">Activos</span>'),Fa=k("<option> </option>"),za=k("<option> </option>"),Ma=k('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">Este docente no tiene registros de materias</p>'),Ta=k("<option> </option>"),Oa=k('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">No hay grados para los filtros seleccionados</p>'),Na=k("<option> </option>"),ja=k('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">No hay motivos para los filtros seleccionados</p>'),Ra=k('<div class="flex-1 flex items-center justify-center"><div class="text-center py-12 px-4"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm sm:text-base">No se encontraron registros con los filtros seleccionados</p></div></div>'),La=k('<button class="text-indigo-600 dark:text-indigo-400 hover:underline font-medium text-left truncate w-full"> </button>'),Pa=k('<tr class="border-b transition-colors hover:bg-black/5 dark:hover:bg-white/5 text-xs"><td class="p-2"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 text-center"> </td><td class="p-2 truncate max-w-[150px]"><!></td><td class="p-2 text-center"><span><span> </span> </span></td><td class="p-2 text-center"> </td><td class="p-2"><span class="truncate block max-w-xs text-xs"> </span></td></tr>'),Ha=k('<button class="text-indigo-600 dark:text-indigo-400 hover:underline font-medium text-left truncate w-full"> </button>'),Ga=k('<tr class="border-b transition-colors hover:bg-black/5 dark:hover:bg-white/5 text-xs"><td class="p-2 whitespace-nowrap"> </td><td class="p-2"><span class="truncate block max-w-[120px]"> </span></td><td class="p-2 truncate max-w-[120px]"> </td><td class="p-2"><span class="truncate block max-w-[100px]"><!></span></td><td class="p-2 text-center"><span><span> </span> </span></td><td class="p-2 whitespace-nowrap text-center"> </td><td class="p-2 whitespace-nowrap text-center"> </td></tr>'),Ua=k('<button class="font-semibold text-xs text-indigo-600 dark:text-indigo-400 truncate hover:underline text-left w-full"> </button>'),Va=k('<p class="font-semibold text-xs text-indigo-600 dark:text-indigo-400 truncate"> </p>'),Ya=k('<div class="text-[10px] p-1.5 rounded"><div class="flex items-start"><svg class="w-3 h-3 mr-1 mt-0.5 flex-shrink-0 opacity-60" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span class="line-clamp-1"> </span></div></div>'),Wa=k('<div class="border rounded-lg p-2 transition-colors hover:bg-black/5 dark:hover:bg-white/5"><div class="flex justify-between items-center mb-1.5"><div class="flex-1 min-w-0"><!> <p class="text-[10px] opacity-75"> </p></div> <div class="flex flex-col items-end ml-2 flex-shrink-0"><span><span> </span> </span> <span class="text-[10px] font-semibold"> </span></div></div> <div class="flex gap-3 text-[10px] mb-1.5"><div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="truncate"> </span></div> <div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <span class="truncate"> </span></div></div> <!></div>'),qa=k('<div class="hidden lg:flex flex-1 flex-col overflow-hidden min-h-0"><div class="flex-1 overflow-auto min-w-full border rounded-lg"><table class="w-full border-collapse text-sm min-w-[800px]"><thead class="sticky top-0 z-10 border-b"><tr><th class="text-left p-2 font-semibold whitespace-nowrap">Fecha</th><th class="text-left p-2 font-semibold whitespace-nowrap">Docente</th><th class="text-left p-2 font-semibold whitespace-nowrap">Materia</th><th class="text-center p-2 font-semibold whitespace-nowrap">Grado</th><th class="text-left p-2 font-semibold whitespace-nowrap">Estudiante</th><th class="text-center p-2 font-semibold whitespace-nowrap">Motivo</th><th class="text-center p-2 font-semibold whitespace-nowrap">Horas</th><th class="text-left p-2 font-semibold whitespace-nowrap">Observaciones</th></tr></thead><tbody></tbody></table></div></div> <div class="hidden md:flex lg:hidden flex-1 overflow-auto"><div class="min-w-full border rounded-lg"><table class="w-full border-collapse text-xs"><thead class="sticky top-0 z-10 border-b"><tr><th class="text-left p-2 font-semibold whitespace-nowrap">Fecha</th><th class="text-left p-2 font-semibold whitespace-nowrap">Docente</th><th class="text-left p-2 font-semibold whitespace-nowrap">Materia</th><th class="text-left p-2 font-semibold whitespace-nowrap">Estudiante</th><th class="text-center p-2 font-semibold whitespace-nowrap">Motivo</th><th class="text-center p-2 font-semibold whitespace-nowrap">Horas</th><th class="text-center p-2 font-semibold whitespace-nowrap">Grado</th></tr></thead><tbody></tbody></table></div></div> <div class="flex-1 overflow-y-auto md:hidden px-1"><div class="space-y-2"></div></div>',1),Ja=k('<div class="p-3 sm:p-4 border-b"><div class="flex items-center justify-between mb-2 sm:mb-3"><h3 class="text-lg font-semibold">Filtros <!></h3> <button class="text-sm px-3 py-1 rounded-lg border transition-colors hover:bg-black/5 dark:hover:bg-white/5">Limpiar filtros</button></div> <div class="mb-3 p-1.5 sm:p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg"><p class="text-[10px] sm:text-xs font-medium mb-1.5">R√°pido: Fechas</p> <div class="flex items-center mb-2"><input id="checkFiltrarFecha" type="checkbox" class="w-4 h-4 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 dark:bg-zinc-700"/> <label for="checkFiltrarFecha" class="ml-2 text-xs font-medium">Activar filtro por fechas</label></div> <div class="flex flex-wrap gap-1 sm:gap-2"><button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Hoy</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 7 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 30 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Mes actual</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimo trimestre</button></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"><div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroDocente" class="block text-xs sm:text-sm font-medium">Docente</label> <select id="filtroDocente" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option>Todos los docentes</option><!></select></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroMateria" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroMateria" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroGrado" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroGrado" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroMotivo" class="block text-xs sm:text-sm font-medium">Motivo</label> <select id="filtroMotivo" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaInicio" class="block text-xs sm:text-sm font-medium">Fecha desde</label> <input id="filtroFechaInicio" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaFin" class="block text-xs sm:text-sm font-medium">Fecha hasta</label> <input id="filtroFechaFin" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div></div></div></div> <div class="flex-1 flex flex-col p-2 sm:p-4 min-h-0"><div class="mb-4 px-0 sm:px-3"><p class="text-sm">Se encontraron <span class="font-bold text-indigo-500"> </span> registros</p></div> <!></div>',1),Ka=k('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4" role="button" tabindex="0" aria-label="Cerrar ventana"><div class="w-full max-w-7xl max-h-[95vh] bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl overflow-hidden flex flex-col"><div class="flex items-center justify-between p-3 sm:p-4 border-b"><div class="flex items-center gap-3"><img alt="EIE Logo" class="h-8 w-auto hidden sm:block"/> <div><h2 class="text-lg sm:text-xl font-bold">Inasistencias</h2> <p class="text-xs hidden sm:block">Filtra y consulta los registros</p></div></div> <div class="flex items-center gap-3"><button class="inline-flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Exportar CSV</button> <button class="p-2 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5" aria-label="Cerrar"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div> <div class="flex-1 overflow-hidden flex flex-col min-h-0"><!></div></div></div>');function Za(J,A){Mr(A,!1);const v=h(),Te=h(),g=h(),C=h(),o=h();let be=Tt(A,"onClose",8),i=Tt(A,"selectedDocente",8,""),c=h([]),m=[],le=[],ge=[],H=h(!1),q=h(!1),R=h([]),l=h({docente:i()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",motivo:""});const O=()=>{const p=new Date,E=new Date(p.getFullYear(),p.getMonth()-1,p.getDate()),z=V=>{const ee=V.getFullYear(),ve=String(V.getMonth()+1).padStart(2,"0"),je=String(V.getDate()).padStart(2,"0");return`${ee}-${ve}-${je}`};Fe(l,e(l).fechaInicio=z(E)),qe(()=>{e(o),e(x),e(v),e(g),e(C)}),Fe(l,e(l).fechaFin=z(p)),qe(()=>{e(o),e(x),e(v),e(g),e(C)})},j=p=>{const E=new Date;let z;switch(p){case"hoy":z=new Date(E);break;case"semana":z=new Date(E),z.setDate(E.getDate()-7);break;case"mes":z=new Date(E),z.setDate(E.getDate()-30);break;case"mes_actual":z=new Date(E.getFullYear(),E.getMonth(),1);break;case"trimestre":z=new Date(E),z.setDate(E.getDate()-90);break;default:O();return}const V=ee=>{const ve=ee.getFullYear(),je=String(ee.getMonth()+1).padStart(2,"0"),oe=String(ee.getDate()).padStart(2,"0");return`${ve}-${je}-${oe}`};Fe(l,e(l).fechaInicio=V(z)),qe(()=>{e(o),e(x),e(v),e(g),e(C)}),Fe(l,e(l).fechaFin=V(E)),qe(()=>{e(o),e(x),e(v),e(g),e(C)}),d(q,!0),console.log("‚úÖ setFechaPreset ejecutado:",{preset:p,fechaInicio:e(l).fechaInicio,fechaFin:e(l).fechaFin,filtrarPorFecha:e(q)})},X=[{value:"Sin excusa",icon:"üö´",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},{value:"Excusa",icon:"üìÑ",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},{value:"LLegada Tarde",icon:"‚è∞",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},{value:"Transporte Escolar",icon:"üöå",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},{value:"Permiso",icon:"‚úÖ",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},{value:"No portar/sin uniforme",icon:"üëö",color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"},{value:"Pacto de Aula",icon:"ü§ù",color:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"},{value:"Uso del celular",icon:"üì±",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},{value:"Desorden en Clase",icon:"üîä",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"},{value:"Fuga",icon:"üèÉ‚Äç‚ôÇÔ∏è",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},{value:"No realizaci√≥n de Aseo",icon:"üßπ",color:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200"},{value:"Licencia por salud",icon:"üè•",color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"},{value:"Incapacidad",icon:"ü©∫",color:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200"},{value:"Reuni√≥n interna",icon:"üë•",color:"bg-zinc-100 text-zinc-800 dark:bg-zinc-900 dark:text-zinc-200"},{value:"Psicoorientaci√≥n",icon:"üß†",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}],F=p=>X.find(E=>E.value===p)||{icon:"‚ùì",color:"bg-gray-100 text-gray-800"};let x=h([]),ae=h([]),De=h([]),Ye=h([]);const tt=p=>{if(!p)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(p))return p;const E=p.split("/");if(E.length===3){const V=E[0].padStart(2,"0"),ee=E[1].padStart(2,"0");return`${E[2].length===2?`20${E[2]}`:E[2]}-${ee}-${V}`}const z=new Date(p);if(!isNaN(z.getTime())){const V=z.getFullYear(),ee=String(z.getMonth()+1).padStart(2,"0"),ve=String(z.getDate()).padStart(2,"0");return`${V}-${ee}-${ve}`}return p},Q=async()=>{d(H,!0);try{const[p,E,z,V]=await Promise.all([Bo({spreadsheetId:uo,worksheetTitle:yo}),Xr(),eo(),to()]);console.log("Respuesta cruda de inasistencias:",p),console.log("Tipo de dato:",typeof p),console.log("Es array:",Array.isArray(p)),p&&typeof p=="object"&&console.log("Keys:",Object.keys(p));const ee=L=>{if(!L?.records||!Array.isArray(L.records))return[];const ne=L.records[0]?.values||[];return L.records.slice(1).map(ye=>{const lt=ye.values||[];return{timestamp:lt[0]||"",docente:lt[1]||"",fecha:lt[2]||"",horas:lt[3]||"",materia:lt[4]||"",motivo:lt[5]||"",grado:lt[6]||"",nombre:lt[7]||"",observaciones:lt[8]||""}}).filter(ye=>ye.docente&&ye.fecha)},ve=L=>Array.isArray(L)?L:L?.data&&Array.isArray(L.data)?L.data:L?.rows&&Array.isArray(L.rows)?L.rows:L?.values&&Array.isArray(L.values)?L.values:L?.inasistencias&&Array.isArray(L.inasistencias)?L.inasistencias:[];d(c,ee(p)),m=ve(E),le=ve(z),ge=ve(V),d(x,e(c).length>0?[...new Set(e(c).map(L=>L.docente).filter(Boolean))].sort():[]),d(ae,e(c).length>0?[...new Set(e(c).map(L=>L.materia).filter(Boolean))].sort():[]);const je=[...new Set(ge.map(L=>(typeof L=="string"?L:L.grado||"").toString()).filter(Boolean))],oe=e(c).length>0?e(c).map(L=>L.grado).filter(Boolean):[];d(De,[...new Set([...je,...oe])].sort((L,ne)=>{const Ie=parseInt(L),ye=parseInt(ne);return!isNaN(Ie)&&!isNaN(ye)?Ie-ye:L.localeCompare(ne)})),d(Ye,e(c).length>0?[...new Set(e(c).map(L=>L.motivo).filter(Boolean))].sort():[]),O(),console.log("Datos cargados:",{inasistencias:e(c).length,docentes:m.length,docentesUnicos:e(x).length,materiasUnicas:e(ae).length,gradosUnicos:e(De).length,motivosUnicos:e(Ye).length})}catch(p){console.error("Error cargando datos:",p),await $t.fire({icon:"error",title:"Error",text:"No se pudieron cargar los datos de inasistencias",confirmButtonColor:"#ef4444"})}finally{d(H,!1)}},B=()=>{d(l,{docente:i()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",motivo:""}),O(),d(q,!1)},U=()=>{if(e(R).length===0){$t.fire({icon:"warning",title:"Sin datos",text:"No hay datos para exportar",confirmButtonColor:"#f59e0b"});return}const E=[["Fecha","Docente","Materia","Grado","Estudiante","Motivo","Horas","Observaciones"].join(","),...e(R).map(ve=>[ve.fecha,`"${ve.docente}"`,`"${ve.materia}"`,ve.grado,`"${ve.nombre}"`,`"${ve.motivo}"`,ve.horas,`"${ve.observaciones}"`].join(","))].join(`
`),z=new Blob([E],{type:"text/csv;charset=utf-8;"}),V=document.createElement("a"),ee=URL.createObjectURL(z);V.setAttribute("href",ee),V.setAttribute("download",`inasistencias_${new Date().toISOString().split("T")[0]}.csv`),V.style.visibility="hidden",document.body.appendChild(V),V.click(),document.body.removeChild(V)},ce=p=>{try{const[E,z,V]=p.split("-");return E&&z&&V?`${V}/${z}/${E}`:p}catch{return p}},$e=p=>{if(!e(l).docente||!e(l).materia||!e(l).grado)return;const z=e(c).filter(ee=>{if(ee.nombre!==p||ee.docente!==e(l).docente||ee.materia!==e(l).materia||ee.grado!==e(l).grado)return!1;if(e(q)){const ve=tt(ee.fecha);if(e(l).fechaInicio&&ve<e(l).fechaInicio||e(l).fechaFin&&ve>e(l).fechaFin)return!1}return!0}).reduce((ee,ve)=>{const je=parseInt(ve.horas)||0;return ee+je},0);let V="";e(q)&&e(l).fechaInicio&&e(l).fechaFin?V=`entre ${ce(e(l).fechaInicio)} y ${ce(e(l).fechaFin)}`:V="en total (hist√≥rico)",$t.fire({icon:"info",title:p,html:`
        <div class="text-left space-y-2">
          <p><strong>Materia:</strong> ${e(l).materia}</p>
          <p><strong>Total inasistencias:</strong> ${z} horas</p>
          <p class="text-sm text-gray-500 text-center mt-4">(${V})</p>
        </div>
      `,confirmButtonColor:"#4f46e5"})};Ar(()=>{Q()}),Ae(()=>(e(l),e(c),e(ae)),()=>{d(v,e(l).docente?[...new Set(e(c).filter(p=>p.docente===e(l).docente).map(p=>p.materia).filter(Boolean))].sort():e(ae))}),Ae(()=>(e(l),e(c),e(De)),()=>{d(Te,e(l).docente?[...new Set(e(c).filter(p=>p.docente===e(l).docente).map(p=>p.grado).filter(Boolean))].sort((p,E)=>{const z=parseInt(p),V=parseInt(E);return!isNaN(z)&&!isNaN(V)?z-V:p.localeCompare(E)}):e(De))}),Ae(()=>(e(l),e(c),e(Te)),()=>{d(g,e(l).materia?[...new Set(e(c).filter(p=>p.materia===e(l).materia).map(p=>p.grado).filter(Boolean))].sort((p,E)=>{const z=parseInt(p),V=parseInt(E);return!isNaN(z)&&!isNaN(V)?z-V:p.localeCompare(E)}):e(Te))}),Ae(()=>(e(l),e(c),e(Ye)),()=>{d(C,e(l).docente||e(l).materia||e(l).grado?[...new Set(e(c).filter(p=>!(e(l).docente&&p.docente!==e(l).docente||e(l).materia&&p.materia!==e(l).materia||e(l).grado&&p.grado!==e(l).grado)).map(p=>p.motivo).filter(Boolean))].sort():e(Ye))}),Ae(()=>{},()=>{d(o,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Ae(()=>(e(c),e(q),e(l),e(R)),()=>{console.log("üîÑ Filtro reactivo ejecut√°ndose:",{totalInasistencias:e(c).length,filtrarPorFecha:e(q),fechaInicio:e(l).fechaInicio,fechaFin:e(l).fechaFin}),d(R,e(c).filter(p=>{if(e(l).docente&&p.docente!==e(l).docente||e(l).materia&&p.materia!==e(l).materia||e(l).grado&&p.grado!==e(l).grado||e(l).motivo&&p.motivo!==e(l).motivo)return!1;if(e(q)){const E=tt(p.fecha);if(e(l).fechaInicio&&E<e(l).fechaInicio||e(l).fechaFin&&E>e(l).fechaFin)return!1}return!0})),console.log(`üìä Resultados filtrados: ${e(R).length} de ${e(c).length}`)}),Ae(()=>(e(q),e(l)),()=>{e(q)&&(!e(l).fechaInicio||!e(l).fechaFin)&&O()}),Lr(),Pr();var Qe=Ka(),$=r(Qe),Z=r($),te=r(Z),ie=r(te),se=a(ie,2),Xe=r(se),Oe=a(Xe,2),W=a(te,2),fe=r(W),Le=a(fe,2),nt=a(Z,2),Je=r(nt);{var rt=p=>{var E=Ia(),z=r(E),V=a(r(z),2);S(()=>s(V,`color: ${e(o),t(()=>e(o).text)??""};`)),b(p,E)},D=p=>{var E=Ja(),z=rr(E),V=r(z),ee=r(V),ve=a(r(ee));{var je=we=>{var He=Ba();b(we,He)};re(ve,we=>{e(l),t(()=>e(l).docente||e(l).materia||e(l).grado||e(l).motivo||e(l).fechaInicio||e(l).fechaFin)&&we(je)})}var oe=a(ee,2),L=a(V,2),ne=r(L),Ie=a(ne,2),ye=r(Ie),lt=a(ye,2),xt=a(Ie,2),me=r(xt),P=a(me,2),K=a(P,2),xe=a(K,2),We=a(xe,2),n=a(L,2),w=r(n),I=r(w),N=r(I),Me=a(N,2),Ge=r(Me);Ge.value=Ge.__value="";var ot=a(Ge);ke(ot,1,()=>e(x),Ee,(we,He)=>{var gt=Fa(),ht=r(gt),zt={};S(()=>{y(ht,e(He)),zt!==(zt=e(He))&&(gt.value=(gt.__value=e(He))??"")}),b(we,gt)});var Re=a(I,2),Zt=r(Re),pr=r(Zt),Jt=a(Zt,2),Qt=r(Jt),xr=r(Qt);Qt.value=Qt.__value="";var Vt=a(Qt);ke(Vt,1,()=>e(v),Ee,(we,He)=>{var gt=za(),ht=r(gt),zt={};S(()=>{y(ht,e(He)),zt!==(zt=e(He))&&(gt.value=(gt.__value=e(He))??"")}),b(we,gt)});var dt=a(Jt,2);{var et=we=>{var He=Ma();b(we,He)};re(dt,we=>{e(l),e(v),t(()=>e(l).docente&&e(v).length===0)&&we(et)})}var Ot=a(w,2),Pt=r(Ot),Ht=r(Pt),Rt=r(Ht),Ft=a(Ht,2),Gt=r(Ft),cr=r(Gt);Gt.value=Gt.__value="";var ur=a(Gt);ke(ur,1,()=>e(g),Ee,(we,He)=>{var gt=Ta(),ht=r(gt),zt={};S(()=>{y(ht,e(He)),zt!==(zt=e(He))&&(gt.value=(gt.__value=e(He))??"")}),b(we,gt)});var Xt=a(Ft,2);{var br=we=>{var He=Oa();b(we,He)};re(Xt,we=>{e(l),e(g),t(()=>(e(l).docente||e(l).materia)&&e(g).length===0)&&we(br)})}var wr=a(Pt,2),hr=r(wr),Dr=a(hr,2),mr=r(Dr),kr=r(mr);mr.value=mr.__value="";var _r=a(mr);ke(_r,1,()=>e(C),Ee,(we,He)=>{const gt=Bt(()=>(e(He),t(()=>F(e(He)))));var ht=Na(),zt=r(ht),sr={};S(()=>{y(zt,`${Ne(e(gt)),t(()=>e(gt).icon)??""}
                      ${e(He)??""}`),sr!==(sr=e(He))&&(ht.value=(ht.__value=e(He))??"")}),b(we,ht)});var Er=a(Dr,2);{var M=we=>{var He=ja();b(we,He)};re(Er,we=>{e(l),e(C),t(()=>(e(l).docente||e(l).materia||e(l).grado)&&e(C).length===0)&&we(M)})}var pe=a(Ot,2),_e=r(pe),Ke=r(_e),bt=a(Ke,2),vt=a(_e,2),Ue=r(vt),wt=a(Ue,2),or=a(z,2),Yt=r(or),Ce=r(Yt),ut=a(r(Ce)),kt=r(ut),Ut=a(Yt,2);{var Ct=we=>{var He=Ra(),gt=r(He),ht=r(gt),zt=a(ht,2);S(()=>{s(ht,`color: ${e(o),t(()=>e(o).icon)??""};`),s(zt,`color: ${e(o),t(()=>e(o).text)??""};`)}),b(we,He)},ar=we=>{var He=qa(),gt=rr(He),ht=r(gt),zt=r(ht),sr=r(zt),Hr=r(sr),Or=r(Hr),Nr=a(Or),Jr=a(Nr),Kr=a(Jr),jr=a(Kr),Se=a(jr),lr=a(Se),$r=a(lr),Cr=a(sr);ke(Cr,5,()=>e(R),Ee,(f,u)=>{const Y=Bt(()=>(e(u),t(()=>F(e(u).motivo))));var ue=Pa(),Pe=r(ue),ze=r(Pe),Be=a(Pe),st=r(Be),it=a(Be),ct=r(it),ft=a(it),Kt=r(ft),ir=a(ft),Fr=r(ir);{var qt=Lt=>{var It=La(),fr=r(It);S(()=>y(fr,(e(u),t(()=>e(u).nombre)))),G("click",It,()=>$e(e(u).nombre)),b(Lt,It)},nr=Lt=>{var It=To();S(()=>y(It,(e(u),t(()=>e(u).nombre)))),b(Lt,It)};re(Fr,Lt=>{e(l),t(()=>e(l).docente&&e(l).materia&&e(l).grado)?Lt(qt):Lt(nr,!1)})}var gr=a(ir),mt=r(gr),Mt=r(mt),dr=r(Mt),_t=a(Mt),er=a(gr),yr=r(er),Nt=a(er),Sr=r(Nt),tr=r(Sr);S(Lt=>{s(ue,`border-color: ${e(o),t(()=>e(o).border)??""};`),s(Pe,`color: ${e(o),t(()=>e(o).text)??""};`),y(ze,Lt),s(Be,`color: ${e(o),t(()=>e(o).text)??""};`),jt(Be,"title",(e(u),t(()=>e(u).docente))),y(st,(e(u),t(()=>e(u).docente))),s(it,`color: ${e(o),t(()=>e(o).text)??""};`),jt(it,"title",(e(u),t(()=>e(u).materia))),y(ct,(e(u),t(()=>e(u).materia))),s(ft,`color: ${e(o),t(()=>e(o).text)??""};`),y(Kt,(e(u),t(()=>e(u).grado))),s(ir,`color: ${e(o),t(()=>e(o).text)??""};`),jt(ir,"title",(e(u),t(()=>e(u).nombre))),Ze(mt,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Ne(e(Y)),t(()=>e(Y).color)??""}`),y(dr,(Ne(e(Y)),t(()=>e(Y).icon))),y(_t,` ${e(u),t(()=>e(u).motivo)??""}`),s(er,`color: ${e(o),t(()=>e(o).text)??""};`),y(yr,(e(u),t(()=>e(u).horas))),s(Nt,`color: ${e(o),t(()=>e(o).text)??""};`),y(tr,(e(u),t(()=>e(u).observaciones||"-")))},[()=>(e(u),t(()=>ce(e(u).fecha)))]),b(f,ue)});var Gr=a(gt,2),Ir=r(Gr),Ur=r(Ir),vr=r(Ur),Wr=r(vr),Br=r(Wr),qr=a(Br),_=a(qr),T=a(_),de=a(T),he=a(de),at=a(he),Ve=a(vr);ke(Ve,5,()=>e(R),Ee,(f,u)=>{const Y=Bt(()=>(e(u),t(()=>F(e(u).motivo))));var ue=Ga(),Pe=r(ue),ze=r(Pe),Be=a(Pe),st=r(Be),it=r(st),ct=a(Be),ft=r(ct),Kt=a(ct),ir=r(Kt),Fr=r(ir);{var qt=tr=>{var Lt=Ha(),It=r(Lt);S(()=>y(It,(e(u),t(()=>e(u).nombre)))),G("click",Lt,()=>$e(e(u).nombre)),b(tr,Lt)},nr=tr=>{var Lt=To();S(()=>y(Lt,(e(u),t(()=>e(u).nombre)))),b(tr,Lt)};re(Fr,tr=>{e(l),t(()=>e(l).docente&&e(l).materia&&e(l).grado)?tr(qt):tr(nr,!1)})}var gr=a(Kt),mt=r(gr),Mt=r(mt),dr=r(Mt),_t=a(Mt),er=a(gr),yr=r(er),Nt=a(er),Sr=r(Nt);S(tr=>{s(ue,`border-color: ${e(o),t(()=>e(o).border)??""};`),s(Pe,`color: ${e(o),t(()=>e(o).text)??""};`),y(ze,tr),s(Be,`color: ${e(o),t(()=>e(o).text)??""};`),jt(st,"title",(e(u),t(()=>e(u).docente))),y(it,(e(u),t(()=>e(u).docente))),s(ct,`color: ${e(o),t(()=>e(o).text)??""};`),jt(ct,"title",(e(u),t(()=>e(u).materia))),y(ft,(e(u),t(()=>e(u).materia))),s(Kt,`color: ${e(o),t(()=>e(o).text)??""};`),jt(ir,"title",(e(u),t(()=>e(u).nombre))),Ze(mt,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Ne(e(Y)),t(()=>e(Y).color)??""}`),y(dr,(Ne(e(Y)),t(()=>e(Y).icon))),y(_t,` ${e(u),t(()=>e(u).motivo)??""}`),s(er,`color: ${e(o),t(()=>e(o).text)??""};`),y(yr,(e(u),t(()=>e(u).horas))),s(Nt,`color: ${e(o),t(()=>e(o).text)??""};`),y(Sr,(e(u),t(()=>e(u).grado)))},[()=>(e(u),t(()=>ce(e(u).fecha)))]),b(f,ue)});var At=a(Gr,2),Wt=r(At);ke(Wt,5,()=>e(R),Ee,(f,u)=>{const Y=Bt(()=>(e(u),t(()=>F(e(u).motivo))));var ue=Wa(),Pe=r(ue),ze=r(Pe),Be=r(ze);{var st=It=>{var fr=Ua(),Zr=r(fr);S(()=>y(Zr,(e(u),t(()=>e(u).nombre)))),G("click",fr,()=>$e(e(u).nombre)),b(It,fr)},it=It=>{var fr=Va(),Zr=r(fr);S(()=>y(Zr,(e(u),t(()=>e(u).nombre)))),b(It,fr)};re(Be,It=>{e(l),t(()=>e(l).docente&&e(l).materia&&e(l).grado)?It(st):It(it,!1)})}var ct=a(Be,2),ft=r(ct),Kt=a(ze,2),ir=r(Kt),Fr=r(ir),qt=r(Fr),nr=a(Fr),gr=a(ir,2),mt=r(gr),Mt=a(Pe,2),dr=r(Mt),_t=a(r(dr),2),er=r(_t),yr=a(dr,2),Nt=a(r(yr),2),Sr=r(Nt),tr=a(Mt,2);{var Lt=It=>{var fr=Ya(),Zr=r(fr),Vr=a(r(Zr),2),Yr=r(Vr);S(()=>{s(fr,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; color: ${e(o),t(()=>e(o).label)??""};`),y(Yr,(e(u),t(()=>e(u).observaciones)))}),b(It,fr)};re(tr,It=>{e(u),t(()=>e(u).observaciones)&&It(Lt)})}S(It=>{s(ue,`border-color: ${e(o),t(()=>e(o).cardBorder)??""}; background-color: ${e(o),t(()=>e(o).cardBg)??""};`),s(ct,`color: ${e(o),t(()=>e(o).label)??""};`),y(ft,`${e(u),t(()=>e(u).grado)??""} ‚Ä¢ ${It??""}`),Ze(ir,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium ${Ne(e(Y)),t(()=>e(Y).color)??""} mb-0.5`),y(qt,(Ne(e(Y)),t(()=>e(Y).icon))),y(nr,` ${e(u),t(()=>e(u).motivo)??""}`),s(gr,`color: ${e(o),t(()=>e(o).text)??""};`),y(mt,`${e(u),t(()=>e(u).horas)??""}h`),s(Mt,`color: ${e(o),t(()=>e(o).text)??""};`),y(er,(e(u),t(()=>e(u).docente))),jt(Nt,"title",(e(u),t(()=>e(u).materia))),y(Sr,(e(u),t(()=>e(u).materia)))},[()=>(e(u),t(()=>ce(e(u).fecha)))]),b(f,ue)}),S(()=>{s(ht,`border-color: ${e(o),t(()=>e(o).cardBorder)??""};`),s(sr,`background-color: ${e(o),t(()=>e(o).cardBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""};`),s(Or,`color: ${e(o),t(()=>e(o).text)??""};`),s(Nr,`color: ${e(o),t(()=>e(o).text)??""};`),s(Jr,`color: ${e(o),t(()=>e(o).text)??""};`),s(Kr,`color: ${e(o),t(()=>e(o).text)??""};`),s(jr,`color: ${e(o),t(()=>e(o).text)??""};`),s(Se,`color: ${e(o),t(()=>e(o).text)??""};`),s(lr,`color: ${e(o),t(()=>e(o).text)??""};`),s($r,`color: ${e(o),t(()=>e(o).text)??""};`),s(Ir,`border-color: ${e(o),t(()=>e(o).cardBorder)??""};`),s(vr,`background-color: ${e(o),t(()=>e(o).cardBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""};`),s(Br,`color: ${e(o),t(()=>e(o).text)??""};`),s(qr,`color: ${e(o),t(()=>e(o).text)??""};`),s(_,`color: ${e(o),t(()=>e(o).text)??""};`),s(T,`color: ${e(o),t(()=>e(o).text)??""};`),s(de,`color: ${e(o),t(()=>e(o).text)??""};`),s(he,`color: ${e(o),t(()=>e(o).text)??""};`),s(at,`color: ${e(o),t(()=>e(o).text)??""};`)}),b(we,He)};re(Ut,we=>{e(R),t(()=>e(R).length===0)?we(Ct):we(ar,!1)})}S(()=>{s(z,`border-color: ${e(o),t(()=>e(o).cardBorder)??""};`),s(ee,`color: ${e(o),t(()=>e(o).text)??""};`),s(oe,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),s(ne,`color: ${e(o),t(()=>e(o).text)??""};`),s(lt,`color: ${e(o),t(()=>e(o).text)??""};`),s(me,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),s(P,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),s(K,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),s(xe,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),s(We,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),s(N,`color: ${e(o),t(()=>e(o).label)??""};`),s(Me,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),s(Zt,`color: ${e(o),t(()=>e(o).label)??""};`),y(pr,`Materia ${e(l),t(()=>e(l).docente?"(del docente)":"")??""}`),s(Jt,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),y(xr,(e(l),t(()=>e(l).docente?"Todas las materias del docente":"Todas las materias"))),s(Ht,`color: ${e(o),t(()=>e(o).label)??""};`),y(Rt,`Grado ${e(l),t(()=>e(l).docente||e(l).materia?"(filtrado)":"")??""}`),s(Ft,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),y(cr,(e(l),t(()=>e(l).docente||e(l).materia?"Todos los grados filtrados":"Todos los grados"))),s(hr,`color: ${e(o),t(()=>e(o).label)??""};`),s(Dr,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),y(kr,(e(l),t(()=>e(l).docente||e(l).materia||e(l).grado?"Todos los motivos filtrados":"Todos los motivos"))),s(Ke,`color: ${e(o),t(()=>e(o).label)??""};`),bt.disabled=!e(q),s(bt,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),s(Ue,`color: ${e(o),t(()=>e(o).label)??""};`),wt.disabled=!e(q),s(wt,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),s(Ce,`color: ${e(o),t(()=>e(o).label)??""};`),y(kt,(e(R),t(()=>e(R).length)))}),G("click",oe,B),Do(ye,()=>e(q),we=>d(q,we)),G("click",me,()=>j("hoy")),G("click",P,()=>j("semana")),G("click",K,()=>j("mes")),G("click",xe,()=>j("mes_actual")),G("click",We,()=>j("trimestre")),pt(Me,()=>e(l).docente,we=>(Fe(l,e(l).docente=we),qe(()=>{e(o),e(x),e(v),e(g),e(C)}))),pt(Jt,()=>e(l).materia,we=>(Fe(l,e(l).materia=we),qe(()=>{e(o),e(x),e(v),e(g),e(C)}))),pt(Ft,()=>e(l).grado,we=>(Fe(l,e(l).grado=we),qe(()=>{e(o),e(x),e(v),e(g),e(C)}))),pt(Dr,()=>e(l).motivo,we=>(Fe(l,e(l).motivo=we),qe(()=>{e(o),e(x),e(v),e(g),e(C)}))),zr(bt,()=>e(l).fechaInicio,we=>(Fe(l,e(l).fechaInicio=we),qe(()=>{e(o),e(x),e(v),e(g),e(C)}))),zr(wt,()=>e(l).fechaFin,we=>(Fe(l,e(l).fechaFin=we),qe(()=>{e(o),e(x),e(v),e(g),e(C)}))),b(p,E)};re(Je,p=>{e(H)?p(rt):p(D,!1)})}S(()=>{s($,`background-color: ${e(o),t(()=>e(o).cardBg)??""};`),s(Z,`border-color: ${e(o),t(()=>e(o).cardBorder)??""};`),jt(ie,"src",ao),s(Xe,`color: ${e(o),t(()=>e(o).text)??""};`),s(Oe,`color: ${e(o),t(()=>e(o).label)??""};`),fe.disabled=(e(R),t(()=>e(R).length===0)),s(Le,`color: ${e(o),t(()=>e(o).text)??""};`)}),G("click",fe,U),G("click",Le,function(...p){be()?.apply(this,p)}),G("click",Qe,no(function(...p){be()?.apply(this,p)})),G("keydown",Qe,p=>{(p.key==="Enter"||p.key===" ")&&be()()}),b(J,Qe),Tr()}var Qa=k('<p class="text-sm font-medium tracking-wide animate-pulse" style="color: rgb(var(--text-secondary));"> </p>'),Xa=k('<div class="flex flex-col items-center justify-center gap-4 p-8 animate-in fade-in duration-500"><div><div class="absolute inset-0 bg-indigo-500/20 blur-xl rounded-full animate-pulse"></div> <div class="absolute inset-0 rounded-full border-2 border-indigo-500/20 border-t-indigo-500 animate-spin"></div> <div class="absolute inset-2 rounded-full border-2 border-violet-500/20 border-b-violet-500 animate-[spin_1.5s_linear_infinite_reverse]"></div> <div class="absolute inset-[35%] bg-gradient-to-tr from-indigo-600 to-violet-600 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)] animate-pulse"></div></div> <!></div>');function vo(J,A){Mr(A,!1);const v=h();let Te=Tt(A,"size",8,"medium"),g=Tt(A,"message",8,"");const C={small:"w-8 h-8",medium:"w-16 h-16",large:"w-24 h-24"};Ae(()=>Ne(Te()),()=>{d(v,C[Te()]||C.medium)}),Lr();var o=Xa(),be=r(o),i=a(be,2);{var c=m=>{var le=Qa(),ge=r(le);S(()=>y(ge,g())),b(m,le)};re(i,m=>{g()&&m(c)})}S(()=>Ze(be,1,`relative ${e(v)??""}`)),b(J,o),Tr()}var es=k('<div class="flex justify-center py-12"><!></div>'),ts=k("<option> </option>"),rs=k("<option> </option>"),os=k("<option> </option>"),as=k("<option> </option>"),ss=Et('<svg class="animate-spin h-5 w-5" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Generando...',1),ls=Et('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg> Ver Reporte',1),is=k('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="space-y-2"><label for="view-docente" class="block text-sm font-medium">Docente</label> <select id="view-docente" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione docente</option><!></select></div> <div class="space-y-2"><label for="view-materia" class="block text-sm font-medium">Materia</label> <select id="view-materia" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione materia</option><!></select></div> <div class="space-y-2"><label for="view-grado" class="block text-sm font-medium">Grado</label> <select id="view-grado" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione grado</option><!></select></div> <div class="space-y-2"><label for="view-periodo" class="block text-sm font-medium">Periodo</label> <select id="view-periodo" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"></select></div></div> <div class="pt-4 flex gap-3"><button class="flex-1 px-6 py-3 border rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors font-medium">Cancelar</button> <button class="flex-[2] px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"><!></button></div>',1),ns=k('<th class="p-2 border text-white font-bold text-center sticky top-0 z-20" style="background-color: #4472C4; min-width: 60px;"> </th>'),ds=k('<td class="p-2 border text-center font-medium bg-white cell-hover svelte-14neep5"> </td>'),cs=k('<tr class="hover-row svelte-14neep5"><td class="p-2 border font-medium sticky left-0 z-10 bg-[#F2F2F2] svelte-14neep5" style="background-color: #F2F2F2;"> </td><!><td class="p-2 border text-center font-bold bg-white cell-hover svelte-14neep5"> </td></tr>'),vs=k('<div class="space-y-4 min-w-0"><div class="text-center p-4 rounded-lg flex-shrink-0" style="background-color: #2E75B6; color: white;"><h3 class="text-lg font-bold whitespace-nowrap"> </h3></div> <div class="p-3 rounded-lg text-sm flex-shrink-0" style="background-color: #5B9BD5; color: white;"><p class="font-medium whitespace-nowrap"> </p></div> <div class="overflow-auto border rounded-lg flex-1 min-h-[200px] max-h-[50vh]"><table class="w-full border-collapse text-xs md:text-sm"><thead class="sticky top-0 z-30 shadow-sm"><tr><th class="p-2 border text-white font-bold sticky left-0 z-40" style="background-color: #4472C4; width: 200px;">Estudiantes</th><!><th class="p-2 border text-white font-bold text-center sticky top-0 z-20" style="background-color: #FF6B6B; width: 80px;">Total Horas</th></tr></thead><tbody class="bg-white"></tbody></table></div> <div class="pt-4 flex gap-3 flex-shrink-0"><button class="flex-1 px-6 py-3 border rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors font-medium">Nueva Consulta</button> <button class="flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-xl transition-colors font-medium">Cerrar</button></div></div>'),gs=k('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-2 md:p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-[95vw] max-h-[90vh] overflow-hidden shadow-2xl border flex flex-col"><div class="flex items-center justify-between p-4 md:p-6 border-b flex-shrink-0"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h2 id="modal-title" class="text-lg md:text-xl font-bold">Vista de Reporte</h2> <p class="text-sm opacity-75">Inasistencias por materia y grado</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-4 md:p-6 space-y-4 overflow-y-auto flex-1"><!></div></div></div>');function Lo(J,A){Mr(A,!1);const v=h();let Te=Tt(A,"onClose",8),g=Tt(A,"initialDocente",8,""),C=h([]),o=h([]),be=h([]),i=h(g()||""),c=h(""),m=h(""),le=h(lo[0].nombre),ge=h(!1),H=h(!1),q=h(null);const R=U=>U?U.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g," ").trim().toLowerCase():"",l=U=>{if(!U)return"";const ce=U.split("/");if(ce.length===3){const $e=ce[0].padStart(2,"0"),Qe=ce[1].padStart(2,"0");return`${ce[2]}-${Qe}-${$e}`}return U},O=U=>{const ce=[],$e=new Date(U.fecha_inicio),Qe=new Date(U.fecha_fin);for(;$e<=Qe;){const $=$e.getUTCDay();$>=1&&$<=6&&ce.push(new Date($e)),$e.setUTCDate($e.getUTCDate()+1)}return ce},j=U=>{const ce=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return`${U.getUTCDate()}/${ce[U.getUTCMonth()]}/${U.getUTCFullYear().toString().substr(2)}`};Ar(async()=>{d(ge,!0);try{const[U,ce,$e]=await Promise.all([Xr(),eo(),to()]);d(C,U),d(o,ce),d(be,$e)}catch(U){console.error("Error cargando datos iniciales:",U)}finally{d(ge,!1)}});const X=async()=>{if(!e(i)||!e(c)||!e(m)){$t.fire({icon:"warning",title:"Campos incompletos",text:"Por favor seleccione Docente, Materia y Grado."});return}const U=lo.find(ce=>ce.nombre===e(le));if(!U){$t.fire({icon:"error",title:"Error",text:"Periodo no encontrado"});return}d(H,!0);try{const ce=await Bo({spreadsheetId:uo,worksheetTitle:yo});if(!ce?.records||!Array.isArray(ce.records))throw new Error("No se pudieron obtener los registros de inasistencias");const $e=ce.records.slice(1),Qe=R(e(i)),$=R(e(c)),Z=e(m).toString().trim(),te=$e.map(W=>{const fe=W.values||[];return{fecha:fe[2]||"",docente:fe[1]||"",materia:fe[4]||"",grado:(fe[6]||"").toString().trim(),nombre:fe[7]||"",motivo:fe[5]||"",horas:fe[3]||"0"}}).filter(W=>{const fe=R(W.docente),Le=R(W.materia),nt=W.grado,Je=fe.includes(Qe)||Qe.includes(fe),rt=Le.includes($)||$.includes(Le),D=nt===Z||nt.startsWith(Z)||Z.startsWith(nt),p=l(W.fecha),E=new Date(p),z=new Date(U.fecha_inicio),V=new Date(U.fecha_fin);z.setHours(0,0,0,0),V.setHours(23,59,59,999);const ee=E>=z&&E<=V;return Je&&rt&&D&&ee}),ie=e(be).filter(W=>W.grado.toString()===e(m)).map(W=>W.nombre).sort();if(ie.length===0)throw new Error("No hay estudiantes registrados para el grado seleccionado");const Xe=O(U).filter(W=>{const fe=W.toISOString().split("T")[0];return te.some(Le=>l(Le.fecha)===fe)});if(Xe.length===0){$t.fire({icon:"info",title:"Sin datos",text:"No se encontraron inasistencias para los filtros seleccionados en este periodo."});return}const Oe=ie.map(W=>{const fe=[];let Le=0;return Xe.forEach(nt=>{const Je=nt.toISOString().split("T")[0],rt=te.filter(D=>R(D.nombre)===R(W)&&l(D.fecha)===Je);if(rt.length>0){const D=rt[0],p=parseFloat(D.horas)||0,E=D.motivo||"";p>0?(fe.push({valor:p.toString(),horas:p}),Le+=p):E?fe.push({valor:E,horas:0}):fe.push({valor:"X",horas:0})}else fe.push({valor:"‚úì",horas:0})}),{nombre:W,registros:fe,totalHoras:Le}});d(q,{docente:e(i),materia:e(c),grado:e(m),periodo:U.nombre,fechaInicio:j(U.fecha_inicio),fechaFin:j(U.fecha_fin),fechas:Xe.map(W=>j(W)),estudiantes:Oe})}catch(ce){console.error("Error generando reporte:",ce);const $e=ce instanceof Error?ce.message:"Error desconocido";$t.fire({icon:"error",title:"Error",text:$e})}finally{d(H,!1)}};Ae(()=>{},()=>{d(v,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Lr(),Pr();var F=gs(),x=r(F),ae=r(x),De=a(r(ae),2),Ye=a(ae,2),tt=r(Ye);{var Q=U=>{var ce=es(),$e=r(ce);vo($e,{message:"Cargando datos..."}),b(U,ce)},B=U=>{var ce=bo(),$e=rr(ce);{var Qe=Z=>{var te=is(),ie=rr(te),se=r(ie),Xe=r(se),Oe=a(Xe,2),W=r(Oe);W.value=W.__value="";var fe=a(W);ke(fe,1,()=>e(C),Ee,(me,P)=>{var K=ts(),xe=r(K),We={};S(()=>{y(xe,e(P)),We!==(We=e(P))&&(K.value=(K.__value=e(P))??"")}),b(me,K)});var Le=a(se,2),nt=r(Le),Je=a(nt,2),rt=r(Je);rt.value=rt.__value="";var D=a(rt);ke(D,1,()=>e(o),Ee,(me,P)=>{var K=rs(),xe=r(K),We={};S(()=>{y(xe,(e(P),t(()=>e(P).materia))),We!==(We=(e(P),t(()=>e(P).materia)))&&(K.value=(K.__value=(e(P),t(()=>e(P).materia)))??"")}),b(me,K)});var p=a(Le,2),E=r(p),z=a(E,2),V=r(z);V.value=V.__value="";var ee=a(V);ke(ee,1,()=>(e(be),t(()=>[...new Set(e(be).map(me=>me.grado.toString()))])),Ee,(me,P)=>{var K=os(),xe=r(K),We={};S(n=>{y(xe,n),We!==(We=e(P))&&(K.value=(K.__value=e(P))??"")},[()=>(e(P),t(()=>e(P).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),b(me,K)});var ve=a(p,2),je=r(ve),oe=a(je,2);ke(oe,5,()=>lo,Ee,(me,P)=>{var K=as(),xe=r(K),We={};S(()=>{y(xe,`Periodo ${e(P),t(()=>e(P).nombre)??""}`),We!==(We=(e(P),t(()=>e(P).nombre)))&&(K.value=(K.__value=(e(P),t(()=>e(P).nombre)))??"")}),b(me,K)});var L=a(ie,2),ne=r(L),Ie=a(ne,2),ye=r(Ie);{var lt=me=>{var P=ss();b(me,P)},xt=me=>{var P=ls();b(me,P)};re(ye,me=>{e(H)?me(lt):me(xt,!1)})}S(()=>{s(Xe,`color: ${e(v),t(()=>e(v).label)??""};`),s(Oe,`background-color: ${e(v),t(()=>e(v).inputBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(nt,`color: ${e(v),t(()=>e(v).label)??""};`),s(Je,`background-color: ${e(v),t(()=>e(v).inputBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(E,`color: ${e(v),t(()=>e(v).label)??""};`),s(z,`background-color: ${e(v),t(()=>e(v).inputBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(je,`color: ${e(v),t(()=>e(v).label)??""};`),s(oe,`background-color: ${e(v),t(()=>e(v).inputBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(ne,`border-color: ${e(v),t(()=>e(v).border)??""};`),Ie.disabled=e(H)||!e(i)||!e(c)||!e(m)}),pt(Oe,()=>e(i),me=>d(i,me)),pt(Je,()=>e(c),me=>d(c,me)),pt(z,()=>e(m),me=>d(m,me)),pt(oe,()=>e(le),me=>d(le,me)),G("click",ne,function(...me){Te()?.apply(this,me)}),G("click",Ie,X),b(Z,te)},$=Z=>{var te=vs(),ie=r(te),se=r(ie),Xe=r(se),Oe=a(ie,2),W=r(Oe),fe=r(W),Le=a(Oe,2),nt=r(Le),Je=r(nt),rt=r(Je),D=a(r(rt));ke(D,1,()=>(e(q),t(()=>e(q).fechas)),Ee,(ee,ve)=>{var je=ns(),oe=r(je);S(()=>y(oe,e(ve))),b(ee,je)});var p=a(Je);ke(p,5,()=>(e(q),t(()=>e(q).estudiantes)),Ee,(ee,ve)=>{var je=cs(),oe=r(je),L=r(oe),ne=a(oe);ke(ne,1,()=>(e(ve),t(()=>e(ve).registros)),Ee,(lt,xt)=>{const me=Bt(()=>(e(xt),t(()=>e(xt).valor==="‚úì")));var P=ds(),K=r(P);S(()=>{s(P,e(me)?"color: #00AA00;":"color: #FF0000; background-color: #FFE6E6;"),y(K,(e(xt),t(()=>e(xt).valor)))}),b(lt,P)});var Ie=a(ne),ye=r(Ie);S(()=>{y(L,(e(ve),t(()=>e(ve).nombre))),s(Ie,(e(ve),t(()=>e(ve).totalHoras>0?"color: #FF0000; background-color: #FFE6E6;":"color: #00AA00; background-color: #E6FFE6;"))),y(ye,(e(ve),t(()=>e(ve).totalHoras)))}),b(ee,je)});var E=a(Le,2),z=r(E),V=a(z,2);S(()=>{y(Xe,`REPORTE DE INASISTENCIAS - ${e(q),t(()=>e(q).materia)??""} - GRADO ${e(q),t(()=>e(q).grado)??""}`),y(fe,`Docente: ${e(q),t(()=>e(q).docente)??""} | Periodo: ${e(q),t(()=>e(q).periodo)??""} (${e(q),t(()=>e(q).fechaInicio)??""} - ${e(q),t(()=>e(q).fechaFin)??""})`),s(z,`border-color: ${e(v),t(()=>e(v).border)??""};`)}),G("click",z,()=>d(q,null)),G("click",V,function(...ee){Te()?.apply(this,ee)}),b(Z,te)};re($e,Z=>{e(q)?Z($,!1):Z(Qe)})}b(U,ce)};re(tt,U=>{e(ge)?U(Q):U(B,!1)})}S(()=>{s(x,`background-color: ${e(v),t(()=>e(v).cardBg)??""}; border-color: ${e(v),t(()=>e(v).cardBorder)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(ae,`border-color: ${e(v),t(()=>e(v).cardBorder)??""};`)}),G("click",De,function(...U){Te()?.apply(this,U)}),G("click",F,no(function(...U){Te()?.apply(this,U)})),G("keydown",F,U=>U.key==="Escape"&&Te()()),b(J,F),Tr()}var ps=k('<div class="flex justify-center py-12"><!></div>'),us=k("<option> </option>"),bs=k("<option> </option>"),fs=k("<option> </option>"),xs=k("<option> </option>"),hs=Et('<svg class="animate-spin h-5 w-5 text-white" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Generando...',1),ms=Et('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg> Descargar Excel',1),_s=k('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="space-y-2"><label for="rep-docente" class="block text-sm font-medium">Docente</label> <select id="rep-docente" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione docente</option><!></select></div> <div class="space-y-2"><label for="rep-materia" class="block text-sm font-medium">Materia</label> <select id="rep-materia" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione materia</option><!></select></div> <div class="space-y-2"><label for="rep-grado" class="block text-sm font-medium">Grado</label> <select id="rep-grado" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"><option>Seleccione grado</option><!></select></div> <div class="space-y-2"><label for="rep-periodo" class="block text-sm font-medium">Periodo</label> <select id="rep-periodo" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none"></select></div></div> <div class="pt-4 flex gap-3"><button class="flex-1 px-6 py-3 border rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors font-medium">Cancelar</button> <button class="flex-1 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg hover:shadow-green-500/20"><!></button></div>',1),ys=k('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-2xl overflow-hidden shadow-2xl border"><div class="flex items-center justify-between p-6 border-b"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h2 id="modal-title" class="text-xl font-bold">Generador de Reporte Excel</h2> <p class="text-sm opacity-75">Inasistencias por materia y grado</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar modal"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 space-y-6"><!></div></div></div> <!>',1);function ws(J,A){Mr(A,!1);const v=h();let Te=null,g=null,C=Tt(A,"onClose",8),o=Tt(A,"initialDocente",8,""),be=h([]),i=h([]),c=h([]),m=h(o()||""),le=h(""),ge=h(""),H=h(lo[0].nombre),q=h(!1),R=h(!1),l=h(!1);const O=async()=>{if(!Te||!g){const[te,ie]=await Promise.all([io(()=>import("./excel-G1qE2FwJ.js").then(se=>se.e),[]),io(()=>import("./utils-Dc41pFlL.js").then(se=>se.F),__vite__mapDeps([0,1]))]);Te=te.default,g=ie.default}},j=te=>te?te.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g," ").trim().toLowerCase():"",X=te=>{if(!te)return"";const ie=te.split("/");if(ie.length===3){const se=ie[0].padStart(2,"0"),Xe=ie[1].padStart(2,"0");return`${ie[2]}-${Xe}-${se}`}return te},F=te=>{const ie=[],se=new Date(te.fecha_inicio),Xe=new Date(te.fecha_fin);for(;se<=Xe;){const Oe=se.getUTCDay();Oe>=1&&Oe<=6&&ie.push(new Date(se)),se.setUTCDate(se.getUTCDate()+1)}return ie},x=te=>{const ie=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return`${te.getUTCDate()}/${ie[te.getUTCMonth()]}/${te.getUTCFullYear().toString().substr(2)}`};Ar(async()=>{d(q,!0);try{const[te,ie,se]=await Promise.all([Xr(),eo(),to()]);d(be,te),d(i,ie),d(c,se)}catch(te){console.error("Error cargando datos iniciales:",te)}finally{d(q,!1)}});const ae=async()=>{if(await O(),!e(m)||!e(le)||!e(ge)){$t.fire({icon:"warning",title:"Campos incompletos",text:"Por favor seleccione Docente, Materia y Grado."});return}const te=lo.find(ie=>ie.nombre===e(H));if(!te){$t.fire({icon:"error",title:"Error",text:"Periodo no encontrado"});return}d(R,!0);try{const ie=await Bo({spreadsheetId:uo,worksheetTitle:yo});if(!ie?.records||!Array.isArray(ie.records))throw new Error("No se pudieron obtener los registros de inasistencias");const se=ie.records.slice(1),Xe=j(e(m)),Oe=j(e(le)),W=e(ge).toString().trim(),fe=se.map(L=>{const ne=L.values||[];return{fecha:ne[2]||"",docente:ne[1]||"",materia:ne[4]||"",grado:(ne[6]||"").toString().trim(),nombre:ne[7]||"",motivo:ne[5]||"",horas:ne[3]||"0"}}).filter(L=>{const ne=j(L.docente),Ie=j(L.materia),ye=L.grado,lt=ne.includes(Xe)||Xe.includes(ne),xt=Ie.includes(Oe)||Oe.includes(Ie),me=ye===W||ye.startsWith(W)||W.startsWith(ye),P=X(L.fecha),K=new Date(P),xe=new Date(te.fecha_inicio),We=new Date(te.fecha_fin);xe.setHours(0,0,0,0),We.setHours(23,59,59,999);const n=K>=xe&&K<=We;return lt&&xt&&me&&n}),Le=e(c).filter(L=>L.grado.toString()===e(ge)).map(L=>L.nombre).sort();if(Le.length===0)throw new Error("No hay estudiantes registrados para el grado seleccionado");const Je=F(te).filter(L=>{const ne=L.toISOString().split("T")[0];return fe.some(Ie=>X(Ie.fecha)===ne)});if(Je.length===0){$t.fire({icon:"info",title:"Sin datos",text:"No se encontraron inasistencias para los filtros seleccionados en este periodo."}),d(R,!1);return}const rt=new Te.Workbook,D=rt.addWorksheet("Reporte de Inasistencias"),p=Je.length+2,E=D.addRow([`REPORTE DE INASISTENCIAS - ${e(le)} - GRADO ${e(ge)}`]);E.height=30,E.font={bold:!0,size:16,color:{argb:"FFFFFF"}},E.fill={type:"pattern",pattern:"solid",fgColor:{argb:"2E75B6"}},E.alignment={vertical:"middle",horizontal:"center"},D.mergeCells(1,1,1,p);const z=D.addRow([`Docente: ${e(m)} | Periodo: ${te.nombre} (${x(te.fecha_inicio)} - ${x(te.fecha_fin)})`]);z.height=20,z.font={bold:!0,size:10,color:{argb:"FFFFFF"}},z.fill={type:"pattern",pattern:"solid",fgColor:{argb:"5B9BD5"}},z.alignment={vertical:"middle",horizontal:"left"},D.mergeCells(2,1,2,p);const V=["Estudiantes",...Je.map(L=>x(L)),"Total Horas"],ee=D.addRow(V);ee.height=25,ee.font={bold:!0,size:11,color:{argb:"FFFFFF"}},ee.alignment={vertical:"middle",horizontal:"center"},D.getColumn(1).width=35,Je.forEach((L,ne)=>{D.getColumn(ne+2).width=22}),D.getColumn(p).width=15,ee.eachCell((L,ne)=>{L.fill={type:"pattern",pattern:"solid",fgColor:{argb:ne===p?"FF6B6B":"4472C4"}},L.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}),Le.forEach(L=>{const ne=[L];let Ie=0;Je.forEach(xt=>{const me=xt.toISOString().split("T")[0],P=fe.filter(K=>j(K.nombre)===j(L)&&X(K.fecha)===me);if(P.length>0){const K=P[0],xe=parseFloat(K.horas)||0,We=K.motivo||"";xe>0?(ne.push(xe.toString()),Ie+=xe):We?ne.push(We):ne.push("X")}else ne.push("‚úì")}),ne.push(Ie.toString());const ye=D.addRow(ne);ye.height=30,ye.getCell(1).font={bold:!0},ye.getCell(1).fill={type:"pattern",pattern:"solid",fgColor:{argb:"F2F2F2"}},Je.forEach((xt,me)=>{const P=ye.getCell(me+2);P.alignment={horizontal:"center",vertical:"middle",wrapText:!0};const K=P.value?.toString()||"",xe=parseFloat(K)||0;K==="‚úì"?P.font={color:{argb:"00AA00"}}:xe>0||isNaN(xe)?(P.font={color:{argb:"FF0000"},bold:!0},P.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE6E6"}}):(P.font={color:{argb:"FF0000"},bold:!0},P.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE6E6"}})});const lt=ye.getCell(p);lt.font={bold:!0,color:{argb:Ie>0?"FF0000":"00AA00"}},lt.alignment={horizontal:"center"},lt.fill={type:"pattern",pattern:"solid",fgColor:{argb:Ie>0?"FFE6E6":"E6FFE6"}},ye.eachCell(xt=>{xt.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})});const ve=await rt.xlsx.writeBuffer(),je=new Blob([ve],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),oe=`Reporte_Inasistencias_${e(ge)}_${e(le).replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.xlsx`;g(je,oe),$t.fire({icon:"success",title:"Reporte generado",text:`Se ha generado el reporte con ${Le.length} estudiantes.`,timer:2e3,showConfirmButton:!1})}catch(ie){console.error("Error generando Excel:",ie);const se=ie instanceof Error?ie.message:"Error desconocido";$t.fire({icon:"error",title:"Error",text:se})}finally{d(R,!1)}};Ae(()=>{},()=>{d(v,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Lr(),Pr();var De=ys(),Ye=rr(De),tt=r(Ye),Q=r(tt),B=a(r(Q),2),U=a(Q,2),ce=r(U);{var $e=te=>{var ie=ps(),se=r(ie);vo(se,{message:"Cargando datos..."}),b(te,ie)},Qe=te=>{var ie=_s(),se=rr(ie),Xe=r(se),Oe=r(Xe),W=a(Oe,2),fe=r(W);fe.value=fe.__value="";var Le=a(fe);ke(Le,1,()=>e(be),Ee,(P,K)=>{var xe=us(),We=r(xe),n={};S(()=>{y(We,e(K)),n!==(n=e(K))&&(xe.value=(xe.__value=e(K))??"")}),b(P,xe)});var nt=a(Xe,2),Je=r(nt),rt=a(Je,2),D=r(rt);D.value=D.__value="";var p=a(D);ke(p,1,()=>e(i),Ee,(P,K)=>{var xe=bs(),We=r(xe),n={};S(()=>{y(We,(e(K),t(()=>e(K).materia))),n!==(n=(e(K),t(()=>e(K).materia)))&&(xe.value=(xe.__value=(e(K),t(()=>e(K).materia)))??"")}),b(P,xe)});var E=a(nt,2),z=r(E),V=a(z,2),ee=r(V);ee.value=ee.__value="";var ve=a(ee);ke(ve,1,()=>(e(c),t(()=>[...new Set(e(c).map(P=>P.grado.toString()))])),Ee,(P,K)=>{var xe=fs(),We=r(xe),n={};S(w=>{y(We,w),n!==(n=e(K))&&(xe.value=(xe.__value=e(K))??"")},[()=>(e(K),t(()=>e(K).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),b(P,xe)});var je=a(E,2),oe=r(je),L=a(oe,2);ke(L,5,()=>lo,Ee,(P,K)=>{var xe=xs(),We=r(xe),n={};S(()=>{y(We,`Periodo ${e(K),t(()=>e(K).nombre)??""}`),n!==(n=(e(K),t(()=>e(K).nombre)))&&(xe.value=(xe.__value=(e(K),t(()=>e(K).nombre)))??"")}),b(P,xe)});var ne=a(se,2),Ie=r(ne),ye=a(Ie,2),lt=r(ye);{var xt=P=>{var K=hs();b(P,K)},me=P=>{var K=ms();b(P,K)};re(lt,P=>{e(R)?P(xt):P(me,!1)})}S(()=>{s(Oe,`color: ${e(v),t(()=>e(v).label)??""};`),s(W,`background-color: ${e(v),t(()=>e(v).inputBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(Je,`color: ${e(v),t(()=>e(v).label)??""};`),s(rt,`background-color: ${e(v),t(()=>e(v).inputBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(z,`color: ${e(v),t(()=>e(v).label)??""};`),s(V,`background-color: ${e(v),t(()=>e(v).inputBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(oe,`color: ${e(v),t(()=>e(v).label)??""};`),s(L,`background-color: ${e(v),t(()=>e(v).inputBg)??""}; border-color: ${e(v),t(()=>e(v).border)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(Ie,`border-color: ${e(v),t(()=>e(v).border)??""};`),ye.disabled=e(R)||!e(m)||!e(le)||!e(ge)}),pt(W,()=>e(m),P=>d(m,P)),pt(rt,()=>e(le),P=>d(le,P)),pt(V,()=>e(ge),P=>d(ge,P)),pt(L,()=>e(H),P=>d(H,P)),G("click",Ie,function(...P){C()?.apply(this,P)}),G("click",ye,ae),b(te,ie)};re(ce,te=>{e(q)?te($e):te(Qe,!1)})}var $=a(Ye,2);{var Z=te=>{Lo(te,{onClose:()=>d(l,!1),get initialDocente(){return e(m)}})};re($,te=>{e(l)&&te(Z)})}S(()=>{s(tt,`background-color: ${e(v),t(()=>e(v).cardBg)??""}; border-color: ${e(v),t(()=>e(v).cardBorder)??""}; color: ${e(v),t(()=>e(v).text)??""};`),s(Q,`border-color: ${e(v),t(()=>e(v).cardBorder)??""};`)}),G("click",B,function(...te){C()?.apply(this,te)}),G("click",Ye,no(function(...te){C()?.apply(this,te)})),G("keydown",Ye,te=>te.key==="Escape"&&C()()),b(J,De),Tr()}var ks=k('<div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping svelte-gsxx31"></div> <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full svelte-gsxx31"></div>',1),$s=k('<div class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-ping svelte-gsxx31"></div> <div class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full svelte-gsxx31"></div>',1),Cs=Et('<svg class="w-5 h-5 text-indigo-500 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-gsxx31"></path></svg>'),Ss=Et('<svg class="w-5 h-5 text-amber-500 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="svelte-gsxx31"></path></svg>'),As=Et('<svg class="w-5 h-5 text-indigo-400 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-gsxx31"></path></svg>'),Ds=k('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-gsxx31"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0 svelte-gsxx31"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-gsxx31"></path></svg></div> <div class="flex-1 pr-6 pt-0.5 svelte-gsxx31"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100 svelte-gsxx31">Informaci√≥n</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200 svelte-gsxx31"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors svelte-gsxx31" aria-label="Cerrar alerta"><svg class="w-4 h-4 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-gsxx31"></path></svg></button></div>'),Es=k('<option class="svelte-gsxx31"> </option>'),Is=k('<option class="svelte-gsxx31"> </option>'),Bs=k('<select><option class="svelte-gsxx31">Horas...</option><option class="svelte-gsxx31">0</option><!></select>'),Fs=k('<div><div class="flex items-center gap-1.5 svelte-gsxx31"><input type="checkbox" class="w-4 h-4 lg:w-5 lg:h-5 rounded text-indigo-500 focus:ring-indigo-500 svelte-gsxx31" style="accent-color: #6366f1;"/> <span class="text-sm lg:text-sm flex-shrink-0 svelte-gsxx31"> </span></div> <!></div>'),zs=k("<div></div>"),Ms=k('<option class="svelte-gsxx31"> </option>'),Ts=k('<select id="materia" name="materia" required=""><option class="svelte-gsxx31"> </option><!></select>'),Os=k('<option class="svelte-gsxx31"> </option>'),Ns=k('<option class="svelte-gsxx31"> </option>'),js=k('<span><span class="mr-1.5 svelte-gsxx31"> </span> <button type="button" class="ml-1.5 hover:opacity-70 transition-opacity svelte-gsxx31" aria-label="Eliminar motivo"><svg class="w-3 h-3 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12" class="svelte-gsxx31"></path></svg></button></span>'),Rs=k('<option class="svelte-gsxx31"> </option>'),Ls=k('<option class="svelte-gsxx31"> </option>'),Ps=k('<div class="flex items-center gap-2 svelte-gsxx31"><button type="button" class="p-2 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Agregar observaci√≥n"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" class="svelte-gsxx31"></path></svg></button></div>'),Hs=k('<div class="px-4 pb-4 animate-fade-in svelte-gsxx31"><textarea placeholder="Escribe una observaci√≥n espec√≠fica para este estudiante..." rows="2" class="w-full px-4 py-2 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none resize-none text-sm svelte-gsxx31"></textarea></div>'),Gs=k('<div><div class="flex-1 min-w-0 svelte-gsxx31"><span class="text-base font-medium block svelte-gsxx31"> </span> <div class="flex flex-wrap gap-2 mt-2 svelte-gsxx31"></div></div> <div class="flex flex-col sm:flex-row items-center gap-2 w-full sm:w-auto svelte-gsxx31"><div><select class="w-full appearance-none border rounded-lg px-4 py-2 pr-10 text-sm focus:ring-2 focus:ring-indigo-500 cursor-pointer transition-all outline-none svelte-gsxx31"><option class="svelte-gsxx31">Hora...</option><option class="svelte-gsxx31">0 (Sin hora)</option><!></select> <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 svelte-gsxx31"><svg class="w-4 h-4 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-gsxx31"></path></svg></div></div> <div class="relative w-full sm:w-56 svelte-gsxx31"><select class="w-full appearance-none border rounded-lg px-4 py-2 pr-10 text-sm focus:ring-2 focus:ring-indigo-500 cursor-pointer transition-all outline-none svelte-gsxx31"><option class="svelte-gsxx31">A√±adir motivo...</option><option class="svelte-gsxx31">üö´ Limpiar todo</option><!></select> <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 svelte-gsxx31"><svg class="w-4 h-4 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" class="svelte-gsxx31"></path></svg></div></div></div> <!></div> <!>',1),Us=k('<div class="text-center py-12 opacity-60 svelte-gsxx31">No hay estudiantes en este grado.</div>'),Vs=k('<div class="space-y-3 animate-fade-in svelte-gsxx31"><label class="block text-sm font-semibold uppercase tracking-wider svelte-gsxx31"> </label> <div class="space-y-2 max-h-[700px] overflow-y-auto border rounded-2xl p-4 bg-zinc-50/50 dark:bg-zinc-900/50 backdrop-blur-sm scrollbar-thin scrollbar-thumb-zinc-300 dark:scrollbar-thumb-zinc-600 svelte-gsxx31"><!> <!></div></div>'),Ys=Et('<svg class="animate-spin h-6 w-6 lg:h-7 lg:w-7 svelte-gsxx31" fill="none" viewBox="0 0 24 24"><circle class="opacity-25 svelte-gsxx31" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75 svelte-gsxx31" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Ws=Et('<svg class="h-6 w-6 lg:h-7 lg:w-7 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" class="svelte-gsxx31"></path></svg>'),qs=k('<span class="absolute -top-1 -right-1 lg:-top-2 lg:-right-2 bg-red-500 text-white text-[10px] lg:text-xs font-bold rounded-full h-5 w-5 lg:h-6 lg:w-6 flex items-center justify-center ring-2 ring-white dark:ring-zinc-950 animate-bounce svelte-gsxx31"> </span>'),Js=k('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200 svelte-gsxx31"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40 svelte-gsxx31"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8 svelte-gsxx31"><div class="flex items-center gap-4 lg:flex-col svelte-gsxx31"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto svelte-gsxx31"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center svelte-gsxx31">Registrar Inasistencias</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full svelte-gsxx31"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Abrir hoja de c√°lculo"><svg class="w-5 h-5 svelte-gsxx31" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Hoja de C√°lculo</span></button> <button id="filter-button-target" class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 relative svelte-gsxx31" title="Abrir Looker Studio"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Filtros</span> <!></button> <button id="report-button-target" class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 relative svelte-gsxx31" title="Generar reportes Excel"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Reporte Excel</span> <!></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Ver reporte online"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" class="svelte-gsxx31"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Ver Online</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Abrir Looker Studio"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Looker Studio</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-gsxx31" title="Volver al Dashboard"><svg class="w-5 h-5 svelte-gsxx31" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" class="svelte-gsxx31"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-gsxx31">Dashboard</span></button> <div class="relative svelte-gsxx31"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full svelte-gsxx31" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize svelte-gsxx31"> </span></button></div></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto svelte-gsxx31"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border svelte-gsxx31"><!> <!> <!> <form class="space-y-6 svelte-gsxx31"><div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-gsxx31"><div class="space-y-2 svelte-gsxx31"><label for="docente" class="block text-sm font-medium svelte-gsxx31">Docente</label> <select id="docente" name="docente" required=""><option class="svelte-gsxx31"> </option><!></select></div> <div><div class="flex items-center justify-between svelte-gsxx31"><label for="materia" class="block text-sm font-medium svelte-gsxx31">Materia</label></div> <!></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-gsxx31"><div class="space-y-2 svelte-gsxx31"><label for="horas" class="block text-sm font-medium svelte-gsxx31">Cantidad de Horas</label> <select id="horas" name="horas" required=""><option class="svelte-gsxx31">Seleccione horas</option><option class="svelte-gsxx31">Sin hora espec√≠fica</option><!></select></div> <div class="space-y-2 svelte-gsxx31"><label for="grado" class="block text-sm font-medium svelte-gsxx31">Grado</label> <select id="grado" name="grado" required=""><option class="svelte-gsxx31"> </option><!></select></div></div> <!> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-gsxx31"><div class="space-y-2 svelte-gsxx31"><label for="fecha" class="block text-sm font-medium svelte-gsxx31">Fecha</label> <input type="date" id="fecha" name="fecha" required="" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none svelte-gsxx31"/></div> <div class="space-y-2 svelte-gsxx31"><label for="observaciones" class="block text-sm font-medium svelte-gsxx31">Observaciones</label> <textarea id="observaciones" name="observaciones" rows="3" placeholder="Opcional..." class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none resize-none svelte-gsxx31"></textarea></div></div> <div class="flex items-center justify-between pt-6 border-t svelte-gsxx31"><div class="text-sm font-medium svelte-gsxx31">Inasistencias marcadas: <span class="text-indigo-500 font-bold ml-1 svelte-gsxx31"> </span></div></div></form></div></main> <button class="fixed bottom-6 right-6 lg:bottom-10 lg:right-10 bg-green-600 hover:bg-green-700 text-white p-4 lg:p-5 rounded-full shadow-2xl hover:shadow-green-500/20 transform transition-all duration-300 hover:scale-110 active:scale-95 disabled:opacity-50 disabled:grayscale disabled:cursor-not-allowed z-50 group svelte-gsxx31" title="Guardar inasistencias"><!> <!></button></div> <!> <!> <!>',1);function Ks(J,A){Mr(A,!1);const v=()=>_o(Qr,"$theme",Te),[Te,g]=mo(),C=h(),o=h(),be=h(),i=h(),c=h(),m=h(),le=h(),ge="¬°Nueva funci√≥n de filtrado avanzado disponible!",H="¬°Nueva funci√≥n de reporte en Excel disponible!";let q=Tt(A,"onBack",8),R=h([]),l=h([]),O=h([]),j=h(!1),X=h(!1),F=h(!1),x=h({docente:localStorage.getItem("lastDocente")||"",materia:"",horas:"",grado:"",fecha:new Date().toISOString().split("T")[0],observaciones:""}),ae=h([]),De=h({}),Ye=h({}),tt=h(!1),Q=h(!1),B=h([]),U=h(!1),ce=h(!1),$e=h(!1);const Qe=()=>{d(U,!0)},$=()=>{d(U,!1)},Z=()=>{d(ce,!0)},te=()=>{d(ce,!1)},ie=()=>{d($e,!0)},se=()=>{d($e,!1)};let Xe=h(localStorage.getItem("dismissedInfoInasistenciaContent")!==ko),Oe=h(!0),W=h(!0);function fe(f){return!0}const Le=()=>{localStorage.setItem("dismissedInfoInasistenciaContent",ko),d(Xe,!1)},nt=()=>{localStorage.setItem("dismissedFeatureAlertFilters",new Date().toISOString()),d(Oe,!1)},Je=()=>{localStorage.setItem("dismissedFeatureAlertFilters",new Date().toISOString()),Qe()},rt=()=>{localStorage.setItem("dismissedFeatureAlertReport",new Date().toISOString()),d(W,!1)},D=()=>{localStorage.setItem("dismissedFeatureAlertReport",new Date().toISOString()),Z(),d(W,!1)};let p=h(JSON.parse(localStorage.getItem("docenteMaterias")||"{}"));const E=(f,u)=>{!f||!u||(e(p)[f]||Fe(p,e(p)[f]=[]),e(p)[f].includes(u)||(Fe(p,e(p)[f]=[...e(p)[f],u]),localStorage.setItem("docenteMaterias",JSON.stringify(e(p)))))},z=()=>`https://docs.google.com/spreadsheets/d/${uo}`,V=()=>{window.open(z(),"_blank")},ee=()=>{window.open(ka,"_blank")},ve=f=>{const u=f.match(/-(\d+)$/);return u?u[1]:null},je=[{value:"Sin excusa",label:"Sin excusa",icon:"üö´",bgColor:"bg-red-50",borderColor:"border-red-300",textColor:"text-red-700",darkBgColor:"dark:bg-red-950",darkBorderColor:"dark:border-red-800",darkTextColor:"dark:text-red-300",obligaHoras:!0},{value:"Excusa",label:"Excusa",icon:"üìÑ",bgColor:"bg-blue-50",borderColor:"border-blue-300",textColor:"text-blue-700",darkBgColor:"dark:bg-blue-950",darkBorderColor:"dark:border-blue-800",darkTextColor:"dark:text-blue-300",obligaHoras:!0},{value:"LLegada Tarde",label:"Llegada Tarde",icon:"‚è∞",bgColor:"bg-indigo-50",borderColor:"border-indigo-300",textColor:"text-indigo-700",darkBgColor:"dark:bg-indigo-950",darkBorderColor:"dark:border-indigo-800",darkTextColor:"dark:text-indigo-300",obligaHoras:!1},{value:"Transporte Escolar",label:"Transporte Escolar",icon:"üöå",bgColor:"bg-red-50",borderColor:"border-red-300",textColor:"text-red-700",darkBgColor:"dark:bg-red-950",darkBorderColor:"dark:border-red-800",darkTextColor:"dark:text-red-300",obligaHoras:!0},{value:"Permiso",label:"Permiso",icon:"‚úÖ",bgColor:"bg-green-50",borderColor:"border-green-300",textColor:"text-green-700",darkBgColor:"dark:bg-green-950",darkBorderColor:"dark:border-green-800",darkTextColor:"dark:text-green-300",obligaHoras:!0},{value:"No portar/sin uniforme",label:"No portar/sin uniforme",icon:"üëö",bgColor:"bg-cyan-50",borderColor:"border-cyan-300",textColor:"text-cyan-700",darkBgColor:"dark:bg-cyan-950",darkBorderColor:"dark:border-cyan-800",darkTextColor:"dark:text-cyan-300",obligaHoras:!1},{value:"Pacto de Aula",label:"Pacto de Aula",icon:"ü§ù",bgColor:"bg-purple-50",borderColor:"border-purple-300",textColor:"text-purple-700",darkBgColor:"dark:bg-purple-950",darkBorderColor:"dark:border-purple-800",darkTextColor:"dark:text-purple-300",obligaHoras:!1},{value:"Uso del celular",label:"Uso del celular",icon:"üì±",bgColor:"bg-orange-50",borderColor:"border-orange-300",textColor:"text-orange-700",darkBgColor:"dark:bg-orange-950",darkBorderColor:"dark:border-orange-800",darkTextColor:"dark:text-orange-300",obligaHoras:!1},{value:"Desorden en Clase",label:"Desorden en Clase",icon:"üîä",bgColor:"bg-yellow-50",borderColor:"border-yellow-300",textColor:"text-yellow-700",darkBgColor:"dark:bg-yellow-950",darkBorderColor:"dark:border-yellow-800",darkTextColor:"dark:text-yellow-300",obligaHoras:!1},{value:"Fuga",label:"Fuga",icon:"üèÉ‚Äç‚ôÇÔ∏è",bgColor:"bg-red-100",borderColor:"border-red-400",textColor:"text-red-800",darkBgColor:"dark:bg-red-950",darkBorderColor:"dark:border-red-800",darkTextColor:"dark:text-red-300",obligaHoras:!0},{value:"No realizaci√≥n de Aseo",label:"No realizaci√≥n de Aseo",icon:"üßπ",bgColor:"bg-teal-50",borderColor:"border-teal-300",textColor:"text-teal-700",darkBgColor:"dark:bg-teal-950",darkBorderColor:"dark:border-teal-800",darkTextColor:"dark:text-teal-300",obligaHoras:!1},{value:"Licencia por salud",label:"Licencia por salud",icon:"üè•",bgColor:"bg-cyan-50",borderColor:"border-cyan-300",textColor:"text-cyan-700",darkBgColor:"dark:bg-cyan-950",darkBorderColor:"dark:border-cyan-800",darkTextColor:"dark:text-cyan-300",obligaHoras:!0},{value:"Incapacidad",label:"Incapacidad",icon:"ü©∫",bgColor:"bg-pink-50",borderColor:"border-pink-300",textColor:"text-pink-700",darkBgColor:"dark:bg-pink-950",darkBorderColor:"dark:border-pink-800",darkTextColor:"dark:text-pink-300",obligaHoras:!0},{value:"Reuni√≥n interna",label:"Reuni√≥n interna",icon:"üë•",bgColor:"bg-zinc-50",borderColor:"border-zinc-300",textColor:"text-zinc-700",darkBgColor:"dark:bg-zinc-950",darkBorderColor:"dark:border-zinc-800",darkTextColor:"dark:text-zinc-300",obligaHoras:!1},{value:"Ignorar",label:"Ignorar",icon:"üö´",bgColor:"bg-zinc-50",borderColor:"border-zinc-300",textColor:"text-zinc-700",darkBgColor:"dark:bg-zinc-950",darkBorderColor:"dark:border-zinc-800",darkTextColor:"dark:text-zinc-300",obligaHoras:!1},{value:"Psicoorientaci√≥n",label:"Psicoorientaci√≥n",icon:"üß†",bgColor:"bg-green-50",borderColor:"border-green-300",textColor:"text-green-700",darkBgColor:"dark:bg-green-950",darkBorderColor:"dark:border-green-800",darkTextColor:"dark:text-green-300",obligaHoras:!1},{value:"Retirado por el acudiente",label:"Retirado por el acudiente",icon:"üë®",bgColor:"bg-green-50",borderColor:"border-green-300",textColor:"text-green-700",darkBgColor:"dark:bg-green-950",darkBorderColor:"dark:border-green-800",darkTextColor:"dark:text-green-300",obligaHoras:!1}],oe=()=>{Qr.update(f=>f==="light"?"dim":f==="dim"?"dark":"light")},L=async()=>{d(j,!0),d(X,!0),d(F,!0);try{const[f,u,Y]=await Promise.all([Xr(),eo(),to()]);d(R,f),d(l,u),d(O,Y)}catch(f){console.error("Error cargando datos iniciales:",f)}finally{d(j,!1),d(X,!1),d(F,!1)}},ne=(f,u)=>{d(ae,e(ae).filter(Y=>!(Y.nombre===f&&Y.motivo===u)))},Ie=(f,u,Y)=>{if(u===""||u==="Ignorar"){d(ae,e(ae).filter(Be=>Be.nombre!==f));return}const ue=je.find(Be=>Be.value===u);if(!ue)return;let Pe=e(De)[f]||e(x).horas;if(ue.obligaHoras||(Pe="0"),ue.obligaHoras&&d(ae,e(ae).filter(Be=>{if(Be.nombre!==f)return!0;const st=je.find(it=>it.value===Be.motivo);return st&&!st.obligaHoras})),!e(ae).some(Be=>Be.nombre===f&&Be.motivo===u)){const Be=e(ae).find(st=>st.nombre===f)?.observaciones||"";d(ae,[...e(ae),{nombre:f,motivo:u,horas:Pe,observaciones:Be}])}},ye=(f,u)=>{d(ae,e(ae).map(Y=>Y.nombre===f?{...Y,observaciones:u}:Y))},lt=f=>{Fe(Ye,e(Ye)[f]=!e(Ye)[f])},xt=(f,u)=>{Fe(De,e(De)[f]=u),d(ae,e(ae).map(Y=>{if(Y.nombre===f){const ue=je.find(Pe=>Pe.value===Y.motivo);if(ue&&ue.obligaHoras)return{...Y,horas:u}}return Y}))},me=async f=>{if(f.preventDefault(),e(tt))return;d(Q,!0);const u=[];if(e(x).docente||u.push({id:"docente",label:"Docente"}),e(x).fecha||u.push({id:"fecha",label:"Fecha"}),e(x).grado||u.push({id:"grado",label:"Grado"}),e(o))if(e(B).length===0)u.push({id:"materia",label:"Materia(s)"});else{const Y=e(B).filter(ue=>!ue.horas);Y.length>0&&u.push({id:"horas",label:`Horas para: ${Y.map(ue=>ue.materia).join(", ")}`})}else e(x).materia||u.push({id:"materia",label:"Materia"}),e(x).horas||u.push({id:"horas",label:"Horas"});if(u.length>0){await $t.fire({icon:"warning",title:"Campos requeridos",html:`Complete los siguientes campos:<br/><br/><strong>${u.map(ue=>ue.label).join("<br/>")}</strong>`,confirmButtonColor:"#6366f1"});const Y=document.getElementById(u[0].id);Y&&(Y.scrollIntoView({behavior:"smooth",block:"center"}),Y.focus());return}if(e(ae).length===0){await $t.fire({icon:"warning",title:"Sin inasistencias",text:"Debe seleccionar al menos un estudiante con un motivo de inasistencia",confirmButtonColor:"#6366f1"});return}d(tt,!0);try{const Y=new Date().toISOString(),ue=e(o)?e(B):[{materia:e(x).materia,horas:e(x).horas}];if(e(o)&&e(B).length===0){await $t.fire({icon:"warning",title:"Atenci√≥n",text:"Seleccione al menos una materia",confirmButtonColor:"#6366f1"});return}const Pe=ue.filter(st=>!st.horas);if(Pe.length>0){await $t.fire({icon:"warning",title:"Atenci√≥n",text:`Seleccione horas para: ${Pe.map(st=>st.materia).join(", ")}`,confirmButtonColor:"#6366f1"});return}const ze=[],Be=e(ae).filter(st=>st.motivo&&st.motivo!=="Ignorar");for(const st of ue)for(const it of Be)ze.push([Y,e(x).docente,e(x).fecha,st.horas,st.materia,it.motivo,e(x).grado,it.nombre,it.observaciones||e(x).observaciones]);await Sa({spreadsheetId:uo,worksheetTitle:yo,inasistencias:ze});for(const st of ue)E(e(x).docente,st.materia);await $t.fire({icon:"success",title:"¬°√âxito!",text:`${ze.length} inasistencia(s) registrada(s) exitosamente`,timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),d(x,{...e(x),grado:"",fecha:new Date().toISOString().split("T")[0],observaciones:"",horas:""}),d(ae,[]),d(De,{}),d(Ye,{}),d(B,[]),d(Q,!1)}catch(Y){console.error("Error enviando:",Y),await $t.fire({icon:"error",title:"Error",text:"Error al registrar la inasistencia",confirmButtonColor:"#ef4444"})}finally{d(tt,!1)}};Ar(()=>{L(),d(Oe,fe()),d(W,fe())}),Ae(()=>e(x),()=>{d(o,e(x).docente.includes("-"))}),Ae(()=>(e(x),e(o),e(B)),()=>{d(C,(()=>{const f=[];return e(x).docente||f.push("docente"),e(x).fecha||f.push("fecha"),e(x).grado||f.push("grado"),e(o)?e(B).length===0?f.push("materias"):e(B).filter(Y=>!Y.horas).length>0&&f.push("horas"):(e(x).materia||f.push("materia"),e(x).horas||f.push("horas")),f})())}),Ae(()=>e(x),()=>{e(x).docente&&localStorage.setItem("lastDocente",e(x).docente)}),Ae(()=>(e(x),e(l),e(p)),()=>{d(be,e(x).docente?[...e(l)].sort((f,u)=>{const Y=e(p)[e(x).docente]?.includes(f.materia),ue=e(p)[e(x).docente]?.includes(u.materia);return Y&&!ue?-1:!Y&&ue?1:f.materia.localeCompare(u.materia)}):e(l))}),Ae(()=>{},()=>{d(i,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Ae(()=>(e(x),e(O)),()=>{d(c,e(x).grado?e(O).filter(f=>f.grado.toString()===e(x).grado):[])}),Ae(()=>e(x),()=>{d(m,ve(e(x).docente))}),Ae(()=>(e(m),e(O)),()=>{d(le,e(m)?[...new Set(e(O).map(f=>f.grado.toString()))].filter(f=>f.startsWith(`${e(m)}-`)):[...new Set(e(O).map(f=>f.grado.toString()))])}),Lr(),Pr();var P=Js(),K=rr(P),xe=r(K),We=r(xe),n=r(We),w=r(n),I=a(w,2),N=a(n,2),Me=r(N),Ge=a(Me,2),ot=a(r(Ge),4);{var Re=f=>{var u=ks();b(f,u)};re(ot,f=>{e(Oe)&&f(Re)})}var Zt=a(Ge,2),pr=a(r(Zt),4);{var Jt=f=>{var u=$s();b(f,u)};re(pr,f=>{e(W)&&f(Jt)})}var Qt=a(Zt,2),xr=a(Qt,2),Vt=a(xr,2),dt=a(Vt,2),et=r(dt),Ot=r(et);{var Pt=f=>{var u=Cs();b(f,u)},Ht=f=>{var u=Ss();b(f,u)},Rt=f=>{var u=As();b(f,u)};re(Ot,f=>{v()==="dark"?f(Pt):v()==="light"?f(Ht,1):f(Rt,!1)})}var Ft=a(Ot,2),Gt=r(Ft),cr=a(xe,2),ur=r(cr),Xt=r(ur);{var br=f=>{var u=Ds(),Y=a(r(u),2),ue=a(r(Y),2),Pe=r(ue),ze=a(Y,2);S(()=>y(Pe,ko)),G("click",ze,Le),b(f,u)};re(Xt,f=>{e(Xe)&&f(br)})}var wr=a(Xt,2);xo(wr,{featureMessage:ge,description:"Ahora puedes filtrar tus datos de forma avanzada. ¬°Pru√©balo!",onTryNow:Je,onDismiss:nt,targetSelector:"#filter-button-target",showPopup:!1,colorTheme:"blue"});var hr=a(wr,2);xo(hr,{featureMessage:H,description:"Ahora puedes generar reportes de inasistencias en formato Excel. ¬°Descarga y analiza tus datos!",onTryNow:D,onDismiss:rt,targetSelector:"#report-button-target",showPopup:!1,colorTheme:"green"});var Dr=a(hr,2),mr=r(Dr),kr=r(mr),_r=r(kr),Er=a(_r,2),M=r(Er),pe=r(M);M.value=M.__value="";var _e=a(M);ke(_e,1,()=>e(R),Ee,(f,u)=>{var Y=Es(),ue=r(Y),Pe={};S(()=>{y(ue,e(u)),Pe!==(Pe=e(u))&&(Y.value=(Y.__value=e(u))??"")}),b(f,Y)});var Ke=a(kr,2),bt=r(Ke),vt=r(bt),Ue=a(bt,2);{var wt=f=>{var u=zs();ke(u,5,()=>e(be),Ee,(Y,ue)=>{const Pe=Bt(()=>(e(p),e(x),e(ue),t(()=>e(p)[e(x).docente]?.includes(e(ue).materia)))),ze=Bt(()=>(e(B),e(ue),t(()=>e(B).findIndex(qt=>qt.materia===e(ue).materia)))),Be=Bt(()=>e(ze)>=0);var st=Fs(),it=r(st),ct=r(it),ft=a(ct,2),Kt=r(ft),ir=a(it,2);{var Fr=qt=>{var nr=Bs(),gr=r(nr);gr.value=gr.__value="";var mt=a(gr);mt.value=mt.__value="0";var Mt=a(mt);ke(Mt,0,()=>[1,2,3,4],Ee,(dr,_t)=>{var er=Is(),yr=r(er),Nt={};S(Sr=>{y(yr,`${_t??""}h`),Nt!==(Nt=Sr)&&(er.value=(er.__value=Sr)??"")},[()=>t(()=>_t.toString())]),b(dr,er)}),S((dr,_t)=>{Ze(nr,1,`w-full lg:w-16 px-2 py-1.5 lg:py-1 text-sm rounded border appearance-none cursor-pointer ${dr??""}`,"svelte-gsxx31"),s(nr,`background-color: ${e(i),t(()=>e(i).inputBg)??""}; border-color: ${_t??""}; color: ${e(i),t(()=>e(i).text)??""};`)},[()=>(e(Q),e(C),e(B),Ne(e(ze)),t(()=>e(Q)&&e(C).includes("horas")&&!e(B)[e(ze)].horas?"ring-2 ring-red-500 border-red-500":"")),()=>(e(Q),e(C),e(B),Ne(e(ze)),e(i),t(()=>e(Q)&&e(C).includes("horas")&&!e(B)[e(ze)].horas?"#ef4444":e(i).border))]),pt(nr,()=>e(B)[e(ze)].horas,dr=>(Fe(B,e(B)[e(ze)].horas=dr),qe(()=>{e(ze),e(Q),e(C),e(i)}))),b(qt,nr)};re(ir,qt=>{e(Be)&&qt(Fr)})}S(()=>{Ze(st,1,`flex flex-col lg:flex-row lg:items-center gap-1 lg:gap-2 px-2 py-2 lg:py-1.5 rounded-lg border transition-all ${e(Be)?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 dark:border-indigo-500":"border-transparent"}`,"svelte-gsxx31"),s(st,`border-color: ${Ne(e(Be)),e(i),t(()=>e(Be)?"#6366f1":e(i).border)??""};`),Eo(ct,e(Be)),s(ft,`color: ${e(i),t(()=>e(i).text)??""};`),y(Kt,`${e(Pe)?"‚≠ê ":""}${e(ue),t(()=>e(ue).materia)??""}`)}),G("change",ct,qt=>{qt.currentTarget.checked?d(B,[...e(B),{materia:e(ue).materia,horas:""}]):d(B,e(B).filter(nr=>nr.materia!==e(ue).materia))}),b(Y,st)}),S((Y,ue)=>{Ze(u,1,`border rounded-xl p-2 lg:p-3 flex flex-col lg:flex-row lg:flex-wrap gap-2 lg:gap-2 ${Y??""}`,"svelte-gsxx31"),s(u,`border-color: ${ue??""}; background-color: ${e(i),t(()=>e(i).inputBg)??""};`)},[()=>(e(Q),e(C),t(()=>e(Q)&&e(C).includes("materias")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(Q),e(C),e(i),t(()=>e(Q)&&e(C).includes("materias")?"#ef4444":e(i).border))]),b(f,u)},or=f=>{var u=Ts(),Y=r(u),ue=r(Y);Y.value=Y.__value="";var Pe=a(Y);ke(Pe,1,()=>e(be),Ee,(ze,Be)=>{const st=Bt(()=>(e(p),e(x),e(Be),t(()=>e(p)[e(x).docente]?.includes(e(Be).materia))));var it=Ms(),ct=r(it),ft={};S(()=>{s(it,e(st)?"color: #6366f1; font-weight: 600;":""),y(ct,`${e(st)?"‚≠ê ":""}${e(Be),t(()=>e(Be).materia)??""}`),ft!==(ft=(e(Be),t(()=>e(Be).materia)))&&(it.value=(it.__value=(e(Be),t(()=>e(Be).materia)))??"")}),b(ze,it)}),S((ze,Be)=>{u.disabled=e(X),Ze(u,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${ze??""}`,"svelte-gsxx31"),s(u,`background-color: ${e(i),t(()=>e(i).inputBg)??""}; border-color: ${Be??""}; color: ${e(i),t(()=>e(i).text)??""};`),y(ue,e(X)?"Cargando...":"Seleccione materia")},[()=>(e(Q),e(C),t(()=>e(Q)&&e(C).includes("materia")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(Q),e(C),e(i),t(()=>e(Q)&&e(C).includes("materia")?"#ef4444":e(i).border))]),pt(u,()=>e(x).materia,ze=>(Fe(x,e(x).materia=ze),qe(()=>{e(j),e(Q),e(C),e(i),e(R),e(X),e(be),e(p),e(F),e(le)}))),b(f,u)};re(Ue,f=>{e(o)?f(wt):f(or,!1)})}var Yt=a(mr,2),Ce=r(Yt),ut=r(Ce),kt=a(ut,2),Ut=r(kt);Ut.value=Ut.__value="";var Ct=a(Ut);Ct.value=Ct.__value="0";var ar=a(Ct);ke(ar,0,()=>[1,2,3,4],Ee,(f,u)=>{var Y=Os(),ue=r(Y),Pe={};S(ze=>{y(ue,`${u??""} ${u===1?"Hora":"Horas"}`),Pe!==(Pe=ze)&&(Y.value=(Y.__value=ze)??"")},[()=>t(()=>u.toString())]),b(f,Y)});var we=a(Ce,2),He=r(we),gt=a(He,2),ht=r(gt),zt=r(ht);ht.value=ht.__value="";var sr=a(ht);ke(sr,1,()=>e(le),Ee,(f,u)=>{var Y=Ns(),ue=r(Y),Pe={};S(ze=>{y(ue,ze),Pe!==(Pe=e(u))&&(Y.value=(Y.__value=e(u))??"")},[()=>(e(u),t(()=>e(u).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),b(f,Y)});var Hr=a(Yt,2);{var Or=f=>{var u=Vs(),Y=r(u),ue=r(Y),Pe=a(Y,2),ze=r(Pe);ke(ze,1,()=>e(c),it=>it.nombre,(it,ct)=>{const ft=Bt(()=>(e(ae),e(ct),t(()=>e(ae).filter(Dt=>Dt.nombre===e(ct).nombre)))),Kt=Bt(()=>(Ne(e(ft)),t(()=>e(ft).length>0))),ir=Bt(()=>(Ne(e(ft)),t(()=>e(ft).some(Dt=>{const St=je.find(yt=>yt.value===Dt.motivo);return St&&St.obligaHoras}))));var Fr=Gs(),qt=rr(Fr);let nr;var gr=r(qt),mt=r(gr),Mt=r(mt),dr=a(mt,2);ke(dr,5,()=>e(ft),Ee,(Dt,St)=>{const yt=Bt(()=>(e(St),t(()=>je.find(oo=>oo.value===e(St).motivo))));var Rr=bo(),so=rr(Rr);{var ro=oo=>{var wo=js(),Fo=r(wo),Wo=r(Fo),zo=a(Fo),qo=a(zo);S(()=>{Ze(wo,1,(Ne(e(yt)),t(()=>`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold border ${e(yt).bgColor} ${e(yt).textColor} ${e(yt).borderColor} ${e(yt).darkBgColor} ${e(yt).darkTextColor} ${e(yt).darkBorderColor}`)),"svelte-gsxx31"),y(Wo,(Ne(e(yt)),t(()=>e(yt).icon))),y(zo,` ${Ne(e(yt)),t(()=>e(yt).label)??""} `)}),G("click",qo,()=>ne(e(ct).nombre,e(St).motivo)),b(oo,wo)};re(so,oo=>{e(yt)&&oo(ro)})}b(Dt,Rr)});var _t=a(gr,2),er=r(_t);let yr;var Nt=r(er),Sr=r(Nt);Sr.value=Sr.__value="";var tr=a(Sr);tr.value=tr.__value="0";var Lt=a(tr);ke(Lt,0,()=>[1,2,3,4],Ee,(Dt,St)=>{var yt=Rs(),Rr=r(yt),so={};S(ro=>{y(Rr,St),so!==(so=ro)&&(yt.value=(yt.__value=ro)??"")},[()=>t(()=>St.toString())]),b(Dt,yt)});var It;Zo(Nt);var fr=a(Nt,2),Zr=a(er,2),Vr=r(Zr),Yr=r(Vr);Yr.value=Yr.__value="";var go=a(Yr);go.value=go.__value="Ignorar";var Po=a(go);ke(Po,1,()=>je,Ee,(Dt,St)=>{const yt=Bt(()=>(Ne(e(ft)),e(St),t(()=>e(ft).some(oo=>oo.motivo===e(St).value))));var Rr=Ls(),so=r(Rr),ro={};S(()=>{Rr.disabled=e(yt),y(so,`${e(St),t(()=>e(St).icon)??""} ${e(St),t(()=>e(St).label)??""} ${e(yt)?"‚úì":""}`),ro!==(ro=(e(St),t(()=>e(St).value)))&&(Rr.value=(Rr.__value=(e(St),t(()=>e(St).value)))??"")}),b(Dt,Rr)}),Vr.value=Vr.__value="";var Ho=a(Vr,2),Go=a(_t,2);{var Uo=Dt=>{var St=Ps(),yt=r(St);S(()=>s(yt,`color: ${Ne(e(ft)),e(i),t(()=>e(ft)[0]?.observaciones?"rgb(var(--text-primary))":e(i).icon)??""};`)),G("click",yt,()=>lt(e(ct).nombre)),b(Dt,St)};re(Go,Dt=>{e(Kt)&&Dt(Uo)})}var Vo=a(qt,2);{var Yo=Dt=>{var St=Hs(),yt=r(St);S(()=>{Xo(yt,(Ne(e(ft)),t(()=>e(ft)[0]?.observaciones||""))),s(yt,`background-color: ${e(i),t(()=>e(i).inputBg)??""}; border-color: ${e(i),t(()=>e(i).border)??""}; color: ${e(i),t(()=>e(i).text)??""};`)}),G("input",yt,Rr=>ye(e(ct).nombre,Rr.currentTarget.value)),b(Dt,St)};re(Vo,Dt=>{Ne(e(Kt)),e(Ye),e(ct),Ne(e(ft)),t(()=>e(Kt)&&(e(Ye)[e(ct).nombre]||e(ft)[0]?.observaciones))&&Dt(Yo)})}S(Dt=>{nr=Ze(qt,1,"flex flex-col sm:flex-row sm:items-center justify-between p-4 border rounded-xl transition-all duration-200 gap-4 svelte-gsxx31",null,nr,{"ring-2":e(Kt),"ring-indigo-500":e(Kt)}),s(qt,`background-color: ${e(i),t(()=>e(i).bg)??""}; border-color: ${Ne(e(Kt)),e(i),t(()=>e(Kt)?"transparent":e(i).border)??""};`),s(mt,`color: ${e(i),t(()=>e(i).text)??""};`),y(Mt,(e(ct),t(()=>e(ct).nombre))),yr=Ze(er,1,"relative w-full sm:w-32 transition-opacity duration-200 svelte-gsxx31",null,yr,{"opacity-40":!e(ir)}),Nt.disabled=!e(ir),s(Nt,`background-color: ${e(i),t(()=>e(i).inputBg)??""}; border-color: ${e(i),t(()=>e(i).border)??""}; color: ${e(i),t(()=>e(i).text)??""};`),It!==(It=Dt)&&(Nt.value=(Nt.__value=Dt)??"",Qo(Nt,Dt)),s(fr,`color: ${e(i),t(()=>e(i).icon)??""};`),s(Vr,`background-color: ${e(i),t(()=>e(i).inputBg)??""}; border-color: ${e(i),t(()=>e(i).border)??""}; color: ${e(i),t(()=>e(i).text)??""};`),s(Ho,`color: ${e(i),t(()=>e(i).icon)??""};`)},[()=>(Ne(e(ft)),e(De),e(ct),e(x),t(()=>e(ft).find(Dt=>{const St=je.find(yt=>yt.value===Dt.motivo);return St&&St.obligaHoras})?.horas||e(De)[e(ct).nombre]||e(x).horas))]),G("change",Nt,Dt=>xt(e(ct).nombre,Dt.currentTarget.value)),G("change",Vr,Dt=>{Ie(e(ct).nombre,Dt.currentTarget.value),Dt.currentTarget.value=""}),b(it,Fr)});var Be=a(ze,2);{var st=it=>{var ct=Us();S(()=>s(ct,`color: ${e(i),t(()=>e(i).text)??""};`)),b(it,ct)};re(Be,it=>{e(c),t(()=>e(c).length===0)&&it(st)})}S(()=>{s(Y,`color: ${e(i),t(()=>e(i).label)??""};`),y(ue,`Estudiantes del Grado ${e(x),t(()=>e(x).grado)??""}`),s(Pe,`border-color: ${e(i),t(()=>e(i).border)??""};`)}),b(f,u)};re(Hr,f=>{e(x),t(()=>e(x).grado&&e(x).horas!=="")&&f(Or)})}var Nr=a(Hr,2),Jr=r(Nr),Kr=r(Jr),jr=a(Kr,2),Se=a(Jr,2),lr=r(Se),$r=a(lr,2),Cr=a(Nr,2),Gr=r(Cr),Ir=a(r(Gr)),Ur=r(Ir),vr=a(cr,2),Wr=r(vr);{var Br=f=>{var u=Ys();b(f,u)},qr=f=>{var u=Ws();b(f,u)};re(Wr,f=>{e(tt)?f(Br):f(qr,!1)})}var _=a(Wr,2);{var T=f=>{var u=qs(),Y=r(u);S(()=>y(Y,(e(ae),t(()=>e(ae).length)))),b(f,u)};re(_,f=>{e(tt),e(ae),t(()=>!e(tt)&&e(ae).length>0)&&f(T)})}var de=a(K,2);{var he=f=>{Za(f,{onClose:$,get selectedDocente(){return e(x),t(()=>e(x).docente)}})};re(de,f=>{e(U)&&f(he)})}var at=a(de,2);{var Ve=f=>{ws(f,{onClose:te,get initialDocente(){return e(x),t(()=>e(x).docente)}})};re(at,f=>{e(ce)&&f(Ve)})}var At=a(at,2);{var Wt=f=>{Lo(f,{onClose:se,get initialDocente(){return e(x),t(()=>e(x).docente)}})};re(At,f=>{e($e)&&f(Wt)})}S((f,u,Y,ue,Pe,ze)=>{s(K,`background-color: ${e(i),t(()=>e(i).bg)??""};`),s(xe,`background-color: ${e(i),t(()=>e(i).cardBg)??""}; border-color: ${e(i),t(()=>e(i).cardBorder)??""};`),jt(w,"src",ao),s(I,`color: ${e(i),t(()=>e(i).text)??""};`),s(Me,`background-color: ${e(i),t(()=>e(i).inputBg)??""}; border-color: ${e(i),t(()=>e(i).border)??""}; color: ${e(i),t(()=>e(i).text)??""};`),s(Ge,`background-color: ${e(i),t(()=>e(i).inputBg)??""}; border-color: ${e(i),t(()=>e(i).border)??""}; color: ${e(i),t(()=>e(i).text)??""};`),s(Zt,`background-color: ${e(i),t(()=>e(i).inputBg)??""}; border-color: ${e(i),t(()=>e(i).border)??""}; color: ${e(i),t(()=>e(i).text)??""};`),s(Qt,`background-color: ${e(i),t(()=>e(i).inputBg)??""}; border-color: ${e(i),t(()=>e(i).border)??""}; color: ${e(i),t(()=>e(i).text)??""};`),s(xr,`background-color: ${e(i),t(()=>e(i).inputBg)??""}; border-color: ${e(i),t(()=>e(i).border)??""}; color: ${e(i),t(()=>e(i).text)??""};`),s(Vt,`background-color: ${e(i),t(()=>e(i).inputBg)??""}; border-color: ${e(i),t(()=>e(i).border)??""}; color: ${e(i),t(()=>e(i).text)??""};`),s(et,`background-color: ${e(i),t(()=>e(i).inputBg)??""}; border-color: ${e(i),t(()=>e(i).border)??""}; color: ${e(i),t(()=>e(i).text)??""};`),y(Gt,v()),s(ur,`background-color: ${e(i),t(()=>e(i).cardBg)??""}; border-color: ${e(i),t(()=>e(i).cardBorder)??""};`),s(_r,`color: ${e(i),t(()=>e(i).label)??""};`),Er.disabled=e(j),Ze(Er,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${f??""}`,"svelte-gsxx31"),s(Er,`background-color: ${e(i),t(()=>e(i).inputBg)??""}; border-color: ${u??""}; color: ${e(i),t(()=>e(i).text)??""};`),y(pe,e(j)?"Cargando...":"Seleccione docente"),Ze(Ke,1,`space-y-2 ${e(o)?"lg:col-span-2":""}`,"svelte-gsxx31"),s(vt,`color: ${e(i),t(()=>e(i).label)??""};`),s(ut,`color: ${e(i),t(()=>e(i).label)??""};`),Ze(kt,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer ${Y??""}`,"svelte-gsxx31"),s(kt,`background-color: ${e(i),t(()=>e(i).inputBg)??""}; border-color: ${ue??""}; color: ${e(i),t(()=>e(i).text)??""};`),s(He,`color: ${e(i),t(()=>e(i).label)??""};`),gt.disabled=e(F),Ze(gt,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${Pe??""}`,"svelte-gsxx31"),s(gt,`background-color: ${e(i),t(()=>e(i).inputBg)??""}; border-color: ${ze??""}; color: ${e(i),t(()=>e(i).text)??""};`),y(zt,e(F)?"Cargando...":"Seleccione grado"),s(Kr,`color: ${e(i),t(()=>e(i).label)??""};`),s(jr,`background-color: ${e(i),t(()=>e(i).inputBg)??""}; border-color: ${e(i),t(()=>e(i).border)??""}; color: ${e(i),t(()=>e(i).text)??""};`),s(lr,`color: ${e(i),t(()=>e(i).label)??""};`),s($r,`background-color: ${e(i),t(()=>e(i).inputBg)??""}; border-color: ${e(i),t(()=>e(i).border)??""}; color: ${e(i),t(()=>e(i).text)??""};`),s(Cr,`border-color: ${e(i),t(()=>e(i).border)??""};`),s(Gr,`color: ${e(i),t(()=>e(i).label)??""};`),y(Ur,(e(ae),t(()=>e(ae).length))),vr.disabled=e(tt)},[()=>(e(Q),e(C),t(()=>e(Q)&&e(C).includes("docente")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(Q),e(C),e(i),t(()=>e(Q)&&e(C).includes("docente")?"#ef4444":e(i).border)),()=>(e(Q),e(C),t(()=>e(Q)&&e(C).includes("horas")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(Q),e(C),e(i),t(()=>e(Q)&&e(C).includes("horas")?"#ef4444":e(i).border)),()=>(e(Q),e(C),t(()=>e(Q)&&e(C).includes("grado")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(Q),e(C),e(i),t(()=>e(Q)&&e(C).includes("grado")?"#ef4444":e(i).border))]),G("click",Me,V),G("click",Ge,Qe),G("click",Zt,Z),G("click",Qt,ie),G("click",xr,ee),G("click",Vt,function(...f){q()?.apply(this,f)}),G("click",et,oe),pt(Er,()=>e(x).docente,f=>(Fe(x,e(x).docente=f),qe(()=>{e(j),e(Q),e(C),e(i),e(R),e(X),e(be),e(p),e(F),e(le)}))),pt(kt,()=>e(x).horas,f=>(Fe(x,e(x).horas=f),qe(()=>{e(j),e(Q),e(C),e(i),e(R),e(X),e(be),e(p),e(F),e(le)}))),pt(gt,()=>e(x).grado,f=>(Fe(x,e(x).grado=f),qe(()=>{e(j),e(Q),e(C),e(i),e(R),e(X),e(be),e(p),e(F),e(le)}))),zr(jr,()=>e(x).fecha,f=>(Fe(x,e(x).fecha=f),qe(()=>{e(j),e(Q),e(C),e(i),e(R),e(X),e(be),e(p),e(F),e(le)}))),zr($r,()=>e(x).observaciones,f=>(Fe(x,e(x).observaciones=f),qe(()=>{e(j),e(Q),e(C),e(i),e(R),e(X),e(be),e(p),e(F),e(le)}))),G("submit",Dr,me),G("click",vr,me),b(J,P),Tr(),g()}var Zs=k('<div class="flex-1 flex items-center justify-center"><div class="text-center"><div class="animate-spin w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full mx-auto mb-4"></div> <p>Cargando datos...</p></div></div>'),Qs=k('<span class="ml-2 px-2 py-1 text-xs bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full">Activos</span>'),Xs=k("<option> </option>"),el=k("<option> </option>"),tl=k('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">Este docente no tiene registros de materias</p>'),rl=k("<option> </option>"),ol=k('<p class="text-[10px] sm:text-xs text-amber-600 dark:text-amber-400 mt-1">No hay grados para los filtros seleccionados</p>'),al=k('<div class="flex-1 flex items-center justify-center"><div class="text-center py-12 px-4"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm sm:text-base">No se encontraron registros con los filtros seleccionados</p></div></div>'),sl=k('<tr class="border-b transition-colors hover:bg-black/5 dark:hover:bg-white/5 text-xs"><td class="p-2"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 truncate max-w-[150px]"> </td><td class="p-2 text-center"> </td><td class="p-2 text-center"> </td><td class="p-2"><div class="flex items-center gap-2 max-w-[300px]"><span><span> </span></span> <span class="truncate"> </span></div></td><td class="p-2"><span class="truncate block max-w-xs text-xs"> </span></td></tr>'),ll=k('<div><p class="text-xs font-medium mb-1">Observaci√≥n:</p> <p class="text-xs"> </p></div>'),il=k('<div class="border rounded-lg p-3 transition-colors hover:bg-black/5 dark:hover:bg-white/5"><div class="flex justify-between items-center mb-2"><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><span><span> </span></span> <p class="text-xs opacity-75"> </p></div></div></div> <div class="flex gap-2 text-[10px] mb-2"><div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="truncate"> </span></div> <div class="flex items-center flex-1 min-w-0"><svg class="w-3 h-3 mr-1 opacity-60 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <span class="truncate"> </span></div></div> <div class="mb-2"><p class="text-xs font-medium mb-1">Anotaci√≥n:</p> <p class="text-xs"> </p></div> <!></div>'),nl=k('<div class="hidden lg:flex flex-1 flex-col overflow-hidden min-h-0"><div class="flex-1 overflow-auto min-w-full border rounded-lg"><table class="w-full border-collapse text-sm min-w-[900px]"><thead class="sticky top-0 z-10 border-b"><tr><th class="text-left p-2 font-semibold whitespace-nowrap">Fecha</th><th class="text-left p-2 font-semibold whitespace-nowrap">Docente</th><th class="text-left p-2 font-semibold whitespace-nowrap">Materia</th><th class="text-center p-2 font-semibold whitespace-nowrap">Grado</th><th class="text-center p-2 font-semibold whitespace-nowrap">Horas</th><th class="text-left p-2 font-semibold whitespace-nowrap">Anotaci√≥n</th><th class="text-left p-2 font-semibold whitespace-nowrap">Observaci√≥n</th></tr></thead><tbody></tbody></table></div></div> <div class="flex-1 overflow-y-auto lg:hidden px-1"><div class="space-y-2"></div></div>',1),dl=k('<div class="p-3 sm:p-4 border-b"><div class="flex items-center justify-between mb-2 sm:mb-3"><h3 class="text-lg font-semibold">Filtros <!></h3> <button class="text-sm px-3 py-1 rounded-lg border transition-colors hover:bg-black/5 dark:hover:bg-white/5">Limpiar filtros</button></div> <div class="mb-3 p-1.5 sm:p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg"><p class="text-[10px] sm:text-xs font-medium mb-1.5">R√°pido: Fechas</p> <div class="flex items-center mb-2"><input id="checkFiltrarFecha" type="checkbox" class="w-4 h-4 rounded text-indigo-600 focus:ring-indigo-500 border-gray-300 dark:border-gray-600 dark:bg-zinc-700"/> <label for="checkFiltrarFecha" class="ml-2 text-xs font-medium">Activar filtro por fechas</label></div> <div class="flex flex-wrap gap-1 sm:gap-2"><button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Hoy</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 7 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimos 30 d√≠as</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">Mes actual</button> <button class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-1 bg-white dark:bg-zinc-800 border rounded hover:bg-indigo-100 dark:hover:bg-indigo-800/50 transition-colors">√öltimo trimestre</button></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"><div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroDocente" class="block text-xs sm:text-sm font-medium">Docente</label> <select id="filtroDocente" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option>Todos los docentes</option><!></select></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroMateria" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroMateria" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroGrado" class="block text-xs sm:text-sm font-medium"> </label> <select id="filtroGrado" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"><option> </option><!></select> <!></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroAnotacion" class="block text-xs sm:text-sm font-medium">B√∫squeda en anotaci√≥n</label> <input id="filtroAnotacion" type="text" placeholder="Buscar en anotaciones..." class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm"/></div></div> <div class="flex gap-3 sm:gap-4"><div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaInicio" class="block text-xs sm:text-sm font-medium">Fecha desde</label> <input id="filtroFechaInicio" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div> <div class="flex-1 space-y-1.5 sm:space-y-2"><label for="filtroFechaFin" class="block text-xs sm:text-sm font-medium">Fecha hasta</label> <input id="filtroFechaFin" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"/></div></div></div></div> <div class="flex-1 flex flex-col p-2 sm:p-4 min-h-0"><div class="mb-4 px-0 sm:px-3"><p class="text-sm">Se encontraron <span class="font-bold text-indigo-500"> </span> registros</p></div> <!></div>',1),cl=k('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4" role="button" tabindex="0" aria-label="Cerrar ventana"><div class="w-full max-w-7xl max-h-[95vh] bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl overflow-hidden flex flex-col"><div class="flex items-center justify-between p-3 sm:p-4 border-b"><div class="flex items-center gap-3"><img alt="EIE Logo" class="h-8 w-auto hidden sm:block"/> <div><h2 class="text-lg sm:text-xl font-bold">Anotaciones de Clase</h2> <p class="text-xs hidden sm:block">Filtra y consulta los registros</p></div></div> <div class="flex items-center gap-3"><button class="inline-flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Exportar CSV</button> <button class="p-2 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5" aria-label="Cerrar"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div> <div class="flex-1 overflow-hidden flex flex-col min-h-0"><!></div></div></div>');function vl(J,A){Mr(A,!1);const v=h(),Te=h(),g=h(),C=h(),o=h();let be=Tt(A,"onClose",8),i=Tt(A,"selectedDocente",8,""),c=h([]),m=[],le=[],ge=[],H=h(!1),q=h(!1),R=h([]),l=h({docente:i()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",anotacion:""});const O=()=>{const D=new Date,p=new Date(D.getFullYear(),D.getMonth()-1,D.getDate()),E=z=>{const V=z.getFullYear(),ee=String(z.getMonth()+1).padStart(2,"0"),ve=String(z.getDate()).padStart(2,"0");return`${V}-${ee}-${ve}`};Fe(l,e(l).fechaInicio=E(p)),qe(()=>{e(o),e(x),e(v),e(g)}),Fe(l,e(l).fechaFin=E(D)),qe(()=>{e(o),e(x),e(v),e(g)})},j=D=>{const p=new Date;let E;switch(D){case"hoy":E=new Date(p);break;case"semana":E=new Date(p),E.setDate(p.getDate()-7);break;case"mes":E=new Date(p),E.setDate(p.getDate()-30);break;case"mes_actual":E=new Date(p.getFullYear(),p.getMonth(),1);break;case"trimestre":E=new Date(p),E.setDate(p.getDate()-90);break;default:O();return}const z=V=>{const ee=V.getFullYear(),ve=String(V.getMonth()+1).padStart(2,"0"),je=String(V.getDate()).padStart(2,"0");return`${ee}-${ve}-${je}`};Fe(l,e(l).fechaInicio=z(E)),qe(()=>{e(o),e(x),e(v),e(g)}),Fe(l,e(l).fechaFin=z(p)),qe(()=>{e(o),e(x),e(v),e(g)}),d(q,!0)},X=[{value:"Estrategias de Ense√±anza-Aprendizaje",icon:"üìö",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},{value:"Evaluaci√≥n y Verificaci√≥n de Saberes",icon:"üìù",color:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200"},{value:"Enfoque STEM+ y Contexto Rural",icon:"üî¨",color:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200"},{value:"Pr√°cticas de Laboratorio y Mantenimiento",icon:"üîß",color:"bg-rose-100 text-rose-800 dark:bg-rose-900 dark:text-rose-200"},{value:"Ciudadan√≠a Digital y √âtica",icon:"üíª",color:"bg-violet-100 text-violet-800 dark:bg-violet-900 dark:text-violet-200"},{value:"Pensamiento Computacional y Programaci√≥n",icon:"üíª",color:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200"},{value:"Recursos Anal√≥gicos y Contingencias",icon:"üìã",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},{value:"Ofim√°tica y Competencias Productivas",icon:"üñ•Ô∏è",color:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200"},{value:"Gesti√≥n Administrativa y Proyectos Transversales",icon:"üìä",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}],F=D=>{for(const p of X)if(D.includes(p.value))return p;return{icon:"üìù",color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};let x=h([]),ae=h([]),De=h([]),Ye=h([]);const tt=async()=>{d(H,!0);try{const[D,p,E,z]=await Promise.all([Ro({spreadsheetId:ho,worksheetTitle:Io}),Xr(),eo(),to()]),V=oe=>{if(!oe?.records||!Array.isArray(oe.records))return[];const L=oe.records[0]?.values||[];return oe.records.slice(1).map(Ie=>{const ye=Ie.values||[];return{timestamp:ye[0]||"",fecha:ye[1]||"",docente:ye[2]||"",materia:ye[3]||"",grado:ye[4]||"",horas:ye[5]||"",anotacion:ye[6]||"",observacion:ye[7]||""}}).filter(Ie=>Ie.docente&&Ie.fecha)},ee=oe=>Array.isArray(oe)?oe:oe?.data&&Array.isArray(oe.data)?oe.data:oe?.rows&&Array.isArray(oe.rows)?oe.rows:oe?.values&&Array.isArray(oe.values)?oe.values:oe?.anotaciones&&Array.isArray(oe.anotaciones)?oe.anotaciones:[];d(c,V(D)),m=ee(p),le=ee(E),ge=ee(z),d(x,e(c).length>0?[...new Set(e(c).map(oe=>oe.docente).filter(Boolean))].sort():[]),d(ae,e(c).length>0?[...new Set(e(c).map(oe=>oe.materia).filter(Boolean))].sort():[]);const ve=[...new Set(ge.map(oe=>(typeof oe=="string"?oe:oe.grado||"").toString()).filter(Boolean))],je=e(c).length>0?e(c).map(oe=>oe.grado).filter(Boolean):[];d(De,[...new Set([...ve,...je])].sort((oe,L)=>{const ne=parseInt(oe),Ie=parseInt(L);return!isNaN(ne)&&!isNaN(Ie)?ne-Ie:oe.localeCompare(L)})),d(Ye,e(c).length>0?[...new Set(e(c).map(oe=>oe.anotacion).filter(Boolean))].sort():[]),O(),console.log("Datos cargados:",{anotaciones:e(c).length,docentes:m.length,docentesUnicos:e(x).length,materiasUnicas:e(ae).length,gradosUnicos:e(De).length,anotacionesUnicas:e(Ye).length})}catch(D){console.error("Error cargando datos:",D),await $t.fire({icon:"error",title:"Error",text:"No se pudieron cargar los datos de anotaciones",confirmButtonColor:"#ef4444"})}finally{d(H,!1)}},Q=()=>{d(l,{docente:i()||"",materia:"",grado:"",fechaInicio:"",fechaFin:"",anotacion:""}),O(),d(q,!1)},B=()=>{if(e(R).length===0){$t.fire({icon:"warning",title:"Sin datos",text:"No hay datos para exportar",confirmButtonColor:"#f59e0b"});return}const p=[["Fecha","Docente","Materia","Grado","Horas","Anotaci√≥n","Observaci√≥n"].join(","),...e(R).map(ee=>[ee.fecha,`"${ee.docente}"`,`"${ee.materia}"`,ee.grado,ee.horas,`"${ee.anotacion}"`,`"${ee.observacion}"`].join(","))].join(`
`),E=new Blob([p],{type:"text/csv;charset=utf-8;"}),z=document.createElement("a"),V=URL.createObjectURL(E);z.setAttribute("href",V),z.setAttribute("download",`anotaciones_${new Date().toISOString().split("T")[0]}.csv`),z.style.visibility="hidden",document.body.appendChild(z),z.click(),document.body.removeChild(z)},U=D=>{try{const[p,E,z]=D.split("-");return p&&E&&z?`${z}/${E}/${p}`:D}catch{return D}},ce=(D,p=50)=>D.length<=p?D:D.substring(0,p)+"...";Ar(()=>{tt()}),Ae(()=>(e(l),e(c),e(ae)),()=>{d(v,e(l).docente?[...new Set(e(c).filter(D=>D.docente===e(l).docente).map(D=>D.materia).filter(Boolean))].sort():e(ae))}),Ae(()=>(e(l),e(c),e(De)),()=>{d(Te,e(l).docente?[...new Set(e(c).filter(D=>D.docente===e(l).docente).map(D=>D.grado).filter(Boolean))].sort((D,p)=>{const E=parseInt(D),z=parseInt(p);return!isNaN(E)&&!isNaN(z)?E-z:D.localeCompare(p)}):e(De))}),Ae(()=>(e(l),e(c),e(Te)),()=>{d(g,e(l).materia?[...new Set(e(c).filter(D=>D.materia===e(l).materia).map(D=>D.grado).filter(Boolean))].sort((D,p)=>{const E=parseInt(D),z=parseInt(p);return!isNaN(E)&&!isNaN(z)?E-z:D.localeCompare(p)}):e(Te))}),Ae(()=>(e(l),e(c),e(Ye)),()=>{d(C,e(l).docente||e(l).materia||e(l).grado?[...new Set(e(c).filter(D=>!(e(l).docente&&D.docente!==e(l).docente||e(l).materia&&D.materia!==e(l).materia||e(l).grado&&D.grado!==e(l).grado)).map(D=>D.anotacion).filter(Boolean))].sort():e(Ye))}),Ae(()=>{},()=>{d(o,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Ae(()=>(e(c),e(l),e(q)),()=>{d(R,e(c).filter(D=>{if(e(l).docente&&D.docente!==e(l).docente||e(l).materia&&D.materia!==e(l).materia||e(l).grado&&D.grado!==e(l).grado||e(l).anotacion&&!D.anotacion.toLowerCase().includes(e(l).anotacion.toLowerCase()))return!1;if(e(q)){const p=D.fecha;if(e(l).fechaInicio&&p<e(l).fechaInicio||e(l).fechaFin&&p>e(l).fechaFin)return!1}return!0}))}),Ae(()=>(e(q),e(l)),()=>{e(q)&&(!e(l).fechaInicio||!e(l).fechaFin)&&O()}),Lr(),Pr();var $e=cl(),Qe=r($e),$=r(Qe),Z=r($),te=r(Z),ie=a(te,2),se=r(ie),Xe=a(se,2),Oe=a(Z,2),W=r(Oe),fe=a(W,2),Le=a($,2),nt=r(Le);{var Je=D=>{var p=Zs(),E=r(p),z=a(r(E),2);S(()=>s(z,`color: ${e(o),t(()=>e(o).text)??""};`)),b(D,p)},rt=D=>{var p=dl(),E=rr(p),z=r(E),V=r(z),ee=a(r(V));{var ve=Ce=>{var ut=Qs();b(Ce,ut)};re(ee,Ce=>{e(l),t(()=>e(l).docente||e(l).materia||e(l).grado||e(l).anotacion||e(l).fechaInicio||e(l).fechaFin)&&Ce(ve)})}var je=a(V,2),oe=a(z,2),L=r(oe),ne=a(L,2),Ie=r(ne),ye=a(Ie,2),lt=a(ne,2),xt=r(lt),me=a(xt,2),P=a(me,2),K=a(P,2),xe=a(K,2),We=a(oe,2),n=r(We),w=r(n),I=r(w),N=a(I,2),Me=r(N);Me.value=Me.__value="";var Ge=a(Me);ke(Ge,1,()=>e(x),Ee,(Ce,ut)=>{var kt=Xs(),Ut=r(kt),Ct={};S(()=>{y(Ut,e(ut)),Ct!==(Ct=e(ut))&&(kt.value=(kt.__value=e(ut))??"")}),b(Ce,kt)});var ot=a(w,2),Re=r(ot),Zt=r(Re),pr=a(Re,2),Jt=r(pr),Qt=r(Jt);Jt.value=Jt.__value="";var xr=a(Jt);ke(xr,1,()=>e(v),Ee,(Ce,ut)=>{var kt=el(),Ut=r(kt),Ct={};S(()=>{y(Ut,e(ut)),Ct!==(Ct=e(ut))&&(kt.value=(kt.__value=e(ut))??"")}),b(Ce,kt)});var Vt=a(pr,2);{var dt=Ce=>{var ut=tl();b(Ce,ut)};re(Vt,Ce=>{e(l),e(v),t(()=>e(l).docente&&e(v).length===0)&&Ce(dt)})}var et=a(n,2),Ot=r(et),Pt=r(Ot),Ht=r(Pt),Rt=a(Pt,2),Ft=r(Rt),Gt=r(Ft);Ft.value=Ft.__value="";var cr=a(Ft);ke(cr,1,()=>e(g),Ee,(Ce,ut)=>{var kt=rl(),Ut=r(kt),Ct={};S(()=>{y(Ut,e(ut)),Ct!==(Ct=e(ut))&&(kt.value=(kt.__value=e(ut))??"")}),b(Ce,kt)});var ur=a(Rt,2);{var Xt=Ce=>{var ut=ol();b(Ce,ut)};re(ur,Ce=>{e(l),e(g),t(()=>(e(l).docente||e(l).materia)&&e(g).length===0)&&Ce(Xt)})}var br=a(Ot,2),wr=r(br),hr=a(wr,2),Dr=a(et,2),mr=r(Dr),kr=r(mr),_r=a(kr,2),Er=a(mr,2),M=r(Er),pe=a(M,2),_e=a(E,2),Ke=r(_e),bt=r(Ke),vt=a(r(bt)),Ue=r(vt),wt=a(Ke,2);{var or=Ce=>{var ut=al(),kt=r(ut),Ut=r(kt),Ct=a(Ut,2);S(()=>{s(Ut,`color: ${e(o),t(()=>e(o).icon)??""};`),s(Ct,`color: ${e(o),t(()=>e(o).text)??""};`)}),b(Ce,ut)},Yt=Ce=>{var ut=nl(),kt=rr(ut),Ut=r(kt),Ct=r(Ut),ar=r(Ct),we=r(ar),He=r(we),gt=a(He),ht=a(gt),zt=a(ht),sr=a(zt),Hr=a(sr),Or=a(Hr),Nr=a(ar);ke(Nr,5,()=>e(R),Ee,(jr,Se)=>{const lr=Bt(()=>(e(Se),t(()=>F(e(Se).anotacion))));var $r=sl(),Cr=r($r),Gr=r(Cr),Ir=a(Cr),Ur=r(Ir),vr=a(Ir),Wr=r(vr),Br=a(vr),qr=r(Br),_=a(Br),T=r(_),de=a(_),he=r(de),at=r(he),Ve=r(at),At=r(Ve),Wt=a(at,2),f=r(Wt),u=a(de),Y=r(u),ue=r(Y);S((Pe,ze)=>{s($r,`border-color: ${e(o),t(()=>e(o).border)??""};`),s(Cr,`color: ${e(o),t(()=>e(o).text)??""};`),y(Gr,Pe),s(Ir,`color: ${e(o),t(()=>e(o).text)??""};`),jt(Ir,"title",(e(Se),t(()=>e(Se).docente))),y(Ur,(e(Se),t(()=>e(Se).docente))),s(vr,`color: ${e(o),t(()=>e(o).text)??""};`),jt(vr,"title",(e(Se),t(()=>e(Se).materia))),y(Wr,(e(Se),t(()=>e(Se).materia))),s(Br,`color: ${e(o),t(()=>e(o).text)??""};`),y(qr,(e(Se),t(()=>e(Se).grado))),s(_,`color: ${e(o),t(()=>e(o).text)??""};`),y(T,(e(Se),t(()=>e(Se).horas))),s(de,`color: ${e(o),t(()=>e(o).text)??""};`),Ze(at,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Ne(e(lr)),t(()=>e(lr).color)??""} flex-shrink-0`),y(At,(Ne(e(lr)),t(()=>e(lr).icon))),jt(Wt,"title",(e(Se),t(()=>e(Se).anotacion))),y(f,ze),s(u,`color: ${e(o),t(()=>e(o).text)??""};`),y(ue,(e(Se),t(()=>e(Se).observacion||"-")))},[()=>(e(Se),t(()=>U(e(Se).fecha))),()=>(e(Se),t(()=>ce(e(Se).anotacion,100)))]),b(jr,$r)});var Jr=a(kt,2),Kr=r(Jr);ke(Kr,5,()=>e(R),Ee,(jr,Se)=>{const lr=Bt(()=>(e(Se),t(()=>F(e(Se).anotacion))));var $r=il(),Cr=r($r),Gr=r(Cr),Ir=r(Gr),Ur=r(Ir),vr=r(Ur),Wr=r(vr),Br=a(Ur,2),qr=r(Br),_=a(Cr,2),T=r(_),de=a(r(T),2),he=r(de),at=a(T,2),Ve=a(r(at),2),At=r(Ve),Wt=a(_,2),f=r(Wt),u=a(f,2),Y=r(u),ue=a(Wt,2);{var Pe=ze=>{var Be=ll(),st=r(Be),it=a(st,2),ct=r(it);S(ft=>{s(st,`color: ${e(o),t(()=>e(o).label)??""};`),s(it,`color: ${e(o),t(()=>e(o).text)??""};`),jt(it,"title",(e(Se),t(()=>e(Se).observacion))),y(ct,ft)},[()=>(e(Se),t(()=>ce(e(Se).observacion,150)))]),b(ze,Be)};re(ue,ze=>{e(Se),t(()=>e(Se).observacion)&&ze(Pe)})}S((ze,Be)=>{s($r,`border-color: ${e(o),t(()=>e(o).cardBorder)??""}; background-color: ${e(o),t(()=>e(o).cardBg)??""};`),Ze(Ur,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium ${Ne(e(lr)),t(()=>e(lr).color)??""} flex-shrink-0`),y(Wr,(Ne(e(lr)),t(()=>e(lr).icon))),s(Br,`color: ${e(o),t(()=>e(o).label)??""};`),y(qr,`${e(Se),t(()=>e(Se).grado)??""} ‚Ä¢ ${ze??""} ‚Ä¢ ${e(Se),t(()=>e(Se).horas)??""}h`),s(_,`color: ${e(o),t(()=>e(o).text)??""};`),y(he,(e(Se),t(()=>e(Se).docente))),jt(Ve,"title",(e(Se),t(()=>e(Se).materia))),y(At,(e(Se),t(()=>e(Se).materia))),s(f,`color: ${e(o),t(()=>e(o).label)??""};`),s(u,`color: ${e(o),t(()=>e(o).text)??""};`),jt(u,"title",(e(Se),t(()=>e(Se).anotacion))),y(Y,Be)},[()=>(e(Se),t(()=>U(e(Se).fecha))),()=>(e(Se),t(()=>ce(e(Se).anotacion,150)))]),b(jr,$r)}),S(()=>{s(Ut,`border-color: ${e(o),t(()=>e(o).cardBorder)??""};`),s(ar,`background-color: ${e(o),t(()=>e(o).cardBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""};`),s(He,`color: ${e(o),t(()=>e(o).text)??""};`),s(gt,`color: ${e(o),t(()=>e(o).text)??""};`),s(ht,`color: ${e(o),t(()=>e(o).text)??""};`),s(zt,`color: ${e(o),t(()=>e(o).text)??""};`),s(sr,`color: ${e(o),t(()=>e(o).text)??""};`),s(Hr,`color: ${e(o),t(()=>e(o).text)??""};`),s(Or,`color: ${e(o),t(()=>e(o).text)??""};`)}),b(Ce,ut)};re(wt,Ce=>{e(R),t(()=>e(R).length===0)?Ce(or):Ce(Yt,!1)})}S(()=>{s(E,`border-color: ${e(o),t(()=>e(o).cardBorder)??""};`),s(V,`color: ${e(o),t(()=>e(o).text)??""};`),s(je,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),s(L,`color: ${e(o),t(()=>e(o).text)??""};`),s(ye,`color: ${e(o),t(()=>e(o).text)??""};`),s(xt,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),s(me,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),s(P,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),s(K,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),s(xe,`border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),s(I,`color: ${e(o),t(()=>e(o).label)??""};`),s(N,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),s(Re,`color: ${e(o),t(()=>e(o).label)??""};`),y(Zt,`Materia ${e(l),t(()=>e(l).docente?"(del docente)":"")??""}`),s(pr,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),y(Qt,(e(l),t(()=>e(l).docente?"Todas las materias del docente":"Todas las materias"))),s(Pt,`color: ${e(o),t(()=>e(o).label)??""};`),y(Ht,`Grado ${e(l),t(()=>e(l).docente||e(l).materia?"(filtrado)":"")??""}`),s(Rt,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),y(Gt,(e(l),t(()=>e(l).docente||e(l).materia?"Todos los grados filtrados":"Todos los grados"))),s(wr,`color: ${e(o),t(()=>e(o).label)??""};`),s(hr,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),s(kr,`color: ${e(o),t(()=>e(o).label)??""};`),_r.disabled=!e(q),s(_r,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),s(M,`color: ${e(o),t(()=>e(o).label)??""};`),pe.disabled=!e(q),s(pe,`background-color: ${e(o),t(()=>e(o).inputBg)??""}; border-color: ${e(o),t(()=>e(o).border)??""}; color: ${e(o),t(()=>e(o).text)??""};`),s(bt,`color: ${e(o),t(()=>e(o).label)??""};`),y(Ue,(e(R),t(()=>e(R).length)))}),G("click",je,Q),Do(Ie,()=>e(q),Ce=>d(q,Ce)),G("click",xt,()=>j("hoy")),G("click",me,()=>j("semana")),G("click",P,()=>j("mes")),G("click",K,()=>j("mes_actual")),G("click",xe,()=>j("trimestre")),pt(N,()=>e(l).docente,Ce=>(Fe(l,e(l).docente=Ce),qe(()=>{e(o),e(x),e(v),e(g)}))),pt(pr,()=>e(l).materia,Ce=>(Fe(l,e(l).materia=Ce),qe(()=>{e(o),e(x),e(v),e(g)}))),pt(Rt,()=>e(l).grado,Ce=>(Fe(l,e(l).grado=Ce),qe(()=>{e(o),e(x),e(v),e(g)}))),zr(hr,()=>e(l).anotacion,Ce=>(Fe(l,e(l).anotacion=Ce),qe(()=>{e(o),e(x),e(v),e(g)}))),zr(_r,()=>e(l).fechaInicio,Ce=>(Fe(l,e(l).fechaInicio=Ce),qe(()=>{e(o),e(x),e(v),e(g)}))),zr(pe,()=>e(l).fechaFin,Ce=>(Fe(l,e(l).fechaFin=Ce),qe(()=>{e(o),e(x),e(v),e(g)}))),b(D,p)};re(nt,D=>{e(H)?D(Je):D(rt,!1)})}S(()=>{s(Qe,`background-color: ${e(o),t(()=>e(o).cardBg)??""};`),s($,`border-color: ${e(o),t(()=>e(o).cardBorder)??""};`),jt(te,"src",ao),s(se,`color: ${e(o),t(()=>e(o).text)??""};`),s(Xe,`color: ${e(o),t(()=>e(o).label)??""};`),W.disabled=(e(R),t(()=>e(R).length===0)),s(fe,`color: ${e(o),t(()=>e(o).text)??""};`)}),G("click",W,B),G("click",fe,function(...D){be()?.apply(this,D)}),G("click",$e,no(function(...D){be()?.apply(this,D)})),G("keydown",$e,D=>{(D.key==="Enter"||D.key===" ")&&be()()}),b(J,$e),Tr()}var gl=k("<option> </option>"),pl=k("<option> </option>"),ul=k("<option> </option>"),bl=Et('<svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Cargando...',1),fl=Et('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> Aplicar Filtros',1),xl=k('<div class="text-sm opacity-75"> </div>'),hl=k('<div class="flex items-center justify-center py-12"><!></div>'),ml=k('<div class="text-center py-12"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v2a2 2 0 002 2h6a2 2 0 002-2v-2M9 17H5a2 2 0 01-2-2v-6a2 2 0 012-2h4M9 7V5a2 2 0 012-2h6a2 2 0 012 2v2M9 7h10a2 2 0 012 2v6a2 2 0 01-2 2H9M9 7V17m0 0h10"></path></svg> <p class="text-lg font-medium mb-2">No hay datos disponibles</p> <p class="text-sm"> </p></div>'),_l=k('<tr class="border-t transition-colors hover:bg-gray-50 dark:hover:bg-gray-800"><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"><div class="truncate"> </div></td><td class="px-4 py-3 text-sm"><div class="truncate"> </div></td></tr>'),yl=k('<tr class="border-t-2 font-bold bg-gray-100 dark:bg-gray-800"><td class="px-4 py-3 text-sm font-bold">TOTAL</td><td class="px-4 py-3 text-sm font-bold text-center"> </td><td class="px-4 py-3 text-sm font-bold text-center"></td><td class="px-4 py-3 text-sm font-bold text-center"> </td></tr>'),wl=k('<div class="overflow-x-auto rounded-lg border"><table class="w-full"><thead><tr><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Fecha</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Horas</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Asignatura</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Anotaci√≥n</th></tr></thead><tbody><!><!></tbody></table></div>'),kl=k('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-2xl" role="document"><div class="flex items-center justify-between p-6 border-b"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v2a2 2 0 002 2h6a2 2 0 002-2v-2M9 17H5a2 2 0 01-2-2v-6a2 2 0 012-2h4M9 7V5a2 2 0 012-2h6a2 2 0 012 2v2M9 7h10a2 2 0 012 2v6a2 2 0 01-2 2H9M9 7V17m0 0h10"></path></svg></div> <div><h2 id="modal-title" class="text-xl font-bold">Generador de Reportes PDF</h2> <p class="text-sm opacity-75">Filtre y genere reportes de anotaciones</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar ventana de reportes" title="Cerrar"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 140px);"><div class="mb-6 p-4 rounded-xl border"><h3 class="text-lg font-semibold mb-4">Filtros</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="space-y-2"><label for="docente-filter" class="block text-sm font-medium">Docente</label> <select id="docente-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los docentes</option><!></select></div> <div class="space-y-2"><label for="materia-filter" class="block text-sm font-medium">Asignatura</label> <select id="materia-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todas las asignaturas</option><!></select></div> <div class="space-y-2"><label for="grado-filter" class="block text-sm font-medium">Grado</label> <select id="grado-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los grados</option><!></select></div></div> <div class="flex gap-3 mt-4"><button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2"><!></button> <button class="px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> Limpiar</button> <button class="ml-auto px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Generar PDF</button></div></div> <div class="mb-4"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold"> </h3> <!></div></div> <!></div></div></div>');function $l(J,A){Mr(A,!1);const v=h(),Te=h(),g=h();let C=null,o=null,be=Tt(A,"onClose",8),i=Tt(A,"initialDocente",8,""),c=h([]),m=h([]),le=h([]),ge=[],H=h([]),q=h(!1);const R=async()=>{if(!C||!o){const[n,w]=await Promise.all([io(()=>import("./pdf-CBBHH09D.js").then(I=>I.j),[]),io(()=>import("./pdf-CBBHH09D.js").then(I=>I.b),[])]);C=n.default,o=w.default}};let l=h(JSON.parse(localStorage.getItem("docenteMaterias")||"{}")),O=h(""),j=h(""),X=h("");Ar(()=>{i()&&d(O,i())}),Ar(async()=>{console.log("üöÄ ReportGenerator montado"),await F()});const F=async()=>{try{const[n,w,I]=await Promise.all([Xr(),eo(),to()]);d(c,n),d(m,w),d(le,I),d(l,JSON.parse(localStorage.getItem("docenteMaterias")||"{}"))}catch(n){console.error("Error cargando datos iniciales:",n)}},x=async()=>{d(q,!0);try{const n={spreadsheetId:ho,worksheetTitle:Io};e(O)&&(n.docente=e(O)),e(j)&&(n.materia=e(j)),e(X)&&(n.grado=e(X)),console.log("üîç Enviando payload a getAnotador:",n);const w=await Ro(n);console.log("üìä Respuesta de getAnotador:",w);let I=w;if(w&&typeof w=="object"&&(w.data?I=w.data:w.records?I=w.records:Array.isArray(w)&&(I=w)),ge=Array.isArray(I)?I:[],console.log("‚úÖ Datos procesados:",ge.length,"registros"),console.log("üîç Keys del primer registro:",ge[0]?Object.keys(ge[0]):"No hay registros"),ge.length>0&&ge[0].values){console.log("üîÑ Transformando datos desde formato .values");const N=["Marca Temporal","Fecha","Docente","Asignatura","Grado","Horas","Anotaci√≥n"];ge=ge.map(Me=>{const Ge={"Marca Temporal":"",Fecha:"",Docente:"",Asignatura:"",Grado:"",Horas:"",Anotaci√≥n:""};return N.forEach((ot,Re)=>{Ge[ot]=Me.values?.[Re]||""}),Ge}),console.log("üìä Datos transformados:",ge.length,"registros")}ae()}catch(n){if(console.error("‚ùå Error cargando datos del anotador:",n),n instanceof Error&&console.error("üìã Error details:",n.message),n&&typeof n=="object"&&"response"in n){const w=n.response;w&&(console.error("üåê Response status:",w.status),console.error("üåê Response data:",w.data))}ge=[],d(H,[])}finally{d(q,!1)}},ae=()=>{if(console.log("üîç Aplicando filtros locales:",{totalRegistros:ge.length,isArray:Array.isArray(ge),docente:e(O),materia:e(j),grado:e(X)}),!Array.isArray(ge)){console.error("‚ùå anotadorData no es un array:",typeof ge,ge),d(H,[]);return}d(H,ge.filter(n=>{if(!n||typeof n!="object")return console.log("‚ö†Ô∏è Registro inv√°lido:",n),!1;const w=!e(O)||n.Docente===e(O),I=!e(j)||n.Asignatura===e(j),N=!e(X)||n.Grado===e(X);return!w&&e(O)&&console.log("‚ùå No coincide docente:",{expected:e(O),actual:n.Docente}),!I&&e(j)&&console.log("‚ùå No coincide materia:",{expected:e(j),actual:n.Asignatura}),!N&&e(X)&&console.log("‚ùå No coincide grado:",{expected:e(X),actual:n.Grado}),w&&I&&N})),console.log("‚úÖ Registros filtrados:",e(H).length)},De=()=>{x()},Ye=()=>{d(O,""),d(j,""),d(X,""),ge=[],d(H,[])},tt=async()=>{if(await R(),e(H).length===0){alert("No hay datos para generar el PDF");return}const n=new C({format:"letter"}),w="Anotador de Clases",I=[];e(O)&&I.push(`Docente: ${e(O)}`),e(j)&&I.push(`Asignatura: ${e(j)}`),e(X)&&I.push(`Grado: ${e(X)}`);let N=20;try{console.log("üñºÔ∏è Intentando agregar logo EIE al PDF..."),n.setTextColor(99,102,241),n.setFontSize(28),n.setFont("helvetica","bold"),n.text("EIE",n.internal.pageSize.getWidth()/2,N,{align:"center"}),N+=15,console.log("‚úÖ Logo EIE (texto) agregado correctamente")}catch(Re){console.log("‚ùå Error con logo EIE, usando fallback:",Re),n.setTextColor(99,102,241),n.setFontSize(24),n.text("EIE",n.internal.pageSize.getWidth()/2,N,{align:"center"}),N+=15}n.setTextColor(0,0,0),n.setFontSize(18),n.setFont("helvetica","bold"),n.text(w,n.internal.pageSize.getWidth()/2,N,{align:"center"}),N+=12,n.setTextColor(0,0,0),n.setFontSize(12),n.setFont("helvetica","normal"),n.text("Instituci√≥n Educativa Instituto Gu√°tica",n.internal.pageSize.getWidth()/2,N,{align:"center"}),N+=10,n.setTextColor(60,60,60),n.setFontSize(10),n.setFont("helvetica","normal"),n.text(`Fecha de generaci√≥n: ${new Date().toLocaleDateString()}`,n.internal.pageSize.getWidth()/2,N,{align:"center"}),N+=15,n.setDrawColor(200,200,200),n.setLineWidth(1),n.line(20,N,n.internal.pageSize.getWidth()-20,N),N+=15,I.length>0&&(n.setTextColor(80,80,80),n.setFontSize(9),n.setFont("helvetica","normal"),I.forEach(Re=>{n.text(Re,20,N,{align:"left"}),N+=6}),N+=10);const Me=e(H).map(Re=>[Re.Fecha||"",Re.Horas||"",Re.Asignatura||"",Re.Anotaci√≥n||""]),Ge=["TOTAL",e(v).toFixed(1),"",""];Me.push(Ge),console.log("üìä Generando PDF con:",{totalHoras:e(v),registros:e(H).length,filasTabla:Me.length}),o(n,{head:[["Fecha","Horas","Asignatura","Anotaci√≥n"]],body:Me,startY:N,styles:{fontSize:8,cellPadding:2,cellWidth:"wrap",valign:"top",overflow:"linebreak"},headStyles:{fillColor:[99,102,241],textColor:255,fontSize:9,fontStyle:"bold",halign:"center"},bodyStyles:{fillColor:[255,255,255],textColor:[0,0,0]},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:{0:{cellWidth:30,minCellHeight:8,halign:"center"},1:{cellWidth:20,minCellHeight:8,halign:"center"},2:{cellWidth:45,minCellHeight:8},3:{cellWidth:"auto",minCellHeight:12}},margin:{top:15,right:15,bottom:15,left:15},tableWidth:"auto",didParseCell:Re=>{Re.row.index===Me.length-1&&(Re.cell.styles.fillColor=[240,240,240],Re.cell.styles.fontStyle="bold",Re.cell.styles.textColor=[0,0,0],Re.column.index===0&&(Re.cell.styles.halign="center",Re.cell.styles.fillColor=[230,230,230]),Re.column.index===1&&(Re.cell.styles.halign="center",Re.cell.styles.fillColor=[220,220,220]),Re.column.index===2&&(Re.cell.styles.halign="center",Re.cell.styles.fillColor=[220,220,220]),Re.column.index===3&&(Re.cell.styles.halign="center",Re.cell.styles.fillColor=[220,220,220]))}});const ot=`reporte_anotaciones_${e(O)||"todos"}_${e(j)||"todas"}_${e(X)||"todos"}_${new Date().toISOString().split("T")[0]}.pdf`;n.save(ot),console.log("üíæ PDF guardado exitosamente:",ot)};Ae(()=>e(H),()=>{d(v,e(H).reduce((n,w)=>{const I=parseFloat(w.Horas||"0");return n+(isNaN(I)?0:I)},0))}),Ae(()=>(e(O),e(m),e(l)),()=>{d(Te,e(O)?[...e(m)].sort((n,w)=>{const I=e(l)[e(O)]?.includes(n.materia),N=e(l)[e(O)]?.includes(w.materia);return I&&!N?-1:!I&&N?1:n.materia.localeCompare(w.materia)}):e(m))}),Ae(()=>{},()=>{d(g,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Lr(),Pr();var Q=kl(),B=r(Q),U=r(B),ce=a(r(U),2),$e=a(U,2),Qe=r($e),$=a(r(Qe),2),Z=r($),te=r(Z),ie=a(te,2),se=r(ie);se.value=se.__value="";var Xe=a(se);ke(Xe,1,()=>e(c),Ee,(n,w)=>{var I=gl(),N=r(I),Me={};S(()=>{y(N,e(w)),Me!==(Me=e(w))&&(I.value=(I.__value=e(w))??"")}),b(n,I)});var Oe=a(Z,2),W=r(Oe),fe=a(W,2),Le=r(fe);Le.value=Le.__value="";var nt=a(Le);ke(nt,1,()=>e(Te),Ee,(n,w)=>{const I=Bt(()=>(e(O),e(l),e(w),t(()=>e(O)&&e(l)[e(O)]?.includes(e(w).materia))));var N=pl(),Me=r(N),Ge={};S(()=>{s(N,e(I)?"color: #6366f1; font-weight: 600;":""),y(Me,`${e(I)?"‚≠ê ":""}${e(w),t(()=>e(w).materia)??""}`),Ge!==(Ge=(e(w),t(()=>e(w).materia)))&&(N.value=(N.__value=(e(w),t(()=>e(w).materia)))??"")}),b(n,N)});var Je=a(Oe,2),rt=r(Je),D=a(rt,2),p=r(D);p.value=p.__value="";var E=a(p);ke(E,1,()=>(e(le),t(()=>[...new Set(e(le).map(n=>n.grado.toString()))])),Ee,(n,w)=>{var I=ul(),N=r(I),Me={};S(Ge=>{y(N,Ge),Me!==(Me=e(w))&&(I.value=(I.__value=e(w))??"")},[()=>(e(w),t(()=>e(w).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),b(n,I)});var z=a($,2),V=r(z),ee=r(V);{var ve=n=>{var w=bl();b(n,w)},je=n=>{var w=fl();b(n,w)};re(ee,n=>{e(q)?n(ve):n(je,!1)})}var oe=a(V,2),L=a(oe,2),ne=a(Qe,2),Ie=r(ne),ye=r(Ie),lt=r(ye),xt=a(ye,2);{var me=n=>{var w=xl(),I=r(w);S(()=>y(I,`${(e(O)&&`Docente: ${e(O)}`)??""}
              ${(e(j)&&` | Asignatura: ${e(j)}`)??""}
              ${(e(X)&&` | Grado: ${e(X)}`)??""}`)),b(n,w)};re(xt,n=>{e(H),t(()=>e(H).length>0)&&n(me)})}var P=a(ne,2);{var K=n=>{var w=hl(),I=r(w);vo(I,{message:"Cargando datos del anotador..."}),b(n,w)},xe=n=>{var w=ml(),I=a(r(w),4),N=r(I);S(()=>{s(w,`color: ${e(g),t(()=>e(g).placeholder)??""};`),y(N,e(O)||e(j)||e(X)?"No se encontraron registros con los filtros seleccionados. Intente con otros criterios.":"Seleccione filtros y haga clic en 'Aplicar Filtros' para cargar los datos.")}),b(n,w)},We=n=>{var w=wl(),I=r(w),N=r(I),Me=r(N),Ge=r(Me),ot=a(Ge),Re=a(ot),Zt=a(Re),pr=a(N),Jt=r(pr);ke(Jt,1,()=>e(H),Ee,(Vt,dt)=>{var et=_l(),Ot=r(et),Pt=r(Ot),Ht=a(Ot),Rt=r(Ht),Ft=a(Ht),Gt=r(Ft),cr=r(Gt),ur=a(Ft),Xt=r(ur),br=r(Xt);S(()=>{s(et,`border-color: ${e(g),t(()=>e(g).border)??""};`),y(Pt,(e(dt),t(()=>e(dt).Fecha||"-"))),y(Rt,(e(dt),t(()=>e(dt).Horas||"-"))),jt(Gt,"title",(e(dt),t(()=>e(dt).Asignatura))),y(cr,(e(dt),t(()=>e(dt).Asignatura||"-"))),jt(Xt,"title",(e(dt),t(()=>e(dt).Anotaci√≥n))),y(br,(e(dt),t(()=>e(dt).Anotaci√≥n||"-")))}),b(Vt,et)});var Qt=a(Jt);{var xr=Vt=>{var dt=yl(),et=a(r(dt)),Ot=r(et),Pt=a(et,2),Ht=r(Pt);S(Rt=>{s(dt,`border-color: ${e(g),t(()=>e(g).border)??""}; border-top-width: 2px;`),y(Ot,Rt),y(Ht,`${e(H),t(()=>e(H).length)??""} registros`)},[()=>(e(v),t(()=>e(v).toFixed(1)))]),b(Vt,dt)};re(Qt,Vt=>{e(H),t(()=>e(H).length>0)&&Vt(xr)})}S(()=>{s(w,`border-color: ${e(g),t(()=>e(g).border)??""};`),s(N,`background-color: ${e(g),t(()=>e(g).inputBg)??""};`),s(Ge,`color: ${e(g),t(()=>e(g).label)??""};`),s(ot,`color: ${e(g),t(()=>e(g).label)??""};`),s(Re,`color: ${e(g),t(()=>e(g).label)??""};`),s(Zt,`color: ${e(g),t(()=>e(g).label)??""};`)}),b(n,w)};re(P,n=>{e(q)?n(K):(e(H),t(()=>e(H).length===0)?n(xe,1):n(We,!1))})}S(()=>{s(B,`background-color: ${e(g),t(()=>e(g).cardBg)??""}; color: ${e(g),t(()=>e(g).text)??""};`),s(U,`border-color: ${e(g),t(()=>e(g).cardBorder)??""};`),s(Qe,`background-color: ${e(g),t(()=>e(g).inputBg)??""}; border-color: ${e(g),t(()=>e(g).border)??""};`),s(te,`color: ${e(g),t(()=>e(g).label)??""};`),s(ie,`background-color: ${e(g),t(()=>e(g).cardBg)??""}; border-color: ${e(g),t(()=>e(g).border)??""}; color: ${e(g),t(()=>e(g).text)??""};`),s(W,`color: ${e(g),t(()=>e(g).label)??""};`),s(fe,`background-color: ${e(g),t(()=>e(g).cardBg)??""}; border-color: ${e(g),t(()=>e(g).border)??""}; color: ${e(g),t(()=>e(g).text)??""};`),s(rt,`color: ${e(g),t(()=>e(g).label)??""};`),s(D,`background-color: ${e(g),t(()=>e(g).cardBg)??""}; border-color: ${e(g),t(()=>e(g).border)??""}; color: ${e(g),t(()=>e(g).text)??""};`),V.disabled=e(q),s(oe,`color: ${e(g),t(()=>e(g).text)??""};`),L.disabled=(e(H),t(()=>e(H).length===0)),y(lt,`Resultados (${e(H),t(()=>e(H).length)??""} registros)`)}),G("click",ce,function(...n){be()?.apply(this,n)}),pt(ie,()=>e(O),n=>d(O,n)),pt(fe,()=>e(j),n=>d(j,n)),pt(D,()=>e(X),n=>d(X,n)),G("click",V,De),G("click",oe,Ye),G("click",L,tt),G("click",Q,no(function(...n){be()?.apply(this,n)})),G("keydown",Q,n=>n.key==="Escape"&&be()()),b(J,Q),Tr()}var Cl=k('<div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping svelte-1p7gzb0"></div> <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full svelte-1p7gzb0"></div>',1),Sl=Et('<svg class="w-5 h-5 text-indigo-500 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1p7gzb0"></path></svg>'),Al=Et('<svg class="w-5 h-5 text-amber-500 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="svelte-1p7gzb0"></path></svg>'),Dl=Et('<svg class="w-5 h-5 text-indigo-400 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="svelte-1p7gzb0"></path></svg>'),El=k('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-1p7gzb0"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0 svelte-1p7gzb0"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-1p7gzb0"></path></svg></div> <div class="flex-1 pr-6 pt-0.5 svelte-1p7gzb0"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100 svelte-1p7gzb0">Informaci√≥n</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200 svelte-1p7gzb0"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors svelte-1p7gzb0" aria-label="Cerrar alerta"><svg class="w-4 h-4 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-1p7gzb0"></path></svg></button></div>'),Il=k('<option class="svelte-1p7gzb0"> </option>'),Bl=k('<option class="svelte-1p7gzb0"> </option>'),Fl=k('<option class="svelte-1p7gzb0"> </option>'),zl=k('<option class="svelte-1p7gzb0"> </option>'),Ml=k('<button class="absolute right-4 top-1/2 transform -translate-y-1/2 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors svelte-1p7gzb0" title="Limpiar b√∫squeda"><svg class="w-4 h-4 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-1p7gzb0"></path></svg></button>'),Tl=k('<div class="text-center py-8 svelte-1p7gzb0"><svg class="w-12 h-12 mx-auto mb-4 opacity-50 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" class="svelte-1p7gzb0"></path></svg> <p class="text-sm svelte-1p7gzb0"> </p></div>'),Ol=k('<div class="flex items-center justify-center py-12 svelte-1p7gzb0"><!></div>'),Nl=k('<span class="ml-2 inline-block animate-bounce svelte-1p7gzb0">‚ú®</span>'),jl=k('<span class="text-xs font-medium svelte-1p7gzb0"> </span>'),Rl=k('<div class="h-px flex-1 transition-all duration-300 group-hover:opacity-50 svelte-1p7gzb0"></div>'),Ll=Et('<svg class="w-3 h-3 text-white svelte-1p7gzb0" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" class="svelte-1p7gzb0"></path></svg>'),Pl=k('<div class="relative group flex flex-col p-0 rounded-2xl border transition-all duration-200 shadow-sm hover:shadow-md svelte-1p7gzb0"><div class="flex items-start gap-1 p-4 svelte-1p7gzb0"><label class="flex-shrink-0 cursor-pointer p-1 mt-1 svelte-1p7gzb0"><input type="checkbox" class="hidden svelte-1p7gzb0"/> <div class="w-5 h-5 rounded border flex items-center justify-center transition-colors cursor-pointer svelte-1p7gzb0"><!></div></label> <textarea rows="8" class="w-full bg-transparent border-none focus:ring-0 text-base font-medium leading-relaxed resize-none p-1 transition-colors min-h-[180px] pb-6 svelte-1p7gzb0" placeholder="Escriba aqu√≠..."></textarea></div></div>'),Hl=k('<div class="grid grid-cols-1 md:grid-cols-2 gap-4 svelte-1p7gzb0"></div>'),Gl=k('<div class="space-y-4 svelte-1p7gzb0"><button type="button" class="flex items-center gap-3 w-full text-left cursor-pointer group focus:outline-none svelte-1p7gzb0"><div class="flex items-center gap-3 flex-1 svelte-1p7gzb0"><h3> <!></h3> <!></div> <!> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" class="svelte-1p7gzb0"></path></svg></button> <!></div>'),Ul=Et('<svg class="animate-spin h-7 w-7 text-white svelte-1p7gzb0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25 svelte-1p7gzb0" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75 svelte-1p7gzb0" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Vl=Et('<svg class="w-8 h-8 transform rotate-90 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" class="svelte-1p7gzb0"></path></svg>'),Yl=k('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200 svelte-1p7gzb0"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40 svelte-1p7gzb0"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8 svelte-1p7gzb0"><div class="flex items-center gap-4 lg:flex-col svelte-1p7gzb0"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto svelte-1p7gzb0"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center svelte-1p7gzb0">Anotador de Clase</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full svelte-1p7gzb0"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Abrir hoja de c√°lculo"><svg class="w-5 h-5 svelte-1p7gzb0" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Hoja de C√°lculo</span></button> <button id="filter-button-target" class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Abrir filtros de anotaciones"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Filtros</span> <!></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Generar reportes PDF"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Reportes PDF</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 svelte-1p7gzb0" title="Volver al Dashboard"><svg class="w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" class="svelte-1p7gzb0"></path></svg> <span class="text-sm font-medium hidden lg:inline svelte-1p7gzb0">Dashboard</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full svelte-1p7gzb0" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize svelte-1p7gzb0"> </span></button></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto pb-32 svelte-1p7gzb0"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border svelte-1p7gzb0"><!> <!> <form novalidate="" class="space-y-6 svelte-1p7gzb0"><div class="grid grid-cols-1 md:grid-cols-3 gap-6 svelte-1p7gzb0"><div class="space-y-2 svelte-1p7gzb0"><label for="fecha" class="block text-sm font-medium svelte-1p7gzb0">Fecha</label> <input type="date" id="fecha" required=""/></div> <div class="space-y-2 svelte-1p7gzb0"><label for="docente" class="block text-sm font-medium svelte-1p7gzb0">Docente</label> <select id="docente" required=""><option class="svelte-1p7gzb0"> </option><!></select></div> <div class="space-y-2 svelte-1p7gzb0"><label for="materia" class="block text-sm font-medium svelte-1p7gzb0">Asignatura</label> <select id="materia" required=""><option class="svelte-1p7gzb0"> </option><!></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-1p7gzb0"><div class="space-y-2 svelte-1p7gzb0"><label for="grado" class="block text-sm font-medium svelte-1p7gzb0">Grado</label> <select id="grado" required=""><option class="svelte-1p7gzb0"> </option><!></select></div> <div class="space-y-2 svelte-1p7gzb0"><label for="horas" class="block text-sm font-medium svelte-1p7gzb0">Horas</label> <select id="horas" required=""><option class="svelte-1p7gzb0">Seleccione horas</option><!></select></div></div> <div class="space-y-2 svelte-1p7gzb0"><label for="search" class="block text-sm font-medium svelte-1p7gzb0">Buscar anotaciones</label> <div class="relative svelte-1p7gzb0"><input type="text" id="search" placeholder="Buscar por palabra clave o categor√≠a..." class="w-full px-4 py-3 pl-12 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none svelte-1p7gzb0"/> <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 svelte-1p7gzb0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" class="svelte-1p7gzb0"></path></svg> <!></div> <!></div> <div class="space-y-8 svelte-1p7gzb0"><!></div> <div class="space-y-2 svelte-1p7gzb0"><label for="observacion" class="block text-sm font-medium svelte-1p7gzb0">Observaci√≥n</label> <textarea id="observacion" rows="3" class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none resize-none svelte-1p7gzb0" placeholder="Observaciones adicionales (opcional)..."></textarea></div> <div class="fixed bottom-8 right-8 z-50 svelte-1p7gzb0"><button type="submit" class="w-16 h-16 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-400 dark:disabled:bg-slate-700 disabled:cursor-not-allowed disabled:scale-100 text-white rounded-full shadow-2xl transition-all duration-300 transform hover:scale-110 active:scale-95 backdrop-blur-sm bg-opacity-95 flex items-center justify-center overflow-hidden border border-white/20 svelte-1p7gzb0" aria-label="Guardar Anotaci√≥n"><!></button></div></form></div></main></div> <!> <!>',1);function Wl(J,A){Mr(A,!1);const v=()=>_o(Qr,"$theme",Te),[Te,g]=mo(),C=h(),o=h(),be=h(),i=h(),c=h(),m=h(),le=h();let ge=Tt(A,"onBack",8),H=h([]),q=h([]),R=h([]),l=h(!1),O=h(!1),j=h(!1),X=h(!1),F=h({}),x=h({}),ae=h(""),De=h({}),Ye=h([]),tt=h(""),Q=h("");const B=_=>{Fe(x,e(x)[_]=!e(x)[_]),d(x,e(x))},U=(_,T)=>{const de=e(F)[_].indexOf(T);if(de!==-1){const he={...T,selected:!T.selected},at=[...e(F)[_].slice(0,de),he,...e(F)[_].slice(de+1)];d(F,{...e(F),[_]:at}),console.log("üîÑ Anotaci√≥n toggle:",{categoria:_,index:de,texto:he.text,nuevoEstado:he.selected,totalSeleccionadas:Object.values(e(F)).flat().filter(Ve=>Ve.selected).length})}},ce=_=>({"C√ÅTEDRA DE LA PAZ":"#8b5cf6","CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL":"#10b981","CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y":"#f59e0b","DIRECCI√ìN DE GRUPO":"#3b82f6","EDUCACI√ìN ART√çSTICA":"#f43f5e","EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES":"#ef4444","EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS":"#8b5cf6",EMPRENDIMIENTO:"#f97316",ESTAD√çSTICA:"#06b6d4","FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS":"#6366f1",F√çSICA:"#3b82f6",INGL√âS:"#14b8a6","LENGUA CASTELLANA":"#10b981",MATEM√ÅTICAS:"#3b82f6","PROYECTO Y EMPRENDIMIENTO":"#f97316",QU√çMICA:"#06b6d4","TECNOLOG√çA E INFORM√ÅTICA":"#6366f1","√âTICA PROFESIONAL":"#8b5cf6","Estrategias de Ense√±anza-Aprendizaje":"#6366f1","Evaluaci√≥n y Verificaci√≥n de Saberes":"#10b981","Enfoque STEM+ y Contexto Rural":"#f59e0b","Pr√°cticas de Laboratorio y Mantenimiento":"#f43f5e","Ciudadan√≠a Digital y √âtica":"#8b5cf6","Pensamiento Computacional y Programaci√≥n":"#06b6d4","Recursos Anal√≥gicos y Contingencias":"#f97316","Ofim√°tica y Competencias Productivas":"#14b8a6","Gesti√≥n Administrativa y Proyectos Transversales":"#3b82f6"})[_]||"#6366f1",$e={MATEM√ÅTICAS:"MATEM√ÅTICAS","LENGUA CASTELLANA":"LENGUA CASTELLANA",INGL√âS:"INGL√âS","CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL":"CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL","CIENCIAS NATURALES":"CIENCIAS NATURALES Y EDUCACI√ìN AMBIENTAL","CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y":"CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y","CIENCIAS SOCIALES":"CIENCIAS SOCIALES (HISTORIA, GEOGRAF√çA Y",F√çSICA:"F√çSICA",QU√çMICA:"QU√çMICA","EDUCACI√ìN ART√çSTICA":"EDUCACI√ìN ART√çSTICA","EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES":"EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES","EDUCACI√ìN F√çSICA":"EDUCACI√ìN F√çSICA, RECREACI√ìN Y DEPORTES","TECNOLOG√çA E INFORM√ÅTICA":"TECNOLOG√çA E INFORM√ÅTICA",TECNOLOG√çA:"TECNOLOG√çA E INFORM√ÅTICA",INFORM√ÅTICA:"TECNOLOG√çA E INFORM√ÅTICA",EMPRENDIMIENTO:"EMPRENDIMIENTO","FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS":"FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS",FILOSOF√çA:"FILOSOF√çA Y CIENCIAS SOCIALES (CIENCIAS",ESTAD√çSTICA:"ESTAD√çSTICA","EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS":"EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS",√âTICA:"EDUCACI√ìN RELIGIOSA, √âTICA Y V. HUMANOS","DIRECCI√ìN DE GRUPO":"DIRECCI√ìN DE GRUPO","PROYECTO Y EMPRENDIMIENTO":"PROYECTO Y EMPRENDIMIENTO",PROYECTO:"PROYECTO Y EMPRENDIMIENTO","C√ÅTEDRA DE LA PAZ":"C√ÅTEDRA DE LA PAZ","√âTICA PROFESIONAL":"√âTICA PROFESIONAL"},Qe=_=>{if(!e($).materia)return _;let T=$e[e($).materia.toUpperCase()]||$e[e($).materia]||"";if(!T){const de=e($).materia.toUpperCase();for(const[he,at]of Object.entries($e))if(he.includes(de)||de.includes(he)){T=at;break}}return console.log("Materia seleccionada:",e($).materia,"‚Üí Categor√≠a:",T),_.sort(([de],[he])=>de===T&&he!==T?-1:he===T&&de!==T?1:de.localeCompare(he))};let $=h({fecha:new Date().toISOString().split("T")[0],docente:localStorage.getItem("lastDocente")||"",materia:"",horas:"",grado:"",anotacion:"",observacion:""}),Z=h(JSON.parse(localStorage.getItem("docenteMaterias")||"{}"));const te=(_,T)=>{!_||!T||(e(Z)[_]||Fe(Z,e(Z)[_]=[]),e(Z)[_].includes(T)||(Fe(Z,e(Z)[_]=[...e(Z)[_],T]),localStorage.setItem("docenteMaterias",JSON.stringify(e(Z)))))},ie=_=>{const T=_.match(/-(\d+)$/);return T?T[1]:null};let se=h(localStorage.getItem("dismissedInfoAnotadorContent")!==$o);const Xe=()=>{d(se,!1),localStorage.setItem("dismissedInfoAnotadorContent",$o)};let Oe=h(!1),W=h(!1),fe=h(!1),Le=h(!1);const nt=()=>{d(fe,!0)},Je=()=>{d(fe,!1)},rt=()=>{d(Le,!0)},D=()=>{d(Le,!1)};let p=h(!0);const E="¬°Nueva funci√≥n de filtrado avanzado disponible!";function z(){return!0}const V=()=>{localStorage.setItem("dismissedFeatureAlertAnotador",new Date().toISOString()),d(p,!1)},ee=()=>{localStorage.setItem("dismissedFeatureAlertAnotador",new Date().toISOString()),nt()},ve=()=>`https://docs.google.com/spreadsheets/d/${ho}`,je=()=>{window.open(ve(),"_blank")},oe=()=>{Qr.update(_=>_==="light"?"dim":_==="dim"?"dark":"light")},L=async()=>{d(l,!0),d(O,!0),d(j,!0),d(X,!0);try{const[_,T,de,he]=await Promise.all([Xr(),eo(),to(),Aa()]);d(H,_),d(q,T),d(R,de);const at={},Ve={};for(const[At,Wt]of Object.entries(he))at[At]=Wt.map(f=>({text:f,selected:!1})),Ve[At]=!1;d(F,at),d(x,Ve)}catch(_){console.error("Error cargando datos iniciales:",_)}finally{d(l,!1),d(O,!1),d(j,!1),d(X,!1)}},ne=async _=>{if(_.preventDefault(),e(Oe))return;d(W,!0);const T=Object.values(e(F)).flat().filter(Ve=>Ve.selected).map(Ve=>Ve.text),de=T.join(" | "),he=[];if(e($).fecha||he.push({id:"fecha",label:"Fecha"}),e($).docente||he.push({id:"docente",label:"Docente"}),e($).materia||he.push({id:"materia",label:"Asignatura"}),e($).grado||he.push({id:"grado",label:"Grado"}),e($).horas||he.push({id:"horas",label:"Horas"}),T.length===0&&he.push({id:"search",label:"Anotaci√≥n(es)"}),he.length>0){await $t.fire({icon:"warning",title:"Campos requeridos",html:`Complete los siguientes campos:<br/><br/><strong>${he.map(At=>At.label).join("<br/>")}</strong>`,confirmButtonColor:"#6366f1"});const Ve=document.getElementById(he[0].id);Ve&&(Ve.scrollIntoView({behavior:"smooth",block:"center"}),Ve.focus());return}if(T.length===0){await $t.fire({icon:"warning",title:"Sin anotaciones",text:"Debe seleccionar al menos una anotaci√≥n",confirmButtonColor:"#6366f1"});return}if((await $t.fire({title:"¬øConfirmar Registro?",html:`
        <div class="text-left space-y-2 p-2 rounded-xl bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10" style="font-size: 0.9rem; line-height: 1.4;">
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Fecha:</strong> ${e($).fecha}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Docente:</strong> ${e($).docente}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Asignatura:</strong> ${e($).materia}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Grado:</strong> ${e($).grado}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Horas:</strong> ${e($).horas}</div>
          <div style="margin-top: 12px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 8px;">
            <strong style="color: #6366f1;">Anotaciones:</strong>
            <ul style="list-style-type: disc; padding-left: 20px; margin-top: 4px; font-size: 0.8rem; opacity: 0.8;">
              ${T.map(Ve=>`<li>${Ve}</li>`).join("")}
            </ul>
          </div>
          ${e($).observacion?`<div style="margin-top: 12px;"><strong style="color: #6366f1;">Observaci√≥n:</strong> <span style="font-size: 0.8rem;">${e($).observacion}</span></div>`:""}
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonText:"Si, de acuerdo",cancelButtonText:"No",confirmButtonColor:"#4f46e5",cancelButtonColor:"#64748b",reverseButtons:!0,background:v()==="light"?"#fff":"#1e293b",color:v()==="light"?"#1e293b":"#f1f5f9"})).isConfirmed){d(Oe,!0);try{const At=[[new Date().toLocaleString(),e($).fecha,e($).docente,e($).materia,e($).grado,e($).horas,de,e($).observacion]];await Da({spreadsheetId:ho,worksheetTitle:Io,datos:At}),te(e($).docente,e($).materia),await $t.fire({icon:"success",title:"¬°√âxito!",text:"Anotaci√≥n registrada exitosamente",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),d($,{fecha:new Date().toISOString().split("T")[0],docente:e($).docente,materia:e($).materia,grado:e($).grado,horas:"",anotacion:"",observacion:""});for(const Wt in e(F))Fe(F,e(F)[Wt]=e(F)[Wt].map(f=>({...f,selected:!1})));d(F,{...e(F)}),d(W,!1)}catch(Ve){console.error("Error enviando:",Ve),await $t.fire({icon:"error",title:"Error",text:"Error al registrar la anotaci√≥n",confirmButtonColor:"#ef4444"})}finally{d(Oe,!1)}}};Ar(()=>{L(),d(p,z())}),Ae(()=>(e($),e(Q)),()=>{if(e($).materia&&e($).materia!==e(Q)){d(Q,e($).materia);let _=$e[e($).materia.toUpperCase()]||$e[e($).materia]||"";if(!_){const T=e($).materia.toUpperCase();for(const[de,he]of Object.entries($e))if(de.includes(T)||T.includes(de)){_=he;break}}_&&(d(tt,_),console.log("‚ú® Categoria destacada:",_),setTimeout(()=>{d(tt,"")},3e3))}}),Ae(()=>(e(F),e(ae)),()=>{d(De,Object.entries(e(F)).reduce((_,[T,de])=>{if(!e(ae).trim())return _[T]=de,_;const he=e(ae).toLowerCase().trim(),at=de.filter(Ve=>Ve.text.toLowerCase().includes(he));return at.length>0&&(_[T]=at),_},{}))}),Ae(()=>(e(q),e($),e(F),e(De),e(Ye)),()=>{console.log("üîÑ Reactividad actualizada"),console.log("üìö Materias disponibles:",e(q).map(_=>_.materia)),console.log("‚úçÔ∏è Materia seleccionada:",e($).materia),console.log("üìä Categor√≠as disponibles:",Object.keys(e(F))),console.log("üîç Categor√≠as filtradas:",Object.keys(e(De))),d(Ye,Qe(Object.entries(e(De)))),console.log("üìã Entradas ordenadas:",e(Ye).map(([_])=>_))}),Ae(()=>e($),()=>{e($).docente&&localStorage.setItem("lastDocente",e($).docente)}),Ae(()=>(e($),e(q),e(Z)),()=>{d(C,e($).docente?[...e(q)].sort((_,T)=>{const de=e(Z)[e($).docente]?.includes(_.materia),he=e(Z)[e($).docente]?.includes(T.materia);return de&&!he?-1:!de&&he?1:_.materia.localeCompare(T.materia)}):e(q))}),Ae(()=>e($),()=>{d(o,ie(e($).docente))}),Ae(()=>(e(o),e(R)),()=>{d(be,e(o)?[...new Set(e(R).map(_=>_.grado.toString()))].filter(_=>_.startsWith(`${e(o)}-`)):[...new Set(e(R).map(_=>_.grado.toString()))].filter(_=>!_.includes("-")))}),Ae(()=>(e($),e(F)),()=>{d(i,(()=>{const _=[];return e($).fecha||_.push("fecha"),e($).docente||_.push("docente"),e($).materia||_.push("materia"),e($).grado||_.push("grado"),e($).horas||_.push("horas"),Object.values(e(F)).flat().some(de=>de.selected)||_.push("anotacion"),_})())}),Ae(()=>{},()=>{d(c,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Ae(()=>e(F),()=>{d(m,Object.values(e(F)).flat().some(_=>_.selected))}),Ae(()=>(e($),e(m)),()=>{d(le,e($).fecha&&e($).docente&&e($).materia&&e($).grado&&e($).horas&&e(m))}),Ae(()=>(e($),e(m),e(le),e(F)),()=>{console.log("üîç Validaci√≥n formulario:",{fecha:e($).fecha,docente:e($).docente,materia:e($).materia,grado:e($).grado,horas:e($).horas,hasSelectedAnotacion:e(m),isFormValid:e(le),totalAnotaciones:Object.values(e(F)).flat().length,selectedCount:Object.values(e(F)).flat().filter(_=>_.selected).length})}),Lr(),Pr();var Ie=Yl(),ye=rr(Ie),lt=r(ye),xt=r(lt),me=r(xt),P=r(me),K=a(P,2),xe=a(me,2),We=r(xe),n=a(We,2),w=a(r(n),4);{var I=_=>{var T=Cl();b(_,T)};re(w,_=>{e(p)&&_(I)})}var N=a(n,2),Me=a(N,2),Ge=a(Me,2),ot=r(Ge);{var Re=_=>{var T=Sl();b(_,T)},Zt=_=>{var T=Al();b(_,T)},pr=_=>{var T=Dl();b(_,T)};re(ot,_=>{v()==="dark"?_(Re):v()==="light"?_(Zt,1):_(pr,!1)})}var Jt=a(ot,2),Qt=r(Jt),xr=a(lt,2),Vt=r(xr),dt=r(Vt);{var et=_=>{var T=El(),de=a(r(T),2),he=a(r(de),2),at=r(he),Ve=a(de,2);S(()=>y(at,$o)),G("click",Ve,Xe),b(_,T)};re(dt,_=>{e(se)&&_(et)})}var Ot=a(dt,2);xo(Ot,{featureMessage:E,description:"Ahora puedes filtrar tus anotaciones de forma avanzada. ¬°Pru√©balo!",onTryNow:ee,onDismiss:V,targetSelector:"#filter-button-target",showPopup:!1,colorTheme:"purple"});var Pt=a(Ot,2),Ht=r(Pt),Rt=r(Ht),Ft=r(Rt),Gt=a(Ft,2),cr=a(Rt,2),ur=r(cr),Xt=a(ur,2),br=r(Xt),wr=r(br);br.value=br.__value="";var hr=a(br);ke(hr,1,()=>e(H),Ee,(_,T)=>{var de=Il(),he=r(de),at={};S(()=>{y(he,e(T)),at!==(at=e(T))&&(de.value=(de.__value=e(T))??"")}),b(_,de)});var Dr=a(cr,2),mr=r(Dr),kr=a(mr,2),_r=r(kr),Er=r(_r);_r.value=_r.__value="";var M=a(_r);ke(M,1,()=>e(C),Ee,(_,T)=>{const de=Bt(()=>(e(Z),e($),e(T),t(()=>e(Z)[e($).docente]?.includes(e(T).materia))));var he=Bl(),at=r(he),Ve={};S(()=>{s(he,e(de)?"color: #6366f1; font-weight: 600;":""),y(at,`${e(de)?"‚≠ê ":""}${e(T),t(()=>e(T).materia)??""}`),Ve!==(Ve=(e(T),t(()=>e(T).materia)))&&(he.value=(he.__value=(e(T),t(()=>e(T).materia)))??"")}),b(_,he)});var pe=a(Ht,2),_e=r(pe),Ke=r(_e),bt=a(Ke,2),vt=r(bt),Ue=r(vt);vt.value=vt.__value="";var wt=a(vt);ke(wt,1,()=>e(be),Ee,(_,T)=>{var de=Fl(),he=r(de),at={};S(Ve=>{y(he,Ve),at!==(at=e(T))&&(de.value=(de.__value=e(T))??"")},[()=>(e(T),t(()=>e(T).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),b(_,de)});var or=a(_e,2),Yt=r(or),Ce=a(Yt,2),ut=r(Ce);ut.value=ut.__value="";var kt=a(ut);ke(kt,0,()=>[1,2,3,4],Ee,(_,T)=>{var de=zl(),he=r(de),at={};S(Ve=>{y(he,`${T??""} ${T===1?"Hora":"Horas"}`),at!==(at=Ve)&&(de.value=(de.__value=Ve)??"")},[()=>t(()=>T.toString())]),b(_,de)});var Ut=a(pe,2),Ct=r(Ut),ar=a(Ct,2),we=r(ar),He=a(we,2),gt=a(He,2);{var ht=_=>{var T=Ml();S(()=>s(T,`color: ${e(c),t(()=>e(c).placeholder)??""};`)),G("click",T,()=>d(ae,"")),b(_,T)};re(gt,_=>{e(ae)&&_(ht)})}var zt=a(ar,2);{var sr=_=>{var T=Tl(),de=a(r(T),2),he=r(de);S(()=>{s(T,`color: ${e(c),t(()=>e(c).placeholder)??""};`),y(he,`No se encontraron anotaciones para "${e(ae)??""}"`)}),b(_,T)},Hr=So(()=>(e(ae),e(De),t(()=>e(ae)&&Object.keys(e(De)).length===0)));re(zt,_=>{e(Hr)&&_(sr)})}var Or=a(Ut,2),Nr=r(Or);{var Jr=_=>{var T=Ol(),de=r(T);vo(de,{message:"Cargando opciones de anotaci√≥n..."}),b(_,T)},Kr=_=>{var T=bo(),de=rr(T);ke(de,1,()=>e(Ye),Ee,(he,at)=>{var Ve=So(()=>No(e(at),2));let At=()=>e(Ve)[0],Wt=()=>e(Ve)[1];const f=Bt(()=>(At(),t(()=>ce(At())))),u=Bt(()=>(Wt(),t(()=>Wt().length)));var Y=Gl(),ue=r(Y),Pe=r(ue),ze=r(Pe),Be=r(ze),st=a(Be);{var it=mt=>{var Mt=Nl();b(mt,Mt)};re(st,mt=>{At()===e(tt)&&mt(it)})}var ct=a(ze,2);{var ft=mt=>{var Mt=jl(),dr=r(Mt);S(()=>{s(Mt,`color: ${e(f)??""};`),y(dr,`(${e(u)??""} resultado${e(u)!==1?"s":""})`)}),b(mt,Mt)};re(ct,mt=>{e(ae)&&mt(ft)})}var Kt=a(Pe,2);{var ir=mt=>{var Mt=Rl();S(()=>s(Mt,`background-color: ${e(f)??""}; opacity: 0.2;`)),b(mt,Mt)};re(Kt,mt=>{e(ae)||mt(ir)})}var Fr=a(Kt,2);let qt;var nr=a(ue,2);{var gr=mt=>{var Mt=Hl();ke(Mt,5,Wt,Ee,(dr,_t,er)=>{const yr=Bt(()=>(e(ae),e(_t),t(()=>e(ae)&&e(_t).text.toLowerCase().includes(e(ae).toLowerCase()))));var Nt=Pl(),Sr=r(Nt),tr=r(Sr),Lt=r(tr),It=a(Lt,2),fr=r(It);{var Zr=Yr=>{var go=Ll();b(Yr,go)};re(fr,Yr=>{e(_t),t(()=>e(_t).selected)&&Yr(Zr)})}var Vr=a(tr,2);S(()=>{s(Nt,`
                          background-color: ${e(_t),Ne(e(f)),Ne(e(yr)),e(c),t(()=>e(_t).selected?`${e(f)}10`:e(yr)?`${e(f)}05`:e(c).inputBg)??""};
                          border-color: ${e(_t),Ne(e(f)),Ne(e(yr)),e(c),t(()=>e(_t).selected?e(f):e(yr)?e(f):e(c).border)??""};
                        `),Eo(Lt,(e(_t),t(()=>e(_t).selected))),s(It,`
                              border-color: ${e(_t),Ne(e(f)),e(c),t(()=>e(_t).selected?e(f):e(c).border)??""};
                              background-color: ${e(_t),Ne(e(f)),t(()=>e(_t).selected?e(f):"transparent")??""};
                            `),s(Vr,`color: ${e(c),t(()=>e(c).text)??""};`)}),G("change",Lt,()=>U(At(),e(_t))),zr(Vr,()=>e(_t).text,Yr=>(e(_t).text=Yr,qe(()=>(Wt(),e(Ye))))),b(dr,Nt)}),po(3,Mt,()=>Oo),b(mt,Mt)};re(nr,mt=>{e(x),At(),t(()=>e(x)[At()])&&mt(gr)})}S(()=>{Ze(ze,1,`text-xs font-black uppercase tracking-widest px-3 py-1 rounded-full text-white flex-shrink-0 transition-all duration-300 group-hover:shadow-md ${At()===e(tt)?"animate-glow ring-4 ring-opacity-50":""}`,"svelte-1p7gzb0"),s(ze,`background-color: ${e(f)??""}; ${At()===e(tt)?`box-shadow: 0 0 25px ${e(f)}60, 0 0 50px ${e(f)}30; ring-color: ${e(f)}; border: 2px solid ${e(f)};`:""}`),y(Be,`${At()??""} `),qt=Ze(Fr,0,"w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0 svelte-1p7gzb0",null,qt,{"rotate-180":e(x)[At()]})}),G("click",ue,()=>B(At())),b(he,Y)}),b(_,T)};re(Nr,_=>{e(X)?_(Jr):_(Kr,!1)})}var jr=a(Or,2),Se=r(jr),lr=a(Se,2),$r=a(jr,2),Cr=r($r),Gr=r(Cr);{var Ir=_=>{var T=Ul();b(_,T)},Ur=_=>{var T=Vl();b(_,T)};re(Gr,_=>{e(Oe)?_(Ir):_(Ur,!1)})}var vr=a(ye,2);{var Wr=_=>{vl(_,{onClose:Je,get selectedDocente(){return e($),t(()=>e($).docente)}})};re(vr,_=>{e(fe)&&_(Wr)})}var Br=a(vr,2);{var qr=_=>{$l(_,{onClose:D,get initialDocente(){return e($),t(()=>e($).docente)}})};re(Br,_=>{e(Le)&&_(qr)})}S((_,T,de,he,at,Ve,At,Wt,f,u)=>{s(ye,`background-color: ${e(c),t(()=>e(c).bg)??""};`),s(lt,`background-color: ${e(c),t(()=>e(c).cardBg)??""}; border-color: ${e(c),t(()=>e(c).cardBorder)??""};`),jt(P,"src",ao),s(K,`color: ${e(c),t(()=>e(c).text)??""};`),s(We,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(n,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(N,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(Me,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(Ge,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),y(Qt,v()),s(Vt,`background-color: ${e(c),t(()=>e(c).cardBg)??""}; border-color: ${e(c),t(()=>e(c).cardBorder)??""};`),s(Ft,`color: ${e(c),t(()=>e(c).label)??""};`),Ze(Gt,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none ${_??""}`,"svelte-1p7gzb0"),s(Gt,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${T??""}; color: ${e(c),t(()=>e(c).text)??""}; color-scheme: ${v()==="light"?"light":"dark"};`),s(ur,`color: ${e(c),t(()=>e(c).label)??""};`),Ze(Xt,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${de??""}`,"svelte-1p7gzb0"),s(Xt,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${he??""}; color: ${e(c),t(()=>e(c).text)??""};`),y(wr,e(l)?"Cargando...":"Seleccione docente"),s(mr,`color: ${e(c),t(()=>e(c).label)??""};`),Ze(kr,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${at??""}`,"svelte-1p7gzb0"),s(kr,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${Ve??""}; color: ${e(c),t(()=>e(c).text)??""};`),y(Er,e(O)?"Cargando...":"Seleccione asignatura"),s(Ke,`color: ${e(c),t(()=>e(c).label)??""};`),Ze(bt,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${At??""}`,"svelte-1p7gzb0"),s(bt,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${Wt??""}; color: ${e(c),t(()=>e(c).text)??""};`),y(Ue,e(j)?"Cargando...":"Seleccione grado"),s(Yt,`color: ${e(c),t(()=>e(c).label)??""};`),Ze(Ce,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer ${f??""}`,"svelte-1p7gzb0"),s(Ce,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${u??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(Ct,`color: ${e(c),t(()=>e(c).label)??""};`),s(we,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),s(He,`color: ${e(c),t(()=>e(c).placeholder)??""};`),s(Se,`color: ${e(c),t(()=>e(c).label)??""};`),s(lr,`background-color: ${e(c),t(()=>e(c).inputBg)??""}; border-color: ${e(c),t(()=>e(c).border)??""}; color: ${e(c),t(()=>e(c).text)??""};`),Cr.disabled=e(Oe)},[()=>(e(W),e(i),t(()=>e(W)&&e(i).includes("fecha")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(W),e(i),e(c),t(()=>e(W)&&e(i).includes("fecha")?"#ef4444":e(c).border)),()=>(e(W),e(i),t(()=>e(W)&&e(i).includes("docente")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(W),e(i),e(c),t(()=>e(W)&&e(i).includes("docente")?"#ef4444":e(c).border)),()=>(e(W),e(i),t(()=>e(W)&&e(i).includes("materia")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(W),e(i),e(c),t(()=>e(W)&&e(i).includes("materia")?"#ef4444":e(c).border)),()=>(e(W),e(i),t(()=>e(W)&&e(i).includes("grado")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(W),e(i),e(c),t(()=>e(W)&&e(i).includes("grado")?"#ef4444":e(c).border)),()=>(e(W),e(i),t(()=>e(W)&&e(i).includes("horas")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(W),e(i),e(c),t(()=>e(W)&&e(i).includes("horas")?"#ef4444":e(c).border))]),G("click",We,je),G("click",n,nt),G("click",N,rt),G("click",Me,function(..._){ge()?.apply(this,_)}),G("click",Ge,oe),zr(Gt,()=>e($).fecha,_=>(Fe($,e($).fecha=_),qe(()=>{e(W),e(i),e(c),e(l),e(H),e(O),e(C),e(Z),e(j),e(be)}))),pt(Xt,()=>e($).docente,_=>(Fe($,e($).docente=_),qe(()=>{e(W),e(i),e(c),e(l),e(H),e(O),e(C),e(Z),e(j),e(be)}))),pt(kr,()=>e($).materia,_=>(Fe($,e($).materia=_),qe(()=>{e(W),e(i),e(c),e(l),e(H),e(O),e(C),e(Z),e(j),e(be)}))),pt(bt,()=>e($).grado,_=>(Fe($,e($).grado=_),qe(()=>{e(W),e(i),e(c),e(l),e(H),e(O),e(C),e(Z),e(j),e(be)}))),pt(Ce,()=>e($).horas,_=>(Fe($,e($).horas=_),qe(()=>{e(W),e(i),e(c),e(l),e(H),e(O),e(C),e(Z),e(j),e(be)}))),zr(we,()=>e(ae),_=>d(ae,_)),zr(lr,()=>e($).observacion,_=>(Fe($,e($).observacion=_),qe(()=>{e(W),e(i),e(c),e(l),e(H),e(O),e(C),e(Z),e(j),e(be)}))),G("submit",Pt,ne),b(J,Ie),Tr(),g()}var ql=k('<div class="flex items-center justify-center py-12"><!></div>'),Jl=Et('<svg class="w-3 h-3 text-white" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),Kl=k('<div class="relative group flex flex-col p-0 rounded-2xl border transition-all duration-200 shadow-sm hover:shadow-md"><div class="flex flex-col p-4 gap-3"><div class="flex items-start justify-between gap-2"><div class="flex items-center gap-2"><label class="flex-shrink-0 cursor-pointer"><input type="checkbox" class="hidden"/> <div class="w-5 h-5 rounded border flex items-center justify-center transition-colors"><!></div></label> <span class="font-bold text-sm leading-tight"> </span></div> <div class="flex gap-1.5 flex-shrink-0"><span class="text-[10px] font-bold px-1.5 py-0.5 rounded bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 opacity-60"> </span> <span class="text-[10px] font-bold px-1.5 py-0.5 rounded bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 opacity-60"> </span></div></div> <textarea rows="4" class="w-full bg-transparent border-none focus:ring-0 text-sm font-medium leading-relaxed resize-none p-0 transition-colors opacity-80" placeholder="Escriba aqu√≠..."></textarea></div></div>'),Zl=k('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>'),Ql=k('<div class="space-y-4"><button type="button" class="flex items-center gap-3 w-full text-left cursor-pointer group focus:outline-none"><h3 class="text-xs font-black uppercase tracking-widest px-3 py-1 rounded-full text-white flex-shrink-0 transition-all duration-300 group-hover:shadow-md"> </h3> <div class="h-px flex-1 transition-all duration-300 group-hover:opacity-50"></div> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>'),Xl=k('<div class="space-y-8"><!></div>');function ei(J,A){Mr(A,!1);const v=h();let Te=Tt(A,"selectedDiarioAnots",28,()=>[]),g=h({}),C=h({}),o=h(!1);const be=ea(),i=R=>{if(e(C)[R])Fe(C,e(C)[R]=!1);else{for(const l in e(C))Fe(C,e(C)[l]=!1);Fe(C,e(C)[R]=!0)}d(C,e(C))},c=R=>({Administrativo:"#6366f1",Emergencia:"#ef4444",Acad√©mico:"#f59e0b",Convivencia:"#22c55e",Infraestructura:"#0ea5e9",Salud:"#ec4899",Tecnol√≥gico:"#8b5cf6",Comunicaci√≥n:"#3b82f6",Disciplinario:"#64748b",Normalidad:"#10b981"})[R]||"#6366f1",m=async()=>{d(o,!0);try{const l=(await $a()).situaciones||{},O={},j={};Object.entries(l).forEach(([X,F])=>{F.length>0&&(j[X]=!1,O[X]=F.map(x=>({id:x.id,text:x.descripcion,selected:!1,originalTitulo:x.titulo,categoria:x.categoria,impacto:x.impacto,tiempo_estimado:x.tiempo_estimado})))}),d(g,O),d(C,j)}catch(R){console.error("Error cargando opciones de diario:",R)}finally{d(o,!1)}};Ar(()=>{m()}),Ae(()=>(e(g),Ne(Te())),()=>{const R=Object.values(e(g)).flat().filter(l=>l.selected&&l.text.trim()!=="").map(l=>`[${l.categoria}] ${l.originalTitulo}: ${l.text}`);JSON.stringify(R)!==JSON.stringify(Te())&&(Te(R),be("change",Te()))}),Ae(()=>{},()=>{d(v,{text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",inputBg:"rgb(var(--bg-secondary))"})}),Lr(),Pr();var le=Xl(),ge=r(le);{var H=R=>{var l=ql(),O=r(l);vo(O,{message:"Cargando opciones de diario..."}),b(R,l)},q=R=>{var l=bo(),O=rr(l);ke(O,1,()=>(e(g),t(()=>Object.entries(e(g)))),Ee,(j,X)=>{var F=So(()=>No(e(X),2));let x=()=>e(F)[0],ae=()=>e(F)[1];const De=Bt(()=>(x(),t(()=>c(x()))));var Ye=Ql(),tt=r(Ye),Q=r(tt),B=r(Q),U=a(Q,2),ce=a(U,2);let $e;var Qe=a(tt,2);{var $=Z=>{var te=Zl();ke(te,5,ae,ie=>ie.id,(ie,se,Xe)=>{var Oe=Kl(),W=r(Oe),fe=r(W),Le=r(fe),nt=r(Le),Je=r(nt),rt=a(Je,2),D=r(rt);{var p=ne=>{var Ie=Jl();b(ne,Ie)};re(D,ne=>{e(se),t(()=>e(se).selected)&&ne(p)})}var E=a(nt,2),z=r(E),V=a(Le,2),ee=r(V),ve=r(ee),je=a(ee,2),oe=r(je),L=a(fe,2);S(()=>{s(Oe,`
                  background-color: ${e(se),Ne(e(De)),e(v),t(()=>e(se).selected?`${e(De)}10`:e(v).inputBg)??""};
                  border-color: ${e(se),Ne(e(De)),e(v),t(()=>e(se).selected?e(De):e(v).border)??""};
                `),s(rt,`
                            border-color: ${e(se),Ne(e(De)),e(v),t(()=>e(se).selected?e(De):e(v).border)??""};
                            background-color: ${e(se),Ne(e(De)),t(()=>e(se).selected?e(De):"transparent")??""};
                          `),s(E,`color: ${e(v),t(()=>e(v).text)??""};`),y(z,(e(se),t(()=>e(se).originalTitulo))),s(ee,`color: ${e(v),t(()=>e(v).text)??""};`),y(ve,`IMP: ${e(se),t(()=>e(se).impacto)??""}`),s(je,`color: ${e(v),t(()=>e(v).text)??""};`),y(oe,`${e(se),t(()=>e(se).tiempo_estimado)??""} MIN`),s(L,`color: ${e(v),t(()=>e(v).text)??""};`)}),Do(Je,()=>e(se).selected,ne=>(e(se).selected=ne,qe(()=>(ae(),e(g))))),G("change",Je,()=>{d(g,e(g))}),zr(L,()=>e(se).text,ne=>(e(se).text=ne,qe(()=>(ae(),e(g))))),G("input",L,()=>{d(g,e(g))}),b(ie,Oe)}),po(3,te,()=>Oo),b(Z,te)};re(Qe,Z=>{e(C),x(),t(()=>e(C)[x()])&&Z($)})}S(()=>{s(Q,`background-color: ${e(De)??""};`),y(B,x()),s(U,`background-color: ${e(De)??""}; opacity: 0.2;`),$e=Ze(ce,0,"w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0",null,$e,{"rotate-180":e(C)[x()]})}),G("click",tt,()=>i(x())),b(j,Ye)}),b(R,l)};re(ge,R=>{e(o)?R(H):R(q,!1)})}b(J,le),Tr()}var ti=k("<option> </option>"),ri=k("<option> </option>"),oi=k("<option> </option>"),ai=Et('<svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Cargando...',1),si=Et('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> Aplicar Filtros',1),li=k('<div class="text-sm opacity-75"> </div>'),ii=k('<div class="flex items-center justify-center py-12"><!></div>'),ni=k('<div class="text-center py-12"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-lg font-medium mb-2">No hay datos disponibles</p> <p class="text-sm"> </p></div>'),di=k('<tr class="border-t transition-colors hover:bg-gray-50 dark:hover:bg-gray-800"><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"><div class="truncate"> </div></td></tr>'),ci=k('<tr class="border-t-2 font-bold bg-gray-100 dark:bg-gray-800"><td class="px-4 py-3 text-sm font-bold">TOTAL</td><td class="px-4 py-3 text-sm font-bold text-center"> </td><td class="px-4 py-3 text-sm"></td><td class="px-4 py-3 text-sm"></td><td class="px-4 py-3 text-sm font-bold text-center"> </td></tr>'),vi=k('<div class="overflow-x-auto rounded-lg border"><table class="w-full"><thead><tr><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Fecha</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Horas</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Asignatura</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Grado</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Diario de Campo</th></tr></thead><tbody><!><!></tbody></table></div>'),gi=k('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-2xl" role="document"><div class="flex items-center justify-between p-6 border-b"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h2 id="modal-title" class="text-xl font-bold">Generador de Reportes PDF</h2> <p class="text-sm opacity-75">Filtre y genere reportes del Diario de Campo</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar ventana"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 140px);"><div class="mb-6 p-4 rounded-xl border"><h3 class="text-lg font-semibold mb-4">Filtros</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="space-y-2"><label for="docente-filter" class="block text-sm font-medium">Docente</label> <select id="docente-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los docentes</option><!></select></div> <div class="space-y-2"><label for="materia-filter" class="block text-sm font-medium">Asignatura</label> <select id="materia-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todas las asignaturas</option><!></select></div> <div class="space-y-2"><label for="grado-filter" class="block text-sm font-medium">Grado</label> <select id="grado-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los grados</option><!></select></div></div> <div class="flex gap-3 mt-4"><button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2"><!></button> <button class="px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> Limpiar</button> <button class="ml-auto px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Generar PDF</button></div></div> <div class="mb-4"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold"> </h3> <!></div></div> <!></div></div></div>');function pi(J,A){Mr(A,!1);const v=h(),Te=h(),g=h();let C=null,o=null,be=Tt(A,"onClose",8),i=Tt(A,"initialDocente",8,""),c=h([]),m=h([]),le=h([]),ge=[],H=h([]),q=h(!1);const R=async()=>{if(!C||!o){const[n,w]=await Promise.all([io(()=>import("./pdf-CBBHH09D.js").then(I=>I.j),[]),io(()=>import("./pdf-CBBHH09D.js").then(I=>I.b),[])]);C=n.default,o=w.default}};let l=h(JSON.parse(localStorage.getItem("docenteMateriasDiario")||"{}")),O=h(""),j=h(""),X=h("");Ar(()=>{i()&&d(O,i())}),Ar(async()=>{await F()});const F=async()=>{try{const[n,w,I]=await Promise.all([Xr(),eo(),to()]);d(c,n),d(m,w),d(le,I),d(l,JSON.parse(localStorage.getItem("docenteMateriasDiario")||"{}"))}catch(n){console.error("Error cargando datos iniciales:",n)}},x=async()=>{d(q,!0);try{const n={spreadsheetId:Ao,worksheetTitle:jo};e(O)&&(n.docente=e(O)),e(j)&&(n.materia=e(j)),e(X)&&(n.grado=e(X));const w=await Ca(n);let I=w;if(w&&typeof w=="object"&&(w.data?I=w.data:w.records?I=w.records:Array.isArray(w)&&(I=w)),ge=Array.isArray(I)?I:[],ge.length>0&&ge[0].values){const N=["Marca Temporal","Fecha","Horas","Docente","Asignatura","Grado","Diario de Campo"];ge=ge.map(Me=>{const Ge={"Marca Temporal":"",Fecha:"",Horas:"",Docente:"",Asignatura:"",Grado:"","Diario de Campo":""};return N.forEach((ot,Re)=>{Ge[ot]=Me.values?.[Re]||""}),Ge})}ae()}catch(n){console.error("Error cargando datos del diario:",n),ge=[],d(H,[])}finally{d(q,!1)}},ae=()=>{if(!Array.isArray(ge)){d(H,[]);return}d(H,ge.filter(n=>{if(!n||typeof n!="object")return!1;const w=!e(O)||n.Docente===e(O),I=!e(j)||n.Asignatura===e(j),N=!e(X)||n.Grado===e(X);return w&&I&&N}))},De=()=>{x()},Ye=()=>{d(O,""),d(j,""),d(X,""),ge=[],d(H,[])},tt=async()=>{if(await R(),e(H).length===0){alert("No hay datos para generar el PDF");return}const n=new C({format:"letter"}),w="Diario de Campo",I=[];e(O)&&I.push(`Docente: ${e(O)}`),e(j)&&I.push(`Asignatura: ${e(j)}`),e(X)&&I.push(`Grado: ${e(X)}`);let N=20;n.setTextColor(99,102,241),n.setFontSize(28),n.setFont("helvetica","bold"),n.text("EIE",n.internal.pageSize.getWidth()/2,N,{align:"center"}),N+=15,n.setTextColor(0,0,0),n.setFontSize(18),n.setFont("helvetica","bold"),n.text(w,n.internal.pageSize.getWidth()/2,N,{align:"center"}),N+=12,n.setTextColor(0,0,0),n.setFontSize(12),n.setFont("helvetica","normal"),n.text("Instituci√≥n Educativa Instituto Gu√°tica",n.internal.pageSize.getWidth()/2,N,{align:"center"}),N+=10,n.setTextColor(60,60,60),n.setFontSize(10),n.setFont("helvetica","normal"),n.text(`Fecha de generaci√≥n: ${new Date().toLocaleDateString()}`,n.internal.pageSize.getWidth()/2,N,{align:"center"}),N+=15,n.setDrawColor(200,200,200),n.setLineWidth(1),n.line(20,N,n.internal.pageSize.getWidth()-20,N),N+=15,I.length>0&&(n.setTextColor(80,80,80),n.setFontSize(9),n.setFont("helvetica","normal"),I.forEach(ot=>{n.text(ot,20,N,{align:"left"}),N+=6}),N+=10);const Me=e(H).map(ot=>[ot.Fecha||"",ot.Horas||"",ot.Asignatura||"",ot.Grado||"",ot["Diario de Campo"]||""]);Me.push(["TOTAL",e(v).toFixed(1),"","",`${e(H).length} registros`]),o(n,{head:[["Fecha","Horas","Asignatura","Grado","Diario de Campo"]],body:Me,startY:N,styles:{fontSize:8,cellPadding:2,cellWidth:"wrap",valign:"top",overflow:"linebreak"},headStyles:{fillColor:[99,102,241],textColor:255,fontSize:9,fontStyle:"bold",halign:"center"},bodyStyles:{fillColor:[255,255,255],textColor:[0,0,0]},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:{0:{cellWidth:25,minCellHeight:8,halign:"center"},1:{cellWidth:15,minCellHeight:8,halign:"center"},2:{cellWidth:35,minCellHeight:8},3:{cellWidth:20,minCellHeight:8,halign:"center"},4:{cellWidth:"auto",minCellHeight:12}},margin:{top:15,right:15,bottom:15,left:15},tableWidth:"auto",didParseCell:ot=>{ot.row.index===Me.length-1&&(ot.cell.styles.fillColor=[240,240,240],ot.cell.styles.fontStyle="bold",ot.cell.styles.textColor=[0,0,0])}});const Ge=`reporte_diario_${e(O)||"todos"}_${e(j)||"todas"}_${e(X)||"todos"}_${new Date().toISOString().split("T")[0]}.pdf`;n.save(Ge)};Ae(()=>e(H),()=>{d(v,e(H).reduce((n,w)=>{const I=parseFloat(w.Horas||"0");return n+(isNaN(I)?0:I)},0))}),Ae(()=>(e(O),e(m),e(l)),()=>{d(Te,e(O)?[...e(m)].sort((n,w)=>{const I=e(l)[e(O)]?.includes(n.materia),N=e(l)[e(O)]?.includes(w.materia);return I&&!N?-1:!I&&N?1:n.materia.localeCompare(w.materia)}):e(m))}),Ae(()=>{},()=>{d(g,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Lr(),Pr();var Q=gi(),B=r(Q),U=r(B),ce=a(r(U),2),$e=a(U,2),Qe=r($e),$=a(r(Qe),2),Z=r($),te=r(Z),ie=a(te,2),se=r(ie);se.value=se.__value="";var Xe=a(se);ke(Xe,1,()=>e(c),Ee,(n,w)=>{var I=ti(),N=r(I),Me={};S(()=>{y(N,e(w)),Me!==(Me=e(w))&&(I.value=(I.__value=e(w))??"")}),b(n,I)});var Oe=a(Z,2),W=r(Oe),fe=a(W,2),Le=r(fe);Le.value=Le.__value="";var nt=a(Le);ke(nt,1,()=>e(Te),Ee,(n,w)=>{const I=Bt(()=>(e(O),e(l),e(w),t(()=>e(O)&&e(l)[e(O)]?.includes(e(w).materia))));var N=ri(),Me=r(N),Ge={};S(()=>{s(N,e(I)?"color: #6366f1; font-weight: 600;":""),y(Me,`${e(I)?"‚≠ê ":""}${e(w),t(()=>e(w).materia)??""}`),Ge!==(Ge=(e(w),t(()=>e(w).materia)))&&(N.value=(N.__value=(e(w),t(()=>e(w).materia)))??"")}),b(n,N)});var Je=a(Oe,2),rt=r(Je),D=a(rt,2),p=r(D);p.value=p.__value="";var E=a(p);ke(E,1,()=>(e(le),t(()=>[...new Set(e(le).map(n=>n.grado.toString()))])),Ee,(n,w)=>{var I=oi(),N=r(I),Me={};S(Ge=>{y(N,Ge),Me!==(Me=e(w))&&(I.value=(I.__value=e(w))??"")},[()=>(e(w),t(()=>e(w).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),b(n,I)});var z=a($,2),V=r(z),ee=r(V);{var ve=n=>{var w=ai();b(n,w)},je=n=>{var w=si();b(n,w)};re(ee,n=>{e(q)?n(ve):n(je,!1)})}var oe=a(V,2),L=a(oe,2),ne=a(Qe,2),Ie=r(ne),ye=r(Ie),lt=r(ye),xt=a(ye,2);{var me=n=>{var w=li(),I=r(w);S(()=>y(I,`${(e(O)&&`Docente: ${e(O)}`)??""}
              ${(e(j)&&` | Asignatura: ${e(j)}`)??""}
              ${(e(X)&&` | Grado: ${e(X)}`)??""}`)),b(n,w)};re(xt,n=>{e(H),t(()=>e(H).length>0)&&n(me)})}var P=a(ne,2);{var K=n=>{var w=ii(),I=r(w);vo(I,{message:"Cargando datos del diario..."}),b(n,w)},xe=n=>{var w=ni(),I=a(r(w),4),N=r(I);S(()=>{s(w,`color: ${e(g),t(()=>e(g).placeholder)??""};`),y(N,e(O)||e(j)||e(X)?"No se encontraron registros con los filtros seleccionados.":"Seleccione filtros y haga clic en 'Aplicar Filtros'.")}),b(n,w)},We=n=>{var w=vi(),I=r(w),N=r(I),Me=r(N),Ge=r(Me),ot=a(Ge),Re=a(ot),Zt=a(Re),pr=a(Zt),Jt=a(N),Qt=r(Jt);ke(Qt,1,()=>e(H),Ee,(dt,et)=>{var Ot=di(),Pt=r(Ot),Ht=r(Pt),Rt=a(Pt),Ft=r(Rt),Gt=a(Rt),cr=r(Gt),ur=a(Gt),Xt=r(ur),br=a(ur),wr=r(br),hr=r(wr);S(()=>{s(Ot,`border-color: ${e(g),t(()=>e(g).border)??""};`),y(Ht,(e(et),t(()=>e(et).Fecha||"-"))),y(Ft,(e(et),t(()=>e(et).Horas||"-"))),y(cr,(e(et),t(()=>e(et).Asignatura||"-"))),y(Xt,(e(et),t(()=>e(et).Grado||"-"))),jt(wr,"title",(e(et),t(()=>e(et)["Diario de Campo"]))),y(hr,(e(et),t(()=>e(et)["Diario de Campo"]||"-")))}),b(dt,Ot)});var xr=a(Qt);{var Vt=dt=>{var et=ci(),Ot=a(r(et)),Pt=r(Ot),Ht=a(Ot,3),Rt=r(Ht);S(Ft=>{s(et,`border-color: ${e(g),t(()=>e(g).border)??""}; border-top-width: 2px;`),y(Pt,Ft),y(Rt,`${e(H),t(()=>e(H).length)??""} registros`)},[()=>(e(v),t(()=>e(v).toFixed(1)))]),b(dt,et)};re(xr,dt=>{e(H),t(()=>e(H).length>0)&&dt(Vt)})}S(()=>{s(w,`border-color: ${e(g),t(()=>e(g).border)??""};`),s(N,`background-color: ${e(g),t(()=>e(g).inputBg)??""};`),s(Ge,`color: ${e(g),t(()=>e(g).label)??""};`),s(ot,`color: ${e(g),t(()=>e(g).label)??""};`),s(Re,`color: ${e(g),t(()=>e(g).label)??""};`),s(Zt,`color: ${e(g),t(()=>e(g).label)??""};`),s(pr,`color: ${e(g),t(()=>e(g).label)??""};`)}),b(n,w)};re(P,n=>{e(q)?n(K):(e(H),t(()=>e(H).length===0)?n(xe,1):n(We,!1))})}S(()=>{s(B,`background-color: ${e(g),t(()=>e(g).cardBg)??""}; color: ${e(g),t(()=>e(g).text)??""};`),s(U,`border-color: ${e(g),t(()=>e(g).cardBorder)??""};`),s(Qe,`background-color: ${e(g),t(()=>e(g).inputBg)??""}; border-color: ${e(g),t(()=>e(g).border)??""};`),s(te,`color: ${e(g),t(()=>e(g).label)??""};`),s(ie,`background-color: ${e(g),t(()=>e(g).cardBg)??""}; border-color: ${e(g),t(()=>e(g).border)??""}; color: ${e(g),t(()=>e(g).text)??""};`),s(W,`color: ${e(g),t(()=>e(g).label)??""};`),s(fe,`background-color: ${e(g),t(()=>e(g).cardBg)??""}; border-color: ${e(g),t(()=>e(g).border)??""}; color: ${e(g),t(()=>e(g).text)??""};`),s(rt,`color: ${e(g),t(()=>e(g).label)??""};`),s(D,`background-color: ${e(g),t(()=>e(g).cardBg)??""}; border-color: ${e(g),t(()=>e(g).border)??""}; color: ${e(g),t(()=>e(g).text)??""};`),V.disabled=e(q),s(oe,`color: ${e(g),t(()=>e(g).text)??""};`),L.disabled=(e(H),t(()=>e(H).length===0)),y(lt,`Resultados (${e(H),t(()=>e(H).length)??""} registros)`)}),G("click",ce,function(...n){be()?.apply(this,n)}),pt(ie,()=>e(O),n=>d(O,n)),pt(fe,()=>e(j),n=>d(j,n)),pt(D,()=>e(X),n=>d(X,n)),G("click",V,De),G("click",oe,Ye),G("click",L,tt),G("click",Q,no(function(...n){be()?.apply(this,n)})),G("keydown",Q,n=>n.key==="Escape"&&be()()),b(J,Q),Tr()}var ui=Et('<svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>'),bi=Et('<svg class="w-5 h-5 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>'),fi=Et('<svg class="w-5 h-5 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>'),xi=k('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-qemcko"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <div class="flex-1 pr-6 pt-0.5"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100">Informaci√≥n</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors" aria-label="Cerrar alerta"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),hi=k("<option> </option>"),mi=k("<option> </option>"),_i=k("<select><option>Horas...</option><option>0</option><!></select>"),yi=k('<div><div class="flex items-center gap-1.5"><input type="checkbox" class="w-4 h-4 lg:w-5 lg:h-5 rounded text-indigo-500 focus:ring-indigo-500" style="accent-color: #6366f1;"/> <span class="text-sm lg:text-sm flex-shrink-0"> </span></div> <!></div>'),wi=k("<div></div>"),ki=k("<option> </option>"),$i=k('<select id="materia" required=""><option> </option><!></select>'),Ci=k("<option> </option>"),Si=k("<option> </option>"),Ai=Et('<svg class="animate-spin h-7 w-7 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Di=Et('<svg class="w-8 h-8 transform rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>'),Ei=k('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8"><div class="flex items-center gap-4 lg:flex-col"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center">Diario de Campo</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Abrir hoja de c√°lculo"><svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Hoja de C√°lculo</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Generar reportes PDF"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Reportes PDF</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Volver al Dashboard"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Dashboard</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize"> </span></button></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto pb-32"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border"><!> <form novalidate="" class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="space-y-2"><label for="fecha" class="block text-sm font-medium">Fecha</label> <input type="date" id="fecha" required=""/></div> <div class="space-y-2"><label for="docente" class="block text-sm font-medium">Docente</label> <select id="docente" required=""><option> </option><!></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center justify-between"><label for="materia" class="block text-sm font-medium">Materia</label></div> <!></div> <div class="space-y-2"><label for="grado" class="block text-sm font-medium">Grado</label> <select id="grado" required=""><option> </option><!></select></div></div> <div class="space-y-2"><label for="horas" class="block text-sm font-medium">Horas</label> <select id="horas" required=""><option>Seleccione horas</option><option>Sin hora espec√≠fica</option><!></select></div> <div class="space-y-2"><!></div> <div class="fixed bottom-8 right-8 z-50"><button type="submit" class="w-16 h-16 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-400 dark:disabled:bg-slate-700 disabled:cursor-not-allowed disabled:scale-100 text-white rounded-full shadow-2xl transition-all duration-300 transform hover:scale-110 active:scale-95 backdrop-blur-sm bg-opacity-95 flex items-center justify-center overflow-hidden border border-white/20" aria-label="Guardar Diario de Campo"><!></button></div></form></div></main></div> <!>',1);function Ii(J,A){Mr(A,!1);const v=()=>_o(Qr,"$theme",Te),[Te,g]=mo(),C=h(),o=h(),be=h(),i=h(),c=h(),m=h(),le=h();let ge=Tt(A,"onBack",8),H=h([]),q=h([]),R=h([]),l=h(!1),O=h(!1),j=h(!1),X=h(!1),F=h(!1),x=h([]);const ae=M=>{const pe=M.match(/-(\d+)$/);return pe?pe[1]:null};let De=h(!1);const Ye=()=>{d(De,!0)},tt=()=>{d(De,!1)};let Q=h([]),B=h({fecha:new Date().toISOString().split("T")[0],docente:localStorage.getItem("lastDocenteDiario")||"",materia:"",grado:"",horas:""}),U=h(JSON.parse(localStorage.getItem("docenteMateriasDiario")||"{}"));const ce=(M,pe)=>{!M||!pe||(e(U)[M]||Fe(U,e(U)[M]=[]),e(U)[M].includes(pe)||(Fe(U,e(U)[M]=[...e(U)[M],pe]),localStorage.setItem("docenteMateriasDiario",JSON.stringify(e(U)))))};let $e=h(localStorage.getItem("dismissedInfoDiarioContent")!==Co);const Qe=()=>{d($e,!1),localStorage.setItem("dismissedInfoDiarioContent",Co)},$=()=>`https://docs.google.com/spreadsheets/d/${Ao}`,Z=()=>{window.open($(),"_blank")},te=()=>{Qr.update(M=>M==="light"?"dim":M==="dim"?"dark":"light")},ie=async()=>{d(l,!0),d(O,!0),d(j,!0);try{const[M,pe,_e]=await Promise.all([Xr(),eo(),to()]);d(H,M),d(q,pe),d(R,_e)}catch(M){console.error("Error cargando datos iniciales:",M)}finally{d(l,!1),d(O,!1),d(j,!1)}},se=async M=>{if(M.preventDefault(),e(X))return;d(F,!0);const pe=e(Q).join(" | "),_e=[];if(e(B).fecha||_e.push({id:"fecha",label:"Fecha"}),e(B).docente||_e.push({id:"docente",label:"Docente"}),e(B).grado||_e.push({id:"grado",label:"Grado"}),e(B).horas||_e.push({id:"horas",label:"Horas"}),e(Q).length===0&&_e.push({id:"diario",label:"Diario de Campo"}),e(C))if(e(x).length===0)_e.push({id:"materia",label:"Materia(s)"});else{const Ue=e(x).filter(wt=>!wt.horas);Ue.length>0&&_e.push({id:"horas",label:`Horas para: ${Ue.map(wt=>wt.materia).join(", ")}`})}else e(B).materia||_e.push({id:"materia",label:"Asignatura"});if(_e.length>0){await $t.fire({icon:"warning",title:"Campos requeridos",html:`Complete los siguientes campos:<br/><br/><strong>${_e.map(wt=>wt.label).join("<br/>")}</strong>`,confirmButtonColor:"#6366f1"});const Ue=document.getElementById(_e[0].id);Ue&&(Ue.scrollIntoView({behavior:"smooth",block:"center"}),Ue.focus());return}if(e(Q).length===0){await $t.fire({icon:"warning",title:"Sin diario de campo",text:"Debe seleccionar al menos una opci√≥n del diario de campo",confirmButtonColor:"#6366f1"});return}const Ke=e(C)?e(x):[{materia:e(B).materia,horas:e(B).horas}],bt=e(C)?e(x).map(Ue=>`${Ue.materia} (${Ue.horas}h)`).join(", "):`${e(B).materia} (${e(B).horas}h)`;if((await $t.fire({title:"¬øConfirmar Registro?",html:`
        <div class="text-left space-y-2 p-2 rounded-xl bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10" style="font-size: 0.9rem; line-height: 1.4;">
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Fecha:</strong> ${e(B).fecha}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Docente:</strong> ${e(B).docente}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Asignatura(s):</strong> ${bt}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Grado:</strong> ${e(B).grado}</div>
          <div style="margin-top: 12px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 8px;">
            <strong style="color: #6366f1;">Diario de Campo:</strong>
            <ul style="list-style-type: disc; padding-left: 20px; margin-top: 4px; font-size: 0.8rem; opacity: 0.8;">
              ${e(Q).map(Ue=>`<li>${Ue}</li>`).join("")}
            </ul>
          </div>
          ${e(C)?`<div style="margin-top: 8px; font-size: 0.75rem; color: #ef4444;">Se crear√° un registro por cada materia seleccionada (${e(x).length} registros)</div>`:""}
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonText:"Si, de acuerdo",cancelButtonText:"No",confirmButtonColor:"#4f46e5",cancelButtonColor:"#64748b",reverseButtons:!0,background:v()==="light"?"#fff":"#1e293b",color:v()==="light"?"#1e293b":"#f1f5f9"})).isConfirmed){d(X,!0);try{const Ue=new Date().toLocaleString(),wt=[];for(const Yt of Ke)wt.push([Ue,e(B).fecha,Yt.horas,e(B).docente,Yt.materia,e(B).grado,pe]);await Ea({spreadsheetId:Ao,worksheetTitle:jo,datos:wt});for(const Yt of Ke)ce(e(B).docente,Yt.materia);const or=wt.length===1?"Diario de Campo registrado exitosamente":`${wt.length} registros de Diario de Campo creados exitosamente`;await $t.fire({icon:"success",title:"¬°√âxito!",text:or,timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),d(B,{fecha:new Date().toISOString().split("T")[0],docente:e(B).docente,materia:"",grado:e(B).grado,horas:""}),d(Q,[]),d(x,[]),d(F,!1)}catch(Ue){console.error("Error enviando:",Ue),await $t.fire({icon:"error",title:"Error",text:"Error al registrar el Diario de Campo",confirmButtonColor:"#ef4444"})}finally{d(X,!1)}}};Ar(()=>{ie()}),Ae(()=>e(B),()=>{d(C,e(B).docente.includes("-"))}),Ae(()=>e(B),()=>{d(o,ae(e(B).docente))}),Ae(()=>(e(o),e(R)),()=>{d(be,e(o)?[...new Set(e(R).map(M=>M.grado.toString()))].filter(M=>M.startsWith(`${e(o)}-`)):[...new Set(e(R).map(M=>M.grado.toString()))].filter(M=>!M.includes("-")))}),Ae(()=>(e(B),e(Q),e(C),e(x)),()=>{d(i,(()=>{const M=[];return e(B).fecha||M.push("fecha"),e(B).docente||M.push("docente"),e(B).grado||M.push("grado"),e(B).horas||M.push("horas"),e(Q).length===0&&M.push("diario"),e(C)?e(x).length===0?M.push("materias"):e(x).filter(_e=>!_e.horas).length>0&&M.push("horas"):e(B).materia||M.push("materia"),M})())}),Ae(()=>e(B),()=>{e(B).docente&&localStorage.setItem("lastDocenteDiario",e(B).docente)}),Ae(()=>(e(B),e(q),e(U)),()=>{d(c,e(B).docente?[...e(q)].sort((M,pe)=>{const _e=e(U)[e(B).docente]?.includes(M.materia),Ke=e(U)[e(B).docente]?.includes(pe.materia);return _e&&!Ke?-1:!_e&&Ke?1:M.materia.localeCompare(pe.materia)}):e(q))}),Ae(()=>{},()=>{d(m,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Ae(()=>(e(B),e(Q)),()=>{d(le,e(B).fecha&&e(B).docente&&e(B).materia&&e(B).grado&&e(B).horas&&e(Q).length>0)}),Lr(),Pr();var Xe=Ei(),Oe=rr(Xe),W=r(Oe),fe=r(W),Le=r(fe),nt=r(Le),Je=a(nt,2),rt=a(Le,2),D=r(rt),p=a(D,2),E=a(p,2),z=a(E,2),V=r(z);{var ee=M=>{var pe=ui();b(M,pe)},ve=M=>{var pe=bi();b(M,pe)},je=M=>{var pe=fi();b(M,pe)};re(V,M=>{v()==="dark"?M(ee):v()==="light"?M(ve,1):M(je,!1)})}var oe=a(V,2),L=r(oe),ne=a(W,2),Ie=r(ne),ye=r(Ie);{var lt=M=>{var pe=xi(),_e=a(r(pe),2),Ke=a(r(_e),2),bt=r(Ke),vt=a(_e,2);S(()=>y(bt,Co)),G("click",vt,Qe),b(M,pe)};re(ye,M=>{e($e)&&M(lt)})}var xt=a(ye,2),me=r(xt),P=r(me),K=r(P),xe=a(K,2),We=a(P,2),n=r(We),w=a(n,2),I=r(w),N=r(I);I.value=I.__value="";var Me=a(I);ke(Me,1,()=>e(H),Ee,(M,pe)=>{var _e=hi(),Ke=r(_e),bt={};S(()=>{y(Ke,e(pe)),bt!==(bt=e(pe))&&(_e.value=(_e.__value=e(pe))??"")}),b(M,_e)});var Ge=a(me,2),ot=r(Ge),Re=r(ot),Zt=r(Re),pr=a(Re,2);{var Jt=M=>{var pe=wi();ke(pe,5,()=>e(c),Ee,(_e,Ke)=>{const bt=Bt(()=>(e(U),e(B),e(Ke),t(()=>e(U)[e(B).docente]?.includes(e(Ke).materia)))),vt=Bt(()=>(e(x),e(Ke),t(()=>e(x).findIndex(Ct=>Ct.materia===e(Ke).materia)))),Ue=Bt(()=>e(vt)>=0);var wt=yi(),or=r(wt),Yt=r(or),Ce=a(Yt,2),ut=r(Ce),kt=a(or,2);{var Ut=Ct=>{var ar=_i(),we=r(ar);we.value=we.__value="";var He=a(we);He.value=He.__value="0";var gt=a(He);ke(gt,0,()=>[1,2,3,4],Ee,(ht,zt)=>{var sr=mi(),Hr=r(sr),Or={};S(Nr=>{y(Hr,`${zt??""}h`),Or!==(Or=Nr)&&(sr.value=(sr.__value=Nr)??"")},[()=>t(()=>zt.toString())]),b(ht,sr)}),S((ht,zt)=>{Ze(ar,1,`w-full lg:w-16 px-2 py-1.5 lg:py-1 text-sm rounded border appearance-none cursor-pointer ${ht??""}`),s(ar,`background-color: ${e(m),t(()=>e(m).inputBg)??""}; border-color: ${zt??""}; color: ${e(m),t(()=>e(m).text)??""};`)},[()=>(e(F),e(i),e(x),Ne(e(vt)),t(()=>e(F)&&e(i).includes("horas")&&!e(x)[e(vt)].horas?"ring-2 ring-red-500 border-red-500":"")),()=>(e(F),e(i),e(x),Ne(e(vt)),e(m),t(()=>e(F)&&e(i).includes("horas")&&!e(x)[e(vt)].horas?"#ef4444":e(m).border))]),pt(ar,()=>e(x)[e(vt)].horas,ht=>(Fe(x,e(x)[e(vt)].horas=ht),qe(()=>{e(vt),e(F),e(i),e(m)}))),b(Ct,ar)};re(kt,Ct=>{e(Ue)&&Ct(Ut)})}S(()=>{Ze(wt,1,`flex flex-col lg:flex-row lg:items-center gap-1 lg:gap-2 px-2 py-2 lg:py-1.5 rounded-lg border transition-all ${e(Ue)?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 dark:border-indigo-500":"border-transparent"}`),s(wt,`border-color: ${Ne(e(Ue)),e(m),t(()=>e(Ue)?"#6366f1":e(m).border)??""};`),Eo(Yt,e(Ue)),s(Ce,`color: ${e(m),t(()=>e(m).text)??""};`),y(ut,`${e(bt)?"‚≠ê ":""}${e(Ke),t(()=>e(Ke).materia)??""}`)}),G("change",Yt,Ct=>{Ct.currentTarget.checked?d(x,[...e(x),{materia:e(Ke).materia,horas:e(B).horas}]):d(x,e(x).filter(ar=>ar.materia!==e(Ke).materia))}),b(_e,wt)}),S((_e,Ke)=>{Ze(pe,1,`border rounded-xl p-2 lg:p-3 flex flex-col lg:flex-row lg:flex-wrap gap-2 lg:gap-2 ${_e??""}`),s(pe,`border-color: ${Ke??""}; background-color: ${e(m),t(()=>e(m).inputBg)??""};`)},[()=>(e(F),e(i),t(()=>e(F)&&e(i).includes("materias")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(F),e(i),e(m),t(()=>e(F)&&e(i).includes("materias")?"#ef4444":e(m).border))]),b(M,pe)},Qt=M=>{var pe=$i(),_e=r(pe),Ke=r(_e);_e.value=_e.__value="";var bt=a(_e);ke(bt,1,()=>e(c),Ee,(vt,Ue)=>{const wt=Bt(()=>(e(U),e(B),e(Ue),t(()=>e(U)[e(B).docente]?.includes(e(Ue).materia))));var or=ki(),Yt=r(or),Ce={};S(()=>{s(or,e(wt)?"color: #6366f1; font-weight: 600;":""),y(Yt,`${e(wt)?"‚≠ê ":""}${e(Ue),t(()=>e(Ue).materia)??""}`),Ce!==(Ce=(e(Ue),t(()=>e(Ue).materia)))&&(or.value=(or.__value=(e(Ue),t(()=>e(Ue).materia)))??"")}),b(vt,or)}),S((vt,Ue)=>{Ze(pe,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${vt??""}`),s(pe,`background-color: ${e(m),t(()=>e(m).inputBg)??""}; border-color: ${Ue??""}; color: ${e(m),t(()=>e(m).text)??""};`),y(Ke,e(O)?"Cargando...":"Seleccione asignatura")},[()=>(e(F),e(i),t(()=>e(F)&&e(i).includes("materia")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(F),e(i),e(m),t(()=>e(F)&&e(i).includes("materia")?"#ef4444":e(m).border))]),pt(pe,()=>e(B).materia,vt=>(Fe(B,e(B).materia=vt),qe(()=>{e(F),e(i),e(m),e(l),e(H),e(O),e(c),e(U),e(j),e(be)}))),b(M,pe)};re(pr,M=>{e(C)?M(Jt):M(Qt,!1)})}var xr=a(ot,2),Vt=r(xr),dt=a(Vt,2),et=r(dt),Ot=r(et);et.value=et.__value="";var Pt=a(et);ke(Pt,1,()=>e(be),Ee,(M,pe)=>{var _e=Ci(),Ke=r(_e),bt={};S(vt=>{y(Ke,vt),bt!==(bt=e(pe))&&(_e.value=(_e.__value=e(pe))??"")},[()=>(e(pe),t(()=>e(pe).replace(/0(\d)$/,"¬∞$1").replace(/(\d{1,2})0(\d)/,"$1¬∞$2")))]),b(M,_e)});var Ht=a(Ge,2),Rt=r(Ht),Ft=a(Rt,2),Gt=r(Ft);Gt.value=Gt.__value="";var cr=a(Gt);cr.value=cr.__value="0";var ur=a(cr);ke(ur,0,()=>[1,2,3,4],Ee,(M,pe)=>{var _e=Si(),Ke=r(_e),bt={};S(vt=>{y(Ke,`${pe??""} ${pe===1?"Hora":"Horas"}`),bt!==(bt=vt)&&(_e.value=(_e.__value=vt)??"")},[()=>t(()=>pe.toString())]),b(M,_e)});var Xt=a(Ht,2),br=r(Xt);ei(br,{get selectedDiarioAnots(){return e(Q)},set selectedDiarioAnots(M){d(Q,M)},$$legacy:!0});var wr=a(Xt,2),hr=r(wr),Dr=r(hr);{var mr=M=>{var pe=Ai();b(M,pe)},kr=M=>{var pe=Di();b(M,pe)};re(Dr,M=>{e(X)?M(mr):M(kr,!1)})}var _r=a(Oe,2);{var Er=M=>{pi(M,{onClose:tt,get initialDocente(){return e(B),t(()=>e(B).docente)}})};re(_r,M=>{e(De)&&M(Er)})}S((M,pe,_e,Ke,bt,vt,Ue,wt)=>{s(Oe,`background-color: ${e(m),t(()=>e(m).bg)??""};`),s(W,`background-color: ${e(m),t(()=>e(m).cardBg)??""}; border-color: ${e(m),t(()=>e(m).cardBorder)??""};`),jt(nt,"src",ao),s(Je,`color: ${e(m),t(()=>e(m).text)??""};`),s(D,`background-color: ${e(m),t(()=>e(m).inputBg)??""}; border-color: ${e(m),t(()=>e(m).border)??""}; color: ${e(m),t(()=>e(m).text)??""};`),s(p,`background-color: ${e(m),t(()=>e(m).inputBg)??""}; border-color: ${e(m),t(()=>e(m).border)??""}; color: ${e(m),t(()=>e(m).text)??""};`),s(E,`background-color: ${e(m),t(()=>e(m).inputBg)??""}; border-color: ${e(m),t(()=>e(m).border)??""}; color: ${e(m),t(()=>e(m).text)??""};`),s(z,`background-color: ${e(m),t(()=>e(m).inputBg)??""}; border-color: ${e(m),t(()=>e(m).border)??""}; color: ${e(m),t(()=>e(m).text)??""};`),y(L,v()),s(Ie,`background-color: ${e(m),t(()=>e(m).cardBg)??""}; border-color: ${e(m),t(()=>e(m).cardBorder)??""};`),s(K,`color: ${e(m),t(()=>e(m).label)??""};`),Ze(xe,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none ${M??""}`),s(xe,`background-color: ${e(m),t(()=>e(m).inputBg)??""}; border-color: ${pe??""}; color: ${e(m),t(()=>e(m).text)??""}; color-scheme: ${v()==="light"?"light":"dark"};`),s(n,`color: ${e(m),t(()=>e(m).label)??""};`),Ze(w,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${_e??""}`),s(w,`background-color: ${e(m),t(()=>e(m).inputBg)??""}; border-color: ${Ke??""}; color: ${e(m),t(()=>e(m).text)??""};`),y(N,e(l)?"Cargando...":"Seleccione docente"),Ze(ot,1,`space-y-2 ${e(C)?"lg:col-span-2":""}`),s(Zt,`color: ${e(m),t(()=>e(m).label)??""};`),s(Vt,`color: ${e(m),t(()=>e(m).label)??""};`),Ze(dt,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${bt??""}`),s(dt,`background-color: ${e(m),t(()=>e(m).inputBg)??""}; border-color: ${vt??""}; color: ${e(m),t(()=>e(m).text)??""};`),y(Ot,e(j)?"Cargando...":"Seleccione grado"),s(Rt,`color: ${e(m),t(()=>e(m).label)??""};`),Ze(Ft,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer ${Ue??""}`),s(Ft,`background-color: ${e(m),t(()=>e(m).inputBg)??""}; border-color: ${wt??""}; color: ${e(m),t(()=>e(m).text)??""};`),hr.disabled=e(X)},[()=>(e(F),e(i),t(()=>e(F)&&e(i).includes("fecha")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(F),e(i),e(m),t(()=>e(F)&&e(i).includes("fecha")?"#ef4444":e(m).border)),()=>(e(F),e(i),t(()=>e(F)&&e(i).includes("docente")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(F),e(i),e(m),t(()=>e(F)&&e(i).includes("docente")?"#ef4444":e(m).border)),()=>(e(F),e(i),t(()=>e(F)&&e(i).includes("grado")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(F),e(i),e(m),t(()=>e(F)&&e(i).includes("grado")?"#ef4444":e(m).border)),()=>(e(F),e(i),t(()=>e(F)&&e(i).includes("horas")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(F),e(i),e(m),t(()=>e(F)&&e(i).includes("horas")?"#ef4444":e(m).border))]),G("click",D,Z),G("click",p,Ye),G("click",E,function(...M){ge()?.apply(this,M)}),G("click",z,te),zr(xe,()=>e(B).fecha,M=>(Fe(B,e(B).fecha=M),qe(()=>{e(F),e(i),e(m),e(l),e(H),e(O),e(c),e(U),e(j),e(be)}))),pt(w,()=>e(B).docente,M=>(Fe(B,e(B).docente=M),qe(()=>{e(F),e(i),e(m),e(l),e(H),e(O),e(c),e(U),e(j),e(be)}))),pt(dt,()=>e(B).grado,M=>(Fe(B,e(B).grado=M),qe(()=>{e(F),e(i),e(m),e(l),e(H),e(O),e(c),e(U),e(j),e(be)}))),pt(Ft,()=>e(B).horas,M=>(Fe(B,e(B).horas=M),qe(()=>{e(F),e(i),e(m),e(l),e(H),e(O),e(c),e(U),e(j),e(be)}))),G("submit",xt,se),b(J,Xe),Tr(),g()}var Bi=k('<div class="w-full h-screen flex flex-col bg-[rgb(var(--bg-primary))]"><div class="h-16 flex items-center justify-between px-6 border-b transition-colors duration-200" style="background-color: rgb(var(--card-bg)); border-color: rgb(var(--card-border));"><button class="flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 font-medium" style="color: rgb(var(--text-primary));"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> Volver al Dashboard</button> <h2 class="text-lg font-bold" style="color: rgb(var(--text-primary));">Horas Laborables</h2> <div class="w-10"></div></div> <iframe src="https://ceslep.github.io/horas_laborables" title="Horas Laborables" class="flex-1 w-full border-none"></iframe></div>'),Fi=k('<main class="w-full min-h-screen"><!></main>');function zi(J){let A=h("dashboard");const v=le=>{d(A,le)},Te=()=>{d(A,"dashboard")};var g=Fi(),C=r(g);{var o=le=>{ua(le,{onSelect:v})},be=le=>{Ks(le,{onBack:Te})},i=le=>{Wl(le,{onBack:Te})},c=le=>{Ii(le,{onBack:Te})},m=le=>{var ge=Bi(),H=r(ge),q=r(H);G("click",q,Te),b(le,ge)};re(C,le=>{e(A)==="dashboard"?le(o):e(A)==="inasistencia"?le(be,1):e(A)==="anotador"?le(i,2):e(A)==="diario"?le(c,3):e(A)==="horas_laborables"&&le(m,4)})}b(J,g)}ta(zi,{target:document.getElementById("app")});
