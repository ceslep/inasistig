import{p as jr,a as xr,a0 as at,o as _r,l as K,u as e,q as De,j as c,b as Fr,i as zr,d as Q,e as y,g as Ir,n as _,m as o,c as ot,f as Gr,A as ee,F as te,v as r,k as F,s,t as T,x as g,y as S,r as se,h as V,S as Ke,P as it,O as $e,R as Or,B as lt,_ as st,N as re,Z as nt,$ as dt,H as Se,Q as Ce,D as Pr,U as ct,C as vt,z as gt,V as pt}from"./svelte-DdsiqXYP.js";import{S as ir}from"./ui-CHfsb5jC.js";import{k as ut,L as Nr,a as Rr,b as Vr,c as Wr,l as qr,m as Ar,n as ft,o as Mr,q as bt}from"./Loader-DE2CalLS.js";import{t as Er,e as ht}from"./index-CofI4gHW.js";import{_ as Lr}from"./pdf-Da-GEdgZ.js";var mt=F('<div class="flex items-center justify-center py-12"><!></div>'),xt=Se('<svg class="w-3 h-3 text-white" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),_t=F('<div class="relative group flex flex-col p-0 rounded-2xl border transition-all duration-200 shadow-sm hover:shadow-md"><div class="flex flex-col p-4 gap-3"><div class="flex items-start justify-between gap-2"><div class="flex items-center gap-2"><label class="flex-shrink-0 cursor-pointer"><input type="checkbox" class="hidden"/> <div class="w-5 h-5 rounded border flex items-center justify-center transition-colors"><!></div></label> <span class="font-bold text-sm leading-tight"> </span></div> <div class="flex gap-1.5 flex-shrink-0"><span class="text-[10px] font-bold px-1.5 py-0.5 rounded bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 opacity-60"> </span> <span class="text-[10px] font-bold px-1.5 py-0.5 rounded bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 opacity-60"> </span></div></div> <textarea rows="4" class="w-full bg-transparent border-none focus:ring-0 text-sm font-medium leading-relaxed resize-none p-0 transition-colors opacity-80" placeholder="Escriba aquí..."></textarea></div></div>'),yt=F('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>'),kt=F('<div class="space-y-4"><button type="button" class="flex items-center gap-3 w-full text-left cursor-pointer group focus:outline-none"><h3 class="text-xs font-black uppercase tracking-widest px-3 py-1 rounded-full text-white flex-shrink-0 transition-all duration-300 group-hover:shadow-md"> </h3> <div class="h-px flex-1 transition-all duration-300 group-hover:opacity-50"></div> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>'),wt=F('<div class="space-y-8"><!></div>');function $t(Qe,ne){jr(ne,!1);const B=_();let de=xr(ne,"selectedDiarioAnots",28,()=>[]),l=_({}),D=_({}),Y=_(!1);const q=at(),b=z=>{if(e(D)[z])re(D,e(D)[z]=!1);else{for(const w in e(D))re(D,e(D)[w]=!1);re(D,e(D)[z]=!0)}c(D,e(D))},J=z=>({Administrativo:"#6366f1",Emergencia:"#ef4444",Académico:"#f59e0b",Convivencia:"#22c55e",Infraestructura:"#0ea5e9",Salud:"#ec4899",Tecnológico:"#8b5cf6",Comunicación:"#3b82f6",Disciplinario:"#64748b",Normalidad:"#10b981"})[z]||"#6366f1",t=async()=>{c(Y,!0);try{const w=(await ut()).situaciones||{},x={},M={};Object.entries(w).forEach(([I,f])=>{f.length>0&&(M[I]=!1,x[I]=f.map(m=>({id:m.id,text:m.descripcion,selected:!1,originalTitulo:m.titulo,categoria:m.categoria,impacto:m.impacto,tiempo_estimado:m.tiempo_estimado})))}),c(l,x),c(D,M)}catch(z){console.error("Error cargando opciones de diario:",z)}finally{c(Y,!1)}};_r(()=>{t()}),K(()=>(e(l),De(de())),()=>{const z=Object.values(e(l)).flat().filter(w=>w.selected&&w.text.trim()!=="").map(w=>`[${w.categoria}] ${w.originalTitulo}: ${w.text}`);JSON.stringify(z)!==JSON.stringify(de())&&(de(z),q("change",de()))}),K(()=>{},()=>{c(B,{text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",inputBg:"rgb(var(--bg-secondary))"})}),Fr(),zr();var fe=wt(),U=o(fe);{var $=z=>{var w=mt(),x=o(w);Nr(x,{message:"Cargando opciones de diario..."}),y(z,w)},Z=z=>{var w=ot(),x=Gr(w);ee(x,1,()=>(e(l),r(()=>Object.entries(e(l)))),te,(M,I)=>{var f=nt(()=>dt(e(I),2));let m=()=>e(f)[0],Be=()=>e(f)[1];const R=Ke(()=>(m(),r(()=>J(m()))));var Ne=kt(),Me=o(Ne),G=o(Me),n=o(G),A=s(G,2),Ye=s(A,2);let Ae;var je=s(Me,2);{var Re=be=>{var he=yt();ee(he,5,Be,ce=>ce.id,(ce,j,Ze)=>{var ae=_t(),me=o(ae),xe=o(me),ve=o(xe),Fe=o(ve),ze=o(Fe),Ie=s(ze,2),ge=o(Ie);{var pe=X=>{var We=xt();y(X,We)};Q(ge,X=>{e(j),r(()=>e(j).selected)&&X(pe)})}var _e=s(Fe,2),He=o(_e),ue=s(ve,2),Te=o(ue),Xe=o(Te),Ve=s(Te,2),Ee=o(Ve),ye=s(xe,2);T(()=>{g(ae,`
                  background-color: ${e(j),De(e(R)),e(B),r(()=>e(j).selected?`${e(R)}10`:e(B).inputBg)??""};
                  border-color: ${e(j),De(e(R)),e(B),r(()=>e(j).selected?e(R):e(B).border)??""};
                `),g(Ie,`
                            border-color: ${e(j),De(e(R)),e(B),r(()=>e(j).selected?e(R):e(B).border)??""};
                            background-color: ${e(j),De(e(R)),r(()=>e(j).selected?e(R):"transparent")??""};
                          `),g(_e,`color: ${e(B),r(()=>e(B).text)??""};`),S(He,(e(j),r(()=>e(j).originalTitulo))),g(Te,`color: ${e(B),r(()=>e(B).text)??""};`),S(Xe,`IMP: ${e(j),r(()=>e(j).impacto)??""}`),g(Ve,`color: ${e(B),r(()=>e(B).text)??""};`),S(Ee,`${e(j),r(()=>e(j).tiempo_estimado)??""} MIN`),g(ye,`color: ${e(B),r(()=>e(B).text)??""};`)}),it(ze,()=>e(j).selected,X=>(e(j).selected=X,$e(()=>(Be(),e(l))))),V("change",ze,()=>{c(l,e(l))}),Or(ye,()=>e(j).text,X=>(e(j).text=X,$e(()=>(Be(),e(l))))),V("input",ye,()=>{c(l,e(l))}),y(ce,ae)}),lt(3,he,()=>st),y(be,he)};Q(je,be=>{e(D),m(),r(()=>e(D)[m()])&&be(Re)})}T(()=>{g(G,`background-color: ${e(R)??""};`),S(n,m()),g(A,`background-color: ${e(R)??""}; opacity: 0.2;`),Ae=se(Ye,0,"w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0",null,Ae,{"rotate-180":e(D)[m()]})}),V("click",Me,()=>b(m())),y(M,Ne)}),y(z,w)};Q(U,z=>{e(Y)?z($):z(Z,!1)})}y(Qe,fe),Ir()}var Dt=F("<option> </option>"),Ct=F("<option> </option>"),St=F("<option> </option>"),Bt=Se('<svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Cargando...',1),Mt=Se('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg> Aplicar Filtros',1),At=F('<div class="text-sm opacity-75"> </div>'),jt=F('<div class="flex items-center justify-center py-12"><!></div>'),Ft=F('<div class="text-center py-12"><svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-lg font-medium mb-2">No hay datos disponibles</p> <p class="text-sm"> </p></div>'),zt=F('<tr class="border-t transition-colors hover:bg-gray-50 dark:hover:bg-gray-800"><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"> </td><td class="px-4 py-3 text-sm"><div class="truncate"> </div></td></tr>'),It=F('<tr class="border-t-2 font-bold bg-gray-100 dark:bg-gray-800"><td class="px-4 py-3 text-sm font-bold">TOTAL</td><td class="px-4 py-3 text-sm font-bold text-center"> </td><td class="px-4 py-3 text-sm"></td><td class="px-4 py-3 text-sm"></td><td class="px-4 py-3 text-sm font-bold text-center"> </td></tr>'),Ht=F('<div class="overflow-x-auto rounded-lg border"><table class="w-full"><thead><tr><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Fecha</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Horas</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Asignatura</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Grado</th><th class="px-4 py-3 text-left text-xs font-medium uppercase tracking-wider">Diario de Campo</th></tr></thead><tbody><!><!></tbody></table></div>'),Tt=F('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white dark:bg-gray-900 rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-2xl" role="document"><div class="flex items-center justify-between p-6 border-b"><div class="flex items-center gap-3"><div class="p-2 rounded-lg bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h2 id="modal-title" class="text-xl font-bold">Generador de Reportes PDF</h2> <p class="text-sm opacity-75">Filtre y genere reportes del Diario de Campo</p></div></div> <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Cerrar ventana"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 140px);"><div class="mb-6 p-4 rounded-xl border"><h3 class="text-lg font-semibold mb-4">Filtros</h3> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="space-y-2"><label for="docente-filter" class="block text-sm font-medium">Docente</label> <select id="docente-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los docentes</option><!></select></div> <div class="space-y-2"><label for="materia-filter" class="block text-sm font-medium">Asignatura</label> <select id="materia-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todas las asignaturas</option><!></select></div> <div class="space-y-2"><label for="grado-filter" class="block text-sm font-medium">Grado</label> <select id="grado-filter" class="w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-500 transition-all outline-none"><option>Todos los grados</option><!></select></div></div> <div class="flex gap-3 mt-4"><button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2"><!></button> <button class="px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> Limpiar</button> <button class="ml-auto px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Generar PDF</button></div></div> <div class="mb-4"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold"> </h3> <!></div></div> <!></div></div></div>');function Et(Qe,ne){jr(ne,!1);const B=_(),de=_(),l=_();let D=null,Y=null,q=xr(ne,"onClose",8),b=xr(ne,"initialDocente",8,""),J=_([]),t=_([]),fe=_([]),U=[],$=_([]),Z=_(!1);const z=async()=>{if(!D||!Y){const[a,d]=await Promise.all([Lr(()=>import("./pdf-Da-GEdgZ.js").then(p=>p.j),[]),Lr(()=>import("./pdf-Da-GEdgZ.js").then(p=>p.b),[])]);D=a.default,Y=d.default}};let w=_(JSON.parse(localStorage.getItem("docenteMateriasDiario")||"{}")),x=_(""),M=_(""),I=_("");_r(()=>{b()&&c(x,b())}),_r(async()=>{await f()});const f=async()=>{try{const[a,d,p]=await Promise.all([Rr(),Vr(),Wr()]);c(J,a),c(t,d),c(fe,p),c(w,JSON.parse(localStorage.getItem("docenteMateriasDiario")||"{}"))}catch(a){console.error("Error cargando datos iniciales:",a)}},m=async()=>{c(Z,!0);try{const a={spreadsheetId:Ar,worksheetTitle:qr};e(x)&&(a.docente=e(x)),e(M)&&(a.materia=e(M)),e(I)&&(a.grado=e(I));const d=await ft(a);let p=d;if(d&&typeof d=="object"&&(d.data?p=d.data:d.records?p=d.records:Array.isArray(d)&&(p=d)),U=Array.isArray(p)?p:[],U.length>0&&U[0].values){const h=["Marca Temporal","Fecha","Horas","Docente","Asignatura","Grado","Diario de Campo"];U=U.map(N=>{const W={"Marca Temporal":"",Fecha:"",Horas:"",Docente:"",Asignatura:"",Grado:"","Diario de Campo":""};return h.forEach((E,Le)=>{W[E]=N.values?.[Le]||""}),W})}Be()}catch(a){console.error("Error cargando datos del diario:",a),U=[],c($,[])}finally{c(Z,!1)}},Be=()=>{if(!Array.isArray(U)){c($,[]);return}c($,U.filter(a=>{if(!a||typeof a!="object")return!1;const d=!e(x)||a.Docente===e(x),p=!e(M)||a.Asignatura===e(M),h=!e(I)||a.Grado===e(I);return d&&p&&h}))},R=()=>{m()},Ne=()=>{c(x,""),c(M,""),c(I,""),U=[],c($,[])},Me=async()=>{if(await z(),e($).length===0){alert("No hay datos para generar el PDF");return}const a=new D({format:"letter"}),d="Diario de Campo",p=[];e(x)&&p.push(`Docente: ${e(x)}`),e(M)&&p.push(`Asignatura: ${e(M)}`),e(I)&&p.push(`Grado: ${e(I)}`);let h=20;a.setTextColor(99,102,241),a.setFontSize(28),a.setFont("helvetica","bold"),a.text("EIE",a.internal.pageSize.getWidth()/2,h,{align:"center"}),h+=15,a.setTextColor(0,0,0),a.setFontSize(18),a.setFont("helvetica","bold"),a.text(d,a.internal.pageSize.getWidth()/2,h,{align:"center"}),h+=12,a.setTextColor(0,0,0),a.setFontSize(12),a.setFont("helvetica","normal"),a.text("Institución Educativa Instituto Guática",a.internal.pageSize.getWidth()/2,h,{align:"center"}),h+=10,a.setTextColor(60,60,60),a.setFontSize(10),a.setFont("helvetica","normal"),a.text(`Fecha de generación: ${new Date().toLocaleDateString()}`,a.internal.pageSize.getWidth()/2,h,{align:"center"}),h+=15,a.setDrawColor(200,200,200),a.setLineWidth(1),a.line(20,h,a.internal.pageSize.getWidth()-20,h),h+=15,p.length>0&&(a.setTextColor(80,80,80),a.setFontSize(9),a.setFont("helvetica","normal"),p.forEach(E=>{a.text(E,20,h,{align:"left"}),h+=6}),h+=10);const N=e($).map(E=>[E.Fecha||"",E.Horas||"",E.Asignatura||"",E.Grado||"",E["Diario de Campo"]||""]);N.push(["TOTAL",e(B).toFixed(1),"","",`${e($).length} registros`]),Y(a,{head:[["Fecha","Horas","Asignatura","Grado","Diario de Campo"]],body:N,startY:h,styles:{fontSize:8,cellPadding:2,cellWidth:"wrap",valign:"top",overflow:"linebreak"},headStyles:{fillColor:[99,102,241],textColor:255,fontSize:9,fontStyle:"bold",halign:"center"},bodyStyles:{fillColor:[255,255,255],textColor:[0,0,0]},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:{0:{cellWidth:25,minCellHeight:8,halign:"center"},1:{cellWidth:15,minCellHeight:8,halign:"center"},2:{cellWidth:35,minCellHeight:8},3:{cellWidth:20,minCellHeight:8,halign:"center"},4:{cellWidth:"auto",minCellHeight:12}},margin:{top:15,right:15,bottom:15,left:15},tableWidth:"auto",didParseCell:E=>{E.row.index===N.length-1&&(E.cell.styles.fillColor=[240,240,240],E.cell.styles.fontStyle="bold",E.cell.styles.textColor=[0,0,0])}});const W=`reporte_diario_${e(x)||"todos"}_${e(M)||"todas"}_${e(I)||"todos"}_${new Date().toISOString().split("T")[0]}.pdf`;a.save(W)};K(()=>e($),()=>{c(B,e($).reduce((a,d)=>{const p=parseFloat(d.Horas||"0");return a+(isNaN(p)?0:p)},0))}),K(()=>(e(x),e(t),e(w)),()=>{c(de,e(x)?[...e(t)].sort((a,d)=>{const p=e(w)[e(x)]?.includes(a.materia),h=e(w)[e(x)]?.includes(d.materia);return p&&!h?-1:!p&&h?1:a.materia.localeCompare(d.materia)}):e(t))}),K(()=>{},()=>{c(l,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),Fr(),zr();var G=Tt(),n=o(G),A=o(n),Ye=s(o(A),2),Ae=s(A,2),je=o(Ae),Re=s(o(je),2),be=o(Re),he=o(be),ce=s(he,2),j=o(ce);j.value=j.__value="";var Ze=s(j);ee(Ze,1,()=>e(J),te,(a,d)=>{var p=Dt(),h=o(p),N={};T(()=>{S(h,e(d)),N!==(N=e(d))&&(p.value=(p.__value=e(d))??"")}),y(a,p)});var ae=s(be,2),me=o(ae),xe=s(me,2),ve=o(xe);ve.value=ve.__value="";var Fe=s(ve);ee(Fe,1,()=>e(de),te,(a,d)=>{const p=Ke(()=>(e(x),e(w),e(d),r(()=>e(x)&&e(w)[e(x)]?.includes(e(d).materia))));var h=Ct(),N=o(h),W={};T(()=>{g(h,e(p)?"color: #6366f1; font-weight: 600;":""),S(N,`${e(p)?"⭐ ":""}${e(d),r(()=>e(d).materia)??""}`),W!==(W=(e(d),r(()=>e(d).materia)))&&(h.value=(h.__value=(e(d),r(()=>e(d).materia)))??"")}),y(a,h)});var ze=s(ae,2),Ie=o(ze),ge=s(Ie,2),pe=o(ge);pe.value=pe.__value="";var _e=s(pe);ee(_e,1,()=>(e(fe),r(()=>[...new Set(e(fe).map(a=>a.grado.toString()))])),te,(a,d)=>{var p=St(),h=o(p),N={};T(W=>{S(h,W),N!==(N=e(d))&&(p.value=(p.__value=e(d))??"")},[()=>(e(d),r(()=>e(d).replace(/0(\d)$/,"°$1").replace(/(\d{1,2})0(\d)/,"$1°$2")))]),y(a,p)});var He=s(Re,2),ue=o(He),Te=o(ue);{var Xe=a=>{var d=Bt();y(a,d)},Ve=a=>{var d=Mt();y(a,d)};Q(Te,a=>{e(Z)?a(Xe):a(Ve,!1)})}var Ee=s(ue,2),ye=s(Ee,2),X=s(je,2),We=o(X),er=o(We),yr=o(er),lr=s(er,2);{var sr=a=>{var d=At(),p=o(d);T(()=>S(p,`${(e(x)&&`Docente: ${e(x)}`)??""}
              ${(e(M)&&` | Asignatura: ${e(M)}`)??""}
              ${(e(I)&&` | Grado: ${e(I)}`)??""}`)),y(a,d)};Q(lr,a=>{e($),r(()=>e($).length>0)&&a(sr)})}var nr=s(X,2);{var dr=a=>{var d=jt(),p=o(d);Nr(p,{message:"Cargando datos del diario..."}),y(a,d)},rr=a=>{var d=Ft(),p=s(o(d),4),h=o(p);T(()=>{g(d,`color: ${e(l),r(()=>e(l).placeholder)??""};`),S(h,e(x)||e(M)||e(I)?"No se encontraron registros con los filtros seleccionados.":"Seleccione filtros y haga clic en 'Aplicar Filtros'.")}),y(a,d)},kr=a=>{var d=Ht(),p=o(d),h=o(p),N=o(h),W=o(N),E=s(W),Le=s(E),cr=s(Le),wr=s(cr),$r=s(h),vr=o($r);ee(vr,1,()=>e($),te,(oe,L)=>{var ke=zt(),qe=o(ke),Je=o(qe),Ge=s(qe),we=o(Ge),Ue=s(Ge),tr=o(Ue),pr=s(Ue),ur=o(pr),Cr=s(pr),fr=o(Cr),br=o(fr);T(()=>{g(ke,`border-color: ${e(l),r(()=>e(l).border)??""};`),S(Je,(e(L),r(()=>e(L).Fecha||"-"))),S(we,(e(L),r(()=>e(L).Horas||"-"))),S(tr,(e(L),r(()=>e(L).Asignatura||"-"))),S(ur,(e(L),r(()=>e(L).Grado||"-"))),Pr(fr,"title",(e(L),r(()=>e(L)["Diario de Campo"]))),S(br,(e(L),r(()=>e(L)["Diario de Campo"]||"-")))}),y(oe,ke)});var Dr=s(vr);{var gr=oe=>{var L=It(),ke=s(o(L)),qe=o(ke),Je=s(ke,3),Ge=o(Je);T(we=>{g(L,`border-color: ${e(l),r(()=>e(l).border)??""}; border-top-width: 2px;`),S(qe,we),S(Ge,`${e($),r(()=>e($).length)??""} registros`)},[()=>(e(B),r(()=>e(B).toFixed(1)))]),y(oe,L)};Q(Dr,oe=>{e($),r(()=>e($).length>0)&&oe(gr)})}T(()=>{g(d,`border-color: ${e(l),r(()=>e(l).border)??""};`),g(h,`background-color: ${e(l),r(()=>e(l).inputBg)??""};`),g(W,`color: ${e(l),r(()=>e(l).label)??""};`),g(E,`color: ${e(l),r(()=>e(l).label)??""};`),g(Le,`color: ${e(l),r(()=>e(l).label)??""};`),g(cr,`color: ${e(l),r(()=>e(l).label)??""};`),g(wr,`color: ${e(l),r(()=>e(l).label)??""};`)}),y(a,d)};Q(nr,a=>{e(Z)?a(dr):(e($),r(()=>e($).length===0)?a(rr,1):a(kr,!1))})}T(()=>{g(n,`background-color: ${e(l),r(()=>e(l).cardBg)??""}; color: ${e(l),r(()=>e(l).text)??""};`),g(A,`border-color: ${e(l),r(()=>e(l).cardBorder)??""};`),g(je,`background-color: ${e(l),r(()=>e(l).inputBg)??""}; border-color: ${e(l),r(()=>e(l).border)??""};`),g(he,`color: ${e(l),r(()=>e(l).label)??""};`),g(ce,`background-color: ${e(l),r(()=>e(l).cardBg)??""}; border-color: ${e(l),r(()=>e(l).border)??""}; color: ${e(l),r(()=>e(l).text)??""};`),g(me,`color: ${e(l),r(()=>e(l).label)??""};`),g(xe,`background-color: ${e(l),r(()=>e(l).cardBg)??""}; border-color: ${e(l),r(()=>e(l).border)??""}; color: ${e(l),r(()=>e(l).text)??""};`),g(Ie,`color: ${e(l),r(()=>e(l).label)??""};`),g(ge,`background-color: ${e(l),r(()=>e(l).cardBg)??""}; border-color: ${e(l),r(()=>e(l).border)??""}; color: ${e(l),r(()=>e(l).text)??""};`),ue.disabled=e(Z),g(Ee,`color: ${e(l),r(()=>e(l).text)??""};`),ye.disabled=(e($),r(()=>e($).length===0)),S(yr,`Resultados (${e($),r(()=>e($).length)??""} registros)`)}),V("click",Ye,function(...a){q()?.apply(this,a)}),Ce(ce,()=>e(x),a=>c(x,a)),Ce(xe,()=>e(M),a=>c(M,a)),Ce(ge,()=>e(I),a=>c(I,a)),V("click",ue,R),V("click",Ee,Ne),V("click",ye,Me),V("click",G,ct(function(...a){q()?.apply(this,a)})),V("keydown",G,a=>a.key==="Escape"&&q()()),y(Qe,G),Ir()}var Lt=Se('<svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>'),Gt=Se('<svg class="w-5 h-5 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>'),Ot=Se('<svg class="w-5 h-5 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>'),Pt=F('<div class="mb-6 p-4 rounded-xl border flex items-start gap-4 animate-fade-in relative transition-all duration-300 bg-green-50 dark:bg-indigo-900/40 border-green-200 dark:border-indigo-700 shadow-sm svelte-qemcko"><div class="p-2 rounded-lg bg-green-100 dark:bg-indigo-800 text-green-700 dark:text-indigo-200 flex-shrink-0"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <div class="flex-1 pr-6 pt-0.5"><h4 class="text-sm font-bold mb-1 text-green-900 dark:text-indigo-100">Información</h4> <p class="text-sm leading-relaxed text-green-800 dark:text-indigo-200"> </p></div> <button class="absolute top-3 right-3 p-1.5 rounded-lg hover:bg-green-100 dark:hover:bg-indigo-700 text-green-600 hover:text-green-800 dark:text-indigo-400 dark:hover:text-indigo-100 transition-colors" aria-label="Cerrar alerta"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),Nt=F("<option> </option>"),Rt=F("<option> </option>"),Vt=F("<select><option>Horas...</option><option>0</option><!></select>"),Wt=F('<div><div class="flex items-center gap-1.5"><input type="checkbox" class="w-4 h-4 lg:w-5 lg:h-5 rounded text-indigo-500 focus:ring-indigo-500" style="accent-color: #6366f1;"/> <span class="text-sm lg:text-sm flex-shrink-0"> </span></div> <!></div>'),qt=F("<div></div>"),Jt=F("<option> </option>"),Ut=F('<select id="materia" required=""><option> </option><!></select>'),Kt=F("<option> </option>"),Qt=F("<option> </option>"),Yt=Se('<svg class="animate-spin h-7 w-7 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Zt=Se('<svg class="w-8 h-8 transform rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>'),Xt=F('<div class="min-h-screen flex flex-col lg:flex-row transition-colors duration-200"><aside class="w-full lg:w-80 lg:h-screen lg:sticky lg:top-0 border-b lg:border-b-0 lg:border-r transition-colors duration-200 p-6 lg:p-8 flex flex-col flex-shrink-0 z-40"><div class="flex flex-col lg:flex-col items-center justify-between lg:justify-start gap-4 lg:gap-8"><div class="flex items-center gap-4 lg:flex-col"><img alt="EIE Logo" class="h-12 lg:h-20 w-auto"/> <h1 class="text-xl lg:text-2xl tracking-tight font-bold lg:text-center">Diario de Campo</h1></div> <div class="flex flex-wrap justify-center lg:flex-col gap-3 w-full"><button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Abrir hoja de cálculo"><svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Hoja de Cálculo</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Generar reportes PDF"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Reportes PDF</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5" title="Volver al Dashboard"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg> <span class="text-sm font-medium hidden lg:inline">Dashboard</span></button> <button class="inline-flex items-center justify-center gap-2 px-3 lg:px-4 py-2 lg:py-3 border rounded-lg transition-all duration-200 hover:bg-black/5 dark:hover:bg-white/5 w-full" aria-label="Cambiar tema"><!> <span class="text-sm font-medium hidden lg:inline capitalize"> </span></button></div></div></aside> <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto pb-32"><div class="max-w-4xl mx-auto rounded-2xl p-6 lg:p-8 transition-colors duration-200 border"><!> <form novalidate="" class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="space-y-2"><label for="fecha" class="block text-sm font-medium">Fecha</label> <input type="date" id="fecha" required=""/></div> <div class="space-y-2"><label for="docente" class="block text-sm font-medium">Docente</label> <select id="docente" required=""><option> </option><!></select></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center justify-between"><label for="materia" class="block text-sm font-medium">Materia</label></div> <!></div> <div class="space-y-2"><label for="grado" class="block text-sm font-medium">Grado</label> <select id="grado" required=""><option> </option><!></select></div></div> <div class="space-y-2"><label for="horas" class="block text-sm font-medium">Horas</label> <select id="horas" required=""><option>Seleccione horas</option><option>Sin hora específica</option><!></select></div> <div class="space-y-2"><!></div> <div class="fixed bottom-8 right-8 z-50"><button type="submit" class="w-16 h-16 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-400 dark:disabled:bg-slate-700 disabled:cursor-not-allowed disabled:scale-100 text-white rounded-full shadow-2xl transition-all duration-300 transform hover:scale-110 active:scale-95 backdrop-blur-sm bg-opacity-95 flex items-center justify-center overflow-hidden border border-white/20" aria-label="Guardar Diario de Campo"><!></button></div></form></div></main></div> <!>',1);function ia(Qe,ne){jr(ne,!1);const B=()=>vt(Er,"$theme",de),[de,l]=gt(),D=_(),Y=_(),q=_(),b=_(),J=_(),t=_(),fe=_();let U=xr(ne,"onBack",8),$=_([]),Z=_([]),z=_([]),w=_(!1),x=_(!1),M=_(!1),I=_(!1),f=_(!1),m=_([]);const Be=i=>{const v=i.match(/-(\d+)$/);return v?v[1]:null};let R=_(!1);const Ne=()=>{c(R,!0)},Me=()=>{c(R,!1)};let G=_([]),n=_({fecha:new Date().toLocaleDateString("en-CA"),docente:localStorage.getItem("lastDocenteDiario")||"",materia:"",grado:"",horas:""}),A=_(JSON.parse(localStorage.getItem("docenteMateriasDiario")||"{}"));const Ye=(i,v)=>{!i||!v||(e(A)[i]||re(A,e(A)[i]=[]),e(A)[i].includes(v)||(re(A,e(A)[i]=[...e(A)[i],v]),localStorage.setItem("docenteMateriasDiario",JSON.stringify(e(A)))))};let Ae=_(localStorage.getItem("dismissedInfoDiarioContent")!==Mr);const je=()=>{c(Ae,!1),localStorage.setItem("dismissedInfoDiarioContent",Mr)},Re=()=>`https://docs.google.com/spreadsheets/d/${Ar}`,be=()=>{window.open(Re(),"_blank")},he=()=>{Er.update(i=>i==="light"?"dim":i==="dim"?"dark":"light")},ce=async()=>{c(w,!0),c(x,!0),c(M,!0);try{const[i,v,u]=await Promise.all([Rr(),Vr(),Wr()]);c($,i),c(Z,v),c(z,u)}catch(i){console.error("Error cargando datos iniciales:",i)}finally{c(w,!1),c(x,!1),c(M,!1)}},j=async i=>{if(i.preventDefault(),e(I))return;c(f,!0);const v=e(G).join(" | "),u=[];if(e(n).fecha||u.push({id:"fecha",label:"Fecha"}),e(n).docente||u.push({id:"docente",label:"Docente"}),e(n).grado||u.push({id:"grado",label:"Grado"}),e(n).horas||u.push({id:"horas",label:"Horas"}),e(G).length===0&&u.push({id:"diario",label:"Diario de Campo"}),e(D))if(e(m).length===0)u.push({id:"materia",label:"Materia(s)"});else{const k=e(m).filter(O=>!O.horas);k.length>0&&u.push({id:"horas",label:`Horas para: ${k.map(O=>O.materia).join(", ")}`})}else e(n).materia||u.push({id:"materia",label:"Asignatura"});if(u.length>0){await ir.fire({icon:"warning",title:"Campos requeridos",html:`Complete los siguientes campos:<br/><br/><strong>${u.map(O=>O.label).join("<br/>")}</strong>`,confirmButtonColor:"#6366f1"});const k=document.getElementById(u[0].id);k&&(k.scrollIntoView({behavior:"smooth",block:"center"}),k.focus());return}if(e(G).length===0){await ir.fire({icon:"warning",title:"Sin diario de campo",text:"Debe seleccionar al menos una opción del diario de campo",confirmButtonColor:"#6366f1"});return}const C=e(D)?e(m):[{materia:e(n).materia,horas:e(n).horas}],P=e(D)?e(m).map(k=>`${k.materia} (${k.horas}h)`).join(", "):`${e(n).materia} (${e(n).horas}h)`;if((await ir.fire({title:"¿Confirmar Registro?",html:`
        <div class="text-left space-y-2 p-2 rounded-xl bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10" style="font-size: 0.9rem; line-height: 1.4;">
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Fecha:</strong> ${e(n).fecha}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Docente:</strong> ${e(n).docente}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Asignatura(s):</strong> ${P}</div>
          <div style="margin-bottom: 8px;"><strong style="color: #6366f1;">Grado:</strong> ${e(n).grado}</div>
          <div style="margin-top: 12px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 8px;">
            <strong style="color: #6366f1;">Diario de Campo:</strong>
            <ul style="list-style-type: disc; padding-left: 20px; margin-top: 4px; font-size: 0.8rem; opacity: 0.8;">
              ${e(G).map(k=>`<li>${k}</li>`).join("")}
            </ul>
          </div>
          ${e(D)?`<div style="margin-top: 8px; font-size: 0.75rem; color: #ef4444;">Se creará un registro por cada materia seleccionada (${e(m).length} registros)</div>`:""}
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonText:"Si, de acuerdo",cancelButtonText:"No",confirmButtonColor:"#4f46e5",cancelButtonColor:"#64748b",reverseButtons:!0,background:B()==="light"?"#fff":"#1e293b",color:B()==="light"?"#1e293b":"#f1f5f9"})).isConfirmed){c(I,!0);try{const k=new Date().toLocaleString(),O=[];for(const le of C)O.push([k,e(n).fecha,le.horas,e(n).docente,le.materia,e(n).grado,v]);await bt({spreadsheetId:Ar,worksheetTitle:qr,datos:O});for(const le of C)Ye(e(n).docente,le.materia);const ie=O.length===1?"Diario de Campo registrado exitosamente":`${O.length} registros de Diario de Campo creados exitosamente`;await ir.fire({icon:"success",title:"¡Éxito!",text:ie,timer:3e3,timerProgressBar:!0,showConfirmButton:!1,position:"top-end",toast:!0}),c(n,{fecha:new Date().toLocaleDateString("en-CA"),docente:e(n).docente,materia:"",grado:e(n).grado,horas:""}),c(G,[]),c(m,[]),c(f,!1)}catch(k){console.error("Error enviando:",k),await ir.fire({icon:"error",title:"Error",text:"Error al registrar el Diario de Campo",confirmButtonColor:"#ef4444"})}finally{c(I,!1)}}};_r(()=>{ce()}),K(()=>e(n),()=>{c(D,e(n).docente.includes("-"))}),K(()=>e(n),()=>{c(Y,Be(e(n).docente))}),K(()=>(e(Y),e(z)),()=>{c(q,e(Y)?[...new Set(e(z).map(i=>i.grado.toString()))].filter(i=>i.startsWith(`${e(Y)}-`)):[...new Set(e(z).map(i=>i.grado.toString()))].filter(i=>!i.includes("-")))}),K(()=>(e(n),e(G),e(D),e(m)),()=>{c(b,(()=>{const i=[];return e(n).fecha||i.push("fecha"),e(n).docente||i.push("docente"),e(n).grado||i.push("grado"),e(n).horas||i.push("horas"),e(G).length===0&&i.push("diario"),e(D)?e(m).length===0?i.push("materias"):e(m).filter(u=>!u.horas).length>0&&i.push("horas"):e(n).materia||i.push("materia"),i})())}),K(()=>e(n),()=>{e(n).docente&&localStorage.setItem("lastDocenteDiario",e(n).docente)}),K(()=>(e(n),e(Z),e(A)),()=>{c(J,e(n).docente?[...e(Z)].sort((i,v)=>{const u=e(A)[e(n).docente]?.includes(i.materia),C=e(A)[e(n).docente]?.includes(v.materia);return u&&!C?-1:!u&&C?1:i.materia.localeCompare(v.materia)}):e(Z))}),K(()=>{},()=>{c(t,{bg:"rgb(var(--bg-primary))",text:"rgb(var(--text-primary))",label:"rgb(var(--text-secondary))",border:"rgb(var(--border-primary))",placeholder:"rgb(var(--text-muted))",icon:"rgb(var(--text-muted))",cardBg:"rgb(var(--card-bg))",cardBorder:"rgb(var(--card-border))",inputBg:"rgb(var(--bg-secondary))"})}),K(()=>(e(n),e(G)),()=>{c(fe,e(n).fecha&&e(n).docente&&e(n).materia&&e(n).grado&&e(n).horas&&e(G).length>0)}),Fr(),zr();var Ze=Xt(),ae=Gr(Ze),me=o(ae),xe=o(me),ve=o(xe),Fe=o(ve),ze=s(Fe,2),Ie=s(ve,2),ge=o(Ie),pe=s(ge,2),_e=s(pe,2),He=s(_e,2),ue=o(He);{var Te=i=>{var v=Lt();y(i,v)},Xe=i=>{var v=Gt();y(i,v)},Ve=i=>{var v=Ot();y(i,v)};Q(ue,i=>{B()==="dark"?i(Te):B()==="light"?i(Xe,1):i(Ve,!1)})}var Ee=s(ue,2),ye=o(Ee),X=s(me,2),We=o(X),er=o(We);{var yr=i=>{var v=Pt(),u=s(o(v),2),C=s(o(u),2),P=o(C),H=s(u,2);T(()=>S(P,Mr)),V("click",H,je),y(i,v)};Q(er,i=>{e(Ae)&&i(yr)})}var lr=s(er,2),sr=o(lr),nr=o(sr),dr=o(nr),rr=s(dr,2),kr=s(nr,2),a=o(kr),d=s(a,2),p=o(d),h=o(p);p.value=p.__value="";var N=s(p);ee(N,1,()=>e($),te,(i,v)=>{var u=Nt(),C=o(u),P={};T(()=>{S(C,e(v)),P!==(P=e(v))&&(u.value=(u.__value=e(v))??"")}),y(i,u)});var W=s(sr,2),E=o(W),Le=o(E),cr=o(Le),wr=s(Le,2);{var $r=i=>{var v=qt();ee(v,5,()=>e(J),te,(u,C)=>{const P=Ke(()=>(e(A),e(n),e(C),r(()=>e(A)[e(n).docente]?.includes(e(C).materia)))),H=Ke(()=>(e(m),e(C),r(()=>e(m).findIndex(Oe=>Oe.materia===e(C).materia)))),k=Ke(()=>e(H)>=0);var O=Wt(),ie=o(O),le=o(ie),ar=s(le,2),Zr=o(ar),Xr=s(ie,2);{var et=Oe=>{var Pe=Vt(),Sr=o(Pe);Sr.value=Sr.__value="";var Br=s(Sr);Br.value=Br.__value="0";var rt=s(Br);ee(rt,0,()=>[1,2,3,4],te,(or,hr)=>{var mr=Rt(),tt=o(mr),Hr={};T(Tr=>{S(tt,`${hr??""}h`),Hr!==(Hr=Tr)&&(mr.value=(mr.__value=Tr)??"")},[()=>r(()=>hr.toString())]),y(or,mr)}),T((or,hr)=>{se(Pe,1,`w-full lg:w-16 px-2 py-1.5 lg:py-1 text-sm rounded border appearance-none cursor-pointer ${or??""}`),g(Pe,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${hr??""}; color: ${e(t),r(()=>e(t).text)??""};`)},[()=>(e(f),e(b),e(m),De(e(H)),r(()=>e(f)&&e(b).includes("horas")&&!e(m)[e(H)].horas?"ring-2 ring-red-500 border-red-500":"")),()=>(e(f),e(b),e(m),De(e(H)),e(t),r(()=>e(f)&&e(b).includes("horas")&&!e(m)[e(H)].horas?"#ef4444":e(t).border))]),Ce(Pe,()=>e(m)[e(H)].horas,or=>(re(m,e(m)[e(H)].horas=or),$e(()=>{e(H),e(f),e(b),e(t)}))),y(Oe,Pe)};Q(Xr,Oe=>{e(k)&&Oe(et)})}T(()=>{se(O,1,`flex flex-col lg:flex-row lg:items-center gap-1 lg:gap-2 px-2 py-2 lg:py-1.5 rounded-lg border transition-all ${e(k)?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 dark:border-indigo-500":"border-transparent"}`),g(O,`border-color: ${De(e(k)),e(t),r(()=>e(k)?"#6366f1":e(t).border)??""};`),pt(le,e(k)),g(ar,`color: ${e(t),r(()=>e(t).text)??""};`),S(Zr,`${e(P)?"⭐ ":""}${e(C),r(()=>e(C).materia)??""}`)}),V("change",le,Oe=>{Oe.currentTarget.checked?c(m,[...e(m),{materia:e(C).materia,horas:e(n).horas}]):c(m,e(m).filter(Pe=>Pe.materia!==e(C).materia))}),y(u,O)}),T((u,C)=>{se(v,1,`border rounded-xl p-2 lg:p-3 flex flex-col lg:flex-row lg:flex-wrap gap-2 lg:gap-2 ${u??""}`),g(v,`border-color: ${C??""}; background-color: ${e(t),r(()=>e(t).inputBg)??""};`)},[()=>(e(f),e(b),r(()=>e(f)&&e(b).includes("materias")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(f),e(b),e(t),r(()=>e(f)&&e(b).includes("materias")?"#ef4444":e(t).border))]),y(i,v)},vr=i=>{var v=Ut(),u=o(v),C=o(u);u.value=u.__value="";var P=s(u);ee(P,1,()=>e(J),te,(H,k)=>{const O=Ke(()=>(e(A),e(n),e(k),r(()=>e(A)[e(n).docente]?.includes(e(k).materia))));var ie=Jt(),le=o(ie),ar={};T(()=>{g(ie,e(O)?"color: #6366f1; font-weight: 600;":""),S(le,`${e(O)?"⭐ ":""}${e(k),r(()=>e(k).materia)??""}`),ar!==(ar=(e(k),r(()=>e(k).materia)))&&(ie.value=(ie.__value=(e(k),r(()=>e(k).materia)))??"")}),y(H,ie)}),T((H,k)=>{se(v,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${H??""}`),g(v,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${k??""}; color: ${e(t),r(()=>e(t).text)??""};`),S(C,e(x)?"Cargando...":"Seleccione asignatura")},[()=>(e(f),e(b),r(()=>e(f)&&e(b).includes("materia")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(f),e(b),e(t),r(()=>e(f)&&e(b).includes("materia")?"#ef4444":e(t).border))]),Ce(v,()=>e(n).materia,H=>(re(n,e(n).materia=H),$e(()=>{e(f),e(b),e(t),e(w),e($),e(x),e(J),e(A),e(M),e(q)}))),y(i,v)};Q(wr,i=>{e(D)?i($r):i(vr,!1)})}var Dr=s(E,2),gr=o(Dr),oe=s(gr,2),L=o(oe),ke=o(L);L.value=L.__value="";var qe=s(L);ee(qe,1,()=>e(q),te,(i,v)=>{var u=Kt(),C=o(u),P={};T(H=>{S(C,H),P!==(P=e(v))&&(u.value=(u.__value=e(v))??"")},[()=>(e(v),r(()=>e(v).replace(/0(\d)$/,"°$1").replace(/(\d{1,2})0(\d)/,"$1°$2")))]),y(i,u)});var Je=s(W,2),Ge=o(Je),we=s(Ge,2),Ue=o(we);Ue.value=Ue.__value="";var tr=s(Ue);tr.value=tr.__value="0";var pr=s(tr);ee(pr,0,()=>[1,2,3,4],te,(i,v)=>{var u=Qt(),C=o(u),P={};T(H=>{S(C,`${v??""} ${v===1?"Hora":"Horas"}`),P!==(P=H)&&(u.value=(u.__value=H)??"")},[()=>r(()=>v.toString())]),y(i,u)});var ur=s(Je,2),Cr=o(ur);$t(Cr,{get selectedDiarioAnots(){return e(G)},set selectedDiarioAnots(i){c(G,i)},$$legacy:!0});var fr=s(ur,2),br=o(fr),Jr=o(br);{var Ur=i=>{var v=Yt();y(i,v)},Kr=i=>{var v=Zt();y(i,v)};Q(Jr,i=>{e(I)?i(Ur):i(Kr,!1)})}var Qr=s(ae,2);{var Yr=i=>{Et(i,{onClose:Me,get initialDocente(){return e(n),r(()=>e(n).docente)}})};Q(Qr,i=>{e(R)&&i(Yr)})}T((i,v,u,C,P,H,k,O)=>{g(ae,`background-color: ${e(t),r(()=>e(t).bg)??""};`),g(me,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),Pr(Fe,"src",ht),g(ze,`color: ${e(t),r(()=>e(t).text)??""};`),g(ge,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),g(pe,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),g(_e,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),g(He,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${e(t),r(()=>e(t).border)??""}; color: ${e(t),r(()=>e(t).text)??""};`),S(ye,B()),g(We,`background-color: ${e(t),r(()=>e(t).cardBg)??""}; border-color: ${e(t),r(()=>e(t).cardBorder)??""};`),g(dr,`color: ${e(t),r(()=>e(t).label)??""};`),se(rr,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none ${i??""}`),g(rr,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${v??""}; color: ${e(t),r(()=>e(t).text)??""}; color-scheme: ${B()==="light"?"light":"dark"};`),g(a,`color: ${e(t),r(()=>e(t).label)??""};`),se(d,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${u??""}`),g(d,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${C??""}; color: ${e(t),r(()=>e(t).text)??""};`),S(h,e(w)?"Cargando...":"Seleccione docente"),se(E,1,`space-y-2 ${e(D)?"lg:col-span-2":""}`),g(cr,`color: ${e(t),r(()=>e(t).label)??""};`),g(gr,`color: ${e(t),r(()=>e(t).label)??""};`),se(oe,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer disabled:opacity-50 ${P??""}`),g(oe,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${H??""}; color: ${e(t),r(()=>e(t).text)??""};`),S(ke,e(M)?"Cargando...":"Seleccione grado"),g(Ge,`color: ${e(t),r(()=>e(t).label)??""};`),se(we,1,`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-indigo-500 transition-all outline-none appearance-none cursor-pointer ${k??""}`),g(we,`background-color: ${e(t),r(()=>e(t).inputBg)??""}; border-color: ${O??""}; color: ${e(t),r(()=>e(t).text)??""};`),br.disabled=e(I)},[()=>(e(f),e(b),r(()=>e(f)&&e(b).includes("fecha")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(f),e(b),e(t),r(()=>e(f)&&e(b).includes("fecha")?"#ef4444":e(t).border)),()=>(e(f),e(b),r(()=>e(f)&&e(b).includes("docente")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(f),e(b),e(t),r(()=>e(f)&&e(b).includes("docente")?"#ef4444":e(t).border)),()=>(e(f),e(b),r(()=>e(f)&&e(b).includes("grado")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(f),e(b),e(t),r(()=>e(f)&&e(b).includes("grado")?"#ef4444":e(t).border)),()=>(e(f),e(b),r(()=>e(f)&&e(b).includes("horas")?"ring-2 ring-red-500 border-red-500":"")),()=>(e(f),e(b),e(t),r(()=>e(f)&&e(b).includes("horas")?"#ef4444":e(t).border))]),V("click",ge,be),V("click",pe,Ne),V("click",_e,function(...i){U()?.apply(this,i)}),V("click",He,he),Or(rr,()=>e(n).fecha,i=>(re(n,e(n).fecha=i),$e(()=>{e(f),e(b),e(t),e(w),e($),e(x),e(J),e(A),e(M),e(q)}))),Ce(d,()=>e(n).docente,i=>(re(n,e(n).docente=i),$e(()=>{e(f),e(b),e(t),e(w),e($),e(x),e(J),e(A),e(M),e(q)}))),Ce(oe,()=>e(n).grado,i=>(re(n,e(n).grado=i),$e(()=>{e(f),e(b),e(t),e(w),e($),e(x),e(J),e(A),e(M),e(q)}))),Ce(we,()=>e(n).horas,i=>(re(n,e(n).horas=i),$e(()=>{e(f),e(b),e(t),e(w),e($),e(x),e(J),e(A),e(M),e(q)}))),V("submit",lr,j),y(Qe,Ze),Ir(),l()}export{ia as default};
